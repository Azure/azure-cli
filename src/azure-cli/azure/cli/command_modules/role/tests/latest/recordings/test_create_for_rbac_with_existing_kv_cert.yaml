interactions:
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"Request is missing a Bearer
        or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:27:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"b05630f2a99b499ab6529fc14a1ccf36"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:27:51 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=b05630f2a99b499ab6529fc14a1ccf36
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"b05630f2a99b499ab6529fc14a1ccf36"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:27:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"b05630f2a99b499ab6529fc14a1ccf36"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"b05630f2a99b499ab6529fc14a1ccf36"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:15 GMT
      duration:
      - '5927160'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 2wbq9IClevxi81f9IewYxN+6CYXT6gleGIO4oCXp4i8=
      ocp-aad-session-key:
      - XWwQvq3-LHI9WP3kD5MLGC91wFXqgY7EwwPQAW_Ahai3xOTKVxbt5nHhiWJJuQx-BcCr92B6LAJ3wPcYUP4a9BXdZIxFzMVwtdCe45E5RUhZSLDaZ0BtL67aDdFUwUIg8PakiIR8ffnI-Y8a99tGHMdB8je_xPJ9znT5LO_qNI0.UHKFajYo4QhtLDtQYm4SOsFrxzd3-Q30bCOdCc5b-IQ
      pragma:
      - no-cache
      request-id:
      - d9f7f3ac-f480-4b52-9dbd-10ad34b5b835
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","x5t":"F8QawpmFF40s0VxYLi0B3uuVUiA","cer":"MIIDQjCCAiqgAwIBAgIQLMn1ezLDSZ6RoI+JrzJ88TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTgwNloXDTIyMDkwNzA5MjgwNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAPf8IBGOAbz8n14jM8MXmZW+WNJI6ayKYkcSTOk3pjh5+8vh7xod8IHXf+ZnaUuPiR2x5EOlXu8VCN6uX85cYRL/TrkB67NWDkslGrwFlC1apURyRn3tIcpN7S1Jb1BNiRRsRJzZ67Ze9Evq8oy4xeE880odAotE4bYipdm0xPUEwk9EYf17ddPISI79l4G5snQvDWCOwE5EvCPTmoQlLCehet+OdcS/MK6NpTHB6zUB4iPDcJtyPHoayjhVfNyFUiHGNMhpqlb8yf5Ibj+SDzgB4IXv5SqXaqG8FLdXlphPIpzl4sj4YHQYGTU9IhM2Eh9yleoZ533EgwXJQafgHuw==","attributes":{"enabled":true,"nbf":1599470286,"exp":1662542886,"created":1599470886,"updated":1599470886,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599470871,"updated":1599470871}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2399'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:18 GMT
      duration:
      - '2278808'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Cw7PncdasTLmBmr1LGvjLNznBnZ59gaE9lED84dnGek=
      ocp-aad-session-key:
      - TA-pNjFTwaP7DyGvuZPrukPhBTr5LUUwiKcrFwYV5grSUuZ4hSeVkgSnbNi4zwF86VsrahAKgvSuolLqu-Hjcfbh3QEDSc0S28_vOelqeE_KBOAbJ_ZYjgIw77DkWfUUlVewW-m6YJDzm4uRjUxhcSuCKj4tvxsEqXx6NrzUK0M.1VL_sUvtS-MxOOOdvTrWSVAdusQiN2G8VMCq2gK2PMQ
      pragma:
      - no-cache
      request-id:
      - 02e1ccd9-534c-4e84-8a82-42cfb9850f9e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
      "keyCredentials": [{"startDate": "2020-09-07T09:28:16.754681Z", "endDate": "2021-09-07T09:28:16.754681Z",
      "value": "MIIDQjCCAiqgAwIBAgIQLMn1ezLDSZ6RoI+JrzJ88TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTgwNloXDTIyMDkwNzA5MjgwNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAPf8IBGOAbz8n14jM8MXmZW+WNJI6ayKYkcSTOk3pjh5+8vh7xod8IHXf+ZnaUuPiR2x5EOlXu8VCN6uX85cYRL/TrkB67NWDkslGrwFlC1apURyRn3tIcpN7S1Jb1BNiRRsRJzZ67Ze9Evq8oy4xeE880odAotE4bYipdm0xPUEwk9EYf17ddPISI79l4G5snQvDWCOwE5EvCPTmoQlLCehet+OdcS/MK6NpTHB6zUB4iPDcJtyPHoayjhVfNyFUiHGNMhpqlb8yf5Ibj+SDzgB4IXv5SqXaqG8FLdXlphPIpzl4sj4YHQYGTU9IhM2Eh9yleoZ533EgwXJQafgHuw==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert000001",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "f19cba2d-033d-417f-b3ac-e423a866d718",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert000001", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "17C41AC29985178D2CD15C582E2D01DEEB955220", "endDate": "2021-09-07T09:28:16.754681Z",
        "keyId": "88888888-0000-0000-0000-000000000001", "startDate": "2020-09-07T09:28:16.754681Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert000001 on
        behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "id": "b89b730f-c190-46a6-bfbf-c381ae3d4c64", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:19 GMT
      duration:
      - '4946560'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - jkM1lzjvNxXCHuvy0rCnAJ/uYNEE7+B/zPhCEcVEXNc=
      ocp-aad-session-key:
      - nEkZmwPNUvzLodtTTag-MEcP6yY9s0NrkVhIm5DEJ1AkX60kiyrVn2_xfDUbaUKbsKRA9OYN--PUx7VRkcKhmnVymWDOI0WyA5J9t3mqR-ZJC1tXBjLKqBdFK08hpVfs5jONYKC7JPMscG-WWrHkffxaWBaGOaKWsJ0kSTXjNqQ.VdxMYnaTcMjfOhOmPnfyFY65kMnpu0_FmZHc15kMW6E
      pragma:
      - no-cache
      request-id:
      - e1c760d0-89fa-478e-9f3a-dbc937f72171
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "f19cba2d-033d-417f-b3ac-e423a866d718"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"627f9912-733f-41be-8aba-0fd031a08b01","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"f19cba2d-033d-417f-b3ac-e423a866d718","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"b89b730f-c190-46a6-bfbf-c381ae3d4c64","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["f19cba2d-033d-417f-b3ac-e423a866d718","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:19 GMT
      duration:
      - '3275563'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/627f9912-733f-41be-8aba-0fd031a08b01/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - Y82BpKRlUgewplPNRiSw11Z6vGZl7aBO/qroOg5zal8=
      ocp-aad-session-key:
      - QR5x080uGS-FEl7uMxnwmkC_lvI3DRK8oUqZOerl751qbY8XAbBsSJdd2RID8ARiHjowbM7X8yyxbPgpAf7detVfFcaX-qYaD-J7fhBRYdISxInXDNH52dB-3zX9zE08Z0cThDBApSQ9zWaKr-QDenFNDpwkOjLiYSc_VqyOtwo.4XLWD5TEQMnt8-4RFAGygzcu70EHhCEebRIIKn2UIXU
      pragma:
      - no-cache
      request-id:
      - 243bf3a0-487d-4a1a-91f5-86d0009a8891
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "627f9912-733f-41be-8aba-0fd031a08b01"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"627f9912-733f-41be-8aba-0fd031a08b01","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","condition":null,"conditionVersion":null,"createdOn":"2020-09-07T09:28:20.2293318Z","updatedOn":"2020-09-07T09:28:20.2293318Z","createdBy":null,"updatedBy":"0d504196-1423-4569-9a6e-15149656f0ee","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000002"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1005'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"627f9912-733f-41be-8aba-0fd031a08b01","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"f19cba2d-033d-417f-b3ac-e423a866d718","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"b89b730f-c190-46a6-bfbf-c381ae3d4c64","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","f19cba2d-033d-417f-b3ac-e423a866d718"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2157'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:23 GMT
      duration:
      - '2311485'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - r4tEev3be7u87PpO7+VPxPcExk2Mrz1MtcoSUZnMit4=
      ocp-aad-session-key:
      - Wmq4ERPyuAbyzAI9ZNNfZ2ViWyo2vPElBOkMGh1UXeiprfZvblxZYqSJWCkQp-0F_94m3xgPvBMQn4lLkxiIb3R02KAivYjXUXdqa25bmM4ZNDd1sr1ikwHz-hW5o9wz1-uDYH7QCLbIJ2wYFOmW6MomqBIQFpJEb9QQc2QtZEc.HDqQpObedYSb9UsouNMM4TWSTXm_-jKkl05ZH9_Sbl8
      pragma:
      - no-cache
      request-id:
      - 7d761e6c-ffce-4331-9b4a-9e97b728d25f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27f19cba2d-033d-417f-b3ac-e423a866d718%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:24 GMT
      duration:
      - '3476810'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - e5MAjDK2Hmt19/OeTnUBvxrfgqBq9IulPEDrRV1myd8=
      ocp-aad-session-key:
      - NmZQPGg1wEu_g7kLmA24PnKqjpa-V679Ws6835GiYv3e48xetpTvtBGkP5HWORdWg9Q9n0E5zu1ZT3UkhC1a4dYQM-Jc950wUs-_qijp-rvTovE--zYUBNO3Mfail4vhfg_AGFkM56b5Vlsbl0Ey1ozyigNHxu0_UJllMT_7OAc.KqEC8CqogMYILC4jcXdPEStJLrqINZiSpJJI4xTAT7U
      pragma:
      - no-cache
      request-id:
      - 1ce70dcb-1860-4886-a499-12e731b0fd6b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27f19cba2d-033d-417f-b3ac-e423a866d718%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f19cba2d-033d-417f-b3ac-e423a866d718","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"17C41AC29985178D2CD15C582E2D01DEEB955220","endDate":"2021-09-07T09:28:16.754681Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T09:28:16.754681Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"b89b730f-c190-46a6-bfbf-c381ae3d4c64","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:24 GMT
      duration:
      - '2343620'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - EVLtQcrJ9JxBZUfYXhNr3D4P5qtOPgIk7JssC1AjEQ8=
      ocp-aad-session-key:
      - bTBbio7x7C6r0GVghDKQN9fap94DxaUsXdDD2hdCgAteDLIo1IDSsBz1kEJgHihQPLACdcZEruYrJBzmUB_x-gedW8rVwB6dWsvKWRnfj79b7MqpfnT76vgQYJ1PxpT9KFdVU91GVbBXEgtzCPiPAd8B7NOXgsVPAdCCt2Yj0JQ.GKdjPVVgPXUf0vQ3XW04iEK5HgU2Uz09-4mBY8ro4t4
      pragma:
      - no-cache
      request-id:
      - 4fd02c50-5d32-4301-981f-156801f0f1cd
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f19cba2d-033d-417f-b3ac-e423a866d718","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"17C41AC29985178D2CD15C582E2D01DEEB955220","endDate":"2021-09-07T09:28:16.754681Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T09:28:16.754681Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"b89b730f-c190-46a6-bfbf-c381ae3d4c64","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:25 GMT
      duration:
      - '2379135'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qD03Phkyp3PESyOCOq/UWezyOoJRSPWoF1sQ7pSJmlE=
      ocp-aad-session-key:
      - WpDCZneRkkuL2K3Z-tIhwsh9dfuXNAbsv9tN0dPYRhkyHn-3Lc6hUlo3C6uoBQ7hwD_C_5o6xTIh5d2zW9rffyeUalM8mnu7nJVfZ2uQyTrtitlt2nBAgf_DW6HjECFeBTogfzHZUeZ34nb-xiOralAN3eaVhAzZN4IYn2VDVx4.IH4dERAAQLuh8SSIOdg4tC14R-ykjWIOurMQ_AHP5yY
      pragma:
      - no-cache
      request-id:
      - 49326755-c2e0-4829-9b6a-9f1611be09ae
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/6dc7a401f31f4a8eb77746eb5ca3934a","x5t":"F8QawpmFF40s0VxYLi0B3uuVUiA","cer":"MIIDQjCCAiqgAwIBAgIQLMn1ezLDSZ6RoI+JrzJ88TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTgwNloXDTIyMDkwNzA5MjgwNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAPf8IBGOAbz8n14jM8MXmZW+WNJI6ayKYkcSTOk3pjh5+8vh7xod8IHXf+ZnaUuPiR2x5EOlXu8VCN6uX85cYRL/TrkB67NWDkslGrwFlC1apURyRn3tIcpN7S1Jb1BNiRRsRJzZ67Ze9Evq8oy4xeE880odAotE4bYipdm0xPUEwk9EYf17ddPISI79l4G5snQvDWCOwE5EvCPTmoQlLCehet+OdcS/MK6NpTHB6zUB4iPDcJtyPHoayjhVfNyFUiHGNMhpqlb8yf5Ibj+SDzgB4IXv5SqXaqG8FLdXlphPIpzl4sj4YHQYGTU9IhM2Eh9yleoZ533EgwXJQafgHuw==","attributes":{"enabled":true,"nbf":1599470286,"exp":1662542886,"created":1599470886,"updated":1599470886,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599470871,"updated":1599470871}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2399'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-07T09:28:23.375298Z", "endDate":
      "2021-09-07T09:28:23.375298Z", "value": "MIIDQjCCAiqgAwIBAgIQLMn1ezLDSZ6RoI+JrzJ88TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTgwNloXDTIyMDkwNzA5MjgwNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAPf8IBGOAbz8n14jM8MXmZW+WNJI6ayKYkcSTOk3pjh5+8vh7xod8IHXf+ZnaUuPiR2x5EOlXu8VCN6uX85cYRL/TrkB67NWDkslGrwFlC1apURyRn3tIcpN7S1Jb1BNiRRsRJzZ67Ze9Evq8oy4xeE880odAotE4bYipdm0xPUEwk9EYf17ddPISI79l4G5snQvDWCOwE5EvCPTmoQlLCehet+OdcS/MK6NpTHB6zUB4iPDcJtyPHoayjhVfNyFUiHGNMhpqlb8yf5Ibj+SDzgB4IXv5SqXaqG8FLdXlphPIpzl4sj4YHQYGTU9IhM2Eh9yleoZ533EgwXJQafgHuw==",
      "keyId": "04ac01d8-94de-49bf-abf3-e349579fbeb2", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1339'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:28:27 GMT
      duration:
      - '5246367'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - wL7zcXvhIXIAGeynkORCtbz/3bweluE/NT+Ij6AZJG0=
      ocp-aad-session-key:
      - hd2Gyx2A6Mf2vrYTfB4xYTzbGRtLsJsPs6EPcFjxMv9PjkW5d6THCOkRmFwNIJQmg7ApRijw-tAgOlPJVmmMFKWtB0cnLSIRM93kFs7xycklZe3GbWImIu-YKd6df4KUODTYoWwQqz6yXozn3chTHyQGctzXACbUDChHtHUJkhU.hf8F5Ry2S4iywrqyVF-QyFp2Ihphl-pWYofhziY8swo
      pragma:
      - no-cache
      request-id:
      - 2b65a27a-bd50-48a7-8ddf-42264a6d4b88
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f19cba2d-033d-417f-b3ac-e423a866d718","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"17C41AC29985178D2CD15C582E2D01DEEB955220","endDate":"2021-09-07T09:28:23.375298Z","keyId":"04ac01d8-94de-49bf-abf3-e349579fbeb2","startDate":"2020-09-07T09:28:23.375298Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"b89b730f-c190-46a6-bfbf-c381ae3d4c64","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:28 GMT
      duration:
      - '2444753'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - /JBGpzTChbcDSwlRpz1rJ60jXqzIcsL8TiQ4nnAtBvA=
      ocp-aad-session-key:
      - ypBZB6pCLAXNa5ATX_vT2tF3Loy7LpZXR82jMAOYh_5oG8z9vYJMhNNH5W3ZfUkVuAjuYBH07SgzQJBCdzZ0-DWHa18kjURxhmlUKzALuBoDK6GxFqm2F5EeS6M61YB2Q4XBZz0D7FVWXrgw5dH2FZJH28UtmOd09h_70TITdEY.KrOBfQ-qxNteFS7pJBw04UPwwHawRibcwb_sV-7e-oM
      pragma:
      - no-cache
      request-id:
      - f1ef9c5e-fa0c-4869-b8f8-7de2cebd095f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/a3d1229c-bf1c-4ab5-a45c-7aa78aa70fa8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:28:33 GMT
      duration:
      - '56330103'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qftXp5zc6ydbQAq8Ev582RPlrRAnvm1DC9BwcgegNJ8=
      ocp-aad-session-key:
      - 9w11SaAbzgKny10IZcLrXZAOrY2JPNU-Y1cNsI5ts2XL4DksCzs7lvaTv44PwYRWpJ1nb0DWxyeStr98J4o1ocTfrg4tIvlSaolGnSghoUhpGLm-hYXkE2uZ3IssvMa8Wqtwmrfzle-kO0aJdbL6DUDxjWaZTyyhcJEj_RaMFvQ.1s8U0i5McWLGv1B1qtgTFI3YTYyTLA3PQpwV5kpehHA
      pragma:
      - no-cache
      request-id:
      - 4a242cfc-9176-455e-aa1a-35db2cdf2a61
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"8dac98c658f84d77b250a69f78284154"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:36 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=8dac98c658f84d77b250a69f78284154
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"8dac98c658f84d77b250a69f78284154"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAxeXkVKa9zQtpIprexn39D0dwRoJ9+guGnlNk0V94zI2mPz06+F6GqskeX3PVCkxXhDQ2wh8Lh9/jAktGoaePQ3hHuikwIGJezZG6sX06AqvWv08G2INb/gcoRoYqEcf6FFbzjh4O1E/QQgtzGv/DPUycfZ9IgxftYXhAnRm9mHPlQvIPVcnFE0okm5ePls0xHXL54zbw3K6mEihktGpfGl4Ui9VGE7dOzOMRgPYt4SAVpxX8xLWhx/5W1r3kPDreYmuOD1/YeRzRocyx/5HAVHNsP8iwyDhEeS6mzhBxka16LSiCUcJ8WIWXVMknKy7zyCzEGj+nOExK0v70TFV6Y","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"8dac98c658f84d77b250a69f78284154"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:48 GMT
      duration:
      - '2210148'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - jkM1lzjvNxXCHuvy0rCnAJ/uYNEE7+B/zPhCEcVEXNc=
      ocp-aad-session-key:
      - 6QIAhz5ZnQVrg80Ex9kYlO_zOmdYcXtIS5M5CmmOiEjShUVdu4miKViTUOfy5c7QF99NKmIzFUKt-eAg7-HcJdV8sTKSMHf_60ATBrsVEfy36OnTA9GluOxTkK137sXzFmpZ5_Uuu41im8WCQ9nyUaXU1UzJM4qkmHdy6bH2qZE.YhJdD4Il746OI4pXYgI6xjwlwv2kqwzCMAq1Te7MLII
      pragma:
      - no-cache
      request-id:
      - ea27653c-1129-467a-a39a-9446e078f247
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/76c34da3f0dd45b6a1b3b9102a702fab","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/76c34da3f0dd45b6a1b3b9102a702fab","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/76c34da3f0dd45b6a1b3b9102a702fab","x5t":"DgItkfKJYxwTWW4hMJ-8JBRvZ4M","cer":"MIIDQjCCAiqgAwIBAgIQJTRayFC3TZWMkCD0OfSrODANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTg0MloXDTIxMDMwNzA5Mjg0MlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAK6U/Zf2aAmeg2cUWPwgOseELFHF3UGcSG+Nv5TADPviNCMi/WMO+JDbT3xSwba3ldoscNZycYwBPN2u9yYNZBPxpWrnpm4x7LaMJloZLgtemuoZ1Hwab1Lb+QetR2fj/Eo+UiXB9/WbB45nDVk5ydGAJlaCaF0PV+dySJZItSI25u1291oCK4Exj0/O5hEG2W0DZ4wZKEkyfIE+chNye8TdkI9a7lPQe49UcbHS1Du3Ie2Leh+3cQ/2gZErebvRr7h+1OALB5eomSq0IupDBC4C+5HY3EVARcEbKYNcGobEuklwtpftwQtCK7+bCkYunXGSSTaA6mVK1hmMqUaQ0PA==","attributes":{"enabled":true,"nbf":1599470322,"exp":1615109322,"created":1599470922,"updated":1599470922,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599470871,"updated":1599470915}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2398'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:50 GMT
      duration:
      - '2282400'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - n9EoHNORiYgBMsgALSud/hDyl4oSD9YeWVgLLFS/oSM=
      ocp-aad-session-key:
      - VtrdLgEB01tDUngK7YoEgaoXRw_5XX92l3YhxQzNhocAB_ShgaXbcz3gpHlRD2jXMzAekkhcacl_6g2u7_iG-cIBi1LzjA6ozuYT5krWEV_QtOZDyqakRbtRhiGH0MMT7kfuS3gwH9oRzCv4GBJ4JYYM6ORbZpzjjsDOavClfYw.zanaN7WiUqZxm1eFGb79oJY6qM9fEIVHieGT_4ysBfQ
      pragma:
      - no-cache
      request-id:
      - 382ae097-d420-40eb-a656-546b86f15c28
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
      "keyCredentials": [{"startDate": "2020-09-07T09:28:49.014538Z", "endDate": "2021-03-07T09:28:41.000Z",
      "value": "MIIDQjCCAiqgAwIBAgIQJTRayFC3TZWMkCD0OfSrODANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTg0MloXDTIxMDMwNzA5Mjg0MlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAK6U/Zf2aAmeg2cUWPwgOseELFHF3UGcSG+Nv5TADPviNCMi/WMO+JDbT3xSwba3ldoscNZycYwBPN2u9yYNZBPxpWrnpm4x7LaMJloZLgtemuoZ1Hwab1Lb+QetR2fj/Eo+UiXB9/WbB45nDVk5ydGAJlaCaF0PV+dySJZItSI25u1291oCK4Exj0/O5hEG2W0DZ4wZKEkyfIE+chNye8TdkI9a7lPQe49UcbHS1Du3Ie2Leh+3cQ/2gZErebvRr7h+1OALB5eomSq0IupDBC4C+5HY3EVARcEbKYNcGobEuklwtpftwQtCK7+bCkYunXGSSTaA6mVK1hmMqUaQ0PA==",
      "keyId": "88888888-0000-0000-0000-000000000003", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert0000012",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "bef050b6-8e06-4277-973d-a18c7006cfbb", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "3222590a-9b15-4ed9-9e11-e1b1a0ed4c43",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert0000012", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "0E022D91F289631C13596E21309FBC24146F6783", "endDate": "2021-03-07T09:28:41Z",
        "keyId": "88888888-0000-0000-0000-000000000003", "startDate": "2020-09-07T09:28:49.014538Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "id": "6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:50 GMT
      duration:
      - '5781819'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - FrzVMPcgCpKvxuICLpVS8ESsSkQ+p6wZQW24K8dp0YE=
      ocp-aad-session-key:
      - 5W1unHolUzsq3ahgFPBH0ndL6x3bITsNODBn5-PDnhMnm3I4Q0MiKTM15f6rgmarXO5-Jm9EIvBQiW0as_YYliR9HnHNqibgcYnZYL4upQNYXq7qrBBP6jhmANSA7zCqAFtg-pf-6u6y_b89WI3bhi3D6-dPyttcdjHacVHrEVM.dwiAc0bEAX2WPjWdRZ78_qaajGsgb1La9uKTklKe6Kk
      pragma:
      - no-cache
      request-id:
      - 4b9535d1-e917-4676-8431-a11c8c4bbe4a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "3222590a-9b15-4ed9-9e11-e1b1a0ed4c43"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"edf9d742-af93-48c5-8160-dade3f264db2","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2162'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:51 GMT
      duration:
      - '3327733'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/edf9d742-af93-48c5-8160-dade3f264db2/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - e5MAjDK2Hmt19/OeTnUBvxrfgqBq9IulPEDrRV1myd8=
      ocp-aad-session-key:
      - W5UxjyJSGn_sSsI3Yb0G9lOM9tCdp2770aIC7WSAAP9vvXYM0N3rYo_Idml2T-Rr0OiSCFVafzJqMTU7Db7fYVN1gLCFuBX1bPTtZiF0GGQfp24hfACVij4Nw7dLh_tHv4Qb8yeddNUzlo34b4ZlvoOjEOs_rZnQjbK472AWngg.OTlWgHsoR3pWuHQGSYcZ6tW80EX8fQkyGB3A6hCvadY
      pragma:
      - no-cache
      request-id:
      - 1f465ce4-ca93-4c97-89d2-aa9c398776cf
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "edf9d742-af93-48c5-8160-dade3f264db2"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"edf9d742-af93-48c5-8160-dade3f264db2","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","condition":null,"conditionVersion":null,"createdOn":"2020-09-07T09:28:53.0161044Z","updatedOn":"2020-09-07T09:28:53.0161044Z","createdBy":null,"updatedBy":"0d504196-1423-4569-9a6e-15149656f0ee","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000004"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1005'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"edf9d742-af93-48c5-8160-dade3f264db2","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","3222590a-9b15-4ed9-9e11-e1b1a0ed4c43"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2165'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:56 GMT
      duration:
      - '2386158'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - iDfCjbPHceml4blFYegpOKKZrfieP3629W6dPiqX2YM=
      ocp-aad-session-key:
      - 8zi9M3uY91raT0voWh0rsKzaib3wxDARr90lhycVq6tpwXFiQabm1slQ8GwvC1J5TYslhQrOjW0xy1a1vNxbhGP_URXXe_bojnfdtvoL0v87yBe8JyUK8lxx8KNtpJCpE6qYG_qhdGa5zrpa_T5VQrCV2jWRfvQqw_GTn85jO7Y.JCOSvyRDfaTYC3szJ5AEqGhK0SSBNOH9UMq_LDkxt4s
      pragma:
      - no-cache
      request-id:
      - b1cc3117-4657-486d-b3a3-c2d8a8a0f03a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%273222590a-9b15-4ed9-9e11-e1b1a0ed4c43%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:56 GMT
      duration:
      - '2170174'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y82BpKRlUgewplPNRiSw11Z6vGZl7aBO/qroOg5zal8=
      ocp-aad-session-key:
      - JBEsksPcIqlyrwEYfSZdEPqvzXQwL2lIm2Apl1ChZRmDVYv6mwjuIS22iX9ATqytAJh9HpS4-cEmMDlk6-INqMKgHNz-6niMfAdpEhAyi0yFTCEGY1KJHFrbY0salwZd7mPonaPIiAQbUGBm31ZjZBqX7BsFYKdSiXRLVTVhh8M.wDFlPTMDdIJPIWEfxzd6tYBa4CSpsZx30QMRmzUZ6QA
      pragma:
      - no-cache
      request-id:
      - 7eb0a4bd-6073-475d-8292-f777537a761b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%273222590a-9b15-4ed9-9e11-e1b1a0ed4c43%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bef050b6-8e06-4277-973d-a18c7006cfbb","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"0E022D91F289631C13596E21309FBC24146F6783","endDate":"2021-03-07T09:28:41Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2020-09-07T09:28:49.014538Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:56 GMT
      duration:
      - '2369923'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - c961QXj+XitIe9ndNvmA8K1Z1/zgJelmYQNKQ1J3RwA=
      ocp-aad-session-key:
      - RIWtsfxeOdKAV4GVeyRiOMjXeJrQ8dhFOPKCRZd9HmZ1PsPAZm1QBcGZ_qLDRf-r6Aprq5wrloUJMKHXh-D5ew6XVh38bpi5E6EtmvE_B4tKqAQ4lazhd-RHwtCgk95WmSIAJYdwqh7EHrKLUvX0-oZDWbrPcwmUWqQAVg8zO4w.zkqiYKfJaDS8WJBzATqb7fm3z8KYcdO8OPZv8dMJzEs
      pragma:
      - no-cache
      request-id:
      - cab35175-c03d-4638-a3dc-d47a43847187
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bef050b6-8e06-4277-973d-a18c7006cfbb?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bef050b6-8e06-4277-973d-a18c7006cfbb","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"0E022D91F289631C13596E21309FBC24146F6783","endDate":"2021-03-07T09:28:41Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2020-09-07T09:28:49.014538Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:28:57 GMT
      duration:
      - '2231236'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 2wbq9IClevxi81f9IewYxN+6CYXT6gleGIO4oCXp4i8=
      ocp-aad-session-key:
      - k2M4qvJ-POTeAKVPeBRqmZfGWGdH_PG-e_foev5RxDbA6b0hqL9DO2XrCS1xCesK2-JBCDr_2rewGSXnmwOxufbO6zK4e8P6I73ALHyyvl_QsSJMwQ-hJXDMIQhCTAZ97e9Ovu1kaDLYGpYTOfOs9hYgxQGWYM_R2xvdKWUTkWE.aT1Lv9Z5cQPrnCipODQaNdqu3yKGrtwP37sEsaI9gZY
      pragma:
      - no-cache
      request-id:
      - 55166ff2-6c70-429e-9dff-d08009d07194
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/76c34da3f0dd45b6a1b3b9102a702fab","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/76c34da3f0dd45b6a1b3b9102a702fab","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/76c34da3f0dd45b6a1b3b9102a702fab","x5t":"DgItkfKJYxwTWW4hMJ-8JBRvZ4M","cer":"MIIDQjCCAiqgAwIBAgIQJTRayFC3TZWMkCD0OfSrODANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTg0MloXDTIxMDMwNzA5Mjg0MlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAK6U/Zf2aAmeg2cUWPwgOseELFHF3UGcSG+Nv5TADPviNCMi/WMO+JDbT3xSwba3ldoscNZycYwBPN2u9yYNZBPxpWrnpm4x7LaMJloZLgtemuoZ1Hwab1Lb+QetR2fj/Eo+UiXB9/WbB45nDVk5ydGAJlaCaF0PV+dySJZItSI25u1291oCK4Exj0/O5hEG2W0DZ4wZKEkyfIE+chNye8TdkI9a7lPQe49UcbHS1Du3Ie2Leh+3cQ/2gZErebvRr7h+1OALB5eomSq0IupDBC4C+5HY3EVARcEbKYNcGobEuklwtpftwQtCK7+bCkYunXGSSTaA6mVK1hmMqUaQ0PA==","attributes":{"enabled":true,"nbf":1599470322,"exp":1615109322,"created":1599470922,"updated":1599470922,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599470871,"updated":1599470915}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2398'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:28:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-07T09:28:56.073298Z", "endDate":
      "2021-03-07T09:28:41.000Z", "value": "MIIDQjCCAiqgAwIBAgIQJTRayFC3TZWMkCD0OfSrODANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA5MTg0MloXDTIxMDMwNzA5Mjg0MlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKcg6+Q6Q0XpEfcfrqjY6B2Aos0CIryGBRfQHmgwPJzZKPOGVOZ8sTBUiz4RKUpaA+3mjJ1UeTYPftUpr1KCTc8FgxH/bDAhvKqVSMkqurKfIiLlfHhCg187enzklR4KoEwxJ5e5ePMOmW2vo8kk8PauWubpwgMLjDqndV3fA/sqj+EKuykBKN9T0lUdRL4rh2xXsHvPIn2cTWF28iprPZ0jzCB8LlsJWQvz2rBUR5cvm07q9ifPmUvOL9SCmFbfqVa7c4IH/Q/t3iXyZskfdfAmw2yvsVTUTVbLQnsU5tyO9BP/24WKuzggnxKiWjjVxiaeQ9iuQbQ9oFGcSdvwTBsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFFLbfhONNmBO9KBLjB4Dg/h5s0dUMB0GA1UdDgQWBBRS234TjTZgTvSgS4weA4P4ebNHVDANBgkqhkiG9w0BAQsFAAOCAQEAK6U/Zf2aAmeg2cUWPwgOseELFHF3UGcSG+Nv5TADPviNCMi/WMO+JDbT3xSwba3ldoscNZycYwBPN2u9yYNZBPxpWrnpm4x7LaMJloZLgtemuoZ1Hwab1Lb+QetR2fj/Eo+UiXB9/WbB45nDVk5ydGAJlaCaF0PV+dySJZItSI25u1291oCK4Exj0/O5hEG2W0DZ4wZKEkyfIE+chNye8TdkI9a7lPQe49UcbHS1Du3Ie2Leh+3cQ/2gZErebvRr7h+1OALB5eomSq0IupDBC4C+5HY3EVARcEbKYNcGobEuklwtpftwQtCK7+bCkYunXGSSTaA6mVK1hmMqUaQ0PA==",
      "keyId": "159117d2-2d44-481e-a27e-64a5c0a58a47", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1336'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bef050b6-8e06-4277-973d-a18c7006cfbb?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:28:59 GMT
      duration:
      - '3954325'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - r4tEev3be7u87PpO7+VPxPcExk2Mrz1MtcoSUZnMit4=
      ocp-aad-session-key:
      - MNZctNctWuVKZkvPYYoYlJlL_k30jxslF3ez91STCNcCRNChkW0mLAgTs0VTYl09LWKjy00IBrFBI-0-e4apJpu2dbsKnhzVVdz3jehZJMNrPUclaOxRR1xEW2sVttP0mn03Kqd9lxQsH5fBb-t3jxI-GmlL6qLCr54B5y5wkLQ.WcfyXuZM65x4z8Kqr6Pkqqjhu6YvO1R_muxwvZNh_eE
      pragma:
      - no-cache
      request-id:
      - cc209809-d5e9-4e99-897e-6f63852999d0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bef050b6-8e06-4277-973d-a18c7006cfbb","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"3222590a-9b15-4ed9-9e11-e1b1a0ed4c43","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"0E022D91F289631C13596E21309FBC24146F6783","endDate":"2021-03-07T09:28:41Z","keyId":"159117d2-2d44-481e-a27e-64a5c0a58a47","startDate":"2020-09-07T09:28:56.073298Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bef050b6-8e06-4277-973d-a18c7006cfbb/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"6aac8a5d-5e6a-4fef-ba4e-a891ebcdaf61","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:29:00 GMT
      duration:
      - '2349938'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - xvWJHMWAHzosjXNMZ9eWLFLy/hDOFxHPaxgG2NiJKnA=
      ocp-aad-session-key:
      - 2qCGdvREBDk5MNy6E-9aFZIsWMX7GkuZf6TRrwaoE59kVbixQpF9o4ItKrY3sIctZeHZlG-LpEAYWfkc63BzFKySaT5SarDclKv2x3qcZIhLA-f0JJinPEGU4uUQz6YPFZ_EeFWVzHIP0I4Kl96_MveGiz4rTMahA9yo0u2SsgM.ecV27D4GQ6bHBfdC-uB3GDToWTXjxi0nAIM2ttFk9oM
      pragma:
      - no-cache
      request-id:
      - f318b69d-eff0-43f7-a81e-bfbd60841b71
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bef050b6-8e06-4277-973d-a18c7006cfbb?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:29:00 GMT
      duration:
      - '4117399'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - jkM1lzjvNxXCHuvy0rCnAJ/uYNEE7+B/zPhCEcVEXNc=
      ocp-aad-session-key:
      - h-Tzws4veZo9hgZTXpTOPiZJuZLBtxG9y5jaFXf1XomzXSVIfry1doqL2at53tRC1t_lCw4UthOMvgxsv1UniHUpCqRZ3rquGQNerl4XJApNHR1QZ2iUJgrIf9SQlJRcdacsu5s1xUWq1fCDKwLN08AiqkDY3g2WkaJXZrTQ0zs.IEBqCq2mZyBrwOag24Ydz9oTy-iMf0IwayS3CVgjV_g
      pragma:
      - no-cache
      request-id:
      - 29ad87eb-453a-4cf8-999c-0a4db8afeb95
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
