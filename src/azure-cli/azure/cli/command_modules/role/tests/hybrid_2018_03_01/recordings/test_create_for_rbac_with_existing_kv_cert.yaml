interactions:
- request:
    body: '{"location": "westus", "tags": {"product": "azurecli", "date": "2018-09-20T00:13:48Z",
      "cause": "automation"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group create]
      Connection: [keep-alive]
      Content-Length: ['110']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 resourcemanagementclient/2.0.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","name":"cli_test_sp_with_kv_existing_cert000001","location":"westus","tags":{"product":"azurecli","date":"2018-09-20T00:13:48Z","cause":"automation"},"properties":{"provisioningState":"Succeeded"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['384']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:13:50 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/me?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.User","objectType":"User","objectId":"89ed5be8-ff97-41b5-ab11-055e1e3cc34b","deletionTimestamp":null,"accountEnabled":true,"ageGroup":null,"assignedLicenses":[],"assignedPlans":[],"city":null,"companyName":null,"consentProvidedForMinor":null,"country":null,"createdDateTime":"2016-01-06T17:27:56Z","creationType":null,"department":"AppPlat
        Products & Services -US","dirSyncEnabled":null,"displayName":"Yugang Wang","employeeId":null,"facsimileTelephoneNumber":null,"givenName":"Yugang","immutableId":null,"isCompromised":null,"jobTitle":"SENIOR
        SOFTWARE ENGINEER","lastDirSyncTime":null,"legalAgeGroupClassification":null,"mail":null,"mailNickname":"yugangw_microsoft.com#EXT#","mobile":null,"onPremisesDistinguishedName":null,"onPremisesSecurityIdentifier":null,"otherMails":["yugangw@microsoft.com"],"passwordPolicies":"None","passwordProfile":{"password":null,"forceChangePasswordNextLogin":true,"enforceChangePasswordPolicy":false},"physicalDeliveryOfficeName":"44/3N","postalCode":null,"preferredLanguage":null,"provisionedPlans":[],"provisioningErrors":[],"proxyAddresses":[],"refreshTokensValidFromDateTime":"2016-01-06T17:27:55Z","showInAddressList":null,"signInNames":[],"sipProxyAddress":null,"state":null,"streetAddress":null,"surname":"Wang","telephoneNumber":"+1
        (425) 7069936","thumbnailPhoto@odata.mediaEditLink":"directoryObjects/89ed5be8-ff97-41b5-ab11-055e1e3cc34b/Microsoft.DirectoryServices.User/thumbnailPhoto","usageLocation":"US","userIdentities":[],"userPrincipalName":"yugangw_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","userState":null,"userStateChangedOn":null,"userType":"Member"}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1775']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:13:51 GMT']
      duration: ['1101683']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [H0ECu2C3fj445zUSyWW2cfK9qFomYi0t8wudfuiYe+I=]
      ocp-aad-session-key: [nPlb06lvHvaPfU9G0DXliz7cAfpbmPP9G5EOrqwXhDQDNdg6YCEzWYeCt_XtLtngvvLuW_wABIiVsPEaHmXe0xf3tnNPeyFMesmQJOZB-oklnhTMcSBpAdSJm20Xon95.-w_FZ1u-t42KHmhygFr6nwWrwEYf-pGc81JPMTam8I0]
      pragma: [no-cache]
      request-id: [c27ad6cf-3a3f-491b-a706-ffef59fbfcc8]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "accessPolicies":
      [{"objectId": "89ed5be8-ff97-41b5-ab11-055e1e3cc34b", "tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "permissions": {"storage": ["get", "list", "delete", "set", "update", "regeneratekey",
      "setsas", "listsas", "getsas", "deletesas"], "keys": ["get", "create", "delete",
      "list", "update", "import", "backup", "restore", "recover"], "secrets": ["get",
      "list", "set", "delete", "backup", "restore", "recover"], "certificates": ["get",
      "list", "delete", "create", "import", "update", "managecontacts", "getissuers",
      "listissuers", "setissuers", "deleteissuers", "manageissuers", "recover"]}}],
      "sku": {"family": "A", "name": "standard"}}, "location": "westus"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [keyvault create]
      Connection: [keep-alive]
      Content-Length: ['746']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-mgmt-keyvault/1.1.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002?api-version=2016-10-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002","name":"clitest000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"89ed5be8-ff97-41b5-ab11-055e1e3cc34b","permissions":{"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"],"keys":["get","create","delete","list","update","import","backup","restore","recover"],"secrets":["get","list","set","delete","backup","restore","recover"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"]}}],"enabledForDeployment":false,"vaultUri":"https://clitest000002.vault.azure.net","provisioningState":"RegisteringDns"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1106']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:13:53 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-service-version: [1.0.0.229]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: ''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: [0]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: ''}
    headers:
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Thu, 20 Sep 2018 00:13:59 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      www-authenticate: ['Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
          resource="https://vault.azure.net"']
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 401, message: Unauthorized}
- request:
    body: '{"policy": {"lifetime_actions": [{"action": {"action_type": "AutoRenew"},
      "trigger": {"days_before_expiry": 90}}], "secret_props": {"contentType": "application/x-pkcs12"},
      "key_props": {"reuse_key": true, "key_size": 2048, "exportable": true, "kty":
      "RSA"}, "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "issuer": {"name": "Self"}}, "attributes": {"enabled":
      true}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['511']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"c7d4eb34383643b88aa9fe0acc4cc9c3"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:00 GMT']
      expires: ['-1']
      location: ['https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=c7d4eb34383643b88aa9fe0acc4cc9c3']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"c7d4eb34383643b88aa9fe0acc4cc9c3"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:00 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"c7d4eb34383643b88aa9fe0acc4cc9c3"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:11 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"c7d4eb34383643b88aa9fe0acc4cc9c3"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1217']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:21 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['121']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:22 GMT']
      duration: ['299065']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [P/tDxbol/t/SHzUNioyqKdq2GrU43GGviWp8LrIIFjs=]
      ocp-aad-session-key: [cuUfoqezHWG0ORTgdzgCTvJygjSV6cQRbQPy7a6RR-p9-74pLSCO4CH-nWb39m0klAvt52j_CBmo4qOOSxOJNyrkhds9GjiLKH_BJ3w6gvSDUScSJtl2uLj1Bldun0Oh-vwBSutX5TDb_LVCJ_wRHg.LR-JL9VErU2mTe-rJsD4vGLsf-ry0nyMP0w0v9wk4w0]
      pragma: [no-cache]
      request-id: [3674d1e9-b6cc-4281-be84-4a1595674eb6]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/d43933bea4fb4e81be616bcf1a9341bf","kid":"https://clitest000002.vault.azure.net/keys/cert1/d43933bea4fb4e81be616bcf1a9341bf","sid":"https://clitest000002.vault.azure.net/secrets/cert1/d43933bea4fb4e81be616bcf1a9341bf","x5t":"lrNbzKoMptnoKj5czvYNtPe2UdA","cer":"MIIDQjCCAiqgAwIBAgIQMO7R9OxjTSqGvJe0mkLs0TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQxM1oXDTIwMDkyMDAwMTQxM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEAYItB3uK4x9It52kHhl3KugblH2dZI7lCdM02//CBVxuywkyYDN6uML6/hPzbsuC9C6ZmNBp6QBKlfjvJ3YMec2yLKVvPTr0tRHsVG0q6zo64ipmRxVNAwMFsszbROJ1FZ/6Rv5DgpMIZM8aU4FLJGRJLgUnA9+K+EHveSnzNHZS0jVUpYztUyy8ZIcmw96fU4n44FbU6N3KUIvDra/nhLF2tcjN/q2hQ8DgAyN0zDhW4+opyxJA5cmH/dnJVleePkZOs2eqqq/1+5sjggQUDXNsNb9YutLQdb4sLOWhW7yoDZCnd1lfQDKbuLLx0HSQBMMOYblRMvWB1V9Po5ahVtA==","attributes":{"enabled":true,"nbf":1537401853,"exp":1600560853,"created":1537402453,"updated":1537402453,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1537402440,"updated":1537402440}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2387']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:22 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: 'b''b\''{"displayName": "azure-cli-2018-09-20-00-14-22", "homepage": "http://azure-cli-2018-09-20-00-14-22",
      "keyCredentials": [{"value": "MIIDQjCCAiqgAwIBAgIQMO7R9OxjTSqGvJe0mkLs0TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQxM1oXDTIwMDkyMDAwMTQxM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEAYItB3uK4x9It52kHhl3KugblH2dZI7lCdM02//CBVxuywkyYDN6uML6/hPzbsuC9C6ZmNBp6QBKlfjvJ3YMec2yLKVvPTr0tRHsVG0q6zo64ipmRxVNAwMFsszbROJ1FZ/6Rv5DgpMIZM8aU4FLJGRJLgUnA9+K+EHveSnzNHZS0jVUpYztUyy8ZIcmw96fU4n44FbU6N3KUIvDra/nhLF2tcjN/q2hQ8DgAyN0zDhW4+opyxJA5cmH/dnJVleePkZOs2eqqq/1+5sjggQUDXNsNb9YutLQdb4sLOWhW7yoDZCnd1lfQDKbuLLx0HSQBMMOYblRMvWB1V9Po5ahVtA==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "endDate":
      "2019-09-20T00:14:22.494004Z", "type": "AsymmetricX509Cert", "startDate": "2018-09-20T00:14:22.494004Z"}],
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"], "availableToOtherTenants":
      false}\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['1579']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"34e91436-d516-4453-a7f1-fd3f83879cbc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"96B35BCCAA0CA6D9E82A3E5CCEF60DB4F7B651D0","endDate":"2019-09-20T00:14:22.494004Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-09-20T00:14:22.494004Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2215']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:22 GMT']
      duration: ['2154335']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application']
      ocp-aad-diagnostics-server-name: [EditZjTBaEYCrvrHgtCp7VwlKGMxwmW6BfXNDuF3W+4=]
      ocp-aad-session-key: [ZyYbkgYGHeSXIovKPcWWgFEZ8y2LqKj3Q1Udbvn3zNQGpyUwmETZqoF7Yfg3VYMpyqAU3-jMzb6nWaza750blqAFqPkfZALmvcoPZCxnxqmBU961AjDi6i4RIRR7tqLBTRr1H_pk3Xi_oiQmZI3b_g.Fgiei9akcvgRW7E3EGDjpihpuDPmT8dYV1EGkNDsGA8]
      pragma: [no-cache]
      request-id: [721f3d74-2e7d-4d7f-84bc-b4964e8691d4]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: '{"appId": "838a9f96-e101-48bf-96a7-1670f44e291b", "accountEnabled": true}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['73']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"51671d34-b121-4224-ba92-772819b8ac24","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-09-20-00-14-22","appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["838a9f96-e101-48bf-96a7-1670f44e291b","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1616']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:22 GMT']
      duration: ['1242926']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/51671d34-b121-4224-ba92-772819b8ac24/Microsoft.DirectoryServices.ServicePrincipal']
      ocp-aad-diagnostics-server-name: [MjPAJVvgC3key9HyT1tst0r01pKZJnpyPQ4YiB+LaOA=]
      ocp-aad-session-key: [W63Srbf2q_6QJbQZI2TLWvTBQsxiqkL93iNSmsroeT6oGhqCBUm2ngW12mQSR4dp2-VXyP55l4bV_Aa3AeOID7a0VGpgvMwuPflNvN784KbtA_JIg-BltWBWNfft0PrOu7wl-Ruea9_vtAO1Fj_txg.40Z4MY0KcpbSRd-HuGPQkmjcSJjeckhk7fQAsOrMyO0]
      pragma: [no-cache]
      request-id: [13a0f973-4248-4e47-90ad-408ef66db4de]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:23 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "51671d34-b121-4224-ba92-772819b8ac24",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body: {string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"51671d34-b121-4224-ba92-772819b8ac24","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2018-09-20T00:14:24.5384487Z","updatedOn":"2018-09-20T00:14:24.5384487Z","createdBy":null,"updatedBy":"89ed5be8-ff97-41b5-ab11-055e1e3cc34b"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000002"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['868']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:26 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-ms-request-charge: ['3']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"51671d34-b121-4224-ba92-772819b8ac24","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-09-20-00-14-22","appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","838a9f96-e101-48bf-96a7-1670f44e291b"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1574']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:27 GMT']
      duration: ['380175']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [qxb+5oPfk5khbaIhIq0eSgs4N8Ph11A7dFHFBiJUmhs=]
      ocp-aad-session-key: [m-4oykCz2vq2eK_0xWvcuGr6CdBUSGUuJyOkDiQzMwosjRlzx3IjLYU4sPk2nCVCfpnc7ATa8jxU2ZJGM4NCieYvU1lZEVBr_YPbnkMbHrRXhPe3fj86AneHMrcCe8JJu-KGELtfikURAi9mpFpG1g.dvhlu2cP_evST_6cG65-Lx3MTBsJy3atQG_euB9aNS4]
      pragma: [no-cache]
      request-id: [09074349-fd9e-4117-94e3-e849abc3caac]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27838a9f96-e101-48bf-96a7-1670f44e291b%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['121']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:27 GMT']
      duration: ['310894']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [Pv4UBIo2f7FKm/qOeGQAbn1U4hE/glaJfHaiirx+LwU=]
      ocp-aad-session-key: [0puSkyYJrHUDBckRsFE1MlxiPS9R393iERJjNhkLQnObILQso4hb9QLU1uBlBqpQpNnTgv_hmo5OwOdvQb13naiEIEdjjE0GOjQCfBC0xfWJUchDMPi11l4ycaV9_H-mOqFLiqAmxXLpZJMeil2hqg.LhkmMWqA2sgAoF52dPGHix9ukHjTrpahRp7YBZEJJlI]
      pragma: [no-cache]
      request-id: [3f83e871-e938-4a3e-9061-387c8b606dad]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=appId%20eq%20%27838a9f96-e101-48bf-96a7-1670f44e291b%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"34e91436-d516-4453-a7f1-fd3f83879cbc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"96B35BCCAA0CA6D9E82A3E5CCEF60DB4F7B651D0","endDate":"2019-09-20T00:14:22.494004Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-09-20T00:14:22.494004Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2356']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:27 GMT']
      duration: ['334206']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [cTwo30nQLdbKrpTXiHay43uRQqpX8SWr3xHBnYc4xok=]
      ocp-aad-session-key: [jGnZB2eR6zmddYmejul7XiuTd-QDhFZ1KTHMCSxdRONG-X_G_IWoLFVDTC4BlaHSZrwT4cvvitgCFHSbMdBae0mp5SDuLO48pfAixNpGwaDKQjoAOPKTRNcgIU0yXTpO_dPPUctoMHQdPO0iGSXhVg.ecfC9bm3T7OelNOXEHm5DnuXbh9a3PDpZz6p-Th0pgE]
      pragma: [no-cache]
      request-id: [deb9a196-30f5-4035-9e9c-a9013d93b6f0]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/34e91436-d516-4453-a7f1-fd3f83879cbc?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"34e91436-d516-4453-a7f1-fd3f83879cbc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"96B35BCCAA0CA6D9E82A3E5CCEF60DB4F7B651D0","endDate":"2019-09-20T00:14:22.494004Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-09-20T00:14:22.494004Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2353']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:27 GMT']
      duration: ['384907']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [oNrsfdz3Fhte7wfqy+uUhdb2Yij4mN6MnViek/b/vco=]
      ocp-aad-session-key: [kZwgglYcsBnPjjwEr59tCE4PkDnHxd9i49dkqjSF_CmAhViQCd8gud0bgdvJBYfOn_H2etik5_bqCnBQWNmtmV5pMSM-gRBIxcJAFmr1BzTULTvS7ufjPTJG5yV1dKt9cG0U9YcsriYSMguRSmEbEw.n9KSxA2kvh_wEmCsv1OsQ5wjRphKMFSxPRXiQf3pS7A]
      pragma: [no-cache]
      request-id: [f54ff2bb-e10d-4161-81bd-310d443daf8d]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/d43933bea4fb4e81be616bcf1a9341bf","kid":"https://clitest000002.vault.azure.net/keys/cert1/d43933bea4fb4e81be616bcf1a9341bf","sid":"https://clitest000002.vault.azure.net/secrets/cert1/d43933bea4fb4e81be616bcf1a9341bf","x5t":"lrNbzKoMptnoKj5czvYNtPe2UdA","cer":"MIIDQjCCAiqgAwIBAgIQMO7R9OxjTSqGvJe0mkLs0TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQxM1oXDTIwMDkyMDAwMTQxM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEAYItB3uK4x9It52kHhl3KugblH2dZI7lCdM02//CBVxuywkyYDN6uML6/hPzbsuC9C6ZmNBp6QBKlfjvJ3YMec2yLKVvPTr0tRHsVG0q6zo64ipmRxVNAwMFsszbROJ1FZ/6Rv5DgpMIZM8aU4FLJGRJLgUnA9+K+EHveSnzNHZS0jVUpYztUyy8ZIcmw96fU4n44FbU6N3KUIvDra/nhLF2tcjN/q2hQ8DgAyN0zDhW4+opyxJA5cmH/dnJVleePkZOs2eqqq/1+5sjggQUDXNsNb9YutLQdb4sLOWhW7yoDZCnd1lfQDKbuLLx0HSQBMMOYblRMvWB1V9Po5ahVtA==","attributes":{"enabled":true,"nbf":1537401853,"exp":1600560853,"created":1537402453,"updated":1537402453,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1537402440,"updated":1537402440}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2387']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:27 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"keyCredentials": [{"value": "MIIDQjCCAiqgAwIBAgIQMO7R9OxjTSqGvJe0mkLs0TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQxM1oXDTIwMDkyMDAwMTQxM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEAYItB3uK4x9It52kHhl3KugblH2dZI7lCdM02//CBVxuywkyYDN6uML6/hPzbsuC9C6ZmNBp6QBKlfjvJ3YMec2yLKVvPTr0tRHsVG0q6zo64ipmRxVNAwMFsszbROJ1FZ/6Rv5DgpMIZM8aU4FLJGRJLgUnA9+K+EHveSnzNHZS0jVUpYztUyy8ZIcmw96fU4n44FbU6N3KUIvDra/nhLF2tcjN/q2hQ8DgAyN0zDhW4+opyxJA5cmH/dnJVleePkZOs2eqqq/1+5sjggQUDXNsNb9YutLQdb4sLOWhW7yoDZCnd1lfQDKbuLLx0HSQBMMOYblRMvWB1V9Po5ahVtA==",
      "keyId": "8202bff4-ccc9-4529-9962-fe8d162698ae", "usage": "Verify", "endDate":
      "2019-09-20T00:14:28.167852Z", "type": "AsymmetricX509Cert", "startDate": "2018-09-20T00:14:28.167852Z"}]}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Length: ['1339']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/34e91436-d516-4453-a7f1-fd3f83879cbc?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Thu, 20 Sep 2018 00:14:28 GMT']
      duration: ['1680459']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [h7UB8YGKOzmHmjp1ZIS89QpqUVjy/3RInQUF7SgT0jk=]
      ocp-aad-session-key: [vJyBgryMbYQNZd_EqbsA5HpFO9tiC_FbxDkr5K-dtbeUoW1n8IXTfuYDQ9-3sxzxWu0Kq7YbtPsJhR6GfqAljkXOpH7lyndLrMBMgWkNmfg0aGfVM21x2zKiIt51AZOn3wtFEPFUar77_qgArFQGcA.IoWNydQpJOzhUbsTvFpkC5O0f8BJTp_Xd6YEm-LW_Rc]
      pragma: [no-cache]
      request-id: [04bd3e80-8a89-44f9-92e2-4a58d8563e27]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"34e91436-d516-4453-a7f1-fd3f83879cbc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"838a9f96-e101-48bf-96a7-1670f44e291b","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-22","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-22","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"96B35BCCAA0CA6D9E82A3E5CCEF60DB4F7B651D0","endDate":"2019-09-20T00:14:28.167852Z","keyId":"8202bff4-ccc9-4529-9962-fe8d162698ae","startDate":"2018-09-20T00:14:28.167852Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/34e91436-d516-4453-a7f1-fd3f83879cbc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-22","id":"35d95c8b-9a5a-450c-8f3b-c3b4e0ddcbe4","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-22 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-22","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2356']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:29 GMT']
      duration: ['340745']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [+i/Z4hAbtnUv8GUTjtLUQH8z9Wzcl8K6N3Y4i1a4li4=]
      ocp-aad-session-key: [CgE8sj_Of520REbwhe-BVEwkjnTnPse59Aiy6pkLx-oxqPRmevWYY6AIHfzbbG01eOcBBbxTGA1fje_kZRS4_-qJDBhosMVSefniOVGARRqg4VUeDNGiLyn2_68XyR6rKIpKoLHuqijDUXfCeOg_ig.AoK3XC_HQraO44H4SnKjcA3drM4oOXHOiVkK7OF7430]
      pragma: [no-cache]
      request-id: [d658fcd7-4bfb-4710-a8ac-49b1da06a5e4]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/34e91436-d516-4453-a7f1-fd3f83879cbc?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Thu, 20 Sep 2018 00:14:32 GMT']
      duration: ['31487447']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [nJFXIGamvjq0WNq3R+NL4/o8lLasHivlbg5vcxwnAHk=]
      ocp-aad-session-key: [NtlnXAs1MzldCEukQUXdBOMBq6MEIukdXcMvSU-GQp5Zv3ATNjzlXAERIgBVn9n61NiDanEkHknGUAHwTLdKQF0Dlf8cK0o58Qz4MaRTyZkRq51IYEg3n6bGw0n-8Pk1gUEtyEy9MGeJOINYE7ssbg.IztQqSLi9kp9mjyXTIFDeXglJZRLAly-NquVjqLiUAU]
      pragma: [no-cache]
      request-id: [20eb7366-9839-481a-b088-7b73c171662d]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: '{"policy": {"lifetime_actions": [{"action": {"action_type": "AutoRenew"},
      "trigger": {"days_before_expiry": 90}}], "secret_props": {"contentType": "application/x-pkcs12"},
      "key_props": {"reuse_key": true, "key_size": 2048, "exportable": true, "kty":
      "RSA"}, "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "issuer": {"name": "Self"}}, "attributes": {"enabled":
      true}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['510']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"209f2f28a36942908d0af4fb1ba11483"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:32 GMT']
      expires: ['-1']
      location: ['https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=209f2f28a36942908d0af4fb1ba11483']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"209f2f28a36942908d0af4fb1ba11483"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:33 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"209f2f28a36942908d0af4fb1ba11483"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:43 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQCN35Q/LocZz7oneaVHXkJLi52QPrWg/nmdw5EaqAmyxzXR/+W2uNZWyw8qFtbRY8s4GArXOT7cjxkZBZggWDMQmB53cG/EG1hKmYCGJ/FneFLhH0VHuSLHwNmNpGTBPa3ICUMmQm9XU9/ICmDFacrZXyCHSwm6xrjPBGQqgcYHo75P6duPv4nFb/BlNty3YuZtR6ijn0V2VU3xm9F2zYx8SecOuFYufdQLMpUcBjdUdIjnTnVVNucZgQci32lIh+E2vfx0vgJPzQeh9KoQA9xJUHwdj6C94VhZHZPk9ZejS+//nq3NXVkxvnCewGGdrN/NxbMLkNmFSrPNMCJwm8lH","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"209f2f28a36942908d0af4fb1ba11483"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1217']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:54 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['121']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:54 GMT']
      duration: ['300520']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [nz/XGp5Lt3UpE9jJSAaQvlkMcNgkH4RQOBn3fI2s7Mc=]
      ocp-aad-session-key: [oTJzQT006UM5uhTF-l2nh1-8rRPin9ONOCsc1vJ3aGVwX5RBdHQQAdoM6E49fS5G3P8kOr4gRI3YKOgG5GXX6i8DYh2soVFD9yuvF9C4UeE3OHB8OBYhoSi6Sws_MdoPY9Qp_bo0_fS33EYaLmfEYQ.YT8kNP4-FveL38Iv04b1l9ZzewgMR1r5gt94Ir7FEYM]
      pragma: [no-cache]
      request-id: [af754251-8038-42e3-a0fb-2dcb0627b8ee]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/3b10429714c84dc0bc73db43680648bd","kid":"https://clitest000002.vault.azure.net/keys/cert1/3b10429714c84dc0bc73db43680648bd","sid":"https://clitest000002.vault.azure.net/secrets/cert1/3b10429714c84dc0bc73db43680648bd","x5t":"3bpnxVk_H5Tkxi_eoOAwOqUg-io","cer":"MIIDQjCCAiqgAwIBAgIQdQNCWcc9R2K3ww4g6f0NADANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQ0NFoXDTE5MDMyMDAwMTQ0NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEANbhSEtiYH7Q3QZEn6N8WMHeMwioTqqhldz3Ejzid5MPlwvOVmsqtniTNXn/Twnz/h4Bn1XMkZ45HKzZX6lKpFGd9lr+4Y4gIdYRjuDjzWuaqkrPfcy2oGDr6akRyiNtHSVG31RyCyNk4ZgT4p6C7WWM0+Ta2+nIsa5Xej5wDdBzyd/yoxvP6sjjUZXfNcHgCryZf76LyDtr/gEHjUgPovTHIO2gM80GnRl3HNUYUp6JcJv1gbwZTTdviavZKtBlLzBRMZzQoY1xncYzKjn7GZCNAlVNzUoOwDWmMPLipn5Y4phGss1ow8ViWYMYTbkiMfaYr2BVW1SX2VkCct/F6jA==","attributes":{"enabled":true,"nbf":1537401884,"exp":1553040884,"created":1537402484,"updated":1537402484,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1537402440,"updated":1537402472}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2386']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:54 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: 'b''b\''{"displayName": "azure-cli-2018-09-20-00-14-55", "homepage": "http://azure-cli-2018-09-20-00-14-55",
      "keyCredentials": [{"value": "MIIDQjCCAiqgAwIBAgIQdQNCWcc9R2K3ww4g6f0NADANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQ0NFoXDTE5MDMyMDAwMTQ0NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEANbhSEtiYH7Q3QZEn6N8WMHeMwioTqqhldz3Ejzid5MPlwvOVmsqtniTNXn/Twnz/h4Bn1XMkZ45HKzZX6lKpFGd9lr+4Y4gIdYRjuDjzWuaqkrPfcy2oGDr6akRyiNtHSVG31RyCyNk4ZgT4p6C7WWM0+Ta2+nIsa5Xej5wDdBzyd/yoxvP6sjjUZXfNcHgCryZf76LyDtr/gEHjUgPovTHIO2gM80GnRl3HNUYUp6JcJv1gbwZTTdviavZKtBlLzBRMZzQoY1xncYzKjn7GZCNAlVNzUoOwDWmMPLipn5Y4phGss1ow8ViWYMYTbkiMfaYr2BVW1SX2VkCct/F6jA==",
      "keyId": "88888888-0000-0000-0000-000000000003", "usage": "Verify", "endDate":
      "2019-03-20T00:14:43.000Z", "type": "AsymmetricX509Cert", "startDate": "2018-09-20T00:14:55.259216Z"}],
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"], "availableToOtherTenants":
      false}\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['1577']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bd341aaa-a917-40ce-83af-bf495b0d4a86","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"DDBA67C5593F1F94E4C62FDEA0E0303AA520FA2A","endDate":"2019-03-20T00:14:43Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2018-09-20T00:14:55.259216Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2209']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:55 GMT']
      duration: ['2273048']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application']
      ocp-aad-diagnostics-server-name: [HEPAm0tyongGpYycSw509UTFJ4dZAtir7lD0xyk+LYQ=]
      ocp-aad-session-key: [KGQpoE346fGTgOZ_dFyoapyXJXm12qjg69roBuFO3EKrW_BBJM7rzB2EI0OyshrOTxAujfoFByNl63J1panKonvOkKThCc0Iuz8A3vTC6ahcxAxbOvigrVhenRou9Se5PjCdwF_maTbOoF6NSxY2mg._KwchG79DyutzJecuNsqU7wtd1GSSHErcdFeVzTrBjw]
      pragma: [no-cache]
      request-id: [f721974f-be75-4d30-8304-bda63605a798]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: '{"appId": "daa640c3-b93d-45da-8872-735b5de3eecd", "accountEnabled": true}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['73']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6e312cf2-526d-40a8-8a4a-06cf7d1597c5","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-09-20-00-14-55","appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["daa640c3-b93d-45da-8872-735b5de3eecd","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1617']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:55 GMT']
      duration: ['1206534']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/6e312cf2-526d-40a8-8a4a-06cf7d1597c5/Microsoft.DirectoryServices.ServicePrincipal']
      ocp-aad-diagnostics-server-name: [uCCQbpgVHNC8rue1lL9wVVx/oAWeG8jNKc51+E8x6H4=]
      ocp-aad-session-key: [AtjjSFZzgkru_tJm09CmSpsoK6Ef2F98Qse1bls_nUxWKPQKZN-f-5Lal6wV07P35qQaAnZ4ZvMfibXLIhYtPSPlORM1MHxfEdRe1H1TKTEoT039WKG4moTb5-pRx7EWE5KhktjlHBHKBafPRoOVBQ.ChT2gtbLaUhHS6Q3ooVsHQK3cwgwBdzZ5xBJ55PXLTw]
      pragma: [no-cache]
      request-id: [064309d4-5e81-4336-8264-32115c6c5de0]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:55 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "6e312cf2-526d-40a8-8a4a-06cf7d1597c5",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004?api-version=2015-07-01
  response:
    body: {string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"6e312cf2-526d-40a8-8a4a-06cf7d1597c5","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2018-09-20T00:14:56.7305158Z","updatedOn":"2018-09-20T00:14:56.7305158Z","createdBy":null,"updatedBy":"89ed5be8-ff97-41b5-ab11-055e1e3cc34b"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000004"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['868']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:58 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1198']
      x-ms-request-charge: ['3']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6e312cf2-526d-40a8-8a4a-06cf7d1597c5","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-09-20-00-14-55","appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","daa640c3-b93d-45da-8872-735b5de3eecd"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1575']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:58 GMT']
      duration: ['390161']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [FYbVpC3JeFowFri8itMBzmKvIAPYr8LlBbuqXkPHMlA=]
      ocp-aad-session-key: [kbasX28P3FFpnINgxTDy--yFVDAyGATAU754KnoB3pZNqdf9Lpj4zEQ6NkSoMGorAa5VfTtTqgsLSLNrrUH3zMOYQ42dFpRZNgciaZFjQ2rbcSj0s1QxlTta2y-Wc2El4inBu7IRlGBaESor2FVKow.1NKhMJ8G1ZL-CuxgvgPkGE7XO9IGHr1v87_FNITO8Wo]
      pragma: [no-cache]
      request-id: [deff39e4-3250-4fd5-8d51-2a532f4aabd9]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27daa640c3-b93d-45da-8872-735b5de3eecd%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['121']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      duration: ['288136']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [nJFXIGamvjq0WNq3R+NL4/o8lLasHivlbg5vcxwnAHk=]
      ocp-aad-session-key: [AfzJOiddXoV-TcedBaTy11UTQJkFpYKSxyxe7nPLfOgnex-8A7ljqFZaJH8JHUREjEhT5dirrqalUQRlH9hNnJJKYszGVz8J5-ZGFWuDjm0v6A2Fp4P1_KUUgZ0A_X-O3qLWz5WamFp7bWXv5PRhYw._pCbl_utMpXQIL8rLeBUNkyPOnSfPyntyLMTsu8xXXQ]
      pragma: [no-cache]
      request-id: [309fa519-ee68-433e-bfa6-c5f424936ded]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=appId%20eq%20%27daa640c3-b93d-45da-8872-735b5de3eecd%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bd341aaa-a917-40ce-83af-bf495b0d4a86","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"DDBA67C5593F1F94E4C62FDEA0E0303AA520FA2A","endDate":"2019-03-20T00:14:43Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2018-09-20T00:14:55.259216Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2350']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      duration: ['336603']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [EditZjTBaEYCrvrHgtCp7VwlKGMxwmW6BfXNDuF3W+4=]
      ocp-aad-session-key: [IE-QoLrEhlx9PMTA1iNJ_fv34GbEy636gvg3NNofpdrlUpf9wmq-DpuljL_25s2N-ka21csaRH5FljiFvFTUW0x89pSE7mTeO-Sr0pbmE5grmCfd5e6AUuLLqO_-JCM8GiUchPvIYG3lBhByEHLJwg.3zW_HDHDNkgeJk10Oq7SpvbzHoJBrgHod7lQ9wEglvY]
      pragma: [no-cache]
      request-id: [107d84fd-3cd3-49c5-b229-79a51c2c75fb]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bd341aaa-a917-40ce-83af-bf495b0d4a86?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bd341aaa-a917-40ce-83af-bf495b0d4a86","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"DDBA67C5593F1F94E4C62FDEA0E0303AA520FA2A","endDate":"2019-03-20T00:14:43Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2018-09-20T00:14:55.259216Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2347']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      duration: ['341685']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [c+jbw+ZBrEliCN+SCvWixDretq0U48+gk/t2P/iP65E=]
      ocp-aad-session-key: [txbwERbuyamlwllZnNM_eXonfSl1dD7XymfLmpMwB5WW2WQ5HZkW9RS0MnLOoMaNuIvgCnlEIw2wAlGyaV4Oh3NBDlTnjAANmIcUdkvsw_hqGh4AWOIBzBBU-nPHnAjpTkMfzEGKwGnqcLvuE7l1NQ.C4ZhLYy1Oicn-RLHF4kJW6NjNGxK7qsKuUahEclURls]
      pragma: [no-cache]
      request-id: [f8efb518-7c32-4032-bb83-a53e00765036]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/3b10429714c84dc0bc73db43680648bd","kid":"https://clitest000002.vault.azure.net/keys/cert1/3b10429714c84dc0bc73db43680648bd","sid":"https://clitest000002.vault.azure.net/secrets/cert1/3b10429714c84dc0bc73db43680648bd","x5t":"3bpnxVk_H5Tkxi_eoOAwOqUg-io","cer":"MIIDQjCCAiqgAwIBAgIQdQNCWcc9R2K3ww4g6f0NADANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQ0NFoXDTE5MDMyMDAwMTQ0NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEANbhSEtiYH7Q3QZEn6N8WMHeMwioTqqhldz3Ejzid5MPlwvOVmsqtniTNXn/Twnz/h4Bn1XMkZ45HKzZX6lKpFGd9lr+4Y4gIdYRjuDjzWuaqkrPfcy2oGDr6akRyiNtHSVG31RyCyNk4ZgT4p6C7WWM0+Ta2+nIsa5Xej5wDdBzyd/yoxvP6sjjUZXfNcHgCryZf76LyDtr/gEHjUgPovTHIO2gM80GnRl3HNUYUp6JcJv1gbwZTTdviavZKtBlLzBRMZzQoY1xncYzKjn7GZCNAlVNzUoOwDWmMPLipn5Y4phGss1ow8ViWYMYTbkiMfaYr2BVW1SX2VkCct/F6jA==","attributes":{"enabled":true,"nbf":1537401884,"exp":1553040884,"created":1537402484,"updated":1537402484,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1537402440,"updated":1537402472}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2386']
      content-type: [application/json; charset=utf-8]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=131.107.174.141;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"keyCredentials": [{"value": "MIIDQjCCAiqgAwIBAgIQdQNCWcc9R2K3ww4g6f0NADANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDkyMDAwMDQ0NFoXDTE5MDMyMDAwMTQ0NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALmX4gLbnbZjrtmbfDO+93lg1Ee9EXyMXjbd+Ii6OtvSfI0H2s64MIfhYRdWZUGXNrKPUxjwMTpthiBGWFvDOfU2dc8R+ZP8PQQz4vv7I8j5ZhoC8cKfN0hPWC47Q2yCJ1smb0zFcsJhvTm8jMRZzY/GWuPOW8dNSiXnM0p5VxpVMv1fKO/1oi0aiRQGhIJYsKEAufgx4N5pXyq0V8bA4Dz9fLQOi4Fjg79W+9mMytiKw+wdCKOZ7szzp54zB6g6plMHPQX2luIJqIkzoC5B0/xghzfC5p7KDEa/QvbUBG2LTv3o5Z7sSLuZs/C64OvTCv33maGrynQ6GzrxRbzyNXMCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFI60EUr6rWPC3CMbwizfEB/rfVzwMB0GA1UdDgQWBBSOtBFK+q1jwtwjG8Is3xAf631c8DANBgkqhkiG9w0BAQsFAAOCAQEANbhSEtiYH7Q3QZEn6N8WMHeMwioTqqhldz3Ejzid5MPlwvOVmsqtniTNXn/Twnz/h4Bn1XMkZ45HKzZX6lKpFGd9lr+4Y4gIdYRjuDjzWuaqkrPfcy2oGDr6akRyiNtHSVG31RyCyNk4ZgT4p6C7WWM0+Ta2+nIsa5Xej5wDdBzyd/yoxvP6sjjUZXfNcHgCryZf76LyDtr/gEHjUgPovTHIO2gM80GnRl3HNUYUp6JcJv1gbwZTTdviavZKtBlLzBRMZzQoY1xncYzKjn7GZCNAlVNzUoOwDWmMPLipn5Y4phGss1ow8ViWYMYTbkiMfaYr2BVW1SX2VkCct/F6jA==",
      "keyId": "82b6b2fe-b5e4-424c-b4be-ecc199d06df7", "usage": "Verify", "endDate":
      "2019-03-20T00:14:43.000Z", "type": "AsymmetricX509Cert", "startDate": "2018-09-20T00:14:59.913334Z"}]}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Length: ['1336']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bd341aaa-a917-40ce-83af-bf495b0d4a86?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      duration: ['1808657']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [eHUy9xL/t2YPMeNAb8K3eJdZ70TbtfpQN57mnPQmQKs=]
      ocp-aad-session-key: [tNHM14Uzzb-LdO5dTOn8rWvDRl8Ax2-Ou5tnSyr-6osz5l0xNFxZT9ryerkyhlFrG7iSWH_SC57TrZPFNbuHSpQGDnxiugdhfi67pKcmYRh63Ky71LPhKmkA2_wyfi2gFZc_fCHDKEUHoV7RjKymlA.i_c_8cKp9OlbrYXf6nntrUCksYVtuMU7ziRqPIqsxGE]
      pragma: [no-cache]
      request-id: [d42216dc-d0cc-4168-9330-31b8f4369769]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bd341aaa-a917-40ce-83af-bf495b0d4a86","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"daa640c3-b93d-45da-8872-735b5de3eecd","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-09-20-00-14-55","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-09-20-00-14-55","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"DDBA67C5593F1F94E4C62FDEA0E0303AA520FA2A","endDate":"2019-03-20T00:14:43Z","keyId":"82b6b2fe-b5e4-424c-b4be-ecc199d06df7","startDate":"2018-09-20T00:14:59.913334Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/bd341aaa-a917-40ce-83af-bf495b0d4a86/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-09-20-00-14-55","id":"8015239d-7371-4c33-b7d7-b0ebeb76880d","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-09-20-00-14-55 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-09-20-00-14-55","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":null,"recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2350']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Thu, 20 Sep 2018 00:14:59 GMT']
      duration: ['346279']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [9GQqI6S1ECS4j4T2qnjxLorVEkd1sq21GP7tQfmsPNE=]
      ocp-aad-session-key: [RHzGzu9F7S9JY9SoMGBnpqTdHk-x6damGiZK1xVK26iJaGrZixuTl1vPVuC8y4TXX3zcnEGoTU3h4giCyk61np82GfhBRfB6t_LSKalVvzVkVZN7jsmaNlAki4IsHhCbCleY1TdEI2gov236aujUsg.QZdAyMFOSVQ1pY-IqrF-E6r8iiAiRy-jZI8Hn_ET-70]
      pragma: [no-cache]
      request-id: [5d9b0472-4903-456f-a646-c0c6e01bcb1f]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.47]
      accept-language: [en-US]
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bd341aaa-a917-40ce-83af-bf495b0d4a86?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Thu, 20 Sep 2018 00:15:00 GMT']
      duration: ['1725092']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [d1JB6ucVep7/SQwUJWs6eqivZfWvC07ij1sG/PhNZn0=]
      ocp-aad-session-key: [Giy0MIXsOM7wRm9tVBgQAlQMgzv2SvzbnFa2T3iz3o8b6lZqoXPCvUuQXb1Syh3PoLjYLWpvrggDxN0MtHrBw3tDjXtUFcurgErm1VwxpXr08mtZA9hmcekVjb3Zt9nbpQMqxEeP0M1XxpwfVvE8mw.B7TuHIPmaDm6LPwD9jC7Mi6WUKz6cliFyB4f5c9okV8]
      pragma: [no-cache]
      request-id: [9b6fe86f-f4e6-4326-bcb8-da71e3a7621f]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.5
          msrest_azure/0.4.34 resourcemanagementclient/2.0.0 Azure-SDK-For-Python
          AZURECLI/2.0.47]
      accept-language: [en-US]
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body: {string: ''}
    headers:
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Thu, 20 Sep 2018 00:15:01 GMT']
      expires: ['-1']
      location: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURVNUOjVGU1A6NUZXSVRIOjVGS1Y6NUZFWElTVElORzo1RkNFUlQ1SHw3MzhDNjE2NkI0QzcyODU5LVdFU1RVUyIsImpvYkxvY2F0aW9uIjoid2VzdHVzIn0?api-version=2018-02-01']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-deletes: ['14999']
    status: {code: 202, message: Accepted}
version: 1
