interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "azure-cli-management-group3bxh", "properties": {"details": {"parent":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '85'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-managementgroups/0.2.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh","type":"/providers/Microsoft.Management/managementGroups","name":"azure-cli-management-group3bxh","properties":{"tenantId":"c445fb81-7c35-42a5-a47b-4686cb6946f7","displayName":"azure-cli-management-group3bxh","details":{"version":1,"updatedTime":"2020-07-07T16:55:15.873017Z","updatedBy":"d76d90a0-ab79-4214-86ad-241a0c7ecd85","parent":{"id":"/providers/Microsoft.Management/managementGroups/c445fb81-7c35-42a5-a47b-4686cb6946f7","name":"c445fb81-7c35-42a5-a47b-4686cb6946f7","displayName":"Tenant
        Root Group"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '601'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - 70c2da4b-feed-4857-960f-035fa3e69fde
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-ba-restapi:
      - 1.0.3.1578
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\":
      {\"value\": \"a93e8c5c-63cb-4635-933f-6d166ac25187\"}, \"storageAccountName\":
      {\"value\": \"armbuilddemo2345\"}, \"targetMG\": {\"value\": \"azure-cli-management-group3bxh\"},
      \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000002\"}}, \"mode\":
      \"Incremental\", template:{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {\n    \"targetMG\": {\n
      \     \"type\": \"string\"\n    },\n    \"nestedsubId\": {\n      \"type\":
      \"string\"\n    },\n    \"nestedRG\": {\n      \"type\": \"string\"\n    },\n
      \   \"storageAccountName\": {\n      \"type\": \"string\"\n    }\n  },\n  \"variables\":
      {\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',
      parameters('targetMG'))]\"\n  },\n  \"resources\": [\n    {\n      \"type\":
      \"Microsoft.Authorization/policyDefinitions\",\n      \"name\": \"policy2\",\n
      \     \"apiVersion\": \"2016-12-01\",\n      \"properties\": {\n        \"policyType\":
      \"Custom\",\n        \"parameters\": {\n\n        },\n        \"policyRule\":
      {\n          \"if\": {\n            \"field\": \"location\",\n            \"equals\":
      \"northeurope\"\n          },\n          \"then\": {\n            \"effect\":
      \"deny\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"Microsoft.Authorization/policyAssignments\",\n
      \     \"name\": \"location-lock\",\n      \"apiVersion\": \"2016-12-01\",\n
      \     \"dependsOn\": [\n        \"policy2\"\n      ],\n      \"properties\":
      {\n        \"scope\": \"[variables('mgScope')]\",\n        \"policyDefinitionId\":
      \"[concat(variables('mgScope'), '/providers/', 'Microsoft.Authorization/policyDefinitions/',
      'policy2')]\"\n      }\n    },\n    {\n      \"type\": \"Microsoft.Resources/deployments\",\n
      \     \"name\": \"sdktest-subnested\",\n      \"apiVersion\": \"2018-05-01\",\n
      \     \"location\": \"West US\",\n      \"subscriptionId\": \"[parameters('nestedSubId')]\",\n
      \     \"properties\": {\n        \"template\": {\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \         \"contentVersion\": \"1.0.0.0\",\n          \"parameters\": {\n\n
      \         },\n          \"variables\": {\n\n          },\n          \"resources\":
      [\n            {\n              \"type\": \"Microsoft.Resources/resourceGroups\",\n
      \             \"name\": \"[parameters('nestedRG')]\",\n              \"apiVersion\":
      \"2018-05-01\",\n              \"location\": \"East US 2 EUAP\",\n              \"properties\":
      {\n\n              }\n            },\n            {\n              \"type\":
      \"Microsoft.Resources/deployments\",\n              \"name\": \"rg-nested\",\n
      \             \"apiVersion\": \"2017-05-10\",\n              \"resourceGroup\":
      \"[parameters('nestedRG')]\",\n              \"dependsOn\": [ \"[parameters('nestedRG')]\"
      ],\n              \"properties\": {\n                \"template\": {\n                  \"$schema\":
      \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \                 \"contentVersion\": \"1.0.0.0\",\n                  \"parameters\":
      {\n\n                  },\n                  \"variables\": {\n\n                  },\n
      \                 \"resources\": [\n                    {\n                      \"type\":
      \"Microsoft.Storage/storageAccounts\",\n                      \"name\": \"[parameters('storageAccountName')]\",\n
      \                     \"apiVersion\": \"2015-06-15\",\n                      \"location\":
      \"East US\",\n                      \"properties\": {\n                        \"accountType\":
      \"Standard_LRS\",\n                        \"supportsHttpsTrafficOnly\": true\n
      \                     }\n                    }\n                  ]\n                },\n
      \               \"mode\": \"Incremental\"\n              }\n            }\n
      \         ]\n        },\n        \"mode\": \"Incremental\"\n      }\n    }\n
      \ ] // comment\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg validate
      Connection:
      - keep-alive
      Content-Length:
      - '3704'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --management-group-id --location --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/management_group_level_template","name":"management_group_level_template","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:13.0224565Z","duration":"PT0S","correlationId":"7e86f9d8-ca19-4242-804b-4cacb0c3ae1b","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2589'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\":
      {\"value\": \"a93e8c5c-63cb-4635-933f-6d166ac25187\"}, \"storageAccountName\":
      {\"value\": \"armbuilddemo2345\"}, \"targetMG\": {\"value\": \"azure-cli-management-group3bxh\"},
      \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000002\"}}, \"mode\":
      \"Incremental\", template:{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {\n    \"targetMG\": {\n
      \     \"type\": \"string\"\n    },\n    \"nestedsubId\": {\n      \"type\":
      \"string\"\n    },\n    \"nestedRG\": {\n      \"type\": \"string\"\n    },\n
      \   \"storageAccountName\": {\n      \"type\": \"string\"\n    }\n  },\n  \"variables\":
      {\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',
      parameters('targetMG'))]\"\n  },\n  \"resources\": [\n    {\n      \"type\":
      \"Microsoft.Authorization/policyDefinitions\",\n      \"name\": \"policy2\",\n
      \     \"apiVersion\": \"2016-12-01\",\n      \"properties\": {\n        \"policyType\":
      \"Custom\",\n        \"parameters\": {\n\n        },\n        \"policyRule\":
      {\n          \"if\": {\n            \"field\": \"location\",\n            \"equals\":
      \"northeurope\"\n          },\n          \"then\": {\n            \"effect\":
      \"deny\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"Microsoft.Authorization/policyAssignments\",\n
      \     \"name\": \"location-lock\",\n      \"apiVersion\": \"2016-12-01\",\n
      \     \"dependsOn\": [\n        \"policy2\"\n      ],\n      \"properties\":
      {\n        \"scope\": \"[variables('mgScope')]\",\n        \"policyDefinitionId\":
      \"[concat(variables('mgScope'), '/providers/', 'Microsoft.Authorization/policyDefinitions/',
      'policy2')]\"\n      }\n    },\n    {\n      \"type\": \"Microsoft.Resources/deployments\",\n
      \     \"name\": \"sdktest-subnested\",\n      \"apiVersion\": \"2018-05-01\",\n
      \     \"location\": \"West US\",\n      \"subscriptionId\": \"[parameters('nestedSubId')]\",\n
      \     \"properties\": {\n        \"template\": {\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \         \"contentVersion\": \"1.0.0.0\",\n          \"parameters\": {\n\n
      \         },\n          \"variables\": {\n\n          },\n          \"resources\":
      [\n            {\n              \"type\": \"Microsoft.Resources/resourceGroups\",\n
      \             \"name\": \"[parameters('nestedRG')]\",\n              \"apiVersion\":
      \"2018-05-01\",\n              \"location\": \"East US 2 EUAP\",\n              \"properties\":
      {\n\n              }\n            },\n            {\n              \"type\":
      \"Microsoft.Resources/deployments\",\n              \"name\": \"rg-nested\",\n
      \             \"apiVersion\": \"2017-05-10\",\n              \"resourceGroup\":
      \"[parameters('nestedRG')]\",\n              \"dependsOn\": [ \"[parameters('nestedRG')]\"
      ],\n              \"properties\": {\n                \"template\": {\n                  \"$schema\":
      \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \                 \"contentVersion\": \"1.0.0.0\",\n                  \"parameters\":
      {\n\n                  },\n                  \"variables\": {\n\n                  },\n
      \                 \"resources\": [\n                    {\n                      \"type\":
      \"Microsoft.Storage/storageAccounts\",\n                      \"name\": \"[parameters('storageAccountName')]\",\n
      \                     \"apiVersion\": \"2015-06-15\",\n                      \"location\":
      \"East US\",\n                      \"properties\": {\n                        \"accountType\":
      \"Standard_LRS\",\n                        \"supportsHttpsTrafficOnly\": true\n
      \                     }\n                    }\n                  ]\n                },\n
      \               \"mode\": \"Incremental\"\n              }\n            }\n
      \         ]\n        },\n        \"mode\": \"Incremental\"\n      }\n    }\n
      \ ] // comment\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3704'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:14.0844156Z","duration":"PT0S","correlationId":"d783e7a1-bc36-457e-a120-ffe0ee18fe9e","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2647'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\":
      {\"value\": \"a93e8c5c-63cb-4635-933f-6d166ac25187\"}, \"storageAccountName\":
      {\"value\": \"armbuilddemo2345\"}, \"targetMG\": {\"value\": \"azure-cli-management-group3bxh\"},
      \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000002\"}}, \"mode\":
      \"Incremental\", template:{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {\n    \"targetMG\": {\n
      \     \"type\": \"string\"\n    },\n    \"nestedsubId\": {\n      \"type\":
      \"string\"\n    },\n    \"nestedRG\": {\n      \"type\": \"string\"\n    },\n
      \   \"storageAccountName\": {\n      \"type\": \"string\"\n    }\n  },\n  \"variables\":
      {\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',
      parameters('targetMG'))]\"\n  },\n  \"resources\": [\n    {\n      \"type\":
      \"Microsoft.Authorization/policyDefinitions\",\n      \"name\": \"policy2\",\n
      \     \"apiVersion\": \"2016-12-01\",\n      \"properties\": {\n        \"policyType\":
      \"Custom\",\n        \"parameters\": {\n\n        },\n        \"policyRule\":
      {\n          \"if\": {\n            \"field\": \"location\",\n            \"equals\":
      \"northeurope\"\n          },\n          \"then\": {\n            \"effect\":
      \"deny\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"Microsoft.Authorization/policyAssignments\",\n
      \     \"name\": \"location-lock\",\n      \"apiVersion\": \"2016-12-01\",\n
      \     \"dependsOn\": [\n        \"policy2\"\n      ],\n      \"properties\":
      {\n        \"scope\": \"[variables('mgScope')]\",\n        \"policyDefinitionId\":
      \"[concat(variables('mgScope'), '/providers/', 'Microsoft.Authorization/policyDefinitions/',
      'policy2')]\"\n      }\n    },\n    {\n      \"type\": \"Microsoft.Resources/deployments\",\n
      \     \"name\": \"sdktest-subnested\",\n      \"apiVersion\": \"2018-05-01\",\n
      \     \"location\": \"West US\",\n      \"subscriptionId\": \"[parameters('nestedSubId')]\",\n
      \     \"properties\": {\n        \"template\": {\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \         \"contentVersion\": \"1.0.0.0\",\n          \"parameters\": {\n\n
      \         },\n          \"variables\": {\n\n          },\n          \"resources\":
      [\n            {\n              \"type\": \"Microsoft.Resources/resourceGroups\",\n
      \             \"name\": \"[parameters('nestedRG')]\",\n              \"apiVersion\":
      \"2018-05-01\",\n              \"location\": \"East US 2 EUAP\",\n              \"properties\":
      {\n\n              }\n            },\n            {\n              \"type\":
      \"Microsoft.Resources/deployments\",\n              \"name\": \"rg-nested\",\n
      \             \"apiVersion\": \"2017-05-10\",\n              \"resourceGroup\":
      \"[parameters('nestedRG')]\",\n              \"dependsOn\": [ \"[parameters('nestedRG')]\"
      ],\n              \"properties\": {\n                \"template\": {\n                  \"$schema\":
      \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \                 \"contentVersion\": \"1.0.0.0\",\n                  \"parameters\":
      {\n\n                  },\n                  \"variables\": {\n\n                  },\n
      \                 \"resources\": [\n                    {\n                      \"type\":
      \"Microsoft.Storage/storageAccounts\",\n                      \"name\": \"[parameters('storageAccountName')]\",\n
      \                     \"apiVersion\": \"2015-06-15\",\n                      \"location\":
      \"East US\",\n                      \"properties\": {\n                        \"accountType\":
      \"Standard_LRS\",\n                        \"supportsHttpsTrafficOnly\": true\n
      \                     }\n                    }\n                  ]\n                },\n
      \               \"mode\": \"Incremental\"\n              }\n            }\n
      \         ]\n        },\n        \"mode\": \"Incremental\"\n      }\n    }\n
      \ ] // comment\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3704'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2020-07-07T18:08:15.4863884Z","duration":"PT0.4861444S","correlationId":"96857d4f-68b2-489d-8700-d1f32d38fca0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operationStatuses/08586074615904773847?api-version=2020-06-01
      cache-control:
      - no-cache
      content-length:
      - '1682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08586074615904773847?api-version=2020-06-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:08:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08586074615904773847?api-version=2020-06-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:53.5618068Z","duration":"PT38.5615628S","correlationId":"96857d4f-68b2-489d-8700-d1f32d38fca0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2343'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/?api-version=2020-06-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:53.5618068Z","duration":"PT38.5615628S","correlationId":"96857d4f-68b2-489d-8700-d1f32d38fca0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deploymentphe4jfg3pi6gs2hqy3gp7nm","name":"azure-cli-management-group-deploymentphe4jfg3pi6gs2hqy3gp7nm","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupmqtatzdmj243c6nonn5wceolmjfo6hwi"},"storageAccountName":{"type":"String","value":"armbuilddemo4321"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2020-07-07T18:07:15.1132548Z","duration":"PT18.8651181S","correlationId":"5d8b39cc-5b09-4d06-b19a-d2ae532dd9d9","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details.","details":[{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details."}]}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deploymentqtdc62wboticlchokoh36hcqs","name":"azure-cli-resource-group-deploymentqtdc62wboticlchokoh36hcqs","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},"storageAccountName":{"type":"String","value":"armbuilddemo4321"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T17:45:28.337512Z","duration":"PT19.6067562S","correlationId":"b28e9df5-6794-4e24-8c64-1d64f21c644e","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc/providers/Microsoft.Storage/storageAccounts/armbuilddemo4321"}]}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment724z6cjnei4t44hyqgpboml","name":"azure-cli-management-group-deployment724z6cjnei4t44hyqgpboml","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},"storageAccountName":{"type":"String","value":"armbuilddemo4321"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T17:44:49.6216278Z","duration":"PT46.4354528S","correlationId":"f9170480-de71-45e3-8522-8980b1d53e78","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc/providers/Microsoft.Storage/storageAccounts/armbuilddemo4321"}]}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deploymentcjmzeukraj3dfom4edqaiuk","name":"azure-cli-management-group-deploymentcjmzeukraj3dfom4edqaiuk","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupcdm7pkvei5rheeabova4kn74m73g3mte"},"storageAccountName":{"type":"String","value":"armbuilddemo1234"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2020-07-07T17:42:44.6896642Z","duration":"PT18.2631557S","correlationId":"95ce2c0b-cf7b-4a32-ab4e-183b210753ba","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details.","details":[{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details."}]}}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '11246'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --filter
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/?$filter=provisioningState%20eq%20%27Succeeded%27&api-version=2020-06-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:53.5618068Z","duration":"PT38.5615628S","correlationId":"96857d4f-68b2-489d-8700-d1f32d38fca0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deploymentqtdc62wboticlchokoh36hcqs","name":"azure-cli-resource-group-deploymentqtdc62wboticlchokoh36hcqs","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},"storageAccountName":{"type":"String","value":"armbuilddemo4321"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T17:45:28.337512Z","duration":"PT19.6067562S","correlationId":"b28e9df5-6794-4e24-8c64-1d64f21c644e","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc/providers/Microsoft.Storage/storageAccounts/armbuilddemo4321"}]}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment724z6cjnei4t44hyqgpboml","name":"azure-cli-management-group-deployment724z6cjnei4t44hyqgpboml","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},"storageAccountName":{"type":"String","value":"armbuilddemo4321"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T17:44:49.6216278Z","duration":"PT46.4354528S","correlationId":"f9170480-de71-45e3-8522-8980b1d53e78","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-groupgn3se6ywpn5dcur4qxc53ubtxutefnrc/providers/Microsoft.Storage/storageAccounts/armbuilddemo4321"}]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '7042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:53.5618068Z","duration":"PT38.5615628S","correlationId":"96857d4f-68b2-489d-8700-d1f32d38fca0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2343'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg export
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/exportTemplate?api-version=2020-06-01
  response:
    body:
      string: '{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"targetMG":{"type":"String"},"nestedsubId":{"type":"String"},"nestedRG":{"type":"String"},"storageAccountName":{"type":"String"}},"variables":{"mgScope":"[concat(''/providers/Microsoft.Management/managementGroups/'',
        parameters(''targetMG''))]"},"resources":[{"type":"Microsoft.Authorization/policyDefinitions","apiVersion":"2016-12-01","name":"policy2","properties":{"policyType":"Custom","parameters":{},"policyRule":{"if":{"field":"location","equals":"northeurope"},"then":{"effect":"deny"}}}},{"type":"Microsoft.Authorization/policyAssignments","apiVersion":"2016-12-01","name":"location-lock","dependsOn":["policy2"],"properties":{"scope":"[variables(''mgScope'')]","policyDefinitionId":"[concat(variables(''mgScope''),
        ''/providers/'', ''Microsoft.Authorization/policyDefinitions/'', ''policy2'')]"}},{"type":"Microsoft.Resources/deployments","apiVersion":"2018-05-01","name":"sdktest-subnested","location":"West
        US","properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Resources/resourceGroups","name":"[parameters(''nestedRG'')]","apiVersion":"2018-05-01","location":"East
        US 2 EUAP","properties":{}},{"type":"Microsoft.Resources/deployments","name":"rg-nested","apiVersion":"2017-05-10","resourceGroup":"[parameters(''nestedRG'')]","dependsOn":["[parameters(''nestedRG'')]"],"properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Storage/storageAccounts","name":"[parameters(''storageAccountName'')]","apiVersion":"2015-06-15","location":"East
        US","properties":{"accountType":"Standard_LRS","supportsHttpsTrafficOnly":true}}]},"mode":"Incremental"}}]},"mode":"Incremental"},"subscriptionId":"[parameters(''nestedSubId'')]"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2065'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/operations?api-version=2020-06-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/2C926A40A27C639A","operationId":"2C926A40A27C639A","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:52.1394893Z","duration":"PT35.0390784S","trackingId":"cc286ee3-f490-4305-8a76-014b36eeb56c","serviceRequestId":"23742a92-d512-4415-99e1-7fc89807c935","statusCode":"OK","targetResource":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested","resourceType":"Microsoft.Resources/deployments","resourceName":"sdktest-subnested"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/B89EB87893B251C7","operationId":"B89EB87893B251C7","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:18.5199174Z","duration":"PT0.5257388S","trackingId":"f4c54d07-573a-4c48-9483-dabb976a7dae","serviceRequestId":"eastus:c67af6ae-88c9-429b-8cd2-47f649d747bb","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/9B2CE7BB68AE6382","operationId":"9B2CE7BB68AE6382","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:17.5537008Z","duration":"PT0.4532899S","trackingId":"2cc7fc51-1374-41f2-8858-dc2be04a6d4d","serviceRequestId":"eastus:583d63cd-f1f6-4748-ae63-49f2973b3991","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/08586074615904773847","operationId":"08586074615904773847","properties":{"provisioningOperation":"EvaluateDeploymentOutput","provisioningState":"Succeeded","timestamp":"2020-07-07T18:08:53.3316703Z","duration":"PT0.7004815S","trackingId":"17f061a0-a3ff-488e-847a-6eab68ca3461","statusCode":"OK","statusMessage":null}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2879'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\":
      {\"value\": \"a93e8c5c-63cb-4635-933f-6d166ac25187\"}, \"storageAccountName\":
      {\"value\": \"armbuilddemo2345\"}, \"targetMG\": {\"value\": \"azure-cli-management-group3bxh\"},
      \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000002\"}}, \"mode\":
      \"Incremental\", template:{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {\n    \"targetMG\": {\n
      \     \"type\": \"string\"\n    },\n    \"nestedsubId\": {\n      \"type\":
      \"string\"\n    },\n    \"nestedRG\": {\n      \"type\": \"string\"\n    },\n
      \   \"storageAccountName\": {\n      \"type\": \"string\"\n    }\n  },\n  \"variables\":
      {\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',
      parameters('targetMG'))]\"\n  },\n  \"resources\": [\n    {\n      \"type\":
      \"Microsoft.Authorization/policyDefinitions\",\n      \"name\": \"policy2\",\n
      \     \"apiVersion\": \"2016-12-01\",\n      \"properties\": {\n        \"policyType\":
      \"Custom\",\n        \"parameters\": {\n\n        },\n        \"policyRule\":
      {\n          \"if\": {\n            \"field\": \"location\",\n            \"equals\":
      \"northeurope\"\n          },\n          \"then\": {\n            \"effect\":
      \"deny\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"Microsoft.Authorization/policyAssignments\",\n
      \     \"name\": \"location-lock\",\n      \"apiVersion\": \"2016-12-01\",\n
      \     \"dependsOn\": [\n        \"policy2\"\n      ],\n      \"properties\":
      {\n        \"scope\": \"[variables('mgScope')]\",\n        \"policyDefinitionId\":
      \"[concat(variables('mgScope'), '/providers/', 'Microsoft.Authorization/policyDefinitions/',
      'policy2')]\"\n      }\n    },\n    {\n      \"type\": \"Microsoft.Resources/deployments\",\n
      \     \"name\": \"sdktest-subnested\",\n      \"apiVersion\": \"2018-05-01\",\n
      \     \"location\": \"West US\",\n      \"subscriptionId\": \"[parameters('nestedSubId')]\",\n
      \     \"properties\": {\n        \"template\": {\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \         \"contentVersion\": \"1.0.0.0\",\n          \"parameters\": {\n\n
      \         },\n          \"variables\": {\n\n          },\n          \"resources\":
      [\n            {\n              \"type\": \"Microsoft.Resources/resourceGroups\",\n
      \             \"name\": \"[parameters('nestedRG')]\",\n              \"apiVersion\":
      \"2018-05-01\",\n              \"location\": \"East US 2 EUAP\",\n              \"properties\":
      {\n\n              }\n            },\n            {\n              \"type\":
      \"Microsoft.Resources/deployments\",\n              \"name\": \"rg-nested\",\n
      \             \"apiVersion\": \"2017-05-10\",\n              \"resourceGroup\":
      \"[parameters('nestedRG')]\",\n              \"dependsOn\": [ \"[parameters('nestedRG')]\"
      ],\n              \"properties\": {\n                \"template\": {\n                  \"$schema\":
      \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \                 \"contentVersion\": \"1.0.0.0\",\n                  \"parameters\":
      {\n\n                  },\n                  \"variables\": {\n\n                  },\n
      \                 \"resources\": [\n                    {\n                      \"type\":
      \"Microsoft.Storage/storageAccounts\",\n                      \"name\": \"[parameters('storageAccountName')]\",\n
      \                     \"apiVersion\": \"2015-06-15\",\n                      \"location\":
      \"East US\",\n                      \"properties\": {\n                        \"accountType\":
      \"Standard_LRS\",\n                        \"supportsHttpsTrafficOnly\": true\n
      \                     }\n                    }\n                  ]\n                },\n
      \               \"mode\": \"Incremental\"\n              }\n            }\n
      \         ]\n        },\n        \"mode\": \"Incremental\"\n      }\n    }\n
      \ ] // comment\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3704'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --no-wait
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000003","name":"azure-cli-resource-group-deployment000003","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-07-07T18:09:19.6210455Z","duration":"PT0S","correlationId":"3cf26345-702d-4218-bd68-dc9765b639cc","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000002/providers/Microsoft.Storage/storageAccounts/armbuilddemo2345"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2647'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\":
      {\"value\": \"a93e8c5c-63cb-4635-933f-6d166ac25187\"}, \"storageAccountName\":
      {\"value\": \"armbuilddemo2345\"}, \"targetMG\": {\"value\": \"azure-cli-management-group3bxh\"},
      \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000002\"}}, \"mode\":
      \"Incremental\", template:{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"parameters\": {\n    \"targetMG\": {\n
      \     \"type\": \"string\"\n    },\n    \"nestedsubId\": {\n      \"type\":
      \"string\"\n    },\n    \"nestedRG\": {\n      \"type\": \"string\"\n    },\n
      \   \"storageAccountName\": {\n      \"type\": \"string\"\n    }\n  },\n  \"variables\":
      {\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',
      parameters('targetMG'))]\"\n  },\n  \"resources\": [\n    {\n      \"type\":
      \"Microsoft.Authorization/policyDefinitions\",\n      \"name\": \"policy2\",\n
      \     \"apiVersion\": \"2016-12-01\",\n      \"properties\": {\n        \"policyType\":
      \"Custom\",\n        \"parameters\": {\n\n        },\n        \"policyRule\":
      {\n          \"if\": {\n            \"field\": \"location\",\n            \"equals\":
      \"northeurope\"\n          },\n          \"then\": {\n            \"effect\":
      \"deny\"\n          }\n        }\n      }\n    },\n    {\n      \"type\": \"Microsoft.Authorization/policyAssignments\",\n
      \     \"name\": \"location-lock\",\n      \"apiVersion\": \"2016-12-01\",\n
      \     \"dependsOn\": [\n        \"policy2\"\n      ],\n      \"properties\":
      {\n        \"scope\": \"[variables('mgScope')]\",\n        \"policyDefinitionId\":
      \"[concat(variables('mgScope'), '/providers/', 'Microsoft.Authorization/policyDefinitions/',
      'policy2')]\"\n      }\n    },\n    {\n      \"type\": \"Microsoft.Resources/deployments\",\n
      \     \"name\": \"sdktest-subnested\",\n      \"apiVersion\": \"2018-05-01\",\n
      \     \"location\": \"West US\",\n      \"subscriptionId\": \"[parameters('nestedSubId')]\",\n
      \     \"properties\": {\n        \"template\": {\n          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \         \"contentVersion\": \"1.0.0.0\",\n          \"parameters\": {\n\n
      \         },\n          \"variables\": {\n\n          },\n          \"resources\":
      [\n            {\n              \"type\": \"Microsoft.Resources/resourceGroups\",\n
      \             \"name\": \"[parameters('nestedRG')]\",\n              \"apiVersion\":
      \"2018-05-01\",\n              \"location\": \"East US 2 EUAP\",\n              \"properties\":
      {\n\n              }\n            },\n            {\n              \"type\":
      \"Microsoft.Resources/deployments\",\n              \"name\": \"rg-nested\",\n
      \             \"apiVersion\": \"2017-05-10\",\n              \"resourceGroup\":
      \"[parameters('nestedRG')]\",\n              \"dependsOn\": [ \"[parameters('nestedRG')]\"
      ],\n              \"properties\": {\n                \"template\": {\n                  \"$schema\":
      \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n
      \                 \"contentVersion\": \"1.0.0.0\",\n                  \"parameters\":
      {\n\n                  },\n                  \"variables\": {\n\n                  },\n
      \                 \"resources\": [\n                    {\n                      \"type\":
      \"Microsoft.Storage/storageAccounts\",\n                      \"name\": \"[parameters('storageAccountName')]\",\n
      \                     \"apiVersion\": \"2015-06-15\",\n                      \"location\":
      \"East US\",\n                      \"properties\": {\n                        \"accountType\":
      \"Standard_LRS\",\n                        \"supportsHttpsTrafficOnly\": true\n
      \                     }\n                    }\n                  ]\n                },\n
      \               \"mode\": \"Incremental\"\n              }\n            }\n
      \         ]\n        },\n        \"mode\": \"Incremental\"\n      }\n    }\n
      \ ] // comment\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3704'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --no-wait
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000003","name":"azure-cli-resource-group-deployment000003","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2020-07-07T18:09:20.6907247Z","duration":"PT0.4362615S","correlationId":"e27dc992-df8c-4838-a860-014feac89ebf","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000003/operationStatuses/08586074615252231626?api-version=2020-06-01
      cache-control:
      - no-cache
      content-length:
      - '1682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg cancel
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --management-group-id
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment/cancel?api-version=2020-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Tue, 07 Jul 2020 18:09:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --management-group-id
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000003","name":"azure-cli-resource-group-deployment000003","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13170742102864522604","parameters":{"targetMG":{"type":"String","value":"azure-cli-management-group3bxh"},"nestedsubId":{"type":"String","value":"a93e8c5c-63cb-4635-933f-6d166ac25187"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000002"},"storageAccountName":{"type":"String","value":"armbuilddemo2345"}},"mode":"Incremental","provisioningState":"Canceled","timestamp":"2020-07-07T18:09:21.294068Z","duration":"PT1.0396048S","correlationId":"e27dc992-df8c-4838-a860-014feac89ebf","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1681'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-resource/10.1.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2020-06-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2264'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-managementgroups/0.2.0
        Azure-SDK-For-Python AZURECLI/2.8.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh","type":"/providers/Microsoft.Management/managementGroups","name":"azure-cli-management-group3bxh","status":"NotStarted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '208'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:34 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/azure-cli-management-group3bxh?api-version=2018-03-01-preview
      pragma:
      - no-cache
      request-id:
      - f706424d-8fcc-43eb-b53d-cd065e629988
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ba-restapi:
      - 1.0.3.1578
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.9 msrest_azure/0.6.3 azure-mgmt-managementgroups/0.2.0
        Azure-SDK-For-Python AZURECLI/2.8.0
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/azure-cli-management-group3bxh?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management-group3bxh","type":"/providers/Microsoft.Management/managementGroups","name":"azure-cli-management-group3bxh","status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '207'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 07 Jul 2020 18:09:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - d0814399-b12c-4a4b-8822-4381e8000225
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-ba-restapi:
      - 1.0.3.1578
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
