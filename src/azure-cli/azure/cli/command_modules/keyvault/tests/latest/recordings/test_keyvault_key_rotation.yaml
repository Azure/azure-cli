interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-04-21T05:00:42.199Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-04-21T05:00:42.199Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","accessPolicies":[{"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","objectId":"9aec9bf7-7066-4c57-bc6d-3bc7935e826d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1031'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.66.0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '3749'
      x-msedge-ref:
      - 'Ref A: 6E19807030E54F7AA4045542E93FAA0A Ref B: MAA201060514017 Ref C: 2025-04-21T05:01:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-04-21T05:00:42.199Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-04-21T05:00:42.199Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","accessPolicies":[{"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","objectId":"9aec9bf7-7066-4c57-bc6d-3bc7935e826d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1031'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.66.0
      x-ms-ratelimit-remaining-subscription-global-reads:
      - '3749'
      x-msedge-ref:
      - 'Ref A: EFD34914EEB240FB8B11CE7B6DC92598 Ref B: MAA201060513025 Ref C: 2025-04-21T05:01:24Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "b5ee6c06-c2c2-4e3c-8606-5f170cee077a",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "b5ee6c06-c2c2-4e3c-8606-5f170cee077a", "objectId": "9aec9bf7-7066-4c57-bc6d-3bc7935e826d",
      "permissions": {"keys": ["all", "rotate"], "secrets": ["all"], "certificates":
      ["all"], "storage": ["all"]}}], "vaultUri": "https://cli-test-kv-key-000002.vault.azure.net/",
      "enabledForDeployment": false, "enableSoftDelete": true, "softDeleteRetentionInDays":
      7, "enableRbacAuthorization": false, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      Content-Length:
      - '636'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_key000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-key-000002","name":"cli-test-kv-key-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"test@example.com","createdByType":"User","createdAt":"2025-04-21T05:00:42.199Z","lastModifiedBy":"test@example.com","lastModifiedByType":"User","lastModifiedAt":"2025-04-21T05:01:25.211Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","accessPolicies":[{"tenantId":"b5ee6c06-c2c2-4e3c-8606-5f170cee077a","objectId":"9aec9bf7-7066-4c57-bc6d-3bc7935e826d","permissions":{"keys":["all","rotate"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enableRbacAuthorization":false,"vaultUri":"https://cli-test-kv-key-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1040'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 2.2.66.0
      x-ms-operation-identifier:
      - tenantId=b5ee6c06-c2c2-4e3c-8606-5f170cee077a,objectId=9aec9bf7-7066-4c57-bc6d-3bc7935e826d/southeastasia/1bd36b50-e59c-409a-9029-93470879f606
      x-ms-ratelimit-remaining-subscription-global-writes:
      - '2999'
      x-ms-ratelimit-remaining-subscription-writes:
      - '199'
      x-msedge-ref:
      - 'Ref A: 1C268220117C413186496C64BEDCC298 Ref B: MAA201060513025 Ref C: 2025-04-21T05:01:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      ParameterSetName:
      - --vault-name -n -p
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/create?api-version=7.6-preview.2
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/b5ee6c06-c2c2-4e3c-8606-5f170cee077a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.108;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2297.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key create
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      ParameterSetName:
      - --vault-name -n -p
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/create?api-version=7.6-preview.2
  response:
    body:
      string: '{"key":{"kid":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/e42511cd6b93411a8d8ac26d0f55b889","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"yKJR8e2FvG6IXE2iTaXGAlNVm3o1A2q0AUOJz_k48pBmoYl5dsNHf7IHWLXwVU86uH00cmwznCezKQl-Jcmn-u_acEJxXaME4ipS-JQG6USFqbcjqh1mQgeGmDkGIxt5nAxdj6KkwzypKp1Vdrq549Wrvr54ZKfL42yO-cOSpweb1CB8bZH4liAVNE4KqWEiLN8iWzYm-tC7Ty6hgIycJoeQXKRu1-kMJ9ITxarvUN7u97vXKX6n5BTDkgtgZQI51BmpbMfeGKjx5jlVf9msZU5_DRveaaGXZL6B1qWxiNKg9h1y8a-8quY6rV2GPVQu1rX38cDQxCpRws9fyIXUzQ","e":"AQAB"},"attributes":{"enabled":true,"created":1745211687,"updated":1745211687,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7,"exportable":false,"hsmPlatform":"0"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '734'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.108;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2297.1
    status:
      code: 200
      message: OK
- request:
    body: '{"lifetimeActions": [{"action": {"type": "Rotate"}, "trigger": {"timeAfterCreate":
      "P15D"}}, {"action": {"type": "Notify"}, "trigger": {"timeBeforeExpiry": "P7D"}}],
      "attributes": {"expiryTime": "P30D"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotation-policy update
      Connection:
      - keep-alive
      Content-Length:
      - '203'
      Content-Type:
      - application/json
      ParameterSetName:
      - --value --vault-name -n
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: PUT
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy?api-version=7.6-preview.2
  response:
    body:
      string: '{"id":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy","lifetimeActions":[{"trigger":{"timeAfterCreate":"P15D"},"action":{"type":"Rotate"}},{"trigger":{"timeBeforeExpiry":"P7D"},"action":{"type":"Notify"}}],"attributes":{"expiryTime":"P30D","created":1745211689,"updated":1745211689}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '315'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.108;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2297.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotation-policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --vault-name -n
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: GET
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy?api-version=7.6-preview.2
  response:
    body:
      string: '{"id":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotationpolicy","lifetimeActions":[{"trigger":{"timeAfterCreate":"P15D"},"action":{"type":"Rotate"}},{"trigger":{"timeBeforeExpiry":"P7D"},"action":{"type":"Notify"}}],"attributes":{"expiryTime":"P30D","created":1745211689,"updated":1745211689}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '315'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.108;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2297.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault key rotate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --vault-name -n
      User-Agent:
      - AZURECLI/2.71.0 azsdk-python-core/1.31.0 Python/3.11.9 (Windows-10-10.0.26100-SP0)
    method: POST
    uri: https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/rotate?api-version=7.6-preview.2
  response:
    body:
      string: '{"key":{"kid":"https://cli-test-kv-key-000002.vault.azure.net/keys/key-000003/48126aae10044e049f4c683829dc8669","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"wFjLY8bjiuS4FPbfS_MEL33R_pwbKckHPbcAW5MnSVZsmbmrEXeV8iXH50-30q8Obd7QOQyjszNWdY8I0wnUCSfOtrZ2hLV7pZGeoTXdJJbi76N2j2xTh1bMHMSoltl5a0f7lrufw40qgbn-I_jwkpfKsMySjJNuf4wAImxn9eXbKuFYTg_IxZQf-hDnz2HcIWbrFGMB0pQE9iXQMV2_zvDXHJkXptaIg3LA9ZMV8FU3lMt45bAi_hYBuHPlzpkSpBF-GK57Uo6XQESCiIx5feEAgoN2TDiLfpre4QrTRiWyr_4g__PctuRJCKR8cDO1poq6rQLxLE-oEbJDfUB34Q","e":"AQAB"},"attributes":{"enabled":true,"exp":1747803692,"created":1745211692,"updated":1745211692,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7,"exportable":false,"hsmPlatform":"0"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '751'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 21 Apr 2025 05:01:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.108;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus2
      x-ms-keyvault-service-version:
      - 1.9.2297.1
    status:
      code: 200
      message: OK
version: 1
