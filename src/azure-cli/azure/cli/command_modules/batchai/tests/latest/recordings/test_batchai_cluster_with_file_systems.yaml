interactions:
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.8; Windows 10) AZURECLI/2.25.0
      x-ms-date:
      - Mon, 28 Jun 2021 05:31:47 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://clitest000002.file.core.windows.net/share?restype=share
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Mon, 28 Jun 2021 05:31:48 GMT
      etag:
      - '"0x8D939F606BF7870"'
      last-modified:
      - Mon, 28 Jun 2021 05:31:48 GMT
      server:
      - Windows-Azure-File/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.8; Windows 10) AZURECLI/2.25.0
      x-ms-date:
      - Mon, 28 Jun 2021 05:31:49 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://clitest000002.blob.core.windows.net/container?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Mon, 28 Jun 2021 05:31:51 GMT
      etag:
      - '"0x8D939F608D4238B"'
      last-modified:
      - Mon, 28 Jun 2021 05:31:52 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai workspace create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"eastus","tags":{"product":"azurecli","cause":"automation","date":"2021-06-28T05:31:15Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '428'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:31:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai workspace create
      Connection:
      - keep-alive
      Content-Length:
      - '22'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace?api-version=2018-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace","name":"workspace","type":"Microsoft.BatchAI/workspaces","location":"eastus","properties":{"provisioningState":"succeeded","provisioningStateTransitionTime":"2021-06-28T05:31:57.979Z","creationTime":"2021-06-28T05:31:57.979Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '427'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:31:58 GMT
      etag:
      - W/"0x8D939F60C3E8A78"
      expires:
      - '-1'
      last-modified:
      - Mon, 28 Jun 2021 05:31:57 GMT
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - 2ae9d4c2-14e0-4c43-98c7-45f36d0ee51d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-request-time:
      - '0.040'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -w -n -f --afs-name --bfs-name -u -k
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster?api-version=2018-05-01
  response:
    body:
      string: '{"error":{"code":"ClusterNotFound","message":"The specified managed
        compute cluster is not found"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '99'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:32:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - f4cd52a3-89f6-458a-b124-f286ec050852
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-request-time:
      - '0.023'
    status:
      code: 404
      message: The specified managed compute cluster is not found
- request:
    body: '{"properties": {"vmSize": "STANDARD_D1", "scaleSettings": {"manual": {"targetNodeCount":
      1}}, "nodeSetup": {"mountVolumes": {"azureFileShares": [{"accountName": "clitest000002",
      "azureFileUrl": "https://clitest000002.file.core.windows.net/share", "credentials":
      {"accountKey": "FmEqpTF1ki81MpQ2lDc1Pmhi7Prb1uPVQuT26vpFbkeTNDCUYuOsvbZmc9aTgZsnRUjqYOa4S037fzdQuNFsDw==\n"},
      "relativeMountPath": "afs", "fileMode": "0777", "directoryMode": "0777"}], "azureBlobFileSystems":
      [{"accountName": "clitest000002", "containerName": "container", "credentials":
      {"accountKey": "FmEqpTF1ki81MpQ2lDc1Pmhi7Prb1uPVQuT26vpFbkeTNDCUYuOsvbZmc9aTgZsnRUjqYOa4S037fzdQuNFsDw==\n"},
      "relativeMountPath": "bfs"}]}}, "userAccountSettings": {"adminUserName": "DemoUser",
      "adminUserSshPublicKey": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDKUDnWeK6rx36apNE9ij1iAXn68FKXLTW0009XK/7dyMewlNfXi6Z2opnxHDDYWucMluU0dsvBR22OuYH2RHriPJTi1jN3aZ0zZSrlH/W4MSNQKlG/AnrjJPA3xfYjIKLGuKBqSIvMsmrkuDfIfMaDnPcxb+GzM10L5epRhoP5FwqaQbLqp640YzFSLqMChz7E6RG54CpEm+MRvA7lj9nD9AlYnfRQAKj2thsFrkz7AlYLQ1ug8vV+1Y3xSKDbo5vy6oqM3QKeLiUiyN9Ff1Rq4uYnrqJqcWN1ADfiPGZZjEStOkRgG3V6JrpIN+z0Zl3n+sjrH+CKwrYmyni6D41L"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster create
      Connection:
      - keep-alive
      Content-Length:
      - '1188'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -w -n -f --afs-name --bfs-name -u -k
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster?api-version=2018-05-01
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationresults/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb?api-version=2018-05-01
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 28 Jun 2021 05:32:01 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationstatuses/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb?api-version=2018-05-01
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - a735ee2e-fc53-416d-a001-75595da825a3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-request-time:
      - '0.177'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -w -n -f --afs-name --bfs-name -u -k
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationresults/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb?api-version=2018-05-01
  response:
    body:
      string: '{"id":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationresults/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb","name":"1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb","status":"InProgress","startTime":"2021-06-28T05:32:01.045Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:32:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - 13988ad7-23b7-4fd9-98d7-a562a8c144f7
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-request-time:
      - '0.020'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -w -n -f --afs-name --bfs-name -u -k
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationresults/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb?api-version=2018-05-01
  response:
    body:
      string: '{"id":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.BatchAI/locations/eastus/operationresults/1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb","name":"1ae20d54-3e8d-4ab8-8a4b-37f7cb4c48bb","status":"Succeeded","startTime":"2021-06-28T05:32:01.045Z","endTime":"2021-06-28T05:32:21.928Z","properties":{"resourceId":"0b1f6471-1bf0-4dda-aec3-cb9272f09590$clitest.rg000001$workspace$cluster"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '491'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:32:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - 54f4dc61-ddd4-42a0-8c60-f9633d7ab89a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-request-time:
      - '0.023'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -w -n -f --afs-name --bfs-name -u -k
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster?api-version=2018-05-01
  response:
    body:
      string: '{"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster","name":"cluster","type":"Microsoft.BatchAI/workspaces/clusters","etag":"\"a3019d7f-0000-0100-0000-60d95eff0000\"","properties":{"provisioningState":"succeeded","allocationState":"resizing","creationTime":"2021-06-28T05:32:01.017Z","allocationStateTransitionTime":"2021-06-28T05:32:01.017Z","provisioningStateTransitionTime":"2021-06-28T05:32:21.913Z","vmSize":"STANDARD_D1","currentNodeCount":0,"nodeStateCounts":{"runningNodeCount":0,"idleNodeCount":0,"unusableNodeCount":0,"preparingNodeCount":0,"leavingNodeCount":0},"vmPriority":"dedicated","scaleSettings":{"manual":{"targetNodeCount":1,"nodeDeallocationOption":"requeue"}},"virtualMachineConfiguration":{"imageReference":{"publisher":"microsoft-dsvm","offer":"amlcompute","sku":"runtime-gen1-ubuntu18","version":"latest","minVersion":""}},"userAccountSettings":{"adminUserName":"DemoUser","adminUserSshPublicKey":"ssh-rsa
        AAAAB3NzaC1yc2EAAAADAQABAAABAQDKUDnWeK6rx36apNE9ij1iAXn68FKXLTW0009XK/7dyMewlNfXi6Z2opnxHDDYWucMluU0dsvBR22OuYH2RHriPJTi1jN3aZ0zZSrlH/W4MSNQKlG/AnrjJPA3xfYjIKLGuKBqSIvMsmrkuDfIfMaDnPcxb+GzM10L5epRhoP5FwqaQbLqp640YzFSLqMChz7E6RG54CpEm+MRvA7lj9nD9AlYnfRQAKj2thsFrkz7AlYLQ1ug8vV+1Y3xSKDbo5vy6oqM3QKeLiUiyN9Ff1Rq4uYnrqJqcWN1ADfiPGZZjEStOkRgG3V6JrpIN+z0Zl3n+sjrH+CKwrYmyni6D41L"},"nodeSetup":{"mountVolumes":{"azureFileShares":[{"accountName":"clitest000002","azureFileUrl":"https://clitest000002.file.core.windows.net/share","credentials":{},"relativeMountPath":"afs","fileMode":"0777","directoryMode":"0777"}],"azureBlobFileSystems":[{"accountName":"clitest000002","containerName":"container","credentials":{},"relativeMountPath":"bfs"}]}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1886'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:32:47 GMT
      etag:
      - W/"0x8D939F60E0DFB9B"
      expires:
      - '-1'
      last-modified:
      - Mon, 28 Jun 2021 05:32:01 GMT
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - 05530a7b-d3f2-4648-a416-ec42cbcfacb8
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-request-time:
      - '0.080'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - batchai cluster show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -w -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-mgmt-batchai/7.0.0b1 Python/3.8.8 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster?api-version=2018-05-01
  response:
    body:
      string: '{"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.BatchAI/workspaces/workspace/clusters/cluster","name":"cluster","type":"Microsoft.BatchAI/workspaces/clusters","etag":"\"a4011e3c-0000-0100-0000-60d963960000\"","properties":{"provisioningState":"succeeded","allocationState":"steady","creationTime":"2021-06-28T05:32:01.017Z","allocationStateTransitionTime":"2021-06-28T05:44:27.999Z","provisioningStateTransitionTime":"2021-06-28T05:32:21.913Z","vmSize":"STANDARD_D1","currentNodeCount":0,"nodeStateCounts":{"runningNodeCount":0,"idleNodeCount":0,"unusableNodeCount":0,"preparingNodeCount":0,"leavingNodeCount":0},"vmPriority":"dedicated","scaleSettings":{"manual":{"targetNodeCount":0,"nodeDeallocationOption":"requeue"}},"virtualMachineConfiguration":{"imageReference":{"publisher":"microsoft-dsvm","offer":"amlcompute","sku":"runtime-gen1-ubuntu18","version":"latest","minVersion":""}},"userAccountSettings":{"adminUserName":"DemoUser","adminUserSshPublicKey":"ssh-rsa
        AAAAB3NzaC1yc2EAAAADAQABAAABAQDKUDnWeK6rx36apNE9ij1iAXn68FKXLTW0009XK/7dyMewlNfXi6Z2opnxHDDYWucMluU0dsvBR22OuYH2RHriPJTi1jN3aZ0zZSrlH/W4MSNQKlG/AnrjJPA3xfYjIKLGuKBqSIvMsmrkuDfIfMaDnPcxb+GzM10L5epRhoP5FwqaQbLqp640YzFSLqMChz7E6RG54CpEm+MRvA7lj9nD9AlYnfRQAKj2thsFrkz7AlYLQ1ug8vV+1Y3xSKDbo5vy6oqM3QKeLiUiyN9Ff1Rq4uYnrqJqcWN1ADfiPGZZjEStOkRgG3V6JrpIN+z0Zl3n+sjrH+CKwrYmyni6D41L"},"nodeSetup":{"mountVolumes":{"azureFileShares":[{"accountName":"clitest000002","azureFileUrl":"https://clitest000002.file.core.windows.net/share","credentials":{},"relativeMountPath":"afs","fileMode":"0777","directoryMode":"0777"}],"azureBlobFileSystems":[{"accountName":"clitest000002","containerName":"container","credentials":{},"relativeMountPath":"bfs"}]}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1884'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 28 Jun 2021 05:52:48 GMT
      etag:
      - W/"0x8D939F60E0DFB9B"
      expires:
      - '-1'
      last-modified:
      - Mon, 28 Jun 2021 05:32:01 GMT
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:22307ea5-0af8-473a-8389-17649f981c86
      request-id:
      - 7193db00-0f49-410d-af01-971e7f38ab52
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-request-time:
      - '0.028'
    status:
      code: 200
      message: OK
version: 1
