version: 1
content:
- group:
    name: hdinsight
    summary: Manage HDInsight resources.
- command:
    name: hdinsight create
    summary: Creates a new cluster.
    examples:
    - summary: Create a cluster with an existing storage account.
      command: |-
        az hdinsight create -t spark -g MyResourceGroup -n MyCluster \
        -p "HttpPassword1234!" \
        --storage-account MyStorageAccount
    - summary: Create a cluster with Enterprise Security Package.
      command: |-
        az hdinsight create -t spark -g MyResourceGroup -n MyCluster \
        -p "HttpPassword1234!" \
        --storage-account MyStorageAccount \
        --subnet "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MyRG/providers/Microsoft.Network/virtualNetworks/MyVnet/subnets/subnet1" \
        --domain "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/MyRG/providers/Microsoft.AAD/domainServices/MyDomain.onmicrosoft.com" \
        --assign-identity "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/MyMsiRG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/MyMSI" \
        --cluster-admin-account MyAdminAccount@MyDomain.onmicrosoft.com
    - summary: Create a Kafka cluster with disk encryption. See https://docs.microsoft.com/en-us/azure/hdinsight/kafka/apache-kafka-byok.
      command: |-
        az hdinsight create -t kafka -g MyResourceGroup -n MyCluster \
        -p "HttpPassword1234!" --workernode-data-disks-per-node 2 \
        --storage-account MyStorageAccount \
        --encryption-key-name kafkaClusterKey \
        --encryption-key-version 00000000000000000000000000000000 \
        --encryption-vault-uri https://MyKeyVault.vault.azure.net \
        --assign-identity MyMSI
- command:
    name: hdinsight list
    summary: List clusters in the resource group or subscription.
- command:
    name: hdinsight wait
    summary: Place the CLI in a waiting state until an operation is complete.
- command:
    name: hdinsight rotate-disk-encryption-key
    summary: Rotate disk encryption key of the specified HDInsight cluster.
- group:
    name: hdinsight application
    summary: Manage HDInsight applications.
- command:
    name: hdinsight application create
    summary: Create an application for a HDInsight cluster.
    examples:
    - summary: Create an application with a script URI.
      command: |-
        az hdinsight application create -g MyResourceGroup -n MyCluster \
        --application-name MyApplication \
        --script-uri https://path/to/install/script.sh \
        --script-action-name MyScriptAction \
        --script-parameters '"-option value"'
    - summary: Create an application with a script URI and specified edge node size.
      command: |-
        az hdinsight application create -g MyResourceGroup -n MyCluster \
        --application-name MyApplication \
        --script-uri https://path/to/install/script.sh \
        --script-action-name MyScriptAction \
        --script-parameters '"-option value"' \
        --edgenode-size Standard_D4_v2
- command:
    name: hdinsight application wait
    summary: Place the CLI in a waiting state until an operation is complete.
- group:
    name: hdinsight oms
    summary: Manage HDInsight Operations Management Suite (OMS).
- command:
    name: hdinsight oms enable
    summary: Enables the Operations Management Suite (OMS) on the HDInsight cluster.
- group:
    name: hdinsight script-action
    summary: Manage HDInsight script actions.
- command:
    name: hdinsight script-action execute
    summary: Executes script actions on the specified HDInsight cluster.
- command:
    name: hdinsight script-action list
    summary: Lists script actions for the specified cluster.
    examples:
    - summary: Lists all the persisted script actions for the specified cluster.
      command: |-
        az hdinsight script-action list -n MyCluster -g MyResourceGroup --persisted
    - summary: Lists all scripts' execution history for the specified cluster.
      command: |-
        az hdinsight script-action list -n MyCluster -g MyResourceGroup
