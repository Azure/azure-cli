interactions:
- request:
    body: '{"location": "eastus2", "properties": {"addressSpace": {"addressPrefixes":
      ["10.0.0.0/16"]}, "enableDdosProtection": false, "enableVmProtection": false}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      Content-Length:
      - '153'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000008\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008\",\r\n
        \ \"etag\": \"W/\\\"af3290fa-40b2-4614-9215-986688ac2574\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Updating\",\r\n    \"resourceGuid\":
        \"2e4bfea6-d211-4f41-9dd8-785c7c2453e8\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/cf06aff6-ef17-4f49-b8f2-8f471775d2ef?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '655'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - dc2b5bd9-767a-48f5-9bb1-55a982ca2b82
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/cf06aff6-ef17-4f49-b8f2-8f471775d2ef?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 7ef573d9-6235-4cb7-8b9f-a3f7345b9b6f
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/cf06aff6-ef17-4f49-b8f2-8f471775d2ef?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 72fe4372-59af-499a-bf09-644e9f41976f
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000008\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008\",\r\n
        \ \"etag\": \"W/\\\"574c1996-11f4-4092-8a0e-f300f20564a4\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"resourceGuid\":
        \"2e4bfea6-d211-4f41-9dd8-785c7c2453e8\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '656'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:50 GMT
      etag:
      - W/"574c1996-11f4-4092-8a0e-f300f20564a4"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 00989d9c-1c6a-43c8-9ecc-55acfe470e70
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "cli-test-subnet-000011", "properties": {"addressPrefix": "10.0.0.0/21",
      "serviceEndpoints": [{"service": "Microsoft.KeyVault"}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      Content-Length:
      - '139'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000011\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011\",\r\n
        \ \"etag\": \"W/\\\"84fac6fa-4c9a-43ba-826c-02b43ce12c54\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Updating\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Updating\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/bdaabff7-9e4c-457c-9404-f737402af3b9?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '779'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - df3d8f03-a11b-4a67-9cc7-e68b1f8c079b
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/bdaabff7-9e4c-457c-9404-f737402af3b9?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:30:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 163b7ae6-ffa3-41b3-8d3e-0e8c2aecd9a4
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/bdaabff7-9e4c-457c-9404-f737402af3b9?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - b1b7743f-ab6e-4a13-b238-d422cd241003
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000011\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011\",\r\n
        \ \"etag\": \"W/\\\"63a3e324-ced6-4c99-8758-79be0d00f272\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:03 GMT
      etag:
      - W/"63a3e324-ced6-4c99-8758-79be0d00f272"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 2324c321-eb68-4fa4-b5ff-5a354a8fd43a
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000011\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011\",\r\n
        \ \"etag\": \"W/\\\"63a3e324-ced6-4c99-8758-79be0d00f272\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:05 GMT
      etag:
      - W/"63a3e324-ced6-4c99-8758-79be0d00f272"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - f1b8752f-ffd0-4bbb-ac45-7bbbfbe794e6
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000003?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000003''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:09 GMT
      odata-version:
      - '4.0'
      request-id:
      - cae86d87-8676-4583-b1ef-7efeb9108b62
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"001","RoleInstance":"SI2PEPF000039CF"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:31:10 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000003"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 90}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": ["1.2.3.4/32", "2.3.4.0/24"]}, "accessPolicies":
      {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId":
      "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys": ["all"], "secrets":
      ["all"], "certificates": ["all"], "storage": ["all"]}}]}, "virtualNetworkRules":
      {"value": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},
      "publicNetworkAccess": {"value": null}, "skuName": {"value": null}, "tags":
      {"value": null}, "apiVersion": {"value": "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7476'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_ZusagFpfXaVnxENie4bCSejs4WE02qND","name":"keyvault_deploy_ZusagFpfXaVnxENie4bCSejs4WE02qND","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000003"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:31:16.6995523Z","duration":"PT0.0009884S","correlationId":"81ce796c-f013-40ec-9233-fb594c3909e2","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_ZusagFpfXaVnxENie4bCSejs4WE02qND/operationStatuses/08585156422119367542?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156422119367542?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156422119367542?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_ZusagFpfXaVnxENie4bCSejs4WE02qND","name":"keyvault_deploy_ZusagFpfXaVnxENie4bCSejs4WE02qND","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000003"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:31:46.0479042Z","duration":"PT29.3493403S","correlationId":"81ce796c-f013-40ec-9233-fb594c3909e2","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000003"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000003"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2508'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000003?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000003","name":"cli-test-kv-nr-000003","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:31:22.852Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:31:22.852Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Allow","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"}],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-kv-nr-000003.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1376'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000004?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000004''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:31:52 GMT
      odata-version:
      - '4.0'
      request-id:
      - dc991360-c3a8-4eaf-aad7-732c8e04aa4f
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"001","RoleInstance":"SI2PEPF00000BC4"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:31:53 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000004"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 90}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": ["1.2.3.4/32", "2.3.4.0/24"]}, "accessPolicies":
      {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId":
      "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys": ["all"], "secrets":
      ["all"], "certificates": ["all"], "storage": ["all"]}}]}, "virtualNetworkRules":
      {"value": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},
      "publicNetworkAccess": {"value": null}, "skuName": {"value": null}, "tags":
      {"value": null}, "apiVersion": {"value": "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7476'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_E9J8spkdwQ6jH6NRdRhrYkdv1JJYeBjn","name":"keyvault_deploy_E9J8spkdwQ6jH6NRdRhrYkdv1JJYeBjn","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000004"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:32:00.8892864Z","duration":"PT0.0004499S","correlationId":"9d98210e-9781-4aa1-8569-2808cca62d00","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_E9J8spkdwQ6jH6NRdRhrYkdv1JJYeBjn/operationStatuses/08585156421677152686?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:32:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156421677152686?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:32:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156421677152686?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:32:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156421677152686?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_E9J8spkdwQ6jH6NRdRhrYkdv1JJYeBjn","name":"keyvault_deploy_E9J8spkdwQ6jH6NRdRhrYkdv1JJYeBjn","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000004"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:32:40.6556706Z","duration":"PT39.7668341S","correlationId":"9d98210e-9781-4aa1-8569-2808cca62d00","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000004"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000004"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2508'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000004?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000004","name":"cli-test-kv-nr-000004","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:32:06.865Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:32:06.865Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Allow","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"}],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-kv-nr-000004.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1376'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "properties": {"addressSpace": {"addressPrefixes":
      ["10.0.0.0/16"]}, "enableDdosProtection": false, "enableVmProtection": false}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      Content-Length:
      - '153'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000009\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009\",\r\n
        \ \"etag\": \"W/\\\"a4953e14-724a-4d45-a801-386b1958eaab\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Updating\",\r\n    \"resourceGuid\":
        \"19bc08ea-7d41-4450-8585-c7cfca768765\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/85ad83a6-0f0a-45d2-bd6b-9054369a1930?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '655'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 1ca6b542-4ed4-4cad-8f56-56636d3d350e
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: ''
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/85ad83a6-0f0a-45d2-bd6b-9054369a1930?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 50796f63-954b-401d-8672-bcb53fee6d52
    status:
      code: 200
      message: ''
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/85ad83a6-0f0a-45d2-bd6b-9054369a1930?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 8e10b1aa-187d-4284-a4a4-383b9b39e541
    status:
      code: 200
      message: ''
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000009\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009\",\r\n
        \ \"etag\": \"W/\\\"b52d370b-7794-4f93-9eb9-ac98e1aa8e5d\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"resourceGuid\":
        \"19bc08ea-7d41-4450-8585-c7cfca768765\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '656'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:22 GMT
      etag:
      - W/"b52d370b-7794-4f93-9eb9-ac98e1aa8e5d"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 5a423b43-4c66-4625-a65f-986e6a751b92
    status:
      code: 200
      message: ''
- request:
    body: '{"name": "cli-test-subnet-000012", "properties": {"addressPrefix": "10.0.0.0/21",
      "serviceEndpoints": [{"service": "Microsoft.KeyVault"}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      Content-Length:
      - '139'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000012\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012\",\r\n
        \ \"etag\": \"W/\\\"3e977269-b892-42cd-9988-6752772ea9af\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Updating\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Updating\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/63ba9877-efc5-411c-8551-b74f92ff20e6?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '779'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - d549c8d6-f720-4851-980c-8030863406a0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/63ba9877-efc5-411c-8551-b74f92ff20e6?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - d8cf7b46-7946-4db7-a66e-0baafb4f4265
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/63ba9877-efc5-411c-8551-b74f92ff20e6?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 7ad6b776-491c-4ad5-a018-7f2a1e7f03e9
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000012\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012\",\r\n
        \ \"etag\": \"W/\\\"0815772b-1ea1-4150-8123-c5f2374eb797\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:35 GMT
      etag:
      - W/"0815772b-1ea1-4150-8123-c5f2374eb797"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - bfc81b79-b4f8-4b05-ab79-0816117526e7
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000012\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012\",\r\n
        \ \"etag\": \"W/\\\"0815772b-1ea1-4150-8123-c5f2374eb797\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:38 GMT
      etag:
      - W/"0815772b-1ea1-4150-8123-c5f2374eb797"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - c51a847f-ede0-4f1e-9d21-7efd49104e93
    status:
      code: 200
      message: ''
- request:
    body: '{"location": "eastus2", "properties": {"addressSpace": {"addressPrefixes":
      ["10.0.0.0/16"]}, "enableDdosProtection": false, "enableVmProtection": false}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      Content-Length:
      - '153'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000010\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010\",\r\n
        \ \"etag\": \"W/\\\"e1a1ed30-3133-45c6-ab21-63c4c6f6c631\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Updating\",\r\n    \"resourceGuid\":
        \"74e14ecc-f166-47e0-bc77-b3c364b6bd7e\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/93ee739c-3ba4-4df6-afcc-e39cf5659fb5?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '655'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 4c40dcee-d95d-457b-a044-5efe025ca582
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: ''
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/93ee739c-3ba4-4df6-afcc-e39cf5659fb5?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - a3e693f8-6a32-496f-9338-d438ea557b4b
    status:
      code: 200
      message: ''
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-vnet-000010\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010\",\r\n
        \ \"etag\": \"W/\\\"24a970c6-b5b5-4cc1-99d5-c5de669f08f4\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"eastus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"resourceGuid\":
        \"74e14ecc-f166-47e0-bc77-b3c364b6bd7e\",\r\n    \"addressSpace\": {\r\n      \"addressPrefixes\":
        [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n    },\r\n    \"subnets\": [],\r\n
        \   \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\": false\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '656'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:45 GMT
      etag:
      - W/"24a970c6-b5b5-4cc1-99d5-c5de669f08f4"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - e6b2348d-2cfe-4e5b-b750-5c8c611659d7
    status:
      code: 200
      message: ''
- request:
    body: '{"name": "cli-test-subnet-000013", "properties": {"addressPrefix": "10.0.0.0/21",
      "serviceEndpoints": [{"service": "Microsoft.KeyVault"}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      Content-Length:
      - '139'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000013\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013\",\r\n
        \ \"etag\": \"W/\\\"49ff28e9-640c-41b5-8428-ea1b82ef6f4c\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Updating\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Updating\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/d0d9dd57-cc6b-46d5-888b-0c7d39e57dc1?api-version=2022-01-01
      cache-control:
      - no-cache
      content-length:
      - '779'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 0dd32f5e-334f-4387-9d17-17685f25d19d
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/d0d9dd57-cc6b-46d5-888b-0c7d39e57dc1?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - d151a807-705c-42b8-8f5f-58a350be2832
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/eastus2/operations/d0d9dd57-cc6b-46d5-888b-0c7d39e57dc1?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 2bb80ac1-f172-4be1-9e18-0a3b540d3598
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name --address-prefixes --service-endpoints
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000013\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013\",\r\n
        \ \"etag\": \"W/\\\"f2f48a80-af06-4c0a-840c-be59e61cba34\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:33:59 GMT
      etag:
      - W/"f2f48a80-af06-4c0a-840c-be59e61cba34"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 86e90c6f-af9d-4e0f-80cb-7528c57829e8
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --vnet-name --name
      User-Agent:
      - AZURECLI/2.49.0 (PIP) (AAZ) azsdk-python-core/1.26.0 Python/3.7.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"cli-test-subnet-000013\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013\",\r\n
        \ \"etag\": \"W/\\\"f2f48a80-af06-4c0a-840c-be59e61cba34\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/21\",\r\n
        \   \"serviceEndpoints\": [\r\n      {\r\n        \"provisioningState\": \"Succeeded\",\r\n
        \       \"service\": \"Microsoft.KeyVault\",\r\n        \"locations\": [\r\n
        \         \"*\"\r\n        ]\r\n      }\r\n    ],\r\n    \"delegations\":
        [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n    \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n  },\r\n  \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '781'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:01 GMT
      etag:
      - W/"f2f48a80-af06-4c0a-840c-be59e61cba34"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - cd42b9bf-b959-460e-87db-bd89d8ea09ee
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000005?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000005''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:04 GMT
      odata-version:
      - '4.0'
      request-id:
      - f568bf0d-3989-4136-9fe5-98432733f8ca
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A4A"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:34:04 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000005"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 90}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": ["3.4.5.0/24", "4.5.0.0/16"]}, "accessPolicies":
      {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId":
      "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys": ["all"], "secrets":
      ["all"], "certificates": ["all"], "storage": ["all"]}}]}, "virtualNetworkRules":
      {"value": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012",
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},
      "publicNetworkAccess": {"value": null}, "skuName": {"value": null}, "tags":
      {"value": null}, "apiVersion": {"value": "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7679'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_rCUz6VdLtBJah7qXkXwVHk1hWPpi63HV","name":"keyvault_deploy_rCUz6VdLtBJah7qXkXwVHk1hWPpi63HV","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000005"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:34:11.6701999Z","duration":"PT0.0004199S","correlationId":"6a7dc7a8-e7cc-49e0-8578-c5531f2ef35d","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_rCUz6VdLtBJah7qXkXwVHk1hWPpi63HV/operationStatuses/08585156420368686871?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2310'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156420368686871?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156420368686871?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_rCUz6VdLtBJah7qXkXwVHk1hWPpi63HV","name":"keyvault_deploy_rCUz6VdLtBJah7qXkXwVHk1hWPpi63HV","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000005"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:34:40.2491009Z","duration":"PT28.5793209S","correlationId":"6a7dc7a8-e7cc-49e0-8578-c5531f2ef35d","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000005"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000005"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2710'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000005?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000005","name":"cli-test-kv-nr-000005","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:34:15.809Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:34:15.809Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Allow","ipRules":[{"value":"3.4.5.0/24"},{"value":"4.5.0.0/16"}],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-kv-nr-000005.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1585'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000006?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000006''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:48 GMT
      odata-version:
      - '4.0'
      request-id:
      - 420239f9-49d6-4c76-87dd-0ddb938737ae
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A46"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:34:48 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000006"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 90}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": ["1.2.3.4/32", "2.3.4.0/24", "3.4.5.0/24", "4.5.0.0/16"]},
      "accessPolicies": {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}]},
      "virtualNetworkRules": {"value": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011",
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012",
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},
      "publicNetworkAccess": {"value": null}, "skuName": {"value": null}, "tags":
      {"value": null}, "apiVersion": {"value": "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7910'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_pUNtliIBXJ9vUWmvQ58NSghn37WPolVL","name":"keyvault_deploy_pUNtliIBXJ9vUWmvQ58NSghn37WPolVL","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000006"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24","3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:34:55.955477Z","duration":"PT0.0001202S","correlationId":"eb8ea28b-b8cb-44e3-838b-e7227ed36d31","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_pUNtliIBXJ9vUWmvQ58NSghn37WPolVL/operationStatuses/08585156419926439988?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2537'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419926439988?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:34:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419926439988?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_pUNtliIBXJ9vUWmvQ58NSghn37WPolVL","name":"keyvault_deploy_pUNtliIBXJ9vUWmvQ58NSghn37WPolVL","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000006"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24","3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:35:24.9283142Z","duration":"PT28.9729574S","correlationId":"eb8ea28b-b8cb-44e3-838b-e7227ed36d31","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000006"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000006"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2938'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000006?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000006","name":"cli-test-kv-nr-000006","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:35:02.282Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:35:02.282Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Allow","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"},{"value":"4.5.0.0/16"}],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-kv-nr-000006.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1840'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000007?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000007''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:31 GMT
      odata-version:
      - '4.0'
      request-id:
      - 7835f811-ab62-4457-a978-2b519c4a9b8c
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A46"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:35:32 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000007"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 90}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": ["1.2.3.4/32", "2.3.4.0/24", "3.4.5.0/24", "4.5.0.0/16"]},
      "accessPolicies": {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}]},
      "virtualNetworkRules": {"value": ["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011",
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012",
      "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},
      "publicNetworkAccess": {"value": null}, "skuName": {"value": null}, "tags":
      {"value": null}, "apiVersion": {"value": "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7910'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_DKYSHLrfy1wv0Fl3zVocOIfyusgGsyvF","name":"keyvault_deploy_DKYSHLrfy1wv0Fl3zVocOIfyusgGsyvF","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000007"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24","3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:35:40.7005032Z","duration":"PT0.0003082S","correlationId":"5766d58a-2322-44a9-81d4-e6a6bace24d6","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_DKYSHLrfy1wv0Fl3zVocOIfyusgGsyvF/operationStatuses/08585156419478428319?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2538'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419478428319?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:35:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419478428319?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_DKYSHLrfy1wv0Fl3zVocOIfyusgGsyvF","name":"keyvault_deploy_DKYSHLrfy1wv0Fl3zVocOIfyusgGsyvF","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000007"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":90},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":["1.2.3.4/32","2.3.4.0/24","3.4.5.0/24","4.5.0.0/16"]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":["/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012","/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Network/virtualNetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"Standard"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:36:04.84221Z","duration":"PT24.142015S","correlationId":"5766d58a-2322-44a9-81d4-e6a6bace24d6","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000007"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000007"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2935'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -l -g --network-acls --network-acls-ips --network-acls-vnets
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000007?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000007","name":"cli-test-kv-nr-000007","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:35:45.626Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:35:45.626Z"},"properties":{"sku":{"family":"A","name":"Standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Allow","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"},{"value":"4.5.0.0/16"}],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000009/subnets/cli-test-subnet-000012"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000010/subnets/cli-test-subnet-000013"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-kv-nr-000007.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1840'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"error":{"code":"ResourceNotFound","message":"The Resource ''Microsoft.KeyVault/vaults/cli-test-kv-nr-000002''
        under resource group ''cli_test_keyvault_network_rule000001'' was not found.
        For more details please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - python/3.7.9 (Windows-10-10.0.22621-SP0) AZURECLI/2.49.0 (PIP)
    method: GET
    uri: https://graph.microsoft.com/v1.0/me
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#users/$entity","businessPhones":[],"displayName":"Yishi
        Wang","givenName":null,"jobTitle":null,"mail":"yishiwang@microsoft.com","mobilePhone":null,"officeLocation":null,"preferredLanguage":null,"surname":null,"userPrincipalName":"yishiwang_microsoft.com#EXT#@AzureSDKTeam.onmicrosoft.com","id":"3707fb2f-ac10-4591-a04f-8b0d786ea37d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '395'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:16 GMT
      odata-version:
      - '4.0'
      request-id:
      - 90bede9e-7796-4717-84cd-cf2485bdb25c
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF0000EF91"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.26.0
    method: GET
    uri: https://yssa.blob.core.windows.net/cli/keyvault_creation_arm_template.json
  response:
    body:
      string: "{\n    \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
        \   \"contentVersion\": \"1.0.0.0\",\n    \"parameters\": {\n        \"vaultName\":
        {\n            \"type\": \"string\",\n            \"defaultValue\": \"[concat('keyvault-',
        uniqueString(resourceGroup().id))]\",\n            \"metadata\": {\n                \"description\":
        \"Specifies the name of the KeyVault, this value must be globally unique.\"\n
        \           }\n        },\n        \"location\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"[resourceGroup().location]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure location where the key vault should be created.\"\n            }\n
        \       },\n        \"enabledForDeployment\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": false,\n            \"metadata\": {\n                \"description\":
        \"Specifies whether Azure Virtual Machines are permitted to retrieve certificates
        stored as secrets from the key vault.\"\n            }\n        },\n        \"enabledForDiskEncryption\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Disk Encryption is permitted to retrieve secrets from the vault
        and unwrap keys.\"\n            }\n        },\n        \"enabledForTemplateDeployment\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        whether Azure Resource Manager is permitted to retrieve secrets from the key
        vault.\"\n            }\n        },\n        \"enablePurgeProtection\": {\n
        \           \"type\": \"bool\",\n            \"defaultValue\": false,\n            \"metadata\":
        {\n                \"description\": \"Property specifying whether protection
        against purge is enabled for this vault.  This property does not accept false
        but enabled here to allow for this to be optional, if false, the property
        will not be set.\"\n            }\n        },\n        \"enableRbacAuthorization\":
        {\n            \"type\": \"bool\",\n            \"defaultValue\": false,\n
        \           \"metadata\": {\n                \"description\": \"Property that
        controls how data actions are authorized. When true, the key vault will use
        Role Based Access Control (RBAC) for authorization of data actions, and the
        access policies specified in vault properties will be ignored.\"\n            }\n
        \       },\n        \"enableSoftDelete\": {\n            \"type\": \"bool\",\n
        \           \"defaultValue\": true,\n            \"metadata\": {\n                \"description\":
        \"Property to specify whether the 'soft delete' functionality is enabled for
        this key vault. If it's not set to any value(true or false) when creating
        new key vault, it will be set to true by default. Once set to true, it cannot
        be reverted to false.\"\n            }\n        },\n        \"softDeleteRetentionInDays\":
        {\n            \"type\": \"int\",\n            \"defaultValue\": 7,\n            \"minValue\":
        7,\n            \"maxValue\": 90,\n            \"metadata\": {\n                \"description\":
        \"softDelete data retention days, only used if enableSoftDelete is true. It
        accepts >=7 and <=90.\"\n            }\n        },\n        \"tenantId\":
        {\n            \"type\": \"string\",\n\t\t\t\"defaultValue\": \"[subscription().tenantId]\",\n
        \           \"metadata\": {\n                \"description\": \"Specifies
        the Azure Active Directory tenant ID that should be used for authenticating
        requests to the key vault. Get it by using Get-AzSubscription cmdlet.\"\n
        \           }\n        },\n        \"networkRuleBypassOptions\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"AzureServices\",\n            \"allowedValues\":
        [\n                \"None\",\n                \"AzureServices\"\n            ],\n
        \           \"metadata\": {\n                \"description\": \"Tells what
        traffic can bypass network rules. This can be 'AzureServices' or 'None'. If
        not specified the default is 'AzureServices'.\"\n            }\n        },\n
        \       \"NetworkRuleAction\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Allow\",\n            \"allowedValues\": [\n                \"Allow\",\n
        \               \"Deny\"\n            ],\n            \"metadata\": {\n                \"description\":
        \"The default action when no rule from ipRules and from virtualNetworkRules
        match. This is only used after the bypass property has been evaluated.\"\n
        \           }\n        },\n        \"ipRules\": {\n            \"type\": \"array\",\n
        \           \"defaultValue\": [\n            ],\n            \"metadata\":
        {\n                \"description\": \"An array of IPv4 addresses or rangea
        in CIDR notation, e.g. '124.56.78.91' (simple IP address) or '124.56.78.0/24'
        (all addresses that start with 124.56.78).\"\n            }\n        },\n
        \       \"accessPolicies\": {\n            \"type\": \"array\",\n            \"defaultValue\":
        [\n            ],\n            \"metadata\": {\n                \"description\":
        \"An complex object array that contains the complete definition of the access
        policy.\"\n            }\n        },\n        \"virtualNetworkRules\": {\n
        \           \"type\": \"array\",\n            \"defaultValue\": [\n            ],\n
        \           \"metadata\": {\n                \"description\": \"An array for
        resourceIds for the virtualNetworks allowed to access the vault.\"\n            }\n
        \       },\n        \"publicNetworkAccess\": {\n            \"type\": \"string\",\n
        \           \"defaultValue\": \"\",\n            \"metadata\": {\n                \"description\":
        \"Property that controls permission for data plane traffic coming from public
        networks while private endpoint is enabled.\"\n            }\n        },\n
        \       \"skuName\": {\n            \"type\": \"string\",\n            \"defaultValue\":
        \"Standard\",\n            \"allowedValues\": [\n                \"Standard\",\n
        \               \"Premium\",\n\t\t\t\t\"standard\",\n\t\t\t\t\"premium\"\n
        \           ],\n            \"metadata\": {\n                \"description\":
        \"Specifies whether the key vault is a standard vault or a premium vault.\"\n
        \           }\n        },\n        \"tags\": {\n            \"type\": \"object\",\n
        \           \"defaultValue\": {\n            },\n            \"metadata\":
        {\n                \"description\": \"Tags to be assigned to the KeyVault.\"\n
        \           }\n        },\n        \"apiVersion\": {\n            \"type\":
        \"string\",\n            \"defaultValue\": \"2019-09-01\",\n            \"metadata\":
        {\n                \"description\": \"The API version used to call Keyvault
        Service.\"\n            }\n        }\n    },\n    \"variables\": {\n    },\n
        \   \"resources\": [\n        {\n            \"name\": \"[parameters('vaultName')]\",\n
        \           \"type\": \"Microsoft.KeyVault/vaults\",\n            \"apiVersion\":
        \"[parameters('apiVersion')]\",\n            \"location\": \"[parameters('location')]\",\n
        \           \"tags\": \"[parameters('tags')]\",\n            \"properties\":
        {\n                \"tenantId\": \"[parameters('tenantId')]\",\n                \"sku\":
        {\n                    \"family\": \"A\",\n                    \"name\": \"[parameters('skuName')]\"\n
        \               },\n                \"copy\": [\n                    {\n                        \"name\":
        \"accessPolicies\",\n                        \"count\": \"[length(parameters('accessPolicies'))]\",\n
        \                       \"input\": {\n                            \"tenantId\":
        \"[parameters('accessPolicies')[copyIndex('accessPolicies')].tenantId]\",\n
        \                           \"objectId\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].objectId]\",\n
        \                           \"permissions\": \"[parameters('accessPolicies')[copyIndex('accessPolicies')].permissions]\"\n
        \                       }\n                    }\n                ],\n                \"publicNetworkAccess\":
        \"[parameters('publicNetworkAccess')]\",\n                \"enabledForDeployment\":
        \"[parameters('enabledForDeployment')]\",\n                \"enabledForDiskEncryption\":
        \"[parameters('enabledForDiskEncryption')]\",\n                \"enabledForTemplateDeployment\":
        \"[parameters('enabledForTemplateDeployment')]\",\n                \"enableSoftDelete\":
        \"[parameters('enableSoftDelete')]\",\n                \"softDeleteRetentionInDays\":
        \"[if(parameters('enableSoftDelete'), parameters('softDeleteRetentionInDays'),
        json('null'))]\",\n                \"enableRbacAuthorization\": \"[parameters('enableRbacAuthorization')]\",\n
        \               \"enablePurgeProtection\": \"[if(parameters('enablePurgeProtection'),
        parameters('enablePurgeProtection'), json('null'))]\",\n                \"networkAcls\":
        {\n                    \"bypass\": \"[parameters('networkRuleBypassOptions')]\",\n
        \                   \"defaultAction\": \"[parameters('networkRuleAction')]\",\n
        \                   \"copy\": [\n                        {\n                            \"name\":
        \"ipRules\",\n                            \"count\": \"[length(parameters('ipRules'))]\",\n
        \                           \"input\": {\n                                \"value\":
        \"[parameters('ipRules')[copyIndex('ipRules')]]\"\n                            }\n
        \                       },\n                        {\n                            \"name\":
        \"virtualNetworkRules\",\n                            \"count\": \"[length(parameters('virtualNetworkRules'))]\",\n
        \                           \"input\": {\n                                \"id\":
        \"[parameters('virtualNetworkRules')[copyIndex('virtualNetworkRules')]]\"\n
        \                           }\n                        }\n                    ]\n
        \               }\n            }\n        }\n    ],\n    \"outputs\": {\n
        \       \"vaultName\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('vaultName')]\"\n        },\n        \"vaultResourceGroup\":
        {\n            \"type\": \"string\",\n            \"value\": \"[resourceGroup().name]\"\n
        \       },\n        \"location\": {\n            \"type\": \"string\",\n            \"value\":
        \"[parameters('location')]\"\n        }\n    }\n}"
    headers:
      content-length:
      - '9603'
      content-md5:
      - 7eOFqmzJ5KEBw0Rtrrwkmw==
      content-type:
      - application/json
      date:
      - Mon, 05 Jun 2023 11:36:17 GMT
      etag:
      - '0x8DB65B836C7CAD8'
      last-modified:
      - Mon, 05 Jun 2023 11:30:07 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-type:
      - BlockBlob
      x-ms-lease-status:
      - unlocked
      x-ms-version:
      - '2009-09-19'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"vaultName": {"type": "string",
      "defaultValue": "[concat(''keyvault-'', uniqueString(resourceGroup().id))]",
      "metadata": {"description": "Specifies the name of the KeyVault, this value
      must be globally unique."}}, "location": {"type": "string", "defaultValue":
      "[resourceGroup().location]", "metadata": {"description": "Specifies the Azure
      location where the key vault should be created."}}, "enabledForDeployment":
      {"type": "bool", "defaultValue": false, "metadata": {"description": "Specifies
      whether Azure Virtual Machines are permitted to retrieve certificates stored
      as secrets from the key vault."}}, "enabledForDiskEncryption": {"type": "bool",
      "defaultValue": false, "metadata": {"description": "Specifies whether Azure
      Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."}},
      "enabledForTemplateDeployment": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Specifies whether Azure Resource Manager is permitted to retrieve
      secrets from the key vault."}}, "enablePurgeProtection": {"type": "bool", "defaultValue":
      false, "metadata": {"description": "Property specifying whether protection against
      purge is enabled for this vault.  This property does not accept false but enabled
      here to allow for this to be optional, if false, the property will not be set."}},
      "enableRbacAuthorization": {"type": "bool", "defaultValue": false, "metadata":
      {"description": "Property that controls how data actions are authorized. When
      true, the key vault will use Role Based Access Control (RBAC) for authorization
      of data actions, and the access policies specified in vault properties will
      be ignored."}}, "enableSoftDelete": {"type": "bool", "defaultValue": true, "metadata":
      {"description": "Property to specify whether the ''soft delete'' functionality
      is enabled for this key vault. If it''s not set to any value(true or false)
      when creating new key vault, it will be set to true by default. Once set to
      true, it cannot be reverted to false."}}, "softDeleteRetentionInDays": {"type":
      "int", "defaultValue": 7, "minValue": 7, "maxValue": 90, "metadata": {"description":
      "softDelete data retention days, only used if enableSoftDelete is true. It accepts
      >=7 and <=90."}}, "tenantId": {"type": "string", "defaultValue": "[subscription().tenantId]",
      "metadata": {"description": "Specifies the Azure Active Directory tenant ID
      that should be used for authenticating requests to the key vault. Get it by
      using Get-AzSubscription cmdlet."}}, "networkRuleBypassOptions": {"type": "string",
      "defaultValue": "AzureServices", "allowedValues": ["None", "AzureServices"],
      "metadata": {"description": "Tells what traffic can bypass network rules. This
      can be ''AzureServices'' or ''None''. If not specified the default is ''AzureServices''."}},
      "NetworkRuleAction": {"type": "string", "defaultValue": "Allow", "allowedValues":
      ["Allow", "Deny"], "metadata": {"description": "The default action when no rule
      from ipRules and from virtualNetworkRules match. This is only used after the
      bypass property has been evaluated."}}, "ipRules": {"type": "array", "defaultValue":
      [], "metadata": {"description": "An array of IPv4 addresses or rangea in CIDR
      notation, e.g. ''124.56.78.91'' (simple IP address) or ''124.56.78.0/24'' (all
      addresses that start with 124.56.78)."}}, "accessPolicies": {"type": "array",
      "defaultValue": [], "metadata": {"description": "An complex object array that
      contains the complete definition of the access policy."}}, "virtualNetworkRules":
      {"type": "array", "defaultValue": [], "metadata": {"description": "An array
      for resourceIds for the virtualNetworks allowed to access the vault."}}, "publicNetworkAccess":
      {"type": "string", "defaultValue": "", "metadata": {"description": "Property
      that controls permission for data plane traffic coming from public networks
      while private endpoint is enabled."}}, "skuName": {"type": "string", "defaultValue":
      "Standard", "allowedValues": ["Standard", "Premium", "standard", "premium"],
      "metadata": {"description": "Specifies whether the key vault is a standard vault
      or a premium vault."}}, "tags": {"type": "object", "defaultValue": {}, "metadata":
      {"description": "Tags to be assigned to the KeyVault."}}, "apiVersion": {"type":
      "string", "defaultValue": "2019-09-01", "metadata": {"description": "The API
      version used to call Keyvault Service."}}}, "variables": {}, "resources": [{"name":
      "[parameters(''vaultName'')]", "type": "Microsoft.KeyVault/vaults", "apiVersion":
      "[parameters(''apiVersion'')]", "location": "[parameters(''location'')]", "tags":
      "[parameters(''tags'')]", "properties": {"tenantId": "[parameters(''tenantId'')]",
      "sku": {"family": "A", "name": "[parameters(''skuName'')]"}, "copy": [{"name":
      "accessPolicies", "count": "[length(parameters(''accessPolicies''))]", "input":
      {"tenantId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].tenantId]",
      "objectId": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].objectId]",
      "permissions": "[parameters(''accessPolicies'')[copyIndex(''accessPolicies'')].permissions]"}}],
      "publicNetworkAccess": "[parameters(''publicNetworkAccess'')]", "enabledForDeployment":
      null, "enabledForDiskEncryption": null, "enabledForTemplateDeployment": null,
      "enableSoftDelete": "[parameters(''enableSoftDelete'')]", "softDeleteRetentionInDays":
      "[if(parameters(''enableSoftDelete''), parameters(''softDeleteRetentionInDays''),
      json(''null''))]", "enableRbacAuthorization": null, "enablePurgeProtection":
      null, "networkAcls": {"bypass": "[parameters(''networkRuleBypassOptions'')]",
      "defaultAction": "[parameters(''networkRuleAction'')]", "copy": [{"name": "ipRules",
      "count": "[length(parameters(''ipRules''))]", "input": {"value": "[parameters(''ipRules'')[copyIndex(''ipRules'')]]"}},
      {"name": "virtualNetworkRules", "count": "[length(parameters(''virtualNetworkRules''))]",
      "input": {"id": "[parameters(''virtualNetworkRules'')[copyIndex(''virtualNetworkRules'')]]"}}]}}}],
      "outputs": {"vaultName": {"type": "string", "value": "[parameters(''vaultName'')]"},
      "vaultResourceGroup": {"type": "string", "value": "[resourceGroup().name]"},
      "location": {"type": "string", "value": "[parameters(''location'')]"}}}, "parameters":
      {"vaultName": {"value": "cli-test-kv-nr-000002"}, "location": {"value": "eastus2"},
      "enabledForDeployment": {"value": null}, "enabledForDiskEncryption": {"value":
      null}, "enabledForTemplateDeployment": {"value": null}, "enablePurgeProtection":
      {"value": null}, "enableRbacAuthorization": {"value": null}, "softDeleteRetentionInDays":
      {"value": 7}, "tenantId": {"value": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},
      "networkRuleBypassOptions": {"value": null}, "NetworkRuleAction": {"value":
      null}, "ipRules": {"value": []}, "accessPolicies": {"value": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}]},
      "virtualNetworkRules": {"value": []}, "publicNetworkAccess": {"value": null},
      "skuName": {"value": "premium"}, "tags": {"value": null}, "apiVersion": {"value":
      "2023-02-01"}}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '7253'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_h6WzdfOruxPC6s3HyRf8FwXwmXG76v3l","name":"keyvault_deploy_h6WzdfOruxPC6s3HyRf8FwXwmXG76v3l","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000002"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":7},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":[]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":[]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"premium"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-06-05T11:36:24.5597069Z","duration":"PT0.0005906S","correlationId":"ac65eeef-b31f-4dd5-ac7a-aef2895f57bd","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_h6WzdfOruxPC6s3HyRf8FwXwmXG76v3l/operationStatuses/08585156419039021617?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1880'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419039021617?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585156419039021617?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-resource/22.0.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.Resources/deployments/keyvault_deploy_h6WzdfOruxPC6s3HyRf8FwXwmXG76v3l","name":"keyvault_deploy_h6WzdfOruxPC6s3HyRf8FwXwmXG76v3l","type":"Microsoft.Resources/deployments","properties":{"templateHash":"17742154229977249707","parameters":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000002"},"location":{"type":"String","value":"eastus2"},"enabledForDeployment":{"type":"Bool","value":false},"enabledForDiskEncryption":{"type":"Bool","value":false},"enabledForTemplateDeployment":{"type":"Bool","value":false},"enablePurgeProtection":{"type":"Bool","value":false},"enableRbacAuthorization":{"type":"Bool","value":false},"enableSoftDelete":{"type":"Bool","value":true},"softDeleteRetentionInDays":{"type":"Int","value":7},"tenantId":{"type":"String","value":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"},"networkRuleBypassOptions":{"type":"String","value":"AzureServices"},"networkRuleAction":{"type":"String","value":"Allow"},"ipRules":{"type":"Array","value":[]},"accessPolicies":{"type":"Array","value":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}]},"virtualNetworkRules":{"type":"Array","value":[]},"publicNetworkAccess":{"type":"String","value":""},"skuName":{"type":"String","value":"premium"},"tags":{"type":"Object","value":{}},"apiVersion":{"type":"String","value":"2023-02-01"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-06-05T11:36:51.5293882Z","duration":"PT26.9702719S","correlationId":"ac65eeef-b31f-4dd5-ac7a-aef2895f57bd","providers":[{"namespace":"Microsoft.KeyVault","resourceTypes":[{"resourceType":"vaults","locations":["eastus2"]}]}],"dependencies":[],"outputs":{"vaultName":{"type":"String","value":"cli-test-kv-nr-000002"},"vaultResourceGroup":{"type":"String","value":"cli_test_keyvault_network_rule000001"},"location":{"type":"String","value":"eastus2"}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2280'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -l --sku --retention-days
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:36:31.508Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1018'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:36:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault update
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group --default-action
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:36:31.508Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1018'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny"}, "provisioningState": "Succeeded",
      "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault update
      Connection:
      - keep-alive
      Content-Length:
      - '659'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name --resource-group --default-action
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:02.025Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --subnet --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:02.025Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [], "virtualNetworkRules":
      [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},
      "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      Content-Length:
      - '910'
      Content-Type:
      - application/json
      ParameterSetName:
      - --subnet --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:05.819Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --subnet --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:05.819Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule list
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:05.819Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      ParameterSetName:
      - --subnet --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:05.819Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_keyvault_network_rule000001/providers/microsoft.network/virtualnetworks/cli-test-vnet-000008/subnets/cli-test-subnet-000011"}]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [], "virtualNetworkRules":
      []}, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      Content-Length:
      - '701'
      Content-Type:
      - application/json
      ParameterSetName:
      - --subnet --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:12.212Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:12.212Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [{"value": "1.2.3.4/32"}],
      "virtualNetworkRules": []}, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      Content-Length:
      - '724'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:14.838Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:14.838Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:14.838Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule list
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:14.838Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:14.838Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [], "virtualNetworkRules":
      []}, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      Content-Length:
      - '701'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:22.526Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:22.526Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [{"value": "1.2.3.4/32"}],
      "virtualNetworkRules": []}, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      Content-Length:
      - '724'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:24.303Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:24.303Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [], "virtualNetworkRules":
      []}, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      Content-Length:
      - '701'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:26.733Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:26.733Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1120'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [{"value": "1.2.3.4/32"},
      {"value": "2.3.4.0/24"}, {"value": "3.4.5.0/24"}], "virtualNetworkRules": []},
      "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      Content-Length:
      - '774'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:29.138Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:29.138Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [{"value": "1.2.3.4/32"},
      {"value": "2.3.4.0/24"}, {"value": "3.4.5.0/24"}, {"value": "4.5.0.0/16"}],
      "virtualNetworkRules": []}, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule add
      Connection:
      - keep-alive
      Content-Length:
      - '799'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:31.625Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"},{"value":"4.5.0.0/16"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1211'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:31.625Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"1.2.3.4/32"},{"value":"2.3.4.0/24"},{"value":"3.4.5.0/24"},{"value":"4.5.0.0/16"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1211'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus2", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "premium"}, "accessPolicies": [{"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "objectId": "3707fb2f-ac10-4591-a04f-8b0d786ea37d", "permissions": {"keys":
      ["all"], "secrets": ["all"], "certificates": ["all"], "storage": ["all"]}}],
      "vaultUri": "https://cli-test-kv-nr-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "networkAcls":
      {"bypass": "AzureServices", "defaultAction": "Deny", "ipRules": [{"value": "4.5.0.0/16"}],
      "virtualNetworkRules": []}, "provisioningState": "Succeeded", "publicNetworkAccess":
      "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault network-rule remove
      Connection:
      - keep-alive
      Content-Length:
      - '724'
      Content-Type:
      - application/json
      ParameterSetName:
      - --ip-address --name --resource-group
      User-Agent:
      - AZURECLI/2.49.0 (PIP) azsdk-python-azure-mgmt-keyvault/10.2.0 Python/3.7.9
        (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_keyvault_network_rule000001/providers/Microsoft.KeyVault/vaults/cli-test-kv-nr-000002","name":"cli-test-kv-nr-000002","type":"Microsoft.KeyVault/vaults","location":"eastus2","tags":{},"systemData":{"createdBy":"yishiwang@microsoft.com","createdByType":"User","createdAt":"2023-06-05T11:36:31.508Z","lastModifiedBy":"yishiwang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-06-05T11:37:34.006Z"},"properties":{"sku":{"family":"A","name":"premium"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","networkAcls":{"bypass":"AzureServices","defaultAction":"Deny","ipRules":[{"value":"4.5.0.0/16"}],"virtualNetworkRules":[]},"accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"3707fb2f-ac10-4591-a04f-8b0d786ea37d","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://cli-test-kv-nr-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1142'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 05 Jun 2023 11:37:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.785.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
version: 1
