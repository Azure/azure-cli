interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_create_rbac_sp_minimal000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:01:48 GMT
      duration:
      - '2308912'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - zvWoFjuE2ehmMVgbV3Cg2Jr+3wQYeCjyzG9gzD1iIS8=
      ocp-aad-session-key:
      - PRUQ5pIjUMHLeaQ5_pqIXZKHG3UBDvyCdjmvSg8P3ZtzQZugSPcQZ72wgCak2H8S_xXTGT978pPXegcoHpkuYYRRjvaV3_mT-RavuWyigIiQXoW7LvsRGO-CJzQo4uJziuSr5QVuJ74iDr1KAiGYn7KAH0ulUnl3iAGYPACLSN0.-N0D5JDIjmJ4vd_ISc3Og_d08P9LHfxkp1lKAwoTb-Y
      pragma:
      - no-cache
      request-id:
      - cab0cd8f-4dcb-4035-a19c-a39561688ef8
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_create_rbac_sp_minimal000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:01:48 GMT
      duration:
      - '2146423'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - zvWoFjuE2ehmMVgbV3Cg2Jr+3wQYeCjyzG9gzD1iIS8=
      ocp-aad-session-key:
      - uLfGCQ9CYp60QmY1KK6NraUSM0r2jDnhAOBQXD7I99kqrLKEHWDBIJ4V-pfxoQcY5b1HDtSBiIlj61YrBMPmC7wDaMFtRDf1femoLeBlLUkokKwdNH_VkNUFdiIS5na4W7MepLKTwHoE9_mBIiaM_3XHV9Bn-P4KUkLWFsh2bbE.hvJwOZ36Mvc0cgbfO3OyXFTy61DeOnIKBTsXHWpPPcc
      pragma:
      - no-cache
      request-id:
      - 91ee1c2a-cbac-4309-b6d8-cf73710b90d5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_create_rbac_sp_minimal000001",
      "passwordCredentials": [{"startDate": "2020-09-07T08:01:48.934012Z", "endDate":
      "2021-09-07T08:01:48.934012Z", "keyId": "fcfaf8f3-5a28-4d3f-b0f3-6211b3bcbdc5",
      "value": "ReplacedSPPassword123*", "customKeyIdentifier": "//5yAGIAYQBjAA=="}],
      "displayName": "cli_create_rbac_sp_minimal000001", "identifierUris": ["http://cli_create_rbac_sp_minimal000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '585'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "9ea9b776-27ce-422f-9501-48c161d0fa08", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "badc0f57-05fd-4999-83d2-9073794ab7a1",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_create_rbac_sp_minimal000001", "errorUrl": null,
        "groupMembershipClaims": null, "homepage": "https://cli_create_rbac_sp_minimal000001",
        "identifierUris": ["http://cli_create_rbac_sp_minimal000001"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/9ea9b776-27ce-422f-9501-48c161d0fa08/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/9ea9b776-27ce-422f-9501-48c161d0fa08/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_create_rbac_sp_minimal000001 on behalf
        of the signed-in user.", "adminConsentDisplayName": "Access cli_create_rbac_sp_minimal000001",
        "id": "345b45b8-89d8-408d-ae00-9434c8dcdf23", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_create_rbac_sp_minimal000001
        on your behalf.", "userConsentDisplayName": "Access cli_create_rbac_sp_minimal000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [{"customKeyIdentifier":
        "//5yAGIAYQBjAA==", "endDate": "2021-09-07T08:01:48.934012Z", "keyId": "fcfaf8f3-5a28-4d3f-b0f3-6211b3bcbdc5",
        "startDate": "2020-09-07T08:01:48.934012Z", "value": "ReplacedSPPassword123*"}],
        "publicClient": null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2702'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:01:49 GMT
      duration:
      - '4633525'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/9ea9b776-27ce-422f-9501-48c161d0fa08/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - mLFv5iEcu0ZFLhgcUh+01kFjJRXqF0zQox5e53xuxjc=
      ocp-aad-session-key:
      - -KXfpEz0B7NN8DS9IQGU1DHIae1FiiqvUAOYbLomrp2KHiVtIdqdivu0aWBaUjqmx_0yfdnBKXat4ZI1p7IE2hawySdwx5pzM6V75fjBZA8VvVvHMVQJ5MWiJBKkzGtIrunad-jo7mmrfcvxmnnRqgBCazz1UY0d5otJ3bp7kzM.pJP3IlLWXP8iQCz3tQ5-iT4pq_xZt8Ni564sFZGh9X8
      pragma:
      - no-cache
      request-id:
      - 4ac9085a-54d4-46c9-8712-12475256256c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "badc0f57-05fd-4999-83d2-9073794ab7a1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"4f0918f7-d4a6-4fb5-b40d-c0d455f4ed6d","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_create_rbac_sp_minimal000001","appId":"badc0f57-05fd-4999-83d2-9073794ab7a1","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_create_rbac_sp_minimal000001","errorUrl":null,"homepage":"https://cli_create_rbac_sp_minimal000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_create_rbac_sp_minimal000001 on behalf of the
        signed-in user.","adminConsentDisplayName":"Access cli_create_rbac_sp_minimal000001","id":"345b45b8-89d8-408d-ae00-9434c8dcdf23","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_create_rbac_sp_minimal000001 on your behalf.","userConsentDisplayName":"Access
        cli_create_rbac_sp_minimal000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["badc0f57-05fd-4999-83d2-9073794ab7a1","http://cli_create_rbac_sp_minimal000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:01:50 GMT
      duration:
      - '3285576'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/4f0918f7-d4a6-4fb5-b40d-c0d455f4ed6d/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - yC4FoNH5zaigswiTATamsh+qChtVV7hUxoBzZdFV+XU=
      ocp-aad-session-key:
      - eBm4yrM0v1nRrUFDod0KSHzeTBNBkm2VdzUq62MTN79EHT5f6lyL2WgBYvZ2wBxw-vgZEXNZ18g8QcR2sVW5ASf76WOiGrAtrwFTeNOTVMzrZSJ5EmSe_aEK_6jh2eu7tFu3Gi0h8Hx9KGzjVpFDNgBeYeDhtk2f3Rqy8fz8Cug.yEcaR1T4jHouIZUCoH7YSWOJXbvap1K-K5Ff7SrDaE0
      pragma:
      - no-cache
      request-id:
      - a76c47d1-0d70-4c98-9d6b-d6ab8c51359e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_create_rbac_sp_minimal000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"9ea9b776-27ce-422f-9501-48c161d0fa08","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"badc0f57-05fd-4999-83d2-9073794ab7a1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_create_rbac_sp_minimal000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_create_rbac_sp_minimal000001","identifierUris":["http://cli_create_rbac_sp_minimal000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/9ea9b776-27ce-422f-9501-48c161d0fa08/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/9ea9b776-27ce-422f-9501-48c161d0fa08/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_create_rbac_sp_minimal000001 on behalf of the
        signed-in user.","adminConsentDisplayName":"Access cli_create_rbac_sp_minimal000001","id":"345b45b8-89d8-408d-ae00-9434c8dcdf23","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_create_rbac_sp_minimal000001 on your behalf.","userConsentDisplayName":"Access
        cli_create_rbac_sp_minimal000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":"//5yAGIAYQBjAA==","endDate":"2021-09-07T08:01:48.934012Z","keyId":"fcfaf8f3-5a28-4d3f-b0f3-6211b3bcbdc5","startDate":"2020-09-07T08:01:48.934012Z","value":null}],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2619'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:01:51 GMT
      duration:
      - '2273073'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - CjIgzOeKjlit0wRtnNPM2+AnvnBvskiNqq2iDTQZLzI=
      ocp-aad-session-key:
      - zSbD9vXj1eq13Ax2eG0R3HXDcaNyKqcm22tQD-dfbB4tQ0x12kfiLDI58BUkETChIhNx1sKeFRUNguOAVKe01OkXVAzksE5AXSG1uf13md2cdscRlgTpCEXY3ciS6Th4n3OD5wzhk5Nx3AoJJwWQ76415B_sJryXLRMSY_QKKWg.xoPvojhUqmtdjOxkI0UM96BXIlm099YP-mrtoyslib0
      pragma:
      - no-cache
      request-id:
      - 9b0126ac-31af-4e7e-8e2a-23e55a7944f5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/9ea9b776-27ce-422f-9501-48c161d0fa08?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 08:01:57 GMT
      duration:
      - '60220782'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ebU53QxJfpCdJXPiVbGF1wEyIq0LiZq4xFmMAgxOTy8=
      ocp-aad-session-key:
      - uahpKZVnvSX274IZTeIiWtaYIyqINExJn1eD8MtMRl2FHWk9DWVGSAEpE3HCFnudv8ES_1iYhQz0eIjb58eOv6N-j1MiEKakCeJmEue1mP-E5JDxmy9ChLfMiZL21TMOJw1TQc2xJD4YSX5JiPiVPuXOdHcn4dz74B3F1v5qa6I.HlLr3BRxANqKeEX9s7L5e57dthJiBm1qntntP_2oxtw
      pragma:
      - no-cache
      request-id:
      - 9cee6140-233d-4dd5-aed4-e83d9072bd32
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
