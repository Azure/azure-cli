interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.4
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "sans": {}, "key_usage":
      ["cRLSign", "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement",
      "keyCertSign"], "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '523'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7a259a54630749da81fd6e020650459e"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:34 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4&request_id=7a259a54630749da81fd6e020650459e
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7a259a54630749da81fd6e020650459e"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"7a259a54630749da81fd6e020650459e"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/10c91b67de574dd1bf7f67962a4c9e5b","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/10c91b67de574dd1bf7f67962a4c9e5b","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/10c91b67de574dd1bf7f67962a4c9e5b","x5t":"LhIx9tPiuoP5eo2Czp7QcevLWLI","cer":"MIIDQjCCAiqgAwIBAgIQKMcFye8bQKyisWzdU2AdZDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTkzNloXDTI1MDUxNTEyMDkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAY9S8roNrNnkNZXO2qGoWTOBtenFmfykBpRR4ND0lOsaAFtLsPI4FHKuf4gU4UQhA6Jr3AUwJymZ+ZnnhMnJnFc2HUGyN2yIFJptXDBpHCnJWa8MzXZxEqywiHbUvmQY17AmSSrfdeP/o/m+iTT2ESB6L7ewwBLlay69faFsm7IyOKYsPwL6H2Gmkw9TO/GZyv8cSNmvyKpv2gG6XqYrO8ft63avW0cpudEJ6rRCP3mDJJmmu6ECuevCU3w8+iQIntmc63eofC38UG863NB0CdPxeP3uHqj5hGhosw1RxFOG9kqacT099LOBsKYnw95ctt4F5zGJQqIu4sgXyT3uuGg==","attributes":{"enabled":true,"nbf":1684151976,"exp":1747310976,"created":1684152576,"updated":1684152576,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152574}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2439'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"7a259a54630749da81fd6e020650459e"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_existing_cert000001%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '92'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:45 GMT
      odata-version:
      - '4.0'
      request-id:
      - 74e2b7d9-598f-42ba-b967-6ffff587718e
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00016946"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/10c91b67de574dd1bf7f67962a4c9e5b","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/10c91b67de574dd1bf7f67962a4c9e5b","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/10c91b67de574dd1bf7f67962a4c9e5b","x5t":"LhIx9tPiuoP5eo2Czp7QcevLWLI","cer":"MIIDQjCCAiqgAwIBAgIQKMcFye8bQKyisWzdU2AdZDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTkzNloXDTI1MDUxNTEyMDkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAY9S8roNrNnkNZXO2qGoWTOBtenFmfykBpRR4ND0lOsaAFtLsPI4FHKuf4gU4UQhA6Jr3AUwJymZ+ZnnhMnJnFc2HUGyN2yIFJptXDBpHCnJWa8MzXZxEqywiHbUvmQY17AmSSrfdeP/o/m+iTT2ESB6L7ewwBLlay69faFsm7IyOKYsPwL6H2Gmkw9TO/GZyv8cSNmvyKpv2gG6XqYrO8ft63avW0cpudEJ6rRCP3mDJJmmu6ECuevCU3w8+iQIntmc63eofC38UG863NB0CdPxeP3uHqj5hGhosw1RxFOG9kqacT099LOBsKYnw95ctt4F5zGJQqIu4sgXyT3uuGg==","attributes":{"enabled":true,"nbf":1684151976,"exp":1747310976,"created":1684152576,"updated":1684152576,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152574}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2419'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:45 GMT
      odata-version:
      - '4.0'
      request-id:
      - 5fc42b71-da0f-4c3d-89e5-beb7824ec14a
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0001694B"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: '{"displayName": "cli_test_sp_with_kv_existing_cert000001", "keyCredentials":
      [{"@odata.type": "#microsoft.graph.keyCredential", "displayName": null, "endDateTime":
      "2024-05-15T12:09:45Z", "key": "MIIDQjCCAiqgAwIBAgIQKMcFye8bQKyisWzdU2AdZDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTkzNloXDTI1MDUxNTEyMDkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAY9S8roNrNnkNZXO2qGoWTOBtenFmfykBpRR4ND0lOsaAFtLsPI4FHKuf4gU4UQhA6Jr3AUwJymZ+ZnnhMnJnFc2HUGyN2yIFJptXDBpHCnJWa8MzXZxEqywiHbUvmQY17AmSSrfdeP/o/m+iTT2ESB6L7ewwBLlay69faFsm7IyOKYsPwL6H2Gmkw9TO/GZyv8cSNmvyKpv2gG6XqYrO8ft63avW0cpudEJ6rRCP3mDJJmmu6ECuevCU3w8+iQIntmc63eofC38UG863NB0CdPxeP3uHqj5hGhosw1RxFOG9kqacT099LOBsKYnw95ctt4F5zGJQqIu4sgXyT3uuGg==",
      "keyId": "88888888-0000-0000-0000-000000000001", "startDateTime": "2023-05-15T12:09:45Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1459'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/applications
  response:
    body:
      string: '{"@odata.context": "https://graph.microsoft.com/v1.0/$metadata#applications/$entity",
        "id": "9920d17e-79ba-4c90-a441-9aa5c9560723", "deletedDateTime": null, "appId":
        "3a71db6d-cd5c-40d7-b323-0879c3a5ba9e", "applicationTemplateId": null, "disabledByMicrosoftStatus":
        null, "createdDateTime": "2023-05-15T12:09:46.1755966Z", "displayName": "cli_test_sp_with_kv_existing_cert000001",
        "description": null, "groupMembershipClaims": null, "identifierUris": [],
        "isDeviceOnlyAuthSupported": null, "isFallbackPublicClient": null, "notes":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "serviceManagementReference":
        null, "signInAudience": "AzureADandPersonalMicrosoftAccount", "tags": [],
        "tokenEncryptionKeyId": null, "samlMetadataUrl": null, "defaultRedirectUri":
        null, "certification": null, "optionalClaims": null, "servicePrincipalLockConfiguration":
        null, "requestSignatureVerification": null, "addIns": [], "api": {"acceptMappedClaims":
        null, "knownClientApplications": [], "requestedAccessTokenVersion": 2, "oauth2PermissionScopes":
        [], "preAuthorizedApplications": []}, "appRoles": [], "info": {"logoUrl":
        null, "marketingUrl": null, "privacyStatementUrl": null, "supportUrl": null,
        "termsOfServiceUrl": null}, "keyCredentials": [{"customKeyIdentifier": "2E1231F6D3E2BA83F97A8D82CE9ED071EBCB58B2",
        "displayName": "CN=CLIGetDefaultPolicy", "endDateTime": "2024-05-15T12:09:45Z",
        "key": null, "keyId": "88888888-0000-0000-0000-000000000001", "startDateTime":
        "2023-05-15T12:09:45Z", "type": "AsymmetricX509Cert", "usage": "Verify"}],
        "parentalControlSettings": {"countriesBlockedForMinors": [], "legalAgeGroupRule":
        "Allow"}, "passwordCredentials": [], "publicClient": {"redirectUris": []},
        "requiredResourceAccess": [], "verifiedPublisher": {"displayName": null, "verifiedPublisherId":
        null, "addedDateTime": null}, "web": {"homePageUrl": null, "logoutUrl": null,
        "redirectUris": [], "implicitGrantSettings": {"enableAccessTokenIssuance":
        false, "enableIdTokenIssuance": false}, "redirectUriSettings": []}, "spa":
        {"redirectUris": []}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2046'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:47 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/9920d17e-79ba-4c90-a441-9aa5c9560723/Microsoft.DirectoryServices.Application
      odata-version:
      - '4.0'
      request-id:
      - ae4549c1-8966-44cb-8633-056202d2fac6
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000FD78"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: '{"appId": "3a71db6d-cd5c-40d7-b323-0879c3a5ba9e", "accountEnabled": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '73'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/servicePrincipals
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals/$entity","id":"8dbf42ec-1048-433b-b002-c5fac6bcc380","deletedDateTime":null,"accountEnabled":true,"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appDescription":null,"appId":"3a71db6d-cd5c-40d7-b323-0879c3a5ba9e","applicationTemplateId":null,"appOwnerOrganizationId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"createdDateTime":"2023-05-15T12:09:48Z","description":null,"disabledByMicrosoftStatus":null,"displayName":"cli_test_sp_with_kv_existing_cert000001","homepage":null,"loginUrl":null,"logoutUrl":null,"notes":null,"notificationEmailAddresses":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyThumbprint":null,"replyUrls":[],"servicePrincipalNames":["3a71db6d-cd5c-40d7-b323-0879c3a5ba9e"],"servicePrincipalType":"Application","signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlSingleSignOnSettings":null,"addIns":[],"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"oauth2PermissionScopes":[],"passwordCredentials":[],"resourceSpecificApplicationPermissions":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1360'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:48 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/8dbf42ec-1048-433b-b002-c5fac6bcc380/Microsoft.DirectoryServices.ServicePrincipal
      odata-version:
      - '4.0'
      request-id:
      - 8ccc493e-496a-4c37-bf3e-b7c356b032bd
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00016951"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%273a71db6d-cd5c-40d7-b323-0879c3a5ba9e%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"9920d17e-79ba-4c90-a441-9aa5c9560723","deletedDateTime":null,"appId":"3a71db6d-cd5c-40d7-b323-0879c3a5ba9e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:09:46Z","displayName":"cli_test_sp_with_kv_existing_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"2E1231F6D3E2BA83F97A8D82CE9ED071EBCB58B2","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2024-05-15T12:09:45Z","key":null,"keyId":"88888888-0000-0000-0000-000000000001","startDateTime":"2023-05-15T12:09:45Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:48 GMT
      odata-version:
      - '4.0'
      request-id:
      - e4a8db90-3519-4691-9737-c24ff05792f9
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000C787"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/9920d17e-79ba-4c90-a441-9aa5c9560723
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications/$entity","id":"9920d17e-79ba-4c90-a441-9aa5c9560723","deletedDateTime":null,"appId":"3a71db6d-cd5c-40d7-b323-0879c3a5ba9e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:09:46Z","displayName":"cli_test_sp_with_kv_existing_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"2E1231F6D3E2BA83F97A8D82CE9ED071EBCB58B2","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2024-05-15T12:09:45Z","key":null,"keyId":"88888888-0000-0000-0000-000000000001","startDateTime":"2023-05-15T12:09:45Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1910'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:47 GMT
      odata-version:
      - '4.0'
      request-id:
      - 855313bb-8e72-40a5-8221-b58da0348211
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00014CC2"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/10c91b67de574dd1bf7f67962a4c9e5b","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/10c91b67de574dd1bf7f67962a4c9e5b","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/10c91b67de574dd1bf7f67962a4c9e5b","x5t":"LhIx9tPiuoP5eo2Czp7QcevLWLI","cer":"MIIDQjCCAiqgAwIBAgIQKMcFye8bQKyisWzdU2AdZDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTkzNloXDTI1MDUxNTEyMDkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAY9S8roNrNnkNZXO2qGoWTOBtenFmfykBpRR4ND0lOsaAFtLsPI4FHKuf4gU4UQhA6Jr3AUwJymZ+ZnnhMnJnFc2HUGyN2yIFJptXDBpHCnJWa8MzXZxEqywiHbUvmQY17AmSSrfdeP/o/m+iTT2ESB6L7ewwBLlay69faFsm7IyOKYsPwL6H2Gmkw9TO/GZyv8cSNmvyKpv2gG6XqYrO8ft63avW0cpudEJ6rRCP3mDJJmmu6ECuevCU3w8+iQIntmc63eofC38UG863NB0CdPxeP3uHqj5hGhosw1RxFOG9kqacT099LOBsKYnw95ctt4F5zGJQqIu4sgXyT3uuGg==","attributes":{"enabled":true,"nbf":1684151976,"exp":1747310976,"created":1684152576,"updated":1684152576,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152574}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2419'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"@odata.type": "#microsoft.graph.keyCredential", "displayName":
      null, "endDateTime": "2024-05-15T12:09:48Z", "key": "MIIDQjCCAiqgAwIBAgIQKMcFye8bQKyisWzdU2AdZDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTkzNloXDTI1MDUxNTEyMDkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAY9S8roNrNnkNZXO2qGoWTOBtenFmfykBpRR4ND0lOsaAFtLsPI4FHKuf4gU4UQhA6Jr3AUwJymZ+ZnnhMnJnFc2HUGyN2yIFJptXDBpHCnJWa8MzXZxEqywiHbUvmQY17AmSSrfdeP/o/m+iTT2ESB6L7ewwBLlay69faFsm7IyOKYsPwL6H2Gmkw9TO/GZyv8cSNmvyKpv2gG6XqYrO8ft63avW0cpudEJ6rRCP3mDJJmmu6ECuevCU3w8+iQIntmc63eofC38UG863NB0CdPxeP3uHqj5hGhosw1RxFOG9kqacT099LOBsKYnw95ctt4F5zGJQqIu4sgXyT3uuGg==",
      "keyId": "0c4eeb4a-13c2-4ee1-8165-ef3258ce0a03", "startDateTime": "2023-05-15T12:09:48Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1401'
      Content-Type:
      - application/json
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: PATCH
    uri: https://graph.microsoft.com/v1.0/applications/9920d17e-79ba-4c90-a441-9aa5c9560723
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:09:48 GMT
      request-id:
      - e228c722-d89c-472c-a9e8-a44dda50cddd
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD2C"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%273a71db6d-cd5c-40d7-b323-0879c3a5ba9e%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"9920d17e-79ba-4c90-a441-9aa5c9560723","deletedDateTime":null,"appId":"3a71db6d-cd5c-40d7-b323-0879c3a5ba9e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:09:46Z","displayName":"cli_test_sp_with_kv_existing_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"2E1231F6D3E2BA83F97A8D82CE9ED071EBCB58B2","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2024-05-15T12:09:48Z","key":null,"keyId":"0c4eeb4a-13c2-4ee1-8165-ef3258ce0a03","startDateTime":"2023-05-15T12:09:48Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:49 GMT
      odata-version:
      - '4.0'
      request-id:
      - 6b853fad-ba5f-4ef0-a93c-407a5e1eb8ae
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"004","RoleInstance":"BL02EPF00015FA7"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/applications/9920d17e-79ba-4c90-a441-9aa5c9560723
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:09:53 GMT
      request-id:
      - 8361ec57-258e-48f2-8fd1-08d0c8c58de2
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD1B"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "sans": {}, "key_usage":
      ["cRLSign", "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement",
      "keyCertSign"], "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '522'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"60b4daba62ac435ca446a3386f954dfa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:53 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4&request_id=60b4daba62ac435ca446a3386f954dfa
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"60b4daba62ac435ca446a3386f954dfa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"60b4daba62ac435ca446a3386f954dfa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/a5ac53ce87ef4fb18bd0d89947e94750","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/a5ac53ce87ef4fb18bd0d89947e94750","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/a5ac53ce87ef4fb18bd0d89947e94750","x5t":"OXn57Js6-jTuYIz3C3pFQMCZtog","cer":"MIIDQjCCAiqgAwIBAgIQZJ2j52YlQMOPsgoMbw3OwDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTk1NFoXDTIzMTExNTEyMDk1NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAAXcBnts1UTiSKPTw0YjsM8ZO1m671nYvVlWuzjQdpm7NNq5UgHziAxuk746S2YL7wp6RkZi76oUb9dYNzkLQJIrwLz2DoKVeQTqW0voxKP3k/eT8nVz1ODOxiRut/NrIdYYMDs77B/CKUQ7H5ZXiU5llbdzsT29Va7HpEBuDMsYabqk3KGV8Vyzc8HLQSOMKIGsQsVfM7QWuLhUR0vdZWSRS+f4QSp3aNEyNbVy8yzotlHVA7kF1RmQ35y1inYx7PIoKVh56ZcWF1GksBcZ7SsLzNzJQmhvfHI7ZvFHP28RhfE66NP2Z5Mvt0yAWWbvFqEdqA5pKDqnpLRFQgBKb6w==","attributes":{"enabled":true,"nbf":1684151994,"exp":1700050194,"created":1684152594,"updated":1684152594,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152594}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2438'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:09:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAIU4sOtVsSuFkot95eo0t+NtWGF3WyQpLClGlImNP59E/x0ihJVebjatPdqLyQmDPwUtahqIYCqwe2io/JY3A/OYoBSEKS8P9tqmAiR+miMyPdy2P8EUgWEsl3CJv+9EEQ6+n5ltYqvPVs7I1sUrmfJby8B7yPMAaEA03VSPYMvrS0ywKSgKPKkDV0CO3aNVxiM37hvY09xdT1I94LKd3VtFMjlCcHqrZpPbZCBu2YhvfT153icJU/RvF0otVKGMx9RU/RXiIetS7X1jGRcEScp/I2g6h805onIBfekGTrOwwutgXj5nMqKgTNr9L9dM7Q6lUniB2YIWQcEGMTEa1B","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"60b4daba62ac435ca446a3386f954dfa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_existing_cert0000012%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '92'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:03 GMT
      odata-version:
      - '4.0'
      request-id:
      - a9a33c93-5eb3-4d66-b80b-301965687dab
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000831A"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/a5ac53ce87ef4fb18bd0d89947e94750","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/a5ac53ce87ef4fb18bd0d89947e94750","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/a5ac53ce87ef4fb18bd0d89947e94750","x5t":"OXn57Js6-jTuYIz3C3pFQMCZtog","cer":"MIIDQjCCAiqgAwIBAgIQZJ2j52YlQMOPsgoMbw3OwDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTk1NFoXDTIzMTExNTEyMDk1NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAAXcBnts1UTiSKPTw0YjsM8ZO1m671nYvVlWuzjQdpm7NNq5UgHziAxuk746S2YL7wp6RkZi76oUb9dYNzkLQJIrwLz2DoKVeQTqW0voxKP3k/eT8nVz1ODOxiRut/NrIdYYMDs77B/CKUQ7H5ZXiU5llbdzsT29Va7HpEBuDMsYabqk3KGV8Vyzc8HLQSOMKIGsQsVfM7QWuLhUR0vdZWSRS+f4QSp3aNEyNbVy8yzotlHVA7kF1RmQ35y1inYx7PIoKVh56ZcWF1GksBcZ7SsLzNzJQmhvfHI7ZvFHP28RhfE66NP2Z5Mvt0yAWWbvFqEdqA5pKDqnpLRFQgBKb6w==","attributes":{"enabled":true,"nbf":1684151994,"exp":1700050194,"created":1684152594,"updated":1684152594,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152594}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2418'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:04 GMT
      odata-version:
      - '4.0'
      request-id:
      - 4a75717f-01b0-415c-a315-71a8a8645e16
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD20"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: '{"displayName": "cli_test_sp_with_kv_existing_cert0000012", "keyCredentials":
      [{"@odata.type": "#microsoft.graph.keyCredential", "displayName": null, "endDateTime":
      "2023-11-15T12:09:53Z", "key": "MIIDQjCCAiqgAwIBAgIQZJ2j52YlQMOPsgoMbw3OwDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTk1NFoXDTIzMTExNTEyMDk1NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAAXcBnts1UTiSKPTw0YjsM8ZO1m671nYvVlWuzjQdpm7NNq5UgHziAxuk746S2YL7wp6RkZi76oUb9dYNzkLQJIrwLz2DoKVeQTqW0voxKP3k/eT8nVz1ODOxiRut/NrIdYYMDs77B/CKUQ7H5ZXiU5llbdzsT29Va7HpEBuDMsYabqk3KGV8Vyzc8HLQSOMKIGsQsVfM7QWuLhUR0vdZWSRS+f4QSp3aNEyNbVy8yzotlHVA7kF1RmQ35y1inYx7PIoKVh56ZcWF1GksBcZ7SsLzNzJQmhvfHI7ZvFHP28RhfE66NP2Z5Mvt0yAWWbvFqEdqA5pKDqnpLRFQgBKb6w==",
      "keyId": "88888888-0000-0000-0000-000000000002", "startDateTime": "2023-05-15T12:10:04Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1460'
      Content-Type:
      - application/json
      ParameterSetName:
      - --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/applications
  response:
    body:
      string: '{"@odata.context": "https://graph.microsoft.com/v1.0/$metadata#applications/$entity",
        "id": "a4320315-b124-4b00-bded-84dc5fe4f35d", "deletedDateTime": null, "appId":
        "9b14dad4-97cb-45bc-ad37-de1c0f30c9c8", "applicationTemplateId": null, "disabledByMicrosoftStatus":
        null, "createdDateTime": "2023-05-15T12:10:05.0297378Z", "displayName": "cli_test_sp_with_kv_existing_cert0000012",
        "description": null, "groupMembershipClaims": null, "identifierUris": [],
        "isDeviceOnlyAuthSupported": null, "isFallbackPublicClient": null, "notes":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "serviceManagementReference":
        null, "signInAudience": "AzureADandPersonalMicrosoftAccount", "tags": [],
        "tokenEncryptionKeyId": null, "samlMetadataUrl": null, "defaultRedirectUri":
        null, "certification": null, "optionalClaims": null, "servicePrincipalLockConfiguration":
        null, "requestSignatureVerification": null, "addIns": [], "api": {"acceptMappedClaims":
        null, "knownClientApplications": [], "requestedAccessTokenVersion": 2, "oauth2PermissionScopes":
        [], "preAuthorizedApplications": []}, "appRoles": [], "info": {"logoUrl":
        null, "marketingUrl": null, "privacyStatementUrl": null, "supportUrl": null,
        "termsOfServiceUrl": null}, "keyCredentials": [{"customKeyIdentifier": "3979F9EC9B3AFA34EE608CF70B7A4540C099B688",
        "displayName": "CN=CLIGetDefaultPolicy", "endDateTime": "2023-11-15T12:09:53Z",
        "key": null, "keyId": "88888888-0000-0000-0000-000000000002", "startDateTime":
        "2023-05-15T12:10:04Z", "type": "AsymmetricX509Cert", "usage": "Verify"}],
        "parentalControlSettings": {"countriesBlockedForMinors": [], "legalAgeGroupRule":
        "Allow"}, "passwordCredentials": [], "publicClient": {"redirectUris": []},
        "requiredResourceAccess": [], "verifiedPublisher": {"displayName": null, "verifiedPublisherId":
        null, "addedDateTime": null}, "web": {"homePageUrl": null, "logoutUrl": null,
        "redirectUris": [], "implicitGrantSettings": {"enableAccessTokenIssuance":
        false, "enableIdTokenIssuance": false}, "redirectUriSettings": []}, "spa":
        {"redirectUris": []}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2047'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:10 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/a4320315-b124-4b00-bded-84dc5fe4f35d/Microsoft.DirectoryServices.Application
      odata-version:
      - '4.0'
      request-id:
      - 86d2cdda-d5fd-4936-8c32-b56c3a1f9ab6
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF00002F54"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: '{"appId": "9b14dad4-97cb-45bc-ad37-de1c0f30c9c8", "accountEnabled": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '73'
      Content-Type:
      - application/json
      ParameterSetName:
      - --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/servicePrincipals
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals/$entity","id":"588b2b36-20d6-42f9-be13-f78ec4ae9581","deletedDateTime":null,"accountEnabled":true,"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appDescription":null,"appId":"9b14dad4-97cb-45bc-ad37-de1c0f30c9c8","applicationTemplateId":null,"appOwnerOrganizationId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"createdDateTime":"2023-05-15T12:10:11Z","description":null,"disabledByMicrosoftStatus":null,"displayName":"cli_test_sp_with_kv_existing_cert0000012","homepage":null,"loginUrl":null,"logoutUrl":null,"notes":null,"notificationEmailAddresses":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyThumbprint":null,"replyUrls":[],"servicePrincipalNames":["9b14dad4-97cb-45bc-ad37-de1c0f30c9c8"],"servicePrincipalType":"Application","signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlSingleSignOnSettings":null,"addIns":[],"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"oauth2PermissionScopes":[],"passwordCredentials":[],"resourceSpecificApplicationPermissions":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1362'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:10 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/588b2b36-20d6-42f9-be13-f78ec4ae9581/Microsoft.DirectoryServices.ServicePrincipal
      odata-version:
      - '4.0'
      request-id:
      - 809bc963-61cc-4c3d-90f3-a1a9067c610c
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000A526"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%279b14dad4-97cb-45bc-ad37-de1c0f30c9c8%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"a4320315-b124-4b00-bded-84dc5fe4f35d","deletedDateTime":null,"appId":"9b14dad4-97cb-45bc-ad37-de1c0f30c9c8","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:10:05Z","displayName":"cli_test_sp_with_kv_existing_cert0000012","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"3979F9EC9B3AFA34EE608CF70B7A4540C099B688","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2023-11-15T12:09:53Z","key":null,"keyId":"88888888-0000-0000-0000-000000000002","startDateTime":"2023-05-15T12:10:04Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1915'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:10 GMT
      odata-version:
      - '4.0'
      request-id:
      - 5d86ba2a-9c53-4259-ac0d-bfa0220f0927
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF00007F79"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/a4320315-b124-4b00-bded-84dc5fe4f35d
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications/$entity","id":"a4320315-b124-4b00-bded-84dc5fe4f35d","deletedDateTime":null,"appId":"9b14dad4-97cb-45bc-ad37-de1c0f30c9c8","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:10:05Z","displayName":"cli_test_sp_with_kv_existing_cert0000012","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"3979F9EC9B3AFA34EE608CF70B7A4540C099B688","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2023-11-15T12:09:53Z","key":null,"keyId":"88888888-0000-0000-0000-000000000002","startDateTime":"2023-05-15T12:10:04Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1911'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:10 GMT
      odata-version:
      - '4.0'
      request-id:
      - 78d914e8-be03-458a-b897-d43a92d9b67e
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD26"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/a5ac53ce87ef4fb18bd0d89947e94750","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/a5ac53ce87ef4fb18bd0d89947e94750","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/a5ac53ce87ef4fb18bd0d89947e94750","x5t":"OXn57Js6-jTuYIz3C3pFQMCZtog","cer":"MIIDQjCCAiqgAwIBAgIQZJ2j52YlQMOPsgoMbw3OwDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTk1NFoXDTIzMTExNTEyMDk1NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAAXcBnts1UTiSKPTw0YjsM8ZO1m671nYvVlWuzjQdpm7NNq5UgHziAxuk746S2YL7wp6RkZi76oUb9dYNzkLQJIrwLz2DoKVeQTqW0voxKP3k/eT8nVz1ODOxiRut/NrIdYYMDs77B/CKUQ7H5ZXiU5llbdzsT29Va7HpEBuDMsYabqk3KGV8Vyzc8HLQSOMKIGsQsVfM7QWuLhUR0vdZWSRS+f4QSp3aNEyNbVy8yzotlHVA7kF1RmQ35y1inYx7PIoKVh56ZcWF1GksBcZ7SsLzNzJQmhvfHI7ZvFHP28RhfE66NP2Z5Mvt0yAWWbvFqEdqA5pKDqnpLRFQgBKb6w==","attributes":{"enabled":true,"nbf":1684151994,"exp":1700050194,"created":1684152594,"updated":1684152594,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","sans":{},"ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152574,"updated":1684152594}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2418'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"@odata.type": "#microsoft.graph.keyCredential", "displayName":
      null, "endDateTime": "2023-11-15T12:09:53Z", "key": "MIIDQjCCAiqgAwIBAgIQZJ2j52YlQMOPsgoMbw3OwDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIzMDUxNTExNTk1NFoXDTIzMTExNTEyMDk1NFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALw6HT9y7cwQbd2fzDHvX6LHugO6jG/FQgfw8nFklANba2dzvegObIxKBMxIgfXof0KVSHFa0DvZy4ynBGhQroP+NVnkmUnRxd96zjSecwPcqraUsVYCoPs49hUXHi53eLZhtAIlDJOiLYzI+zf32Tn9RKFuQg40ZYQ2ytE4JQ7athOogPwwD8jBL9+OqEXp2zGmUdJlpCClqCQK+yEM/25Q2C8X1fIMnDkxQ42TjZx1mxM8Y0fioWT09xeVTu5oWT3x6vwyxuAasQgrwscgFdiSOY98xLBYWRcvUKzD1HX7YjQkBXJoiH7fi31h7kz+ZTB0I/GctGzkbAHE/8Xw4qkCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFO+uvAp774XrEUpiAu/uuORfbksJMB0GA1UdDgQWBBTvrrwKe++F6xFKYgLv7rjkX25LCTANBgkqhkiG9w0BAQsFAAOCAQEAAXcBnts1UTiSKPTw0YjsM8ZO1m671nYvVlWuzjQdpm7NNq5UgHziAxuk746S2YL7wp6RkZi76oUb9dYNzkLQJIrwLz2DoKVeQTqW0voxKP3k/eT8nVz1ODOxiRut/NrIdYYMDs77B/CKUQ7H5ZXiU5llbdzsT29Va7HpEBuDMsYabqk3KGV8Vyzc8HLQSOMKIGsQsVfM7QWuLhUR0vdZWSRS+f4QSp3aNEyNbVy8yzotlHVA7kF1RmQ35y1inYx7PIoKVh56ZcWF1GksBcZ7SsLzNzJQmhvfHI7ZvFHP28RhfE66NP2Z5Mvt0yAWWbvFqEdqA5pKDqnpLRFQgBKb6w==",
      "keyId": "e065e249-6d42-43a6-af0e-c0db58e3f2c9", "startDateTime": "2023-05-15T12:10:11Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1401'
      Content-Type:
      - application/json
      ParameterSetName:
      - --id --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: PATCH
    uri: https://graph.microsoft.com/v1.0/applications/a4320315-b124-4b00-bded-84dc5fe4f35d
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:10:12 GMT
      request-id:
      - 383012f9-9d5f-4df2-9e7d-75cd5f4f5792
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF000036DC"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%279b14dad4-97cb-45bc-ad37-de1c0f30c9c8%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"a4320315-b124-4b00-bded-84dc5fe4f35d","deletedDateTime":null,"appId":"9b14dad4-97cb-45bc-ad37-de1c0f30c9c8","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:10:05Z","displayName":"cli_test_sp_with_kv_existing_cert0000012","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"3979F9EC9B3AFA34EE608CF70B7A4540C099B688","displayName":"CN=CLIGetDefaultPolicy","endDateTime":"2023-11-15T12:09:53Z","key":null,"keyId":"e065e249-6d42-43a6-af0e-c0db58e3f2c9","startDateTime":"2023-05-15T12:10:11Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1915'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:11 GMT
      odata-version:
      - '4.0'
      request-id:
      - 9ece1a7f-62f9-4bcf-a8f5-45ed0cab82c4
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD28"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/applications/a4320315-b124-4b00-bded-84dc5fe4f35d
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:10:13 GMT
      request-id:
      - 3309c37e-24c6-4eba-a2ae-a96d2a0fb672
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD1C"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%273a71db6d-cd5c-40d7-b323-0879c3a5ba9e%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:29 GMT
      odata-version:
      - '4.0'
      request-id:
      - 84c0443c-7429-4430-af4e-3761f5002c08
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000832A"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/3a71db6d-cd5c-40d7-b323-0879c3a5ba9e
  response:
    body:
      string: '{"error":{"code":"Request_ResourceNotFound","message":"Resource ''3a71db6d-cd5c-40d7-b323-0879c3a5ba9e''
        does not exist or one of its queried reference-property objects are not present.","innerError":{"date":"2023-05-15T12:10:29","request-id":"e07d0fb9-b929-4e81-833a-b6252ceab83b","client-request-id":"e07d0fb9-b929-4e81-833a-b6252ceab83b"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '341'
      content-type:
      - application/json
      date:
      - Mon, 15 May 2023 12:10:28 GMT
      request-id:
      - e07d0fb9-b929-4e81-833a-b6252ceab83b
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD21"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%279b14dad4-97cb-45bc-ad37-de1c0f30c9c8%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:10:28 GMT
      odata-version:
      - '4.0'
      request-id:
      - bcc40d1f-1c1a-45fe-9c93-a640e7990f1c
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF00002F55"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/9b14dad4-97cb-45bc-ad37-de1c0f30c9c8
  response:
    body:
      string: '{"error":{"code":"Request_ResourceNotFound","message":"Resource ''9b14dad4-97cb-45bc-ad37-de1c0f30c9c8''
        does not exist or one of its queried reference-property objects are not present.","innerError":{"date":"2023-05-15T12:10:29","request-id":"e7a92909-cb65-4213-96e4-95aa918f9d16","client-request-id":"e7a92909-cb65-4213-96e4-95aa918f9d16"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '341'
      content-type:
      - application/json
      date:
      - Mon, 15 May 2023 12:10:29 GMT
      request-id:
      - e7a92909-cb65-4213-96e4-95aa918f9d16
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"005","RoleInstance":"MN1PEPF0000CD27"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 404
      message: Not Found
version: 1
