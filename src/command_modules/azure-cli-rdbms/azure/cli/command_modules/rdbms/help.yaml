version: 1
content:
- group:
    name: mariadb
    summary: Manage Azure Database for MariaDB servers.
- group:
    name: mariadb server
    summary: Manage MariaDB servers.
- command:
    name: mariadb server create
    summary: Create a server.
    examples:
    - summary: Create a MariaDB server with a Standard performance tier and 2 vcore in North Europe.
      command: |
        az mariadb server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "GP_Gen4_2"
    - summary: Create a MariaDB server with all paramaters set.
      command: |
        az mariadb server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "B_Gen4_2" --ssl-enforcement Disabled \
            --storage-size 51200 --tags "key=value" --version {server-version}
- command:
    name: mariadb server restore
    summary: Restore a server from backup.
    examples:
    - summary: Restore 'testsvr' as 'testsvrnew'.
      command: az mariadb server restore -g testgroup -n testsvrnew --source-server testsvr --restore-point-in-time "2017-06-15T13:10:00Z"
    - summary: Restore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in a different resource group than the backup.
      command: |
        az mariadb server restore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforMariaDB/servers/testsvr2" \
            --restore-point-in-time "2017-06-15T13:10:00Z"
- command:
    name: mariadb server georestore
    summary: Georestore a server from backup.
    examples:
    - summary: Georestore 'testsvr' as 'testsvrnew' where 'testsvrnew' is in same resource group as 'testsvr'.
      command: az mariadb server georestore -g testgroup -n testsvrnew --source-server testsvr -l westus2
    - summary: Georestore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in the different resource group as the original server.
      command: |
        az mariadb server georestore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforMariaDB/servers/testsvr2" \
            -l westus2 --sku-name GP_Gen4_2
- group:
    name: mysql server replica
    summary: Manage cloud replication.
- command:
    name: mysql server replica create
    summary: Create a cloud replica for a server.
    examples:
    - summary: Create replica for server testsvr.
      command: az mysql server replica create -n testreplsvr -g testgroup -s testsvr
    - summary: Create replica testreplsvr for server testsvr2, where 'testreplsvr' is in a different resource group.
      command: |
        az mysql server replica create -n testreplsvr -g testgroup \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforMySQL/servers/testsvr2"
- command:
    name: mysql server replica stop
    summary: Stop replica to make it an individual server.
    examples:
    - summary: Stop server testsvr as replica and make it an individual server.
      command: az mysql server replica stop -g testgroup -n testsvr
- command:
    name: mysql server replica list
    summary: List all replicas for a given server.
- command:
    name: mariadb server update
    summary: Update a server.
    examples:
    - summary: Update a server's sku.
      command: az mariadb server update -g testgroup -n testsvrnew --sku-name GP_Gen5_4
    - summary: Update a server's tags.
      command: az mariadb server update -g testgroup -n testsvrnew --tags "k1=v1" "k2=v2"
- command:
    name: mariadb server wait
    summary: Wait for server to satisfy certain conditions.
- command:
    name: mariadb server delete
    summary: Delete a server.
- command:
    name: mariadb server show
    summary: Get the details of a server.
- command:
    name: mariadb server list
    summary: List available servers.
    examples:
    - summary: List all MariaDB servers in a subscription.
      command: az mariadb server list
    - summary: List all MariaDB servers in a resource group.
      command: az mariadb server list -g testgroup
- group:
    name: mariadb server firewall-rule
    summary: Manage firewall rules for a server.
- command:
    name: mariadb server firewall-rule create
    summary: Create a new firewall rule for a server.
    examples:
    - summary: Create a firewall rule allowing all connections from all IP addresses.
      command: az mariadb server firewall-rule create -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.0 --end-ip-address 255.255.255.255
- command:
    name: mariadb server firewall-rule update
    summary: Update a firewall rule.
    examples:
    - summary: Update a firewall rule's start IP address.
      command: az mariadb server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1
    - summary: Update a firewall rule's start and end IP address.
      command: az mariadb server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1 --end-ip-address 255.255.255.254
- command:
    name: mariadb server firewall-rule delete
    summary: Delete a firewall rule.
- command:
    name: mariadb server firewall-rule show
    summary: Get the details of a firewall rule.
- command:
    name: mariadb server firewall-rule list
    summary: List all firewall rules for a server.
- group:
    name: mariadb server vnet-rule
    summary: Manage a server's virtual network rules.
- command:
    name: mariadb server vnet-rule update
    summary: Update a virtual network rule.
- command:
    name: mariadb server vnet-rule create
    summary: Create a virtual network rule to allows access to a MariaDB server.
    examples:
    - summary: Create a virtual network rule by providing the subnet id.
      command: az mariadb server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet /subscriptions/{SubID}/resourceGroups/{ResourceGroup}/providers/Microsoft.Network/virtualNetworks/vnetName/subnets/subnetName
    - summary: Create a vnet rule by providing the vnet and subnet name. The subnet id is created by taking the resource group name and subscription id of the server.
      command: az mariadb server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet subnetName --vnet-name vnetName
- group:
    name: mariadb server configuration
    summary: Manage configuration values for a server.
- command:
    name: mariadb server configuration set
    summary: Update the configuration of a server.
    examples:
    - summary: Set a new configuration value.
      command: az mariadb server configuration set -g testgroup -s testsvr -n {config_name} --value {config_value}
    - summary: Set a configuration value to its default.
      command: az mariadb server configuration set -g testgroup -s testsvr -n {config_name}
- command:
    name: mariadb server configuration show
    summary: Get the configuration for a server."
- command:
    name: mariadb server configuration list
    summary: List the configuration values for a server.
- group:
    name: mariadb server-logs
    summary: Manage server logs.
- command:
    name: mariadb server-logs list
    summary: List log files for a server.
    examples:
    - summary: List log files for 'testsvr' modified in the last 72 hours (default value).
      command: az mariadb server-logs list -g testgroup -s testsvr
    - summary: List log files for 'testsvr' modified in the last 10 hours.
      command: az mariadb server-logs list -g testgroup -s testsvr --file-last-written 10
    - summary: List log files for 'testsvr' less than 30Kb in size.
      command: az mariadb server-logs list -g testgroup -s testsvr --max-file-size 30
- command:
    name: mariadb server-logs download
    summary: Download log files.
    examples:
    - summary: Download log files f1 and f2 to the current directory from the server 'testsvr'.
      command: az mariadb server-logs download -g testgroup -s testsvr -n f1.log f2.log
- group:
    name: mariadb db
    summary: Manage MariaDB databases on a server.
- command:
    name: mariadb db create
    summary: Create a MariaDB database.
    examples:
    - summary: Create database 'testdb' in the server 'testsvr' with the default parameters.
      command: az mariadb db create -g testgroup -s testsvr -n testdb
    - summary: Create database 'testdb' in server 'testsvr' with a given character set and collation rules.
      command: az mariadb db create -g testgroup -s testsvr -n testdb --charset {valid_charset} --collation {valid_collation}
- command:
    name: mariadb db delete
    summary: Delete a database.
    examples:
    - summary: Delete database 'testdb' in the server 'testsvr'.
      command: az mariadb db delete -g testgroup -s testsvr -n testdb
- command:
    name: mariadb db show
    summary: Show the details of a database.
    examples:
    - summary: Show database 'testdb' in the server 'testsvr'.
      command: az mariadb db show -g testgroup -s testsvr -n testdb
- command:
    name: mariadb db list
    summary: List the databases for a server.
    examples:
    - summary: List databases in the server 'testsvr'.
      command: az mariadb db list -g testgroup -s testsvr
- group:
    name: mysql
    summary: Manage Azure Database for MySQL servers.
- group:
    name: mysql server
    summary: Manage MySQL servers.
- command:
    name: mysql server create
    summary: Create a server.
    examples:
    - summary: Create a MySQL server with a Standard performance tier and 2 vcore in North Europe.
      command: |
        az mysql server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "GP_Gen4_2"
    - summary: Create a MySQL server with all paramaters set.
      command: |
        az mysql server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "B_Gen4_2" --ssl-enforcement Disabled \
            --storage-size 51200 --tags "key=value" --version {server-version}
- command:
    name: mysql server restore
    summary: Restore a server from backup.
    examples:
    - summary: Restore 'testsvr' as 'testsvrnew'.
      command: az mysql server restore -g testgroup -n testsvrnew --source-server testsvr --restore-point-in-time "2017-06-15T13:10:00Z"
    - summary: Restore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in a different resource group than the backup.
      command: |
        az mysql server restore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforMySQL/servers/testsvr2" \
            --restore-point-in-time "2017-06-15T13:10:00Z"
- command:
    name: mysql server georestore
    summary: Georestore a server from backup.
    examples:
    - summary: Georestore 'testsvr' as 'testsvrnew' where 'testsvrnew' is in same resource group as 'testsvr'.
      command: az mysql server georestore -g testgroup -n testsvrnew --source-server testsvr -l westus2
    - summary: Georestore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in the different resource group as the original server.
      command: |
        az mysql server georestore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforMySQL/servers/testsvr2" \
            -l westus2 --sku-name GP_Gen4_2
- command:
    name: mysql server update
    summary: Update a server.
    examples:
    - summary: Update a server's sku.
      command: az mysql server update -g testgroup -n testsvrnew --sku-name GP_Gen5_4
    - summary: Update a server's tags.
      command: az mysql server update -g testgroup -n testsvrnew --tags "k1=v1" "k2=v2"
- command:
    name: mysql server wait
    summary: Wait for server to satisfy certain conditions.
- command:
    name: mysql server delete
    summary: Delete a server.
- command:
    name: mysql server show
    summary: Get the details of a server.
- command:
    name: mysql server list
    summary: List available servers.
    examples:
    - summary: List all MySQL servers in a subscription.
      command: az mysql server list
    - summary: List all MySQL servers in a resource group.
      command: az mysql server list -g testgroup
- group:
    name: mysql server firewall-rule
    summary: Manage firewall rules for a server.
- command:
    name: mysql server firewall-rule create
    summary: Create a new firewall rule for a server.
    examples:
    - summary: Create a firewall rule allowing all connections from all IP addresses.
      command: az mysql server firewall-rule create -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.0 --end-ip-address 255.255.255.255
- command:
    name: mysql server firewall-rule update
    summary: Update a firewall rule.
    examples:
    - summary: Update a firewall rule's start IP address.
      command: az mysql server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1
    - summary: Update a firewall rule's start and end IP address.
      command: az mysql server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1 --end-ip-address 255.255.255.254
- command:
    name: mysql server firewall-rule delete
    summary: Delete a firewall rule.
- command:
    name: mysql server firewall-rule show
    summary: Get the details of a firewall rule.
- command:
    name: mysql server firewall-rule list
    summary: List all firewall rules for a server.
- group:
    name: mysql server vnet-rule
    summary: Manage a server's virtual network rules.
- command:
    name: mysql server vnet-rule update
    summary: Update a virtual network rule.
- command:
    name: mysql server vnet-rule create
    summary: Create a virtual network rule to allows access to a MySQL server.
    examples:
    - summary: Create a virtual network rule by providing the subnet id.
      command: az mysql server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet /subscriptions/{SubID}/resourceGroups/{ResourceGroup}/providers/Microsoft.Network/virtualNetworks/vnetName/subnets/subnetName
    - summary: Create a vnet rule by providing the vnet and subnet name. The subnet id is created by taking the resource group name and subscription id of the server.
      command: az mysql server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet subnetName --vnet-name vnetName
- group:
    name: mysql server configuration
    summary: Manage configuration values for a server.
- command:
    name: mysql server configuration set
    summary: Update the configuration of a server.
    examples:
    - summary: Set a new configuration value.
      command: az mysql server configuration set -g testgroup -s testsvr -n {config_name} --value {config_value}
    - summary: Set a configuration value to its default.
      command: az mysql server configuration set -g testgroup -s testsvr -n {config_name}
- command:
    name: mysql server configuration show
    summary: Get the configuration for a server."
- command:
    name: mysql server configuration list
    summary: List the configuration values for a server.
- group:
    name: mysql server-logs
    summary: Manage server logs.
- command:
    name: mysql server-logs list
    summary: List log files for a server.
    examples:
    - summary: List log files for 'testsvr' modified in the last 72 hours (default value).
      command: az mysql server-logs list -g testgroup -s testsvr
    - summary: List log files for 'testsvr' modified in the last 10 hours.
      command: az mysql server-logs list -g testgroup -s testsvr --file-last-written 10
    - summary: List log files for 'testsvr' less than 30Kb in size.
      command: az mysql server-logs list -g testgroup -s testsvr --max-file-size 30
- command:
    name: mysql server-logs download
    summary: Download log files.
    examples:
    - summary: Download log files f1 and f2 to the current directory from the server 'testsvr'.
      command: az mysql server-logs download -g testgroup -s testsvr -n f1.log f2.log
- group:
    name: mysql db
    summary: Manage MySQL databases on a server.
- command:
    name: mysql db create
    summary: Create a MySQL database.
    examples:
    - summary: Create database 'testdb' in the server 'testsvr' with the default parameters.
      command: az mysql db create -g testgroup -s testsvr -n testdb
    - summary: Create database 'testdb' in server 'testsvr' with a given character set and collation rules.
      command: az mysql db create -g testgroup -s testsvr -n testdb --charset {valid_charset} --collation {valid_collation}
- command:
    name: mysql db delete
    summary: Delete a database.
    examples:
    - summary: Delete database 'testdb' in the server 'testsvr'.
      command: az mysql db delete -g testgroup -s testsvr -n testdb
- command:
    name: mysql db show
    summary: Show the details of a database.
    examples:
    - summary: Show database 'testdb' in the server 'testsvr'.
      command: az mysql db show -g testgroup -s testsvr -n testdb
- command:
    name: mysql db list
    summary: List the databases for a server.
    examples:
    - summary: List databases in the server 'testsvr'.
      command: az mysql db list -g testgroup -s testsvr
- group:
    name: postgres
    summary: Manage Azure Database for PostgreSQL servers.
- group:
    name: postgres server
    summary: Manage PostgreSQL servers.
- command:
    name: postgres server create
    summary: Create a server.
    examples:
    - summary: Create a PostgreSQL server with a Standard performance tier and 2 vcore in North Europe.
      command: |
        az postgres server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "GP_Gen4_2"
    - summary: Create a PostgreSQL server with all paramaters set.
      command: |
        az postgres server create -l northeurope -g testgroup -n testsvr -u username -p password \
            --sku-name "B_Gen4_2" --ssl-enforcement Disabled \
            --storage-size 51200 --tags "key=value" --version {server-version}
- command:
    name: postgres server restore
    summary: Restore a server from backup.
    examples:
    - summary: Restore 'testsvr' as 'testsvrnew'.
      command: az postgres server restore -g testgroup -n testsvrnew --source-server testsvr --restore-point-in-time "2017-06-15T13:10:00Z"
    - summary: Restore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in a different resource group than the backup.
      command: |
        az postgres server restore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforPostgreSQL/servers/testsvr2" \
            --restore-point-in-time "2017-06-15T13:10:00Z"
- command:
    name: postgres server georestore
    summary: Georestore a server from backup.
    examples:
    - summary: Georestore 'testsvr' as 'testsvrnew' where 'testsvrnew' is in same resource group as 'testsvr'.
      command: az postgres server georestore -g testgroup -n testsvrnew --source-server testsvr -l westus2
    - summary: Georestore 'testsvr2' to 'testsvrnew', where 'testsvrnew' is in the different resource group as the original server.
      command: |
        az postgres server georestore -g testgroup -n testsvrnew \
            -s "/subscriptions/${SubID}/resourceGroups/${ResourceGroup}/providers/Microsoft.DBforPostgreSQL/servers/testsvr2" \
            -l westus2 --sku-name GP_Gen4_2
- command:
    name: postgres server update
    summary: Update a server.
    examples:
    - summary: Update a server's sku.
      command: az postgres server update -g testgroup -n testsvrnew --sku-name GP_Gen5_4
    - summary: Update a server's tags.
      command: az postgres server update -g testgroup -n testsvrnew --tags "k1=v1" "k2=v2"
- command:
    name: postgres server wait
    summary: Wait for server to satisfy certain conditions.
- command:
    name: postgres server delete
    summary: Delete a server.
- command:
    name: postgres server show
    summary: Get the details of a server.
- command:
    name: postgres server list
    summary: List available servers.
    examples:
    - summary: List all PostgreSQL servers in a subscription.
      command: az postgres server list
    - summary: List all PostgreSQL servers in a resource group.
      command: az postgres server list -g testgroup
- group:
    name: postgres server firewall-rule
    summary: Manage firewall rules for a server.
- command:
    name: postgres server firewall-rule create
    summary: Create a new firewall rule for a server.
    examples:
    - summary: Create a firewall rule allowing all connections from all IP addresses.
      command: az postgres server firewall-rule create -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.0 --end-ip-address 255.255.255.255
- command:
    name: postgres server firewall-rule update
    summary: Update a firewall rule.
    examples:
    - summary: Update a firewall rule's start IP address.
      command: az postgres server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1
    - summary: Update a firewall rule's start and end IP address.
      command: az postgres server firewall-rule update -g testgroup -s testsvr -n allowall --start-ip-address 0.0.0.1 --end-ip-address 255.255.255.254
- command:
    name: postgres server firewall-rule delete
    summary: Delete a firewall rule.
- command:
    name: postgres server firewall-rule show
    summary: Get the details of a firewall rule.
- command:
    name: postgres server firewall-rule list
    summary: List all firewall rules for a server.
- group:
    name: postgres server vnet-rule
    summary: Manage a server's virtual network rules.
- command:
    name: postgres server vnet-rule update
    summary: Update a virtual network rule.
- command:
    name: postgres server vnet-rule create
    summary: Create a virtual network rule to allows access to a PostgreSQL server.
    examples:
    - summary: Create a virtual network rule by providing the subnet id.
      command: az postgres server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet /subscriptions/{SubID}/resourceGroups/{ResourceGroup}/providers/Microsoft.Network/virtualNetworks/vnetName/subnets/subnetName
    - summary: Create a vnet rule by providing the vnet and subnet name. The subnet id is created by taking the resource group name and subscription id of the server.
      command: az postgres server vnet-rule create -g testgroup -s testsvr -n vnetRuleName --subnet subnetName --vnet-name vnetName
- group:
    name: postgres server configuration
    summary: Manage configuration values for a server.
- command:
    name: postgres server configuration set
    summary: Update the configuration of a server.
    examples:
    - summary: Set a new configuration value.
      command: az postgres server configuration set -g testgroup -s testsvr -n {config_name} --value {config_value}
    - summary: Set a configuration value to its default.
      command: az postgres server configuration set -g testgroup -s testsvr -n {config_name}
- command:
    name: postgres server configuration show
    summary: Get the configuration for a server."
- command:
    name: postgres server configuration list
    summary: List the configuration values for a server.
- group:
    name: postgres server-logs
    summary: Manage server logs.
- command:
    name: postgres server-logs list
    summary: List log files for a server.
    examples:
    - summary: List log files for 'testsvr' modified in the last 72 hours (default value).
      command: az postgres server-logs list -g testgroup -s testsvr
    - summary: List log files for 'testsvr' modified in the last 10 hours.
      command: az postgres server-logs list -g testgroup -s testsvr --file-last-written 10
    - summary: List log files for 'testsvr' less than 30Kb in size.
      command: az postgres server-logs list -g testgroup -s testsvr --max-file-size 30
- command:
    name: postgres server-logs download
    summary: Download log files.
    examples:
    - summary: Download log files f1 and f2 to the current directory from the server 'testsvr'.
      command: az postgres server-logs download -g testgroup -s testsvr -n f1.log f2.log
- group:
    name: postgres db
    summary: Manage PostgreSQL databases on a server.
- command:
    name: postgres db create
    summary: Create a PostgreSQL database.
    examples:
    - summary: Create database 'testdb' in the server 'testsvr' with the default parameters.
      command: az postgres db create -g testgroup -s testsvr -n testdb
    - summary: Create database 'testdb' in server 'testsvr' with a given character set and collation rules.
      command: az postgres db create -g testgroup -s testsvr -n testdb --charset {valid_charset} --collation {valid_collation}
- command:
    name: postgres db delete
    summary: Delete a database.
    examples:
    - summary: Delete database 'testdb' in the server 'testsvr'.
      command: az postgres db delete -g testgroup -s testsvr -n testdb
- command:
    name: postgres db show
    summary: Show the details of a database.
    examples:
    - summary: Show database 'testdb' in the server 'testsvr'.
      command: az postgres db show -g testgroup -s testsvr -n testdb
- command:
    name: postgres db list
    summary: List the databases for a server.
    examples:
    - summary: List databases in the server 'testsvr'.
      command: az postgres db list -g testgroup -s testsvr
