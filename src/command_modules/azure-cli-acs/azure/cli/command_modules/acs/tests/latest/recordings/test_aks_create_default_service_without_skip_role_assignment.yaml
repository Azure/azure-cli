interactions:
- request:
    body: '{"location": "eastus", "tags": {"product": "azurecli", "cause": "automation",
      "date": "2019-04-19T22:09:32Z"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group create
      Connection:
      - keep-alive
      Content-Length:
      - '110'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location --name --tag
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 resourcemanagementclient/2.1.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001?api-version=2018-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001","name":"clitest000001","location":"eastus","tags":{"product":"azurecli","cause":"automation","date":"2019-04-19T22:09:32Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '268'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 19 Apr 2019 22:09:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fclitest000002%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:37 GMT
      duration:
      - '672458'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ZjHZO3O4NIf+M/e/Wc/l43gSl5nmFS4mWXsN6QDBGBw=
      ocp-aad-session-key:
      - j3TRgJWhMmBDIk1H8ZWmxfTQXZwPlNcmE9kHGlplaGNBUFF1ut_xDS6ddpLILFxt6bmTnBOtWeI4lORmzw76tzydFBOTL-fpaaVHX6ElO_U6neJO7Fcw__ZSAAjsl9ZH.qa279BrUftIC0pMRVvkZVV2yghXYxW8AvGRZzvXu2sU
      pragma:
      - no-cache
      request-id:
      - 868a392c-6e05-47ca-94d0-9e7b854b709b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27clitest000002%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:38 GMT
      duration:
      - '645979'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - N0M3YZBHM6R48FUQoMpphT0YYue9AYIC839ozsEY+h0=
      ocp-aad-session-key:
      - x0lO4GcC9EF5o9XWDuSe0KCFcvazJp8OzxjjC0Rfyl35OMUNQ-9GvPGcQRGTRr6nKDljMKS5igYpY07G3sduxUQ9d4bdUZvTu_UHkdT52sx9cfx9TMo37KfAuYOWATQb.T3MEDEBtqQdGal4x6GrIAFcmACBCGOtCbXQ64Srytt8
      pragma:
      - no-cache
      request-id:
      - eefb9a7d-efa4-45e5-be1e-645d71cf1d95
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"availableToOtherTenants": false, "homepage": "https://clitest000002",
      "passwordCredentials": [{"startDate": "2019-04-19T22:09:38.15751Z", "endDate":
      "2020-04-19T22:09:38.15751Z", "keyId": "fa88d07e-bfe1-4775-a68b-37ad5b80ba11",
      "value": "a16d2e92-2eca-4a41-9f9e-132b8ee2ed54", "customKeyIdentifier": "//5yAGIAYQBjAA=="}],
      "displayName": "clitest000002", "identifierUris": ["http://clitest000002"]}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '432'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"86d69de0-2e68-4981-a441-740edcc35fa0","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"fd71ea92-eac6-40cf-97a2-5cdcbb92cacd","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"clitest000002","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://clitest000002","identifierUris":["http://clitest000002"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/86d69de0-2e68-4981-a441-740edcc35fa0/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/86d69de0-2e68-4981-a441-740edcc35fa0/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest000002 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest000002","id":"4294da82-71e8-412c-9992-df4ab5f65f67","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest000002 on your behalf.","userConsentDisplayName":"Access
        clitest000002","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":"//5yAGIAYQBjAA==","endDate":"2020-04-19T22:09:38.15751Z","keyId":"fa88d07e-bfe1-4775-a68b-37ad5b80ba11","startDate":"2019-04-19T22:09:38.15751Z","value":null}],"publicClient":null,"publisherDomain":"microsoft.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2340'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:39 GMT
      duration:
      - '10482412'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/86d69de0-2e68-4981-a441-740edcc35fa0/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - DGINaJ3i+5SyHOHPqmgh7imYwy5/IDDbJ0mu/cXzqrE=
      ocp-aad-session-key:
      - q5cOFfPzPVlNi925T5eLbpUuJ8ePar4DUNnyyjiarGKoQWsRhDSlXFL30_pDF-_m_RoINgbu1hEIcP5ggO9aC8Dj5lfm7LI72Ssp8GbGCBDjG1iSxVhwd3FqGz4fHq7cD2C5mLFVKKj_MdPXqF7mUg.BxF-2VhU2PanGA0V1tKQkKFiFCbn8gm5_YUPIe5r_7Q
      pragma:
      - no-cache
      request-id:
      - d81da994-bf82-4979-88c4-683ecd206744
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "fd71ea92-eac6-40cf-97a2-5cdcbb92cacd"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.error":{"code":"Authentication_Unauthorized","message":{"lang":"en","value":"Authenticating
        principal does not havepermission to instantiate multi-tenantapplications
        and there is not matching Applicationin the request tenant."},"requestId":"86800c5b-3470-4f50-aea5-9f6dda3a680d","date":"2019-04-19T22:09:39"}}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '317'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:39 GMT
      duration:
      - '938540'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - iBe0QwUqe2kxvM0RuOLDPalMes+SCbjDZc1pXmRLqq4=
      ocp-aad-session-key:
      - _VmzFYeksNacQ7ELhFN4E7-Tj7NqwXAmYd8mkG6ifYXidn-OGiXyjy0c-OK1-3R4UwSJu92SeqXQX3c1ZiwjKLMEkldJHTEdEkMB9XjtYkOLSlpYQgwoJrV56q8GOXgSsFXasZNE7YwefTTN_cO-pQ.WV3Vz_W-ySHpx5PIaSzs9YrjBov0oVAZ-cmKY8rhn8g
      pragma:
      - no-cache
      request-id:
      - 86800c5b-3470-4f50-aea5-9f6dda3a680d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 403
      message: Forbidden
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --yes --no-wait
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 resourcemanagementclient/2.1.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001?api-version=2018-05-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 19 Apr 2019 22:09:41 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTElURVNUM1I0QldGSkxZVi1FQVNUVVMiLCJqb2JMb2NhdGlvbiI6ImVhc3R1cyJ9?api-version=2018-05-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
version: 1
