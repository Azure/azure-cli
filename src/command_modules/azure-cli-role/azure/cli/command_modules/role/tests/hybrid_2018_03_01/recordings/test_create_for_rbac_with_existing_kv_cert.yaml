interactions:
- request:
    body: '{"location": "westus", "tags": {"product": "azurecli", "cause": "automation",
      "date": "2019-04-15T16:28:44Z"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group create
      Connection:
      - keep-alive
      Content-Length:
      - '110'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location --name --tag
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        resourcemanagementclient/2.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","name":"cli_test_sp_with_kv_existing_cert000001","location":"westus","tags":{"product":"azurecli","cause":"automation","date":"2019-04-15T16:28:44Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:28:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/me?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.User","objectType":"User","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","deletionTimestamp":null,"accountEnabled":true,"ageGroup":null,"assignedLicenses":[],"assignedPlans":[],"city":null,"companyName":null,"consentProvidedForMinor":null,"country":null,"createdDateTime":"2016-01-21T22:10:16Z","creationType":null,"department":null,"dirSyncEnabled":null,"displayName":"admin3","employeeId":null,"facsimileTelephoneNumber":null,"givenName":"admin3","immutableId":null,"isCompromised":null,"jobTitle":null,"lastDirSyncTime":null,"legalAgeGroupClassification":null,"mail":null,"mailNickname":"admin3","mobile":null,"onPremisesDistinguishedName":null,"onPremisesSecurityIdentifier":null,"otherMails":["yugangw@microsoft.com"],"passwordPolicies":"None","passwordProfile":null,"physicalDeliveryOfficeName":null,"postalCode":null,"preferredLanguage":"en-US","provisionedPlans":[],"provisioningErrors":[],"proxyAddresses":[],"refreshTokensValidFromDateTime":"2019-03-13T03:15:27Z","showInAddressList":null,"signInNames":[],"sipProxyAddress":null,"state":null,"streetAddress":null,"surname":"sdk","telephoneNumber":null,"thumbnailPhoto@odata.mediaEditLink":"directoryObjects/e7e158d3-7cdc-47cd-8825-5859d7ab2b55/Microsoft.DirectoryServices.User/thumbnailPhoto","usageLocation":null,"userIdentities":[],"userPrincipalName":"admin3@AzureSDKTeam.onmicrosoft.com","userState":null,"userStateChangedOn":null,"userType":"Member"}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1579'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:28:48 GMT
      duration:
      - '516095'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - DAEEhUUzhQ8pu+4OxvItbpuvqegmLWoSgzWL1kkCnyk=
      ocp-aad-session-key:
      - NH6jGuTnAHi4Lsys8PsmCtjyy3jIGCwCFlr1MlstEbOeUL2O1ss3SjKp3E8WiAqgJazxHiheEnnv24WKtglKkWkJaHWU2fi8AdIyO3MhOs4PhDlFQ8PMW7_HRUvAM3_6kdyS_Vv0TYXcvhiSlLlHfQ.UZDiSqmrydY1SliSwrSKb0TVX0fLb7lL0iQEvQtIbW0
      pragma:
      - no-cache
      request-id:
      - 20d7d7ed-8ce2-470f-a2a0-7eb27cdffc04
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId": "e7e158d3-7cdc-47cd-8825-5859d7ab2b55",
      "permissions": {"keys": ["get", "create", "delete", "list", "update", "import",
      "backup", "restore", "recover"], "secrets": ["get", "list", "set", "delete",
      "backup", "restore", "recover"], "certificates": ["get", "list", "delete", "create",
      "import", "update", "managecontacts", "getissuers", "listissuers", "setissuers",
      "deleteissuers", "manageissuers", "recover"], "storage": ["get", "list", "delete",
      "set", "update", "regeneratekey", "setsas", "listsas", "getsas", "deletesas"]}}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '746'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g -l --sku
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-keyvault/1.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002?api-version=2016-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002","name":"clitest000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","permissions":{"keys":["get","create","delete","list","update","import","backup","restore","recover"],"secrets":["get","list","set","delete","backup","restore","recover"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"],"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"]}}],"enabledForDeployment":false,"vaultUri":"https://clitest000002.vault.azure.net","provisioningState":"RegisteringDns"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:28:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.1.0.242
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 15 Apr 2019 16:28:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"ba498ac1441a41888d2dbcdfcb9ac918"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:28:57 GMT
      expires:
      - '-1'
      location:
      - https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=ba498ac1441a41888d2dbcdfcb9ac918
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"ba498ac1441a41888d2dbcdfcb9ac918"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:28:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"ba498ac1441a41888d2dbcdfcb9ac918"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"ba498ac1441a41888d2dbcdfcb9ac918"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"ba498ac1441a41888d2dbcdfcb9ac918"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:29 GMT
      duration:
      - '948356'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - zPeOuJeNLZ5N5CAKU8XN6jsJ5sC6cSv6Gh6WpNy3E8g=
      ocp-aad-session-key:
      - dmOyVaTyuh0VXLsti6CotjsdPBgDZBgQWdWWLIFBT6Cx6mityefirOthGI9cksVObTrXmNE60oyj8xneIBeQrSSKsZJDZjj1qC3M5IgYUxERZNsi6_zB95jYIMcYlC9dLIbLwPYpN3DaZTZe9S71Zw._1dV6AND78s799rBOZi2qVDcQD6xFDiCVJh-STCgGok
      pragma:
      - no-cache
      request-id:
      - e2edef38-49d4-4658-b559-912b77afd369
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/01e7ba3cae1146b69dd0603c407b83da","kid":"https://clitest000002.vault.azure.net/keys/cert1/01e7ba3cae1146b69dd0603c407b83da","sid":"https://clitest000002.vault.azure.net/secrets/cert1/01e7ba3cae1146b69dd0603c407b83da","x5t":"6PxWYEjBl1GDdc3mkfTg9C2SuRg","cer":"MIIDQjCCAiqgAwIBAgIQQ47Xv2JWQzSxtcDZqB/VWjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MTkyMloXDTIxMDQxNTE2MjkyMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAg2ylNv5D3s0A9pvhAy4D5e+/WFTO4KBPOdiVWZs0M7RsFwE/q3TYJePEp497Q1EcrDXGWaw5VKBeuRMRlI3l9dBLYFFODLoSvsEC/b/hHr4Mw+5BGGRdgp2b0hbxmEaI0KkN9xLsW0QXsqP8zWsFhx9UDIutdBlQClXFLTXSwsj4u4VUuqzFToFSnqrrywSaCdGJmJFCsTzVIeF63FhyMm8wxoidYWQ3u3hLGrYOOv57SckzJa5KjGe+mt8ltQxOui0RXMBDBLxtVbMI1xn6lZ2bIXe0WmMk1KSyb3KN6qRROQpIflp5VYu/BDRmRErA8nu9nF5P0qtDM82QuZzEpg==","attributes":{"enabled":true,"nbf":1555345162,"exp":1618504162,"created":1555345762,"updated":1555345762,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555345737,"updated":1555345737}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27azure-cli-2019-04-15-16-29-30%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:30 GMT
      duration:
      - '491747'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y+zD48Ehiz4O0zsLgVLhmty83vCQXyE4/pJnc8xhwMg=
      ocp-aad-session-key:
      - _GJn_YxvWsGM4nYVavGhnMkZ2pj9vzXvX2RVWhzVBWerRtQDUVlPd-54ad7a5T-vKY_XYQwI8vy-pBvolVPqBmyCWL6RhIjromY4kfqQgz5P8sG2Djc7UEvE-05Fpjlira0xbKsFUiEUEUT2yR4XRA.On0vtWfNeCzUZXcgS9W9Pwp6dPPxp5j6OU_IWkQpOBY
      pragma:
      - no-cache
      request-id:
      - 363bf47b-a33a-4cf6-b17f-7aa3b4a40293
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''b\''{"availableToOtherTenants": false, "homepage": "https://azure-cli-2019-04-15-16-29-30",
      "keyCredentials": [{"startDate": "2019-04-15T16:29:30.559247Z", "endDate": "2020-04-15T16:29:30.559247Z",
      "value": "MIIDQjCCAiqgAwIBAgIQQ47Xv2JWQzSxtcDZqB/VWjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MTkyMloXDTIxMDQxNTE2MjkyMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAg2ylNv5D3s0A9pvhAy4D5e+/WFTO4KBPOdiVWZs0M7RsFwE/q3TYJePEp497Q1EcrDXGWaw5VKBeuRMRlI3l9dBLYFFODLoSvsEC/b/hHr4Mw+5BGGRdgp2b0hbxmEaI0KkN9xLsW0QXsqP8zWsFhx9UDIutdBlQClXFLTXSwsj4u4VUuqzFToFSnqrrywSaCdGJmJFCsTzVIeF63FhyMm8wxoidYWQ3u3hLGrYOOv57SckzJa5KjGe+mt8ltQxOui0RXMBDBLxtVbMI1xn6lZ2bIXe0WmMk1KSyb3KN6qRROQpIflp5VYu/BDRmRErA8nu9nF5P0qtDM82QuZzEpg==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "azure-cli-2019-04-15-16-29-30", "identifierUris":
      ["http://cli_test_sp_with_kv_existing_cert000001"]}\'''''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1580'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"E8FC566048C197518375CDE691F4E0F42D92B918","endDate":"2020-04-15T16:29:30.559247Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T16:29:30.559247Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2495'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:31 GMT
      duration:
      - '4367546'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - CLBFhp12uVA5Nnh6MG2VC8aF6kYj6BwyK0Y6WAoeTzc=
      ocp-aad-session-key:
      - kMyKYRUf6gUWfupnuO1A6I8lViBEXyeq0K5FMkxcEzwqMtO8va_TwAJj9hoPQDMoroXxjpRkpxx_oTiQeLmzU2uGrau-oZCR1UCAGjMqm-z5D3yBGLgFnJimGgMjqX-SoGJyvHcpWrTwlrmb8rpgAw._8ns88WxtJxwtMauizE-a4q2D5V4hwbCpHud8wiFUZg
      pragma:
      - no-cache
      request-id:
      - 59396bf5-a204-4cf3-b718-3140927a044d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "b98beab4-310c-4f73-aa74-d8a28558d86c"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2019-04-15-16-29-30","appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["b98beab4-310c-4f73-aa74-d8a28558d86c","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1832'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:31 GMT
      duration:
      - '1633640'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - 7dMU+33Cz+68qE5sK7ANGlhWJX2RrZSFfal152ZxuSk=
      ocp-aad-session-key:
      - OpstdzpFzHcAbSYLXmZYJHEM1RLY8pGwevPa2eVQfS8kWULOZN1Mlv4hpS6Bxisn8HjXboldeHHofEpFnBVyJGE_eRrHB2MJHnxl_LUwfbASg7UjGe0gFW99h54j04J9_81tjPFK97STMGDSfJYiVQ.xsnNBpkKCsmT1NgqBlmX4cfg59Tgk6ArKJMBnWzkrTk
      pragma:
      - no-cache
      request-id:
      - ff96f083-6d46-4032-8cf7-0919a3ad301d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal f1f80f9c18c542e6a0dd7cfb9e31e74f
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2019-04-15T16:29:39.9613334Z","updatedOn":"2019-04-15T16:29:39.9613334Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-ms-request-charge:
      - '2'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"f1f80f9c-18c5-42e6-a0dd-7cfb9e31e74f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2019-04-15-16-29-30","appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","b98beab4-310c-4f73-aa74-d8a28558d86c"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1835'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:42 GMT
      duration:
      - '551263'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ViIBCnSpL6+upqRchZXti8jjuoj+Po+TypBtwan6TMg=
      ocp-aad-session-key:
      - sYBTgMntxrk_l4XffkOQutzFNZcHIbAOEeAwOo5AJPm060EC-n9fiMvUcYFXtLK2ev7cHaW0WCMtYyVQ0RDz3SeKGu9oaW4XEE70OIY7xGVBCYG4La_Uxf78J67E-32rjCzgaRvikpLMlIdj3RdNxQ.7usudiGgonq-MCia0YQG-7v75I5GfkItcvZmWTHkFIs
      pragma:
      - no-cache
      request-id:
      - f363b47b-0316-4c58-90de-2ba45c7da30a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27b98beab4-310c-4f73-aa74-d8a28558d86c%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:43 GMT
      duration:
      - '980067'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 5uQDuWNQfMZyayPDO2FzgKiYgsjpZMmhw8GRP+g4gGA=
      ocp-aad-session-key:
      - vjEObRNS0T6uj6ghFbs3W4C1ByutpYyWBFlciI5O4ulWqqK7LrYg5XeRFj7lTyxvxF66pkQtSbiJwLdyKeqeqGKxPEBk2-G6nntwV1gtWh94j6EkurM1WKr5ug29BHkTqWQNSeaVMWOsSnDLkZKTFw.3FVy79y5kupVjVfnuSqh_QGXtL_b54MabVLaBubNH7Y
      pragma:
      - no-cache
      request-id:
      - dfca4bd1-049c-4e4c-8eae-a49a19b64004
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27b98beab4-310c-4f73-aa74-d8a28558d86c%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"E8FC566048C197518375CDE691F4E0F42D92B918","endDate":"2020-04-15T16:29:30.559247Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T16:29:30.559247Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2412'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:43 GMT
      duration:
      - '1067862'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - BOyHBDAxSIKAYJlLPcX4gbSnf6edPNykjDKKitPiTVQ=
      ocp-aad-session-key:
      - N6DYMreN5h0lID7sjwm36PZQzG2hsxhR3qtkYKN9kfnPrqAtkhTydcF-SdSPX9sWDaIr5v-u2R8u18AthvOTnQPXRbX9mT6jjSReyyjWeuV0Ar2tpVTvcbtmdJLF_VsMrSeGB0BOe1IvFuH5V7W_jQ.Sy-4rnksTeivgMmQ5CHJ6AsZQGGDGWjS8FM4SJlxoAo
      pragma:
      - no-cache
      request-id:
      - 45a70991-8b36-4c49-8c4c-cff813b72f0e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"E8FC566048C197518375CDE691F4E0F42D92B918","endDate":"2020-04-15T16:29:30.559247Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T16:29:30.559247Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2409'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:44 GMT
      duration:
      - '586562'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qbLQHeemSYnF6GFzxWPxyco92r/HwDdCBwNHurdokdI=
      ocp-aad-session-key:
      - klkaWFKsYUYgiIsVCNNcGtNP6dIz6qVNctzkX5HLbtr_Q7akHsLH0-Pr3gqSNYcuu2Wn1ZLzixE-H2ExXGMLFqXUnaqwueqJuxqkAoUfdwbBK0DBJtxDnsqHMx-6ku0iV31FEfOyNnMIhM9TfAnCBQ.-KALrVNEdWJBfrsr1x2uLSvwxpW_FDfEHWVAIjJvsiE
      pragma:
      - no-cache
      request-id:
      - 56f6ea65-a869-4977-9bc7-937e44207cf2
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/01e7ba3cae1146b69dd0603c407b83da","kid":"https://clitest000002.vault.azure.net/keys/cert1/01e7ba3cae1146b69dd0603c407b83da","sid":"https://clitest000002.vault.azure.net/secrets/cert1/01e7ba3cae1146b69dd0603c407b83da","x5t":"6PxWYEjBl1GDdc3mkfTg9C2SuRg","cer":"MIIDQjCCAiqgAwIBAgIQQ47Xv2JWQzSxtcDZqB/VWjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MTkyMloXDTIxMDQxNTE2MjkyMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAg2ylNv5D3s0A9pvhAy4D5e+/WFTO4KBPOdiVWZs0M7RsFwE/q3TYJePEp497Q1EcrDXGWaw5VKBeuRMRlI3l9dBLYFFODLoSvsEC/b/hHr4Mw+5BGGRdgp2b0hbxmEaI0KkN9xLsW0QXsqP8zWsFhx9UDIutdBlQClXFLTXSwsj4u4VUuqzFToFSnqrrywSaCdGJmJFCsTzVIeF63FhyMm8wxoidYWQ3u3hLGrYOOv57SckzJa5KjGe+mt8ltQxOui0RXMBDBLxtVbMI1xn6lZ2bIXe0WmMk1KSyb3KN6qRROQpIflp5VYu/BDRmRErA8nu9nF5P0qtDM82QuZzEpg==","attributes":{"enabled":true,"nbf":1555345162,"exp":1618504162,"created":1555345762,"updated":1555345762,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555345737,"updated":1555345737}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2019-04-15T16:29:42.95474Z", "endDate":
      "2020-04-15T16:29:42.95474Z", "value": "MIIDQjCCAiqgAwIBAgIQQ47Xv2JWQzSxtcDZqB/VWjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MTkyMloXDTIxMDQxNTE2MjkyMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAg2ylNv5D3s0A9pvhAy4D5e+/WFTO4KBPOdiVWZs0M7RsFwE/q3TYJePEp497Q1EcrDXGWaw5VKBeuRMRlI3l9dBLYFFODLoSvsEC/b/hHr4Mw+5BGGRdgp2b0hbxmEaI0KkN9xLsW0QXsqP8zWsFhx9UDIutdBlQClXFLTXSwsj4u4VUuqzFToFSnqrrywSaCdGJmJFCsTzVIeF63FhyMm8wxoidYWQ3u3hLGrYOOv57SckzJa5KjGe+mt8ltQxOui0RXMBDBLxtVbMI1xn6lZ2bIXe0WmMk1KSyb3KN6qRROQpIflp5VYu/BDRmRErA8nu9nF5P0qtDM82QuZzEpg==",
      "keyId": "58dd5c36-e22f-4098-95b8-0e003011c512", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1337'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 16:29:45 GMT
      duration:
      - '2212058'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - DGINaJ3i+5SyHOHPqmgh7imYwy5/IDDbJ0mu/cXzqrE=
      ocp-aad-session-key:
      - VIVrbWiPNAu21mhXcFOmWt1LYVF9-OLsQctQeUHOUKlPdOg9KGOraUFJ7CzWN8GgD9AN9QNfDBW9SDAYo0kj8mKWwipgT8L4nxC3mNFtUpgak6Kn3kUflArcMr2AP5D7_i-E30ocohNoUP3UaARnvg.9Ag4aLty6FutTO0eueRu6oWIac8_Z9jVqxj73-ZqW1s
      pragma:
      - no-cache
      request-id:
      - a0637904-b843-45ab-af71-e3998b3dd833
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b98beab4-310c-4f73-aa74-d8a28558d86c","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-29-30","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-29-30","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"E8FC566048C197518375CDE691F4E0F42D92B918","endDate":"2020-04-15T16:29:42.95474Z","keyId":"58dd5c36-e22f-4098-95b8-0e003011c512","startDate":"2019-04-15T16:29:42.95474Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-29-30","id":"26eeaea4-4b10-45e5-8455-a09436f90741","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-29-30 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-29-30","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2410'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:29:45 GMT
      duration:
      - '536152'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - uvPTCZ5YaY3P1obgmri12BXUydEZzky/GuuHPXDOJbo=
      ocp-aad-session-key:
      - Rq7dsx-CQ-0qXK2KY_MLtC-qJPSyYUtzM9D5U44CqLjRJLAR69U-Sl0PcUmW1XtM_eZwNACykQl1-y5NyZGZQfMKqdFQwDvMXX9B8_IMOLkqs-zJyElrhApvpi65LVHyl7jBV_2P6IgXrUn2h5RFcg.3OdXMrE-4ja14xOHgBO-56LqH-IFTYJp0U6_JedoZlc
      pragma:
      - no-cache
      request-id:
      - 78192597-3d95-41a5-a81b-a76989cce730
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/9ec817da-d4dc-4e31-8e00-0b4f8e7e4d60?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 16:29:46 GMT
      duration:
      - '1857554'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - smDzeL4bkZOf2IZ45+oQ9cb0D2p+UcizCJoyGyQLD1w=
      ocp-aad-session-key:
      - l3oOlsftuqbkIc1NVdBt8fgAWxke3gvHFiJ3CWWSNkQmftMuCj3XS3SWCrHVsMbDrljwU7hU_nOyABmkYBOdIdvv5_Sfr9hlJUvvfj5nt-3hEfWSsuQSSvzEB2HjpclvuUvuS2Cb5XOxi8ke3_YOSg.2NewIBbplwpjSbmqoRNYjp-1tS2NyjQHG4F1nbZrDls
      pragma:
      - no-cache
      request-id:
      - a7145b5c-2971-41aa-aeec-61616ff21c4b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"2a8ab1dbe8a14ec2be508ff6c86675e8"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:51 GMT
      expires:
      - '-1'
      location:
      - https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=2a8ab1dbe8a14ec2be508ff6c86675e8
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"2a8ab1dbe8a14ec2be508ff6c86675e8"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:29:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"2a8ab1dbe8a14ec2be508ff6c86675e8"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQA/L3W5W6mausyG4PfE/T7LyCPuXD8DsCy8E1YQyyobKHSkzktfxNzJhkm8GBAkxr6P1VYHS13XnCjb1Vo7FsBb9HgSoPDoGYrJaLIBQG9t1t/wXaHglggbB7r+cHyN30SPhED47ldXHbN9nWboMKTNeHlcRuvZodC9t840JZ3qRUojXo8Tf+i+KI+ZFZTaq8ABdZduMEIPV5dl47qz+i6xe63OuOeQZiqrEtb7qrK0906VwZWLHZ/n7LHVzRqlVcfPxf6qJaHvC4DFN/Ib2lpQoGu+tgVcDLFPXFF1bQdXvI3RDt4h0SGKw9k+45I7a3oXksCXUTAk4xgGwQqM2ODQ","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"2a8ab1dbe8a14ec2be508ff6c86675e8"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:12 GMT
      duration:
      - '473274'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - itPlsAoHbG6osDHbVzYs2a+9kGEe205TaLepJuLRQYY=
      ocp-aad-session-key:
      - tRMw9CPB_UcUMFZ1TcB_MTC0LMLtqHNxLpqwxWUdGe6WqAeWSu7_9m1nYCjdik2NPjiO2MFD9Xdy48hkzxsiqmAXwvBaoNqYTpP2-0X2-w56_g-7VmjuSUJrDpi5XhlI2xhA6-yyFMcZidKTYuXHEw.ewmeqo5wZoGI1byhH6faCXKlctoOJNDewyfvvPWZZjw
      pragma:
      - no-cache
      request-id:
      - 89b70b55-0893-437e-9b34-2c854a48418f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/96db93e85db449ee8223c944ff5fd0e2","kid":"https://clitest000002.vault.azure.net/keys/cert1/96db93e85db449ee8223c944ff5fd0e2","sid":"https://clitest000002.vault.azure.net/secrets/cert1/96db93e85db449ee8223c944ff5fd0e2","x5t":"73NqVVxQBwEqFud1uHQcyMEYvn0","cer":"MIIDQjCCAiqgAwIBAgIQEoZAWu8lRX2CVMOBwfJQVDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MjAwOFoXDTE5MTAxNTE2MzAwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAlWDMGc7t/B7qFoQdokBxZTx2zgfEv90SSpWKEiWWaWJRuJXfHdoBvtijQoy7HvsXtErwmJSvAji0VELR3eRKzfXxgBTEa4ZoaE4a4m9i3u3Q2Vq1kgnU9h8SmHegDVnQCchencTz6disFy+aTAQa/woDFoMD/88vOZytnWtfVQh7+4iI1UGKJbrbAmXnmW+josZ4Ig5bCvknZFDMuVtQuiMuD0I+PIMt5bAgmSbAFAqAboVMAjgJ+G6DPUClP5V2kWebJTWmZgtTnq9NZCFlg7ejHgqLFRtagPpHQay5mf6LEE9fuSGHPnWPCHpRD0jxmLpMxBh/9kTDj2Z6Lslbhg==","attributes":{"enabled":true,"nbf":1555345208,"exp":1571157008,"created":1555345808,"updated":1555345808,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555345737,"updated":1555345787}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27azure-cli-2019-04-15-16-30-13%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:13 GMT
      duration:
      - '486402'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - r0o8Zfv+/EsfSzvffV1oL1MCccQ68EumyGGwG7/SNv8=
      ocp-aad-session-key:
      - luDKOxbej7s9AKAgxzV03sPDbWehl1FRm9ieVZztvrMisO4fTsVnnh_NPjNnY9695aZK3EW2gyf9f07xARJdZdvTa5_te4JCrBkgq1G__7BWvta0WyANI51-kTIR2EyiWivC0VmjYo2060F-LUs_Rw.X5Yp4Yf6BB8Z-QKY3V9lECKQRZjZHDMkJurGwMGyS5s
      pragma:
      - no-cache
      request-id:
      - 24205dc6-c95a-441b-a7db-cc4f645d57c5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''b\''{"availableToOtherTenants": false, "homepage": "https://azure-cli-2019-04-15-16-30-13",
      "keyCredentials": [{"startDate": "2019-04-15T16:30:13.517535Z", "endDate": "2019-10-15T16:30:07.000Z",
      "value": "MIIDQjCCAiqgAwIBAgIQEoZAWu8lRX2CVMOBwfJQVDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MjAwOFoXDTE5MTAxNTE2MzAwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAlWDMGc7t/B7qFoQdokBxZTx2zgfEv90SSpWKEiWWaWJRuJXfHdoBvtijQoy7HvsXtErwmJSvAji0VELR3eRKzfXxgBTEa4ZoaE4a4m9i3u3Q2Vq1kgnU9h8SmHegDVnQCchencTz6disFy+aTAQa/woDFoMD/88vOZytnWtfVQh7+4iI1UGKJbrbAmXnmW+josZ4Ig5bCvknZFDMuVtQuiMuD0I+PIMt5bAgmSbAFAqAboVMAjgJ+G6DPUClP5V2kWebJTWmZgtTnq9NZCFlg7ejHgqLFRtagPpHQay5mf6LEE9fuSGHPnWPCHpRD0jxmLpMxBh/9kTDj2Z6Lslbhg==",
      "keyId": "88888888-0000-0000-0000-000000000004", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "azure-cli-2019-04-15-16-30-13", "identifierUris":
      ["http://cli_test_sp_with_kv_existing_cert0000012"]}\'''''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1578'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"b994151b-1f63-44f8-ad8b-f620b3f6e99c","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"EF736A555C5007012A16E775B8741CC8C118BE7D","endDate":"2019-10-15T16:30:07Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T16:30:13.517535Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2489'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:13 GMT
      duration:
      - '2923865'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - EvOfLP9PQAD26fpwk0dE/RFcscWviL1fU6DjjzXB7dc=
      ocp-aad-session-key:
      - 3jtpb3pWuSt7jZNaQN0kWLe4HtOz9zRyL9co_Z9qXba4iJxdu8UISUk76cJRqud-2tlRGIoX1LozvC9sWJ57jBzmcydq2pDA7upx4Z9kxPXQ0hI2M9XgpRYzXoGqhgB4iKqAb_-Vj_a0jAyQ6WRNLA.3AT0uz_8W76Zr7j87kFbULztkENsRtuKLnzB_QzxId0
      pragma:
      - no-cache
      request-id:
      - 8bbd5d22-de36-44ac-9510-7ba31f5e2f58
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"ee81b905-fb3c-4d37-be26-72ddf3cd058f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2019-04-15-16-30-13","appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1833'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:14 GMT
      duration:
      - '1724756'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/ee81b905-fb3c-4d37-be26-72ddf3cd058f/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - s5K/P2xKeCZaZ6FdSGG0Z9eYryzDiYVRewZeoHCyeCQ=
      ocp-aad-session-key:
      - YMd6A8tU1tC1ElEJNszCDSqTnPBIxVFxK7OiiP9_vDQhsfvxP2nj1jUOQLBfNLoUky7ggQJg2-L19liNexXyKpSXxLbjiT5zoyaDFOS0t-zaQWoGmPYeLAQHmCxXdl0bhH0pbt_uVg7NMymv3Rlkgw.WlvXb_hAjUCADArgprdu6PwcN60JODDOIOGaOGoeNH0
      pragma:
      - no-cache
      request-id:
      - d1c3165e-086c-4502-89de-4f904d22fb3b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "ee81b905-fb3c-4d37-be26-72ddf3cd058f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal ee81b905fb3c4d37be2672ddf3cd058f
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "ee81b905-fb3c-4d37-be26-72ddf3cd058f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal ee81b905fb3c4d37be2672ddf3cd058f
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "ee81b905-fb3c-4d37-be26-72ddf3cd058f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000007?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"ee81b905-fb3c-4d37-be26-72ddf3cd058f","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2019-04-15T16:30:29.1824746Z","updatedOn":"2019-04-15T16:30:29.1824746Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000007","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000007"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-ms-request-charge:
      - '3'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"ee81b905-fb3c-4d37-be26-72ddf3cd058f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2019-04-15-16-30-13","appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1836'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:32 GMT
      duration:
      - '554829'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - tD5I1FqoHV4Zx7H+rhLmKpIX4gCOX6nOffRjGT46H8M=
      ocp-aad-session-key:
      - O-7SHV1vsDrC2eOaKT4TEs1tpJpzO3HqZITOtiTILUCha6_n2zE_uzrK_LKH-WnukKPSiAU2xZ6TjVqoMn8YKOAPhs5yZd4m1HU26gTMmI_qRlo3G1yUBaL9iq5xnuxnBuyciSu8Z-AqwpQPYE8yLQ.AxUBxkIE0ptUfOiaYNInYZmJ9VJ5bbjJSgMjtnSLqDw
      pragma:
      - no-cache
      request-id:
      - 32d815b6-0cc5-44b5-a3cf-bb6e0ca5966d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%278aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:32 GMT
      duration:
      - '484510'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - TYqFcwXWOChFCYe863Ass3L6LUsoEAAlBpUkoGumdpw=
      ocp-aad-session-key:
      - dWHlY4X0yz0W9RA_FhT2r0ld7ooFdqzflKx1QAQsIu9L-VfqB4dmSGlw4bk98JwEzbE8Bycshr2O_LUONU7oURJ0lALhJ3nIMzJtzMdjb2oyvORUiBPTd-8I7HbDgbSeYCLsgOUZncAljAegR5J9uA.JUgFKFVSg70gAK6FGHY0WSZXyZYosPrssN-kqMHpDCI
      pragma:
      - no-cache
      request-id:
      - 7c2c6b6e-70bb-4af2-a1d8-4f4b7b4269fe
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%278aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"b994151b-1f63-44f8-ad8b-f620b3f6e99c","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"EF736A555C5007012A16E775B8741CC8C118BE7D","endDate":"2019-10-15T16:30:07Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T16:30:13.517535Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2406'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:32 GMT
      duration:
      - '541046'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - WqKhWXvl1okXb47qljo0lPbR3WueJ7PneT8ez1L9elM=
      ocp-aad-session-key:
      - vA1egfAHyf6PCE7ikQMUX6x4F6NA3Y52vPcVGcrWqbGuaU9O5LDZ2vQw1ZqCme1OneMxvt5MJ4Fc1suThKmr8tAq4bTUdwN7BhNaecT_Vge_TGbbfqGcbi9zB0r6W_RZw8oa0kHlphkkt44NmBb-Qw.KSd2rzpfxoIiyUE4y1C-FIZfB8rsrvb4MbqL2tYHcnk
      pragma:
      - no-cache
      request-id:
      - bcd94b83-94f4-42a2-b1da-cfd65c69d121
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/b994151b-1f63-44f8-ad8b-f620b3f6e99c?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"b994151b-1f63-44f8-ad8b-f620b3f6e99c","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"EF736A555C5007012A16E775B8741CC8C118BE7D","endDate":"2019-10-15T16:30:07Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T16:30:13.517535Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2403'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:33 GMT
      duration:
      - '523572'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - raR8JNajDTfwSzq60owihwvzZvfOxnwzwr6uWdDMZbM=
      ocp-aad-session-key:
      - GBImx-OzsiWQnFnSw9pWVkJtwWvZfEyEZzqwRIM4xvjlesKm4Ojq4LtttG3V5HcvAtc6JRNtKazyXA24vHK-r5WmOVQWInnuX5DuxK0qErpnHYMWvHen6onvIkzagOYJSh1AI1XSmDVcHK3tgnKJRA.YATZo02mzk5wklwn0W_TKvYqc6kWEZAum5YgLC3O5EI
      pragma:
      - no-cache
      request-id:
      - aef24881-6672-4b7c-ab2b-66c37024efea
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/96db93e85db449ee8223c944ff5fd0e2","kid":"https://clitest000002.vault.azure.net/keys/cert1/96db93e85db449ee8223c944ff5fd0e2","sid":"https://clitest000002.vault.azure.net/secrets/cert1/96db93e85db449ee8223c944ff5fd0e2","x5t":"73NqVVxQBwEqFud1uHQcyMEYvn0","cer":"MIIDQjCCAiqgAwIBAgIQEoZAWu8lRX2CVMOBwfJQVDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MjAwOFoXDTE5MTAxNTE2MzAwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAlWDMGc7t/B7qFoQdokBxZTx2zgfEv90SSpWKEiWWaWJRuJXfHdoBvtijQoy7HvsXtErwmJSvAji0VELR3eRKzfXxgBTEa4ZoaE4a4m9i3u3Q2Vq1kgnU9h8SmHegDVnQCchencTz6disFy+aTAQa/woDFoMD/88vOZytnWtfVQh7+4iI1UGKJbrbAmXnmW+josZ4Ig5bCvknZFDMuVtQuiMuD0I+PIMt5bAgmSbAFAqAboVMAjgJ+G6DPUClP5V2kWebJTWmZgtTnq9NZCFlg7ejHgqLFRtagPpHQay5mf6LEE9fuSGHPnWPCHpRD0jxmLpMxBh/9kTDj2Z6Lslbhg==","attributes":{"enabled":true,"nbf":1555345208,"exp":1571157008,"created":1555345808,"updated":1555345808,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555345737,"updated":1555345787}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 16:30:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2019-04-15T16:30:32.075602Z", "endDate":
      "2019-10-15T16:30:07.000Z", "value": "MIIDQjCCAiqgAwIBAgIQEoZAWu8lRX2CVMOBwfJQVDANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE2MjAwOFoXDTE5MTAxNTE2MzAwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALQfyQAav4fj4ODzvXJfxwTmBZsRRXVVNfAVwc7CP8Y/0/u7U5SruY31t3HZByVfDMT1bwdXCOChbuwsaShPu51/jPw1hCpTw4eZe4RG3nGE5vcO/Ug4vulAMJNoV5ORtFzpOJPkbuGf3fzGD4GP/+9owXmiAqPvKyLv2d0TmYa1SeQNw5r/lJG2ap1VsZFoda9m/g2j93sQieJLDYAD0lYYHdTwT4HZgbx8IGtSOxhc5skvwDf2c3P0Oxpl/K27a2p6shAYQdxRk0GU8sCEaRvDLghTBhhyqkeGy9wkW5PbAbfvswKHok7JySJoUHQG3XsMOD/aXtUHLwrdddjADBcCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFBEJnS4cE2FkP/mKaoG7CISSucRNMB0GA1UdDgQWBBQRCZ0uHBNhZD/5imqBuwiEkrnETTANBgkqhkiG9w0BAQsFAAOCAQEAlWDMGc7t/B7qFoQdokBxZTx2zgfEv90SSpWKEiWWaWJRuJXfHdoBvtijQoy7HvsXtErwmJSvAji0VELR3eRKzfXxgBTEa4ZoaE4a4m9i3u3Q2Vq1kgnU9h8SmHegDVnQCchencTz6disFy+aTAQa/woDFoMD/88vOZytnWtfVQh7+4iI1UGKJbrbAmXnmW+josZ4Ig5bCvknZFDMuVtQuiMuD0I+PIMt5bAgmSbAFAqAboVMAjgJ+G6DPUClP5V2kWebJTWmZgtTnq9NZCFlg7ejHgqLFRtagPpHQay5mf6LEE9fuSGHPnWPCHpRD0jxmLpMxBh/9kTDj2Z6Lslbhg==",
      "keyId": "f20fccfd-eac6-4359-9334-f28f9079302d", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1336'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/b994151b-1f63-44f8-ad8b-f620b3f6e99c?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 16:30:34 GMT
      duration:
      - '2417760'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - hXM0y5tf4jtAu0XM9IyMZVs+30ozRFf/FDYUTguUD7g=
      ocp-aad-session-key:
      - m8PC7UdEJ0Zw1JBr-Uru9rMMeQz5bNBv2bry6FYmB4mxL8z_dCkdn6e5U2EZfXb9EFPksJJrqmRb6prjePPx0R8igbxxjqQ2MP0aRMgm48oXstaHCK4dB_YMx1mJeeCrrO3whlOlzHSvHAzSQIAcLQ.kHJf9QcAz2aWA9JtVto_SWODiwEqB_BnM0P8dy8Z_os
      pragma:
      - no-cache
      request-id:
      - ea27b7b8-77f6-42a7-99e3-d29275f77cee
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"b994151b-1f63-44f8-ad8b-f620b3f6e99c","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"8aff2ae8-6fb4-40fd-b6ad-5a0bf3de20c1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2019-04-15-16-30-13","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://azure-cli-2019-04-15-16-30-13","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"EF736A555C5007012A16E775B8741CC8C118BE7D","endDate":"2019-10-15T16:30:07Z","keyId":"f20fccfd-eac6-4359-9334-f28f9079302d","startDate":"2019-04-15T16:30:32.075602Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/b994151b-1f63-44f8-ad8b-f620b3f6e99c/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2019-04-15-16-30-13","id":"6a2bd85a-947a-4396-8155-516750cec335","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2019-04-15-16-30-13 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2019-04-15-16-30-13","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2406'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 16:30:36 GMT
      duration:
      - '557477'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - IdrrKLKQnFuJgNhhiCiMzXayMOWQynJhHLog8HXXGCE=
      ocp-aad-session-key:
      - sT4PoteQd6gOperFJrQQjk8M7u0Wa4btZX7gFDd-SpTS0c8kwS8qWBH7e1y9ya6z_LGfUnrGzAyMd2QvxjaBd_Zp30oeOlMOe6mEEJi8bDlZ-rVfAtw4mk1I26hLxnmYleOxoRuEKsDQ3V-UwJa5AQ.0OftQPRI1y4ZBSMWl49LUEoPSYBKvGK8DahVywDJ8jw
      pragma:
      - no-cache
      request-id:
      - 109300e3-93a6-4605-80b6-cde945860b93
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/b994151b-1f63-44f8-ad8b-f620b3f6e99c?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 16:30:36 GMT
      duration:
      - '2306772'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - vzT+9Yq+aEnlFAqW4ArMt4wc+vCo9D3Xgf5jgx/UnQk=
      ocp-aad-session-key:
      - cr2-Wz098HrRWWFDE7o2S2PZyH7AFzjuX67HtkrM410Vx8AMQN3TWl4SyPmUAatc0mUmW-JCcepGa4-oizl179GEVjkUMdT1_mSDPV03oiY7_CWIFFmZzDCu8yDKRQ4apZS_b3J9iOzwWa-QsIrr1Q.q25zjk45aOZ9elNABcH5il2aDODOAMHVmlVJYpYm2dg
      pragma:
      - no-cache
      request-id:
      - 98beccec-1dd3-4baf-8c63-d5f268766ac0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --yes --no-wait
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        resourcemanagementclient/2.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 15 Apr 2019 16:30:37 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURVNUOjVGU1A6NUZXSVRIOjVGS1Y6NUZFWElTVElORzo1RkNFUlRBSnwwOTg0OTZGQzA4ODkzQUFBLVdFU1RVUyIsImpvYkxvY2F0aW9uIjoid2VzdHVzIn0?api-version=2018-02-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
version: 1
