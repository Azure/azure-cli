interactions:
- request:
    body: '{"location": "westus2", "identity": {"type": "None"}, "properties": {"storageAccounts":
      [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002",
      "type": "Primary"}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account create
      Connection:
      - keep-alive
      Content-Length:
      - '332'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --storage-account -l
      User-Agent:
      - AZURECLI/2.24.2 (MSI) azsdk-python-mgmt-media/7.0.0 Python/3.8.2 (Windows-10-10.0.19041-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003?api-version=2021-05-01
  response:
    body:
      string: "{\r\n  \"name\":\"ams000003\",\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003\",\"type\":\"Microsoft.Media/mediaservices\",\"location\":\"West
        US 2\",\"properties\":{\r\n    \"mediaServiceId\":\"c110609c-1e96-44d2-a1c3-445aae3de8bc\",\"storageAccounts\":[\r\n
        \     {\r\n        \"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002\",\"type\":\"Primary\"\r\n
        \     }\r\n    ],\"storageAuthentication\":\"System\",\"encryption\":{\r\n
        \     \"type\":\"SystemKey\"\r\n    },\"keyDelivery\":{\r\n      \"accessControl\":{\r\n
        \       \"defaultAction\":\"Allow\",\"ipAllowList\":[\r\n          \r\n        ]\r\n
        \     }\r\n    }\r\n  },\"systemData\":{\r\n    \"createdBy\":\"phcooper@microsoft.com\",\"createdByType\":\"User\",\"createdAt\":\"2021-08-10T21:04:13.0921116Z\",\"lastModifiedBy\":\"phcooper@microsoft.com\",\"lastModifiedByType\":\"User\",\"lastModifiedAt\":\"2021-08-10T21:04:13.0921116Z\"\r\n
        \ },\"identity\":{\r\n    \"type\":\"None\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1158'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 10 Aug 2021 21:04:14 GMT
      expires:
      - '-1'
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - AZURECLI/2.24.2 (MSI) azsdk-python-mgmt-media/7.0.0 Python/3.8.2 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003?api-version=2021-05-01
  response:
    body:
      string: "{\r\n  \"name\":\"ams000003\",\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003\",\"type\":\"Microsoft.Media/mediaservices\",\"location\":\"West
        US 2\",\"properties\":{\r\n    \"mediaServiceId\":\"c110609c-1e96-44d2-a1c3-445aae3de8bc\",\"storageAccounts\":[\r\n
        \     {\r\n        \"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002\",\"type\":\"Primary\"\r\n
        \     }\r\n    ],\"storageAuthentication\":\"System\",\"encryption\":{\r\n
        \     \"type\":\"SystemKey\"\r\n    },\"keyDelivery\":{\r\n      \"accessControl\":{\r\n
        \       \"defaultAction\":\"Allow\",\"ipAllowList\":[\r\n          \r\n        ]\r\n
        \     }\r\n    }\r\n  },\"systemData\":{\r\n    \"createdBy\":\"phcooper@microsoft.com\",\"createdByType\":\"User\",\"createdAt\":\"2021-08-10T21:04:13.0921116Z\",\"lastModifiedBy\":\"phcooper@microsoft.com\",\"lastModifiedByType\":\"User\",\"lastModifiedAt\":\"2021-08-10T21:04:13.0921116Z\"\r\n
        \ },\"identity\":{\r\n    \"type\":\"None\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1158'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 10 Aug 2021 21:04:14 GMT
      expires:
      - '-1'
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fclitest.rg000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:15 GMT
      duration:
      - '1032599'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 4NLOcAfSQ55UZhh4gEPdXIuQWohVer9SaW6JgmEBi5Y=
      ocp-aad-session-key:
      - bmZZIUGXAe67_j6SqW9wQQ2WPF1WTuxdi8hUXTbbbBKlTn-8uWEOa-mZJt3FrZ6eLXepu8UJ9_4sBmbo-cbkI20Ab3JoEoPyVE3tGI5wBLX7FtReTOjGEho3rcj5Eb4J.goa0DO5sF_U-BxZl8PSH8bmfdPlsGD0VtE7uXUrf6p8
      pragma:
      - no-cache
      request-id:
      - 4d62540d-2ba4-41dd-9e8e-321dc3367a61
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "http://clitest.rg000001",
      "passwordCredentials": [{"startDate": "2021-08-10T21:04:15.996108Z", "endDate":
      "2022-08-10T21:04:15.996108Z", "keyId": "88888888-0000-0000-0000-000000000001",
      "value": "ReplacedSPPassword123*"}], "displayName": "clitest.rg000001", "identifierUris":
      ["http://clitest.rg000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      Content-Length:
      - '523'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "81b6bdf8-ddc8-4e83-b1a6-52381535dcb4", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "07c967df-3127-4f12-88de-877eaa66d8ac",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "clitest.rg000001", "errorUrl": null, "groupMembershipClaims":
        null, "homepage": "http://clitest.rg000001", "identifierUris": ["http://clitest.rg000001"],
        "informationalUrls": {"termsOfService": null, "support": null, "privacy":
        null, "marketing": null}, "isDeviceOnlyAuthSupported": null, "keyCredentials":
        [], "knownClientApplications": [], "logoutUrl": null, "logo@odata.mediaEditLink":
        "directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access clitest.rg000001 on behalf of the signed-in
        user.", "adminConsentDisplayName": "Access clitest.rg000001", "id": "95c7a2ea-ca48-4459-882f-a9b94db16a62",
        "isEnabled": true, "type": "User", "userConsentDescription": "Allow the application
        to access clitest.rg000001 on your behalf.", "userConsentDisplayName": "Access
        clitest.rg000001", "value": "user_impersonation"}], "oauth2RequirePostResponse":
        false, "optionalClaims": null, "orgRestrictions": [], "parentalControlSettings":
        {"countriesBlockedForMinors": [], "legalAgeGroupRule": "Allow"}, "passwordCredentials":
        [{"customKeyIdentifier": null, "endDate": "2022-08-10T21:04:15.996108Z", "keyId":
        "88888888-0000-0000-0000-000000000001", "startDate": "2021-08-10T21:04:15.996108Z",
        "value": "ReplacedSPPassword123*"}], "publicClient": null, "publisherDomain":
        "microsoft.onmicrosoft.com", "recordConsentConditions": null, "replyUrls":
        [], "requiredResourceAccess": [], "samlMetadataUrl": null, "signInAudience":
        "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2684'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:16 GMT
      duration:
      - '4588557'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - 5uRrnDyR8jKRd6wMlrA2iMXUA6VbCym531IM8hb2RSM=
      ocp-aad-session-key:
      - ILRQEb-x0hJPNS1M3JwMQClD8kACbu8XywiIMV-GaqvxUMySno36XcqstREpMW5tEd1o9XTR7V5FKGpLl-YeTTGFuJ18v6CBVJqM9LsEawUudqR6P6SHqiLZfgmr9EuVdA2Fe805JgQBLXo7iIuJKLtkpJKcqtdv9BvrDVDXgXo.gV4JENcxjeWFfzw9Z-DMEgCzd2wE0idSRkLhWZJoVfw
      pragma:
      - no-cache
      request-id:
      - 94263d75-88c2-49fe-be1e-2f29b9fe6ded
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "07c967df-3127-4f12-88de-877eaa66d8ac"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"69d73ecb-c222-474b-ac10-5f0e7197fc5f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"clitest.rg000001","appId":"07c967df-3127-4f12-88de-877eaa66d8ac","applicationTemplateId":null,"appOwnerTenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"clitest.rg000001","errorUrl":null,"homepage":"http://clitest.rg000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest.rg000001 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest.rg000001","id":"95c7a2ea-ca48-4459-882f-a9b94db16a62","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest.rg000001 on your behalf.","userConsentDisplayName":"Access
        clitest.rg000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"Microsoft","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["07c967df-3127-4f12-88de-877eaa66d8ac","http://clitest.rg000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2150'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:16 GMT
      duration:
      - '2223361'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/69d73ecb-c222-474b-ac10-5f0e7197fc5f/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - /OpeMRzYiUqO+pRbGZB6+0nI5sljjQy/nuzOc6R01A4=
      ocp-aad-session-key:
      - -YdwQhpKZmRHzG8gNcg65DR1FGYKm5Vuq9CNaTUHwQF8ESErkWchpheesJMIy_dFKL_x9OpqtFx8fVKZDsf4zttofFRy7QhxbCGx0HtHP4nCkGV4j2jrq0o1-qqCrKY66WGjvmqm762XgOlQdUE3qQX8dhxzQx-TdKwH7h4q554.ycW7ByhLzdRgZSTLBIHZ9nktTYBXKJtlna8Xx0bXbtA
      pragma:
      - no-cache
      request-id:
      - be7c4beb-1c2c-425e-8238-9f62ca9f3857
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments?$filter=principalId%20eq%20%2769d73ecb-c222-474b-ac10-5f0e7197fc5f%27&api-version=2020-04-01-preview
  response:
    body:
      string: '{"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '12'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Owner%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Owner","type":"BuiltInRole","description":"Grants
        full access to manage all resources, including the ability to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":[],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:13:58.4137852Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635","type":"Microsoft.Authorization/roleDefinitions","name":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '654'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635",
      "principalId": "69d73ecb-c222-474b-ac10-5f0e7197fc5f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2020-04-01-preview
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 69d73ecbc222474bac105f0e7197fc5f
        does not exist in the directory 72f988bf-86f1-41af-91ab-2d7cd011db47."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Owner%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Owner","type":"BuiltInRole","description":"Grants
        full access to manage all resources, including the ability to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":[],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:13:58.4137852Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635","type":"Microsoft.Authorization/roleDefinitions","name":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '654'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635",
      "principalId": "69d73ecb-c222-474b-ac10-5f0e7197fc5f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp create
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635","principalId":"69d73ecb-c222-474b-ac10-5f0e7197fc5f","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003","condition":null,"conditionVersion":null,"createdOn":"2021-08-10T21:04:23.4277696Z","updatedOn":"2021-08-10T21:04:23.7090872Z","createdBy":null,"updatedBy":"665fc971-4f7a-4cb0-976b-910fc4a2791f","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1111'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - AZURECLI/2.24.2 (MSI) azsdk-python-mgmt-media/7.0.0 Python/3.8.2 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003?api-version=2021-05-01
  response:
    body:
      string: "{\r\n  \"name\":\"ams000003\",\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003\",\"type\":\"Microsoft.Media/mediaservices\",\"location\":\"West
        US 2\",\"properties\":{\r\n    \"mediaServiceId\":\"c110609c-1e96-44d2-a1c3-445aae3de8bc\",\"storageAccounts\":[\r\n
        \     {\r\n        \"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002\",\"type\":\"Primary\"\r\n
        \     }\r\n    ],\"storageAuthentication\":\"System\",\"encryption\":{\r\n
        \     \"type\":\"SystemKey\"\r\n    },\"keyDelivery\":{\r\n      \"accessControl\":{\r\n
        \       \"defaultAction\":\"Allow\",\"ipAllowList\":[\r\n          \r\n        ]\r\n
        \     }\r\n    }\r\n  },\"systemData\":{\r\n    \"createdBy\":\"phcooper@microsoft.com\",\"createdByType\":\"User\",\"createdAt\":\"2021-08-10T21:04:13.0921116Z\",\"lastModifiedBy\":\"phcooper@microsoft.com\",\"lastModifiedByType\":\"User\",\"lastModifiedAt\":\"2021-08-10T21:04:13.0921116Z\"\r\n
        \ },\"identity\":{\r\n    \"type\":\"None\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1158'
      content-type:
      - application/json; odata.metadata=minimal
      date:
      - Tue, 10 Aug 2021 21:04:25 GMT
      expires:
      - '-1'
      odata-version:
      - '4.0'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fclitest.rg000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"69d73ecb-c222-474b-ac10-5f0e7197fc5f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"clitest.rg000001","appId":"07c967df-3127-4f12-88de-877eaa66d8ac","applicationTemplateId":null,"appOwnerTenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"clitest.rg000001","errorUrl":null,"homepage":"http://clitest.rg000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest.rg000001 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest.rg000001","id":"95c7a2ea-ca48-4459-882f-a9b94db16a62","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest.rg000001 on your behalf.","userConsentDisplayName":"Access
        clitest.rg000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"Microsoft","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://clitest.rg000001","07c967df-3127-4f12-88de-877eaa66d8ac"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2153'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:25 GMT
      duration:
      - '747934'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 7oveQwSnly9UajTBGVIMOOEBcC01B+vmwIVwvHVJLbg=
      ocp-aad-session-key:
      - lifCU4eKQz1OBMBMPuYReOiLFXnmHJYLk_oDYkT48rDiysAbqREM_-qIS5YR4YM6JLEnJplE35A5Qz5o4IWmUyP2wq1dE7cx5dv2m2s35xGSi1qqZVuzoEmuXfkTKaz9QHaL60-Z_1-mujzDvfA1CtZ7t8wCX_VGblfuUOs6_20.8Gx0J_b5GWpZ5ro7KpfSitLgu1IVBi_SMxoR8jTrOn8
      pragma:
      - no-cache
      request-id:
      - 272b83b6-d115-4f70-8403-e3ea27e004ae
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%2707c967df-3127-4f12-88de-877eaa66d8ac%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"81b6bdf8-ddc8-4e83-b1a6-52381535dcb4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"07c967df-3127-4f12-88de-877eaa66d8ac","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"clitest.rg000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://clitest.rg000001","identifierUris":["http://clitest.rg000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest.rg000001 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest.rg000001","id":"95c7a2ea-ca48-4459-882f-a9b94db16a62","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest.rg000001 on your behalf.","userConsentDisplayName":"Access
        clitest.rg000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":null,"endDate":"2022-08-10T21:04:15.996108Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2021-08-10T21:04:15.996108Z","value":null}],"publicClient":null,"publisherDomain":"microsoft.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2601'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:25 GMT
      duration:
      - '3238012'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 5lVRKMHBNtMxep7KODQqzxq568kktl2Zeg5mbd+PPIo=
      ocp-aad-session-key:
      - YXH_J7VwC9NI2v1HGJ1lXsiChLXKgKaXf755ITvThlqV-z_15Fp26fNZAZz7Gjds3kLOxTQxhAzxCoXcDhuMlRf-ap-LhVjabrxXBihFaibvCUDy8E45mAdZ28vafTgJoSBU5QsLSoqBUSzQ54bCE8JeY8MEcHD55qAjgFhzxYU.iS0W0ijq_zzn2GteJZ5BrhN3eQaUvH74cgPGfN8BPaw
      pragma:
      - no-cache
      request-id:
      - 3e747b30-d97f-440d-995d-9e95d9ad4930
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/passwordCredentials?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#Collection(Microsoft.DirectoryServices.PasswordCredential)","value":[{"customKeyIdentifier":null,"endDate":"2022-08-10T21:04:15.996108Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2021-08-10T21:04:15.996108Z","value":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '333'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:26 GMT
      duration:
      - '676455'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - BxOV+hdHUdVAFpKn78MFCEzoY0kZCgPEEbUgbSyPNqs=
      ocp-aad-session-key:
      - miOKoc23z1N1j5vG06WvSAyaxZEFZVip28SFiCX6PAuNNiMROfzZ9Xi0r89gUCWdXr3-7aTwqlxD_kWtm6LDVOW3jHDpwNyYvzxbwC7XoDXX42SVSa_NaNLUBh7uNqPPUEOV0sPVcjJtJ1zxDAvvZyZS9QDa1xQYFLkGd3JE8Iw.378R1-PL_ZlidFhJgPp1Zx7kPlLpPEtQZeXbEgMuWZo
      pragma:
      - no-cache
      request-id:
      - 0618d203-b8c8-4af1-a8b5-f2a7112338ad
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"value": [{"startDate": "2021-08-10T21:04:15.996108Z", "endDate": "2022-08-10T21:04:15.996108Z",
      "keyId": "88888888-0000-0000-0000-000000000001"}, {"startDate": "2021-08-10T21:04:26.723861Z",
      "endDate": "2022-08-10T21:04:26.723861Z", "keyId": "88888888-0000-0000-0000-000000000004",
      "value": "spp!000005"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      Content-Length:
      - '314'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/passwordCredentials?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Tue, 10 Aug 2021 21:04:26 GMT
      duration:
      - '2642562'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - bAWN5GO77KH2Ko6UmxZx0e5dKqfOqP+HiRNjp6i9lE0=
      ocp-aad-session-key:
      - y4icSTuYw4srelvRKcGIwdvLQcbu9b-gijrhsElaH3y_0amDK0OVHaTd0msBVicQPXeyM9mpN_VOF3tO6asBozg_nCYj4P5Ng17aVzwTgH0nwegHyqdMBfxKTrl1eYoZZ72uEQm-r3fs18A9N7lIzEfHj5ageKzDug1gRcxhVQQ.MUprVaDHcC-y94TiXMVObvWRzc5p74FOsfbWtnDSqFw
      pragma:
      - no-cache
      request-id:
      - 64d61096-ca77-4a9d-97b7-401be3db3132
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments?$filter=principalId%20eq%20%2769d73ecb-c222-474b-ac10-5f0e7197fc5f%27&api-version=2020-04-01-preview
  response:
    body:
      string: '{"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '12'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Owner%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Owner","type":"BuiltInRole","description":"Grants
        full access to manage all resources, including the ability to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":[],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:13:58.4137852Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635","type":"Microsoft.Authorization/roleDefinitions","name":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '654'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/8e3af657-a8ff-443c-a75c-2fe8c4bcb635",
      "principalId": "69d73ecb-c222-474b-ac10-5f0e7197fc5f"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ams account sp reset-credentials
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -a -n -g -p --role
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Media/mediaservices/ams000003/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2020-04-01-preview
  response:
    body:
      string: '{"error":{"code":"RoleAssignmentExists","message":"The role assignment
        already exists."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '89'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 10 Aug 2021 21:04:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 409
      message: Conflict
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fclitest.rg000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"81b6bdf8-ddc8-4e83-b1a6-52381535dcb4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"07c967df-3127-4f12-88de-877eaa66d8ac","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"clitest.rg000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://clitest.rg000001","identifierUris":["http://clitest.rg000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest.rg000001 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest.rg000001","id":"95c7a2ea-ca48-4459-882f-a9b94db16a62","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest.rg000001 on your behalf.","userConsentDisplayName":"Access
        clitest.rg000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":null,"endDate":"2022-08-10T21:04:26.723861Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2021-08-10T21:04:26.723861Z","value":null},{"customKeyIdentifier":null,"endDate":"2022-08-10T21:04:15.996108Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2021-08-10T21:04:15.996108Z","value":null}],"publicClient":null,"publisherDomain":"microsoft.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2772'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 10 Aug 2021 21:04:28 GMT
      duration:
      - '794914'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - K/KFsBMUqDwFC+y7xrAa7kZSjgUKqTKwSKkv33Xseb0=
      ocp-aad-session-key:
      - XQixvTeQYzRd8ApMPAzt4d-GZjqlIp5UyaAUBNYqlVJqznL9b-SOtaDDODwkeY-dtcvcmTM_HxEckUDFAM_GIBbovSOicy22aMgpptTIl2v7smmssoDCGPaiLApUhPaYZ5r8kPWs7vQdMrBtBjk5Jp7uSEhi-vDo4XOLHq4FhNY.HaCAi9kTn0pimL-U4R_G2vaoS6N6LDlFzmm-j6ZOnsk
      pragma:
      - no-cache
      request-id:
      - 7422ebf3-1cfb-4a17-9731-87f055f55331
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.2 (Windows-10-10.0.19041-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.2 (MSI)
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/81b6bdf8-ddc8-4e83-b1a6-52381535dcb4?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Tue, 10 Aug 2021 21:04:28 GMT
      duration:
      - '4184264'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - dBCs14ngpZgHgl9LP2CGpwTP32u4IS6VdFsqv31YkB4=
      ocp-aad-session-key:
      - K7ho9AxQLOqTM4CXs4qvOzNPzupGY76As6-yXEb-YitC6pI7oqFz3ivAr0LSLz1pamSRKHKOyM82V0ZdGm82Cv_68wnf0HJpHTfZKe3SP90J8THdrJ3n8L0jjpTRA0_SU0zTyeeu_w6mvAJI2rXWvV-TIX_nmHLuJx7lL2PB6IQ.v3DYE9zc0hJ9IqiGh3_rdB5Dt27yGhuGHUX9G4HB240
      pragma:
      - no-cache
      request-id:
      - 39156b0c-0557-4502-ae0f-00f36ed23790
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
