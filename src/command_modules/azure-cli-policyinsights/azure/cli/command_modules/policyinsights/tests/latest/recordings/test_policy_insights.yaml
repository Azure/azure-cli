interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.33]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","timestamp":"2018-05-16T22:32:25.5517702Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/databricks-rg-topology-private-gk-5ipya7gfhnzaw/providers/Microsoft.Network/virtualNetworks/workers-vnet/subnets/private-subnet","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/e46af646ebdb461dba708e01","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.Network/virtualNetworks/subnets","resourceLocation":"eastus","resourceGroup":"databricks-rg-topology-private-gk-5ipya7gfhnzaw","resourceTags":"tbd","policyAssignmentName":"e46af646ebdb461dba708e01","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000","policyDefinitionName":"c8b79b49-a579-4045-984e-1b249ab8b474","policyDefinitionAction":"audit","policyDefinitionCategory":"tbd","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionName":"a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"4859121137597195236","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalOid":"78a18750-11f2-4bc1-b820-662f5460fb55"},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","timestamp":"2018-05-16T22:32:25.5517702Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/databricks-rg-topology-private-gk-5ipya7gfhnzaw/providers/Microsoft.Network/virtualNetworks/workers-vnet/subnets/private-subnet","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/e46af646ebdb461dba708e01","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.Network/virtualNetworks/subnets","resourceLocation":"eastus","resourceGroup":"databricks-rg-topology-private-gk-5ipya7gfhnzaw","resourceTags":"tbd","policyAssignmentName":"e46af646ebdb461dba708e01","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000","policyDefinitionName":"c8b79b49-a579-4045-984e-1b249ab8b474","policyDefinitionAction":"audit","policyDefinitionCategory":"tbd","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionName":"a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"8935913113203900114","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalOid":"78a18750-11f2-4bc1-b820-662f5460fb55"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['4037']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 16 May 2018 22:39:37 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.33]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","timestamp":"2018-05-16T22:37:39Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/GenevaWarmPathManageRG/providers/Microsoft.EventHub/namespaces/azgovdfadminuse/eventhubs/distributedtracing/authorizationrules/reader","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/e46af646ebdb461dba708e01","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.EventHub/namespaces/eventhubs/authorizationrules","resourceLocation":"eastus","resourceGroup":"GenevaWarmPathManageRG","resourceTags":"tbd","policyAssignmentName":"e46af646ebdb461dba708e01","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000","policyDefinitionName":"c8b79b49-a579-4045-984e-1b249ab8b474","policyDefinitionAction":"audit","policyDefinitionCategory":"tbd","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionName":"a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"4859121137597195236"},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","timestamp":"2018-05-16T22:37:39Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/GenevaWarmPathManageRG/providers/Microsoft.EventHub/namespaces/azgovdfadminuse/eventhubs/distributedtracing/authorizationrules/reader","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/e46af646ebdb461dba708e01","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.EventHub/namespaces/eventhubs/authorizationrules","resourceLocation":"eastus","resourceGroup":"GenevaWarmPathManageRG","resourceTags":"tbd","policyAssignmentName":"e46af646ebdb461dba708e01","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000","policyDefinitionName":"c8b79b49-a579-4045-984e-1b249ab8b474","policyDefinitionAction":"audit","policyDefinitionCategory":"tbd","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionName":"a03db67e-a286-43c3-9098-b2da83d361ad","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"8935913113203900114"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['3806']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 16 May 2018 22:39:39 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.33]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false","nonCompliantResources":3993,"nonCompliantPolicies":25},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policysetdefinitions/12b58873-e0f8-4b95-936c-86cbe7c9d697","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''","nonCompliantResources":3993,"nonCompliantPolicies":5},"policyDefinitions":[{"policyDefinitionReferenceId":"14799174781370023846","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/24813039-7534-408a-9842-eb99f45721b1","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/24813039-7534-408a-9842-eb99f45721b1''
        and PolicyDefinitionReferenceId eq ''14799174781370023846''","nonCompliantResources":3993}},{"policyDefinitionReferenceId":"2124621540977569058","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474''
        and PolicyDefinitionReferenceId eq ''2124621540977569058''","nonCompliantResources":3689}},{"policyDefinitionReferenceId":"17446851636164155301","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474''
        and PolicyDefinitionReferenceId eq ''17446851636164155301''","nonCompliantResources":1441}},{"policyDefinitionReferenceId":"15798722305728538898","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/locationauditdefinition","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/locationauditdefinition''
        and PolicyDefinitionReferenceId eq ''15798722305728538898''","nonCompliantResources":458}},{"policyDefinitionReferenceId":"18108209265335873469","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/3e3807c1-65c9-49e0-a406-82d8ae3e3682","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/ddd8ef92e3714a5ea3d208c1''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/3e3807c1-65c9-49e0-a406-82d8ae3e3682''
        and PolicyDefinitionReferenceId eq ''18108209265335873469''","nonCompliantResources":92}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/e46af646ebdb461dba708e01","policySetDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policysetdefinitions/a03db67e-a286-43c3-9098-b2da83d361ad","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/e46af646ebdb461dba708e01''","nonCompliantResources":3993,"nonCompliantPolicies":3},"policyDefinitions":[{"policyDefinitionReferenceId":"8935913113203900114","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/e46af646ebdb461dba708e01''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474''
        and PolicyDefinitionReferenceId eq ''8935913113203900114''","nonCompliantResources":3975}},{"policyDefinitionReferenceId":"4859121137597195236","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/e46af646ebdb461dba708e01''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474''
        and PolicyDefinitionReferenceId eq ''4859121137597195236''","nonCompliantResources":3689}},{"policyDefinitionReferenceId":"4047897157028507992","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-05-15
        22:39:40Z&$to=2018-05-16 22:39:40Z&$filter=IsCompliant eq false and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/e46af646ebdb461dba708e01''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/c8b79b49-a579-4045-984e-1b249ab8b474''
        and PolicyDefinitionReferenceId eq ''4047897157028507992''","nonCompliantResources":1441}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['9855']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 16 May 2018 22:39:40 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
version: 1
