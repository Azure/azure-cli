interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_new_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:31:29 GMT
      duration:
      - '2206420'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ECnGKEGeuaafsRxeKjOa27lTV+ozrnZCzhx+IsrelBc=
      ocp-aad-session-key:
      - B7bAmJCyFCa0K1OLTD97J42lkTkkogSpagNrhhaljfb6n4wB87Ud-TabI3Et64I5AL-UEx9U5M-AjJ23gna_KHypIK3ta5ttgAC1uw9UoK4imFy-1SNY-l02_quUBvhuEUIOrBUKoFjkJqA_fK13yP4HTMV1fUFjaD8F3S0fSVk.4sFdYqwKphJWgmjhdL3ZBY6iOAcJw44dPC9IPONAgXs
      pragma:
      - no-cache
      request-id:
      - 2bb76a4b-f78e-4d15-8b9f-3090c218c425
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"Request is missing a Bearer
        or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 13}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7ddc34ef28df483788e220bd5b1c4d8d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:30 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=7ddc34ef28df483788e220bd5b1c4d8d
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7ddc34ef28df483788e220bd5b1c4d8d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7ddc34ef28df483788e220bd5b1c4d8d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"7ddc34ef28df483788e220bd5b1c4d8d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"7ddc34ef28df483788e220bd5b1c4d8d"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/61bdf27597044dad97387a2853783ec8","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/61bdf27597044dad97387a2853783ec8","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/61bdf27597044dad97387a2853783ec8","x5t":"e2sdWuxLViXGdaPcXf9xdAB2m3M","cer":"MIIDQDCCAiigAwIBAgIQPCAo7KfwRxSDuIwi4g7WtTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMTQ1WhcNMjExMDA3MDkzMTQ1WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJ276cGqriCFYcnFN7jVB69fl6OwHAnnuLdwibHiQ5kORTgsSIBSuw8LvwG43BaAUdLeEnWdBgjod6IbBpoQzXYk2s0AcKOHHVP5Md15VHkhgMixr2yMzChJwVm3yjALrK0Fu3Mv/l0emwEcF+snYg6UAwmAlJ0KB1YVb4KJ0MDpfQf1X/ufww2iuc1YNZew62jUM11cXtVadIuccrzEYXNOf/jPOjSx8PJjWBVbFlKo5QuS96FggWfZnFlNQvh+nnW6sedmjRPJHncVniJRKsBnDPhbGGwo82MvVtyxLYuH6Yv9I2u5JtXjSS1HcUiJZeWpxB6Y3BbJnNv6V7EIE2c=","attributes":{"enabled":true,"nbf":1599470505,"exp":1633599105,"created":1599471105,"updated":1599471105,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599471091,"updated":1599471091}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_new_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:31:52 GMT
      duration:
      - '2275182'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ebU53QxJfpCdJXPiVbGF1wEyIq0LiZq4xFmMAgxOTy8=
      ocp-aad-session-key:
      - vcg08VgnI0NVjQ6tfzLi5BPm-czi7D-Cjn_cXI-jXZk1abY18ye4fH0KTf1ISRWSReDCiUywr3NsPk0xS1itr20CFJuruBDZH1sCNDax2Emm_Z_TEe5apa-F53A1_8SmgUnn99ftdJ00j4gUp78QTgpqVvItC8KAXuAoj-qjo2o.Vo9cICaWqm2kBNkAxUWK0QhKYy5VrXxuY9uivkB7de8
      pragma:
      - no-cache
      request-id:
      - 5eec306a-426a-43e5-aca1-a7f9d3f4bb81
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_new_cert000001",
      "keyCredentials": [{"startDate": "2020-09-07T09:31:29.275301Z", "endDate": "2021-09-07T09:31:29.275301Z",
      "value": "MIIDQDCCAiigAwIBAgIQPCAo7KfwRxSDuIwi4g7WtTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMTQ1WhcNMjExMDA3MDkzMTQ1WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJ276cGqriCFYcnFN7jVB69fl6OwHAnnuLdwibHiQ5kORTgsSIBSuw8LvwG43BaAUdLeEnWdBgjod6IbBpoQzXYk2s0AcKOHHVP5Md15VHkhgMixr2yMzChJwVm3yjALrK0Fu3Mv/l0emwEcF+snYg6UAwmAlJ0KB1YVb4KJ0MDpfQf1X/ufww2iuc1YNZew62jUM11cXtVadIuccrzEYXNOf/jPOjSx8PJjWBVbFlKo5QuS96FggWfZnFlNQvh+nnW6sedmjRPJHncVniJRKsBnDPhbGGwo82MvVtyxLYuH6Yv9I2u5JtXjSS1HcUiJZeWpxB6Y3BbJnNv6V7EIE2c=",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_new_cert000001",
      "identifierUris": ["http://cli_test_sp_with_kv_new_cert000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1668'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "79b15008-871d-46a4-a7d8-557c0ff6334f", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "a79067a8-c8bd-4f90-84d7-1b0ae9e9163e",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_new_cert000001", "errorUrl": null,
        "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_new_cert000001",
        "identifierUris": ["http://cli_test_sp_with_kv_new_cert000001"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "7B6B1D5AEC4B5625C675A3DC5DFF717400769B73", "endDate": "2021-09-07T09:31:29.275301Z",
        "keyId": "88888888-0000-0000-0000-000000000001", "startDate": "2020-09-07T09:31:29.275301Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_new_cert000001 on behalf
        of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_new_cert000001",
        "id": "a7ca5872-5192-4ee7-9334-25a94de827d7", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_new_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_new_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:31:53 GMT
      duration:
      - '4844991'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - enkSqsGkHGLnN/ynAGWJuOrnQptSXTVZUBnKkvkDf8w=
      ocp-aad-session-key:
      - YftIIxNjY4VmXTFV9Ek7R4kBPTdaz7CtFqGVdz33hlXkUu5Sr064kk3UTHNsLH6geopSGT4JDiSBpCFHryAnYgUvi5ZJO_lgfErCZCm6avzRK09rfRLf9g1_tNSFnAbCUyn_jutrn0ahgX8lFRi9Rdf5IRqiFULAdGuykTlY2Jw.dTxYoiQb1dPijhKmzjov1XtUjYzD9xoCOali3EH4vcs
      pragma:
      - no-cache
      request-id:
      - 032cadcd-6111-48e7-b279-8ebe1ac10532
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "a79067a8-c8bd-4f90-84d7-1b0ae9e9163e"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"673ff7f1-3105-4bde-8bea-c0ba027be186","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_new_cert000001","appId":"a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_new_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"a7ca5872-5192-4ee7-9334-25a94de827d7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","http://cli_test_sp_with_kv_new_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:31:54 GMT
      duration:
      - '3531860'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/673ff7f1-3105-4bde-8bea-c0ba027be186/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - enkSqsGkHGLnN/ynAGWJuOrnQptSXTVZUBnKkvkDf8w=
      ocp-aad-session-key:
      - NKntO3EoDU7nCaZZPFAWbGemFivzJYmVGUCUYeUESJdTXCw0Tqicu3BrKzp1M0e0R3yVugoCIIrfcmVaZcESOJSBLH9Fy837waNHi13oPZo1YNmJg9OfVtIzsfqnwUUeoeH-bvBPNxe8gM9f_kP0aFC8BtNPI2ScuxE1UWT1h7E.YwdP6UQYfa6o6-beTpvYhg8ilTFzZ6Q21JMaoLJ4bWc
      pragma:
      - no-cache
      request-id:
      - e89bda60-9fbe-4186-b82b-ec18e5d24f07
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_new_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "673ff7f1-3105-4bde-8bea-c0ba027be186"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_new_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"673ff7f1-3105-4bde-8bea-c0ba027be186","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_new_cert000001","condition":null,"conditionVersion":null,"createdOn":"2020-09-07T09:31:55.5016482Z","updatedOn":"2020-09-07T09:31:55.5016482Z","createdBy":null,"updatedBy":"0d504196-1423-4569-9a6e-15149656f0ee","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_new_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000002"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1005'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/61bdf27597044dad97387a2853783ec8","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/61bdf27597044dad97387a2853783ec8","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/61bdf27597044dad97387a2853783ec8","x5t":"e2sdWuxLViXGdaPcXf9xdAB2m3M","cer":"MIIDQDCCAiigAwIBAgIQPCAo7KfwRxSDuIwi4g7WtTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMTQ1WhcNMjExMDA3MDkzMTQ1WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJ276cGqriCFYcnFN7jVB69fl6OwHAnnuLdwibHiQ5kORTgsSIBSuw8LvwG43BaAUdLeEnWdBgjod6IbBpoQzXYk2s0AcKOHHVP5Md15VHkhgMixr2yMzChJwVm3yjALrK0Fu3Mv/l0emwEcF+snYg6UAwmAlJ0KB1YVb4KJ0MDpfQf1X/ufww2iuc1YNZew62jUM11cXtVadIuccrzEYXNOf/jPOjSx8PJjWBVbFlKo5QuS96FggWfZnFlNQvh+nnW6sedmjRPJHncVniJRKsBnDPhbGGwo82MvVtyxLYuH6Yv9I2u5JtXjSS1HcUiJZeWpxB6Y3BbJnNv6V7EIE2c=","attributes":{"enabled":true,"nbf":1599470505,"exp":1633599105,"created":1599471105,"updated":1599471105,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599471091,"updated":1599471091}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:31:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_new_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_new_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"673ff7f1-3105-4bde-8bea-c0ba027be186","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_new_cert000001","appId":"a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_new_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"a7ca5872-5192-4ee7-9334-25a94de827d7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_new_cert000001","a79067a8-c8bd-4f90-84d7-1b0ae9e9163e"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2157'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:31:58 GMT
      duration:
      - '2399600'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - wa7XLTE+/p7laYRXAZUltYgvhndklofPlRXpYDhC3dg=
      ocp-aad-session-key:
      - Cn-Jzgd6kzyO88woS2b4RcxLpZ8rLAZmtim1AthYdG8w9alpVOx6ZTJiJLTBU2BKdYZoopYVmX7l3Jfpcyv14CvGBUTrwXoGjQzziko1GsWklmSXN6JbqpQk7Hp2vzSBNmwJ9x7SY3a17EB41dU3lAYwejY4CJM_ne_rDIzxYPs.wc9pAfB7sDmjSpuGhUWb9HgWcHbemfb1Rm3E7oY955w
      pragma:
      - no-cache
      request-id:
      - 3026bb34-b911-44d6-8e7d-e854152896b4
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27a79067a8-c8bd-4f90-84d7-1b0ae9e9163e%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:32:00 GMT
      duration:
      - '2442741'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - aFg9Figi2dkOqo3GRHtWTT49T1hKtrvok0/R0HyP/eA=
      ocp-aad-session-key:
      - bEHdgeKiTnA_OknZV5SP-xP-x1L2MHIOJ9Ff098eRNHP07EDT1tVRMRuge7aVHL23455zFtYKHmUqRoy0vU_vVxjAjnREVDXKgJfzFGHFVxfp-FXWz6sKrrLH93KMUWCIRAogUcBru60rlBwVqwxYLN1bkuq7F31rEMd5jzqMkw.VreWHYF2jZB6B8ALNQW4siweNfRKupTtAeJ0hy2UxAo
      pragma:
      - no-cache
      request-id:
      - 09bc5f8f-91db-4a24-b735-92bb86bcb492
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27a79067a8-c8bd-4f90-84d7-1b0ae9e9163e%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"79b15008-871d-46a4-a7d8-557c0ff6334f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_new_cert000001","identifierUris":["http://cli_test_sp_with_kv_new_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"7B6B1D5AEC4B5625C675A3DC5DFF717400769B73","endDate":"2021-09-07T09:31:29.275301Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T09:31:29.275301Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"a7ca5872-5192-4ee7-9334-25a94de827d7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:32:00 GMT
      duration:
      - '2387761'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - b4QnfGvpd7smyt/+n1m3RlPH4qnOta5fld3qy18y/TU=
      ocp-aad-session-key:
      - 3jWx4tnefbhcV0QwyOlhDKB5XQljCwM36rf_C57XU-eK46Yc6DrIJeCZtXenpWtEiJz6UeKvfF--2xHtzRrWHNUUjjdxtcGmdv4QwgLLsxeQ7NC5ILVAV1TUIIrSCuRhH4I2mDpxruFWyaD-VCaF2UArNW4_JVj9qiympFfVjos.mKM6UTlJt-RPCwD_mgjcpnG5NYzOsRPu2naHFOxy5b0
      pragma:
      - no-cache
      request-id:
      - 109c0142-e94c-4e75-997a-75481a7519ae
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/79b15008-871d-46a4-a7d8-557c0ff6334f?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"79b15008-871d-46a4-a7d8-557c0ff6334f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_new_cert000001","identifierUris":["http://cli_test_sp_with_kv_new_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"7B6B1D5AEC4B5625C675A3DC5DFF717400769B73","endDate":"2021-09-07T09:31:29.275301Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T09:31:29.275301Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"a7ca5872-5192-4ee7-9334-25a94de827d7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:32:01 GMT
      duration:
      - '2288896'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QfFDRfLHe+wLo8C5xgiEZ2x+elU6tom8QwBq1lJsANY=
      ocp-aad-session-key:
      - hlyNPHi9yACdaeH4DxEVzY6kJt2lhsyKJnsUUXuZGB0hRyhGYCpP11a6PAjb_N88PTUCJqnlepQfRZzO6hhsxltN4EGfDQ-BUzoztJqV5wc-fVSsnkYX_8yal0JO78Ei7e-fkjrMkWrDh8TG4Scx1JIBOh4LvZmd96FSiQZyjUo.Y9_ZCMDa-TjNdGPEP383KvieAXGyRscZX0jOHBT9ih4
      pragma:
      - no-cache
      request-id:
      - 81ed5943-9a4a-47e7-a3d9-1c9ae2861838
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 13}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"065a56c720ca4aeebddadc5e5d00391c"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:02 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=065a56c720ca4aeebddadc5e5d00391c
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"065a56c720ca4aeebddadc5e5d00391c"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"065a56c720ca4aeebddadc5e5d00391c"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"065a56c720ca4aeebddadc5e5d00391c"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsG1bxGBN9LP/dI7c1wfQ0l6fF+Si6Funr/7uMMRfP8hinLeBCTm74WEZ6F4lVjv4480s1hBkdGhUvmv6G6a15VYGbj9+e1INclTy/u6Dom5laT6YokWz9f55y3XKURt9SkXSbTskIlVf+bJeWGtF+9psgb1tUhiV7Faa5jPxhoiFluoJzdnCDR+BD/CDktLqULDMn3tbgvTRGGx56B8MvU/2eNrNOs9eoZOsthYrglUGexINA6iOqqmw4VOSFJ/kjMvIxROQz8IiG8Ou/h4Mp4Yep1LWJLGcAd4e0gbJetyaftRe1kQhuw7HVshbVnN1eYauofIMeJ05qfDgWSFa4QIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAKHsAe/R6LUxtuXQ0GPQuwqCgWBmRaI8KdjkpA8mgO/6uDnzC+VWkVoWtRRbIBouGvMsew1+mdEdXHAhnrOKie6Vif7XX3dvzkWff75+JDLKCsBMuewaAlFAEyp6c7cr0N+GkfhKc/Rh3Vo7AHw0zyVlJP7YFgobh0gCTuDevjUsZ0q0/7qIqH/2y0a2CxWUMUoB1lp7XDMvhy4Uj/ypK3dsD9IYG+bQnDlqnfn8XDAxNjDYutgy9MHTBmswQVCTApPLJwFI9q3xEBMUi/cWoZIKyiBi7+YY3MlsjvpJ3Kk1K0gi6qeu/c9NEZbK+Wy9QkiyWHXxA/zAB+6QXK+Z+P8=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"065a56c720ca4aeebddadc5e5d00391c"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/62899892e0d749a69ec5cc5f65cacbc2","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/62899892e0d749a69ec5cc5f65cacbc2","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/62899892e0d749a69ec5cc5f65cacbc2","x5t":"g9D9OhxlYsdBATSLm2J7HFRX3wg","cer":"MIIDQDCCAiigAwIBAgIQeaikmC7wRAC3XPkPlZqKvTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMjE3WhcNMjExMDA3MDkzMjE3WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJp7ZPMgqIVFYqgNqbfdQ+qPYkgghXFGQ6uC/A9soaRK6aeks/LspTO8MbRK5ReWheYx3vsVU4CnYVsgz3OwPVmYbbH3Q1fMQbpFUQI8G0OZFl7U1qkRWDIjBb/W787jn/m8/A3/Q/utdSVqrC75Jy4qIazUQYdTy0fkMvqmil1nIc0ItHZk0FH84AWBwaXNp1fmhePPHR7sC0HGfu3Oqc5SKD3K4xQqVO7uOphPacq6ZTuCpGYOZOItmw7X3/l13YVXtgrfB1vTtO+u39HubSTi+hFwo+geqY3hWLfYtR9S6FrzOfB6pazvk/wWCjSlpzgfP7IK9XIyR3yntsDDwB0=","attributes":{"enabled":true,"nbf":1599470537,"exp":1633599137,"created":1599471137,"updated":1599471137,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599471091,"updated":1599471122}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-07T09:31:59.367082Z", "endDate":
      "2021-09-07T09:31:59.367082Z", "value": "MIIDQDCCAiigAwIBAgIQeaikmC7wRAC3XPkPlZqKvTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMjE3WhcNMjExMDA3MDkzMjE3WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJp7ZPMgqIVFYqgNqbfdQ+qPYkgghXFGQ6uC/A9soaRK6aeks/LspTO8MbRK5ReWheYx3vsVU4CnYVsgz3OwPVmYbbH3Q1fMQbpFUQI8G0OZFl7U1qkRWDIjBb/W787jn/m8/A3/Q/utdSVqrC75Jy4qIazUQYdTy0fkMvqmil1nIc0ItHZk0FH84AWBwaXNp1fmhePPHR7sC0HGfu3Oqc5SKD3K4xQqVO7uOphPacq6ZTuCpGYOZOItmw7X3/l13YVXtgrfB1vTtO+u39HubSTi+hFwo+geqY3hWLfYtR9S6FrzOfB6pazvk/wWCjSlpzgfP7IK9XIyR3yntsDDwB0=",
      "keyId": "88888888-0000-0000-0000-000000000003", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1335'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/79b15008-871d-46a4-a7d8-557c0ff6334f?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:32:24 GMT
      duration:
      - '4141039'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - S6JOxqfnOkanIAG4msJtwrnfA+xqhJrZ7rLDa//lFRU=
      ocp-aad-session-key:
      - aJrqnIF4n2jA1PeZ_SL_68fF1IhSro3EssT273cZPeK8Mh1bdslICXZqFbwYElaPRw_F7PxBnCrrOFqCFwDC1gqfIUy4MQlxxxNDAZO6B_8W8VIl2XbH_7MFtmyeA4HRhmSetGaaPFPKvNkm3ZoL0oqOQ-y_4kLyTJ66rKZq9_k.w15LlX4WYXO7EV2qtNJ0SMcLHxMgEVYNmu40knwturo
      pragma:
      - no-cache
      request-id:
      - 983480f5-702c-4fd6-8663-aab6e394c046
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/62899892e0d749a69ec5cc5f65cacbc2","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/62899892e0d749a69ec5cc5f65cacbc2","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/62899892e0d749a69ec5cc5f65cacbc2","x5t":"g9D9OhxlYsdBATSLm2J7HFRX3wg","cer":"MIIDQDCCAiigAwIBAgIQeaikmC7wRAC3XPkPlZqKvTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjAwOTA3MDkyMjE3WhcNMjExMDA3MDkzMjE3WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCwbVvEYE30s/90jtzXB9DSXp8X5KLoW6ev/u4wxF8/yGKct4EJObvhYRnoXiVWO/jjzSzWEGR0aFS+a/obprXlVgZuP357Ug1yVPL+7oOibmVpPpiiRbP1/nnLdcpRG31KRdJtOyQiVV/5sl5Ya0X72myBvW1SGJXsVprmM/GGiIWW6gnN2cINH4EP8IOS0upQsMyfe1uC9NEYbHnoHwy9T/Z42s06z16hk6y2FiuCVQZ7Eg0DqI6qqbDhU5IUn+SMy8jFE5DPwiIbw67+Hgynhh6nUtYksZwB3h7SBsl63Jp+1F7WRCG7DsdWyFtWc3V5hq6h8gx4nTmp8OBZIVrhAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBRbb1f8yIIvwAu9KkCThLRGQF2LPTAdBgNVHQ4EFgQUW29X/MiCL8ALvSpAk4S0RkBdiz0wDQYJKoZIhvcNAQELBQADggEBAJp7ZPMgqIVFYqgNqbfdQ+qPYkgghXFGQ6uC/A9soaRK6aeks/LspTO8MbRK5ReWheYx3vsVU4CnYVsgz3OwPVmYbbH3Q1fMQbpFUQI8G0OZFl7U1qkRWDIjBb/W787jn/m8/A3/Q/utdSVqrC75Jy4qIazUQYdTy0fkMvqmil1nIc0ItHZk0FH84AWBwaXNp1fmhePPHR7sC0HGfu3Oqc5SKD3K4xQqVO7uOphPacq6ZTuCpGYOZOItmw7X3/l13YVXtgrfB1vTtO+u39HubSTi+hFwo+geqY3hWLfYtR9S6FrzOfB6pazvk/wWCjSlpzgfP7IK9XIyR3yntsDDwB0=","attributes":{"enabled":true,"nbf":1599470537,"exp":1633599137,"created":1599471137,"updated":1599471137,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599471091,"updated":1599471122}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 09:32:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_new_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"79b15008-871d-46a4-a7d8-557c0ff6334f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a79067a8-c8bd-4f90-84d7-1b0ae9e9163e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_new_cert000001","identifierUris":["http://cli_test_sp_with_kv_new_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"83D0FD3A1C6562C74101348B9B627B1C5457DF08","endDate":"2021-09-07T09:31:59.367082Z","keyId":"88888888-0000-0000-0000-000000000003","startDate":"2020-09-07T09:31:59.367082Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/79b15008-871d-46a4-a7d8-557c0ff6334f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"a7ca5872-5192-4ee7-9334-25a94de827d7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 09:32:25 GMT
      duration:
      - '2324596'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QlJ/a4ZnsyendoaPK0HX7IkzZkAn0WBB3t6eh8cDBic=
      ocp-aad-session-key:
      - 9zBMqrTW_GjB3GaGs1tTCFe6mAGose_FntN1scpokSu-THIiXyWHXd_cDjiNcFQ4J3WWoHB_hUXfGOEEfOgKzC12Rcj5BcArdURK-GIA_i1TUCjwETUV-mFSXcGLB-SwCLsgSP-hk6vSdfVmPp0NX_L-sDsg_EziaTL6DnUMPgA.I3wFq-U9ys8cHruxxaQJeJfSPXctgcSXn9pmSu2ijuQ
      pragma:
      - no-cache
      request-id:
      - 72dd1cfd-4fde-4f5a-aba1-007ddd79d7f0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/79b15008-871d-46a4-a7d8-557c0ff6334f?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 09:32:32 GMT
      duration:
      - '57190721'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - TQODFBO79eHT34Qk5647Ew5MUFYqECRDq+7SetrUnAQ=
      ocp-aad-session-key:
      - -1JY2oqOOa1XhkL32xQeNJ2NkLgNOASvgS1ZQqu8uzOQRpAVBBLflkla8sR0WJ7UdAfHBpjReUXVDU71qOJ2WDVWELoTtQyWAlpTLfb0slaISeRVKELkKaT3cJaebfeVhNSkhR3_ZOZ1RHOlEkLvkrFo0_CZusGGm-IFkZiIwfc.zZS_KaXQtrPNEYYOBSmMMEvpGhVd7foRbFMPV84FR0Q
      pragma:
      - no-cache
      request-id:
      - a1a1cd67-925c-42ab-97e5-8541e9e631ac
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
