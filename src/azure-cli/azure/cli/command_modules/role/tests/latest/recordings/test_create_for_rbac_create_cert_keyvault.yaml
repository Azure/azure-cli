interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_new_cert000001%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '92'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:07:59 GMT
      odata-version:
      - '4.0'
      request-id:
      - 570ab14a-b297-4605-b981-8ee26cf5738d
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0001694B"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:07:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 12}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"9d7426fee8dd4de2b3d94b5c8895c8e5"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:01 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=9d7426fee8dd4de2b3d94b5c8895c8e5
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"9d7426fee8dd4de2b3d94b5c8895c8e5"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"9d7426fee8dd4de2b3d94b5c8895c8e5"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/3777405282bc46398e345863c8835dff","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/3777405282bc46398e345863c8835dff","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/3777405282bc46398e345863c8835dff","x5t":"zi70XhiYDmgYL20mMMbXqDNNNvM","cer":"MIIDQDCCAiigAwIBAgIQP5PwanrdQ2SGouOxildvIzANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODAyWhcNMjQwNTE1MTIwODAyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAB6uR1X4o6RJfQmc+tTg1htJoy7tlwuD38SE7WKM4O/oKp2kT1qG7SbdI00IxRnS/qvLRyLuHuRgJQFQfbS7rjpkNyVByQc0JZKTro4sS1c1h0yHDIuDdek2POmn7xnHCKxOReBClz1aYME8DqWqmoskrjniHASG2RPqljT545LA+3rcatAPxCoK0RpELFg/q9UQoGEDeGoDfQZ+PjsZGiASnyCURqfXl2K3BURVH0KA4suk1T06YiBGco8MsK0db2MGyyDY+sFmCIusMkRVoPYboVmIDwZbYAwJYddPYOBktITdQTyi8jqI3Fs8BAuVf90W6PnG7L/t+KHlz0TUt1c=","attributes":{"enabled":true,"nbf":1684151882,"exp":1715774882,"created":1684152482,"updated":1684152482,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152481,"updated":1684152481}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_new_cert000001%27%29
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:07 GMT
      odata-version:
      - '4.0'
      request-id:
      - 639d0149-ddb1-4a32-8084-6ffba9acf023
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00016951"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: '{"displayName": "cli_test_sp_with_kv_new_cert000001", "keyCredentials":
      [{"@odata.type": "#microsoft.graph.keyCredential", "displayName": null, "endDateTime":
      "2024-05-15T12:07:59Z", "key": "MIIDQDCCAiigAwIBAgIQP5PwanrdQ2SGouOxildvIzANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODAyWhcNMjQwNTE1MTIwODAyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAB6uR1X4o6RJfQmc+tTg1htJoy7tlwuD38SE7WKM4O/oKp2kT1qG7SbdI00IxRnS/qvLRyLuHuRgJQFQfbS7rjpkNyVByQc0JZKTro4sS1c1h0yHDIuDdek2POmn7xnHCKxOReBClz1aYME8DqWqmoskrjniHASG2RPqljT545LA+3rcatAPxCoK0RpELFg/q9UQoGEDeGoDfQZ+PjsZGiASnyCURqfXl2K3BURVH0KA4suk1T06YiBGco8MsK0db2MGyyDY+sFmCIusMkRVoPYboVmIDwZbYAwJYddPYOBktITdQTyi8jqI3Fs8BAuVf90W6PnG7L/t+KHlz0TUt1c=",
      "keyId": "88888888-0000-0000-0000-000000000001", "startDateTime": "2023-05-15T12:07:59Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1450'
      Content-Type:
      - application/json
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/applications
  response:
    body:
      string: '{"@odata.context": "https://graph.microsoft.com/v1.0/$metadata#applications/$entity",
        "id": "c96edc81-ee0c-4ed5-91d5-5ebb03d0a224", "deletedDateTime": null, "appId":
        "b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7", "applicationTemplateId": null, "disabledByMicrosoftStatus":
        null, "createdDateTime": "2023-05-15T12:08:08.1157945Z", "displayName": "cli_test_sp_with_kv_new_cert000001",
        "description": null, "groupMembershipClaims": null, "identifierUris": [],
        "isDeviceOnlyAuthSupported": null, "isFallbackPublicClient": null, "notes":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "serviceManagementReference":
        null, "signInAudience": "AzureADandPersonalMicrosoftAccount", "tags": [],
        "tokenEncryptionKeyId": null, "samlMetadataUrl": null, "defaultRedirectUri":
        null, "certification": null, "optionalClaims": null, "servicePrincipalLockConfiguration":
        null, "requestSignatureVerification": null, "addIns": [], "api": {"acceptMappedClaims":
        null, "knownClientApplications": [], "requestedAccessTokenVersion": 2, "oauth2PermissionScopes":
        [], "preAuthorizedApplications": []}, "appRoles": [], "info": {"logoUrl":
        null, "marketingUrl": null, "privacyStatementUrl": null, "supportUrl": null,
        "termsOfServiceUrl": null}, "keyCredentials": [{"customKeyIdentifier": "CE2EF45E18980E68182F6D2630C6D7A8334D36F3",
        "displayName": "CN=KeyVault Generated", "endDateTime": "2024-05-15T12:07:59Z",
        "key": null, "keyId": "88888888-0000-0000-0000-000000000001", "startDateTime":
        "2023-05-15T12:07:59Z", "type": "AsymmetricX509Cert", "usage": "Verify"}],
        "parentalControlSettings": {"countriesBlockedForMinors": [], "legalAgeGroupRule":
        "Allow"}, "passwordCredentials": [], "publicClient": {"redirectUris": []},
        "requiredResourceAccess": [], "verifiedPublisher": {"displayName": null, "verifiedPublisherId":
        null, "addedDateTime": null}, "web": {"homePageUrl": null, "logoutUrl": null,
        "redirectUris": [], "implicitGrantSettings": {"enableAccessTokenIssuance":
        false, "enableIdTokenIssuance": false}, "redirectUriSettings": []}, "spa":
        {"redirectUris": []}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2040'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:08 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224/Microsoft.DirectoryServices.Application
      odata-version:
      - '4.0'
      request-id:
      - 48dedd42-4b2c-45f2-8b4a-e7811dec8264
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00014CC2"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: '{"appId": "b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7", "accountEnabled": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '73'
      Content-Type:
      - application/json
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: POST
    uri: https://graph.microsoft.com/v1.0/servicePrincipals
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals/$entity","id":"a0b85a1a-2a97-41eb-8536-9839a0887112","deletedDateTime":null,"accountEnabled":true,"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_new_cert000001","appDescription":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"appOwnerOrganizationId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"createdDateTime":"2023-05-15T12:08:09Z","description":null,"disabledByMicrosoftStatus":null,"displayName":"cli_test_sp_with_kv_new_cert000001","homepage":null,"loginUrl":null,"logoutUrl":null,"notes":null,"notificationEmailAddresses":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyThumbprint":null,"replyUrls":[],"servicePrincipalNames":["b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7"],"servicePrincipalType":"Application","signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlSingleSignOnSettings":null,"addIns":[],"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"oauth2PermissionScopes":[],"passwordCredentials":[],"resourceSpecificApplicationPermissions":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1350'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:09 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/a0b85a1a-2a97-41eb-8536-9839a0887112/Microsoft.DirectoryServices.ServicePrincipal
      odata-version:
      - '4.0'
      request-id:
      - ff7241e5-6254-4f09-92b7-2d68ccc76a54
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000FD78"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.4
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/3777405282bc46398e345863c8835dff","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/3777405282bc46398e345863c8835dff","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/3777405282bc46398e345863c8835dff","x5t":"zi70XhiYDmgYL20mMMbXqDNNNvM","cer":"MIIDQDCCAiigAwIBAgIQP5PwanrdQ2SGouOxildvIzANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODAyWhcNMjQwNTE1MTIwODAyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAB6uR1X4o6RJfQmc+tTg1htJoy7tlwuD38SE7WKM4O/oKp2kT1qG7SbdI00IxRnS/qvLRyLuHuRgJQFQfbS7rjpkNyVByQc0JZKTro4sS1c1h0yHDIuDdek2POmn7xnHCKxOReBClz1aYME8DqWqmoskrjniHASG2RPqljT545LA+3rcatAPxCoK0RpELFg/q9UQoGEDeGoDfQZ+PjsZGiASnyCURqfXl2K3BURVH0KA4suk1T06YiBGco8MsK0db2MGyyDY+sFmCIusMkRVoPYboVmIDwZbYAwJYddPYOBktITdQTyi8jqI3Fs8BAuVf90W6PnG7L/t+KHlz0TUt1c=","attributes":{"enabled":true,"nbf":1684151882,"exp":1715774882,"created":1684152482,"updated":1684152482,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152481,"updated":1684152481}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2414'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%27b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"c96edc81-ee0c-4ed5-91d5-5ebb03d0a224","deletedDateTime":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:08:08Z","displayName":"cli_test_sp_with_kv_new_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"CE2EF45E18980E68182F6D2630C6D7A8334D36F3","displayName":"CN=KeyVault
        Generated","endDateTime":"2024-05-15T12:07:59Z","key":null,"keyId":"88888888-0000-0000-0000-000000000001","startDateTime":"2023-05-15T12:07:59Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1908'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:10 GMT
      odata-version:
      - '4.0'
      request-id:
      - c4429388-eaa7-45f5-b0dd-cba251434bfe
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000C787"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications/$entity","id":"c96edc81-ee0c-4ed5-91d5-5ebb03d0a224","deletedDateTime":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:08:08Z","displayName":"cli_test_sp_with_kv_new_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"CE2EF45E18980E68182F6D2630C6D7A8334D36F3","displayName":"CN=KeyVault
        Generated","endDateTime":"2024-05-15T12:07:59Z","key":null,"keyId":"88888888-0000-0000-0000-000000000001","startDateTime":"2023-05-15T12:07:59Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1904'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:10 GMT
      odata-version:
      - '4.0'
      request-id:
      - 65078ff2-2bc3-4639-876e-5f6d98dac787
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0001694F"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 12}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"18118095d24d4725beb9f833ec5ac2fa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:10 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=18118095d24d4725beb9f833ec5ac2fa
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"18118095d24d4725beb9f833ec5ac2fa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyDJykL1Q2eIvjuYdNu2GpnRfZ0EbpLN+wwpjlLOyLmPCgxVfsonRnPY70Q4wTmclngF88o9kH5r/swBTnLJazHU6FBMhjUxHmFTXQ/Qlh2M6/EyekzlKEy8sZy6cPAmAVyFIYxxADJQcz92KdcTP40AlShHZBjAmHZP1vt2NrUxcEVMgR+IksJ53BB1i4YQwQqu8oJ/oWjc4q7eUu+nI8Qc0t5cxVkzSEcPhDpRJNkuZVyDET5b4ACL8W0vUf2nD025/U+TACQkCCois/jjYvQds/De88W4Tb+zVzXwnK8NQ2z/bjhpJdf4Q3M58v+Mzqd2M+KzjkN6hska2ey/xsQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAJNQUatz5XsU3vQQfKwH2h39F4OThxMvHSoQeiyvbHxiz6FKUaYWxFPosb/oJ+GabsQWXghToeDWGKEePt2pwvedYH0WbpHCqNdAp0A+JgDvpDpbGXncHOpR6Q7459WZ8wY8QOIt6Cdej3zsFT5oNR41g6utf4BvCJ9lCMrDGpLy1Af3FbDQqpsz7/MGvmHTqXWGUWDjVkVd58KHJpjkjxD0d0TqeKEYqYkS6ZOulfcexRVrHAYBdnsdNz3OxzLX19LARpWw/tnzPNR3v4utDeQbjmZNOuKYqt5xjZwPGfg1L8pC5tNMcWYcApU1ne8YBWL8CLYbSBSz1gNyAKxCXlo=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"18118095d24d4725beb9f833ec5ac2fa"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) msrest/0.7.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0 msrest_azure/0.6.4 azure-keyvault/7.0
        Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/efde7080172a4e26b17671562a645dab","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/efde7080172a4e26b17671562a645dab","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/efde7080172a4e26b17671562a645dab","x5t":"zzwLNbNYzLkaUbemAPNjp1ir30g","cer":"MIIDQDCCAiigAwIBAgIQMIf10vkNRIKePCi81+i5dTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODEyWhcNMjQwNTE1MTIwODEyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAGjE6JonaSdFarJCoFhiSvfpuxk6u9vYbLi8U20kFsDnaMY2ausbzeoV2wy4tEesW+144RIrTO4Pp08cxumJTebkeBNKIsqOLS41pTp6wPr6qNp8RWEvs974fLYUJhP0TM8TjF1Hrs23S67ZdHIiKoxaxuX7AeZhsUmbQe0abtDFR+2nG0ctXRfED6+YZkACx9EDDsCdQLJawrF1Z28BSpK28WzaPlntslOqEYaQMJFWONOpN7voeUEVRS4EvMjLBwRi6FPx4SU4GTnxPQ63fWwOz4cwXD5jf5D/JjMD3mMRG3TOt5FuiDGfLENvIjrUCygejLJa3hDWLgZ+HV7AkeE=","attributes":{"enabled":true,"nbf":1684151892,"exp":1715774892,"created":1684152492,"updated":1684152492,"recoveryLevel":"CustomizedRecoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152481,"updated":1684152490}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"@odata.type": "#microsoft.graph.keyCredential", "displayName":
      null, "endDateTime": "2024-05-15T12:08:10Z", "key": "MIIDQDCCAiigAwIBAgIQMIf10vkNRIKePCi81+i5dTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODEyWhcNMjQwNTE1MTIwODEyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAGjE6JonaSdFarJCoFhiSvfpuxk6u9vYbLi8U20kFsDnaMY2ausbzeoV2wy4tEesW+144RIrTO4Pp08cxumJTebkeBNKIsqOLS41pTp6wPr6qNp8RWEvs974fLYUJhP0TM8TjF1Hrs23S67ZdHIiKoxaxuX7AeZhsUmbQe0abtDFR+2nG0ctXRfED6+YZkACx9EDDsCdQLJawrF1Z28BSpK28WzaPlntslOqEYaQMJFWONOpN7voeUEVRS4EvMjLBwRi6FPx4SU4GTnxPQ63fWwOz4cwXD5jf5D/JjMD3mMRG3TOt5FuiDGfLENvIjrUCygejLJa3hDWLgZ+HV7AkeE=",
      "keyId": "88888888-0000-0000-0000-000000000002", "startDateTime": "2023-05-15T12:08:10Z",
      "type": "AsymmetricX509Cert", "usage": "Verify"}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1397'
      Content-Type:
      - application/json
      ParameterSetName:
      - --id --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: PATCH
    uri: https://graph.microsoft.com/v1.0/applications/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:08:33 GMT
      request-id:
      - 041eea9e-7b0e-41e1-b6ca-122a766fcfd6
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000F2DB"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - azsdk-python-keyvault-certificates/4.7.0 Python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31)
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=7.4
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/efde7080172a4e26b17671562a645dab","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/efde7080172a4e26b17671562a645dab","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/efde7080172a4e26b17671562a645dab","x5t":"zzwLNbNYzLkaUbemAPNjp1ir30g","cer":"MIIDQDCCAiigAwIBAgIQMIf10vkNRIKePCi81+i5dTANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjMwNTE1MTE1ODEyWhcNMjQwNTE1MTIwODEyWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDIMnKQvVDZ4i+O5h027YamdF9nQRuks37DCmOUs7IuY8KDFV+yidGc9jvRDjBOZyWeAXzyj2Qfmv+zAFOcslrMdToUEyGNTEeYVNdD9CWHYzr8TJ6TOUoTLyxnLpw8CYBXIUhjHEAMlBzP3Yp1xM/jQCVKEdkGMCYdk/W+3Y2tTFwRUyBH4iSwnncEHWLhhDBCq7ygn+haNzirt5S76cjxBzS3lzFWTNIRw+EOlEk2S5lXIMRPlvgAIvxbS9R/acPTbn9T5MAJCQIKiKz+ONi9B2z8N7zxbhNv7NXNfCcrw1DbP9uOGkl1/hDczny/4zOp3Yz4rOOQ3qGyRrZ7L/GxAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSJ80Yn4BfoYy57c8RUO1FqFMTPMTAdBgNVHQ4EFgQUifNGJ+AX6GMue3PEVDtRahTEzzEwDQYJKoZIhvcNAQELBQADggEBAGjE6JonaSdFarJCoFhiSvfpuxk6u9vYbLi8U20kFsDnaMY2ausbzeoV2wy4tEesW+144RIrTO4Pp08cxumJTebkeBNKIsqOLS41pTp6wPr6qNp8RWEvs974fLYUJhP0TM8TjF1Hrs23S67ZdHIiKoxaxuX7AeZhsUmbQe0abtDFR+2nG0ctXRfED6+YZkACx9EDDsCdQLJawrF1Z28BSpK28WzaPlntslOqEYaQMJFWONOpN7voeUEVRS4EvMjLBwRi6FPx4SU4GTnxPQ63fWwOz4cwXD5jf5D/JjMD3mMRG3TOt5FuiDGfLENvIjrUCygejLJa3hDWLgZ+HV7AkeE=","attributes":{"enabled":true,"nbf":1684151892,"exp":1715774892,"created":1684152492,"updated":1684152492,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":12,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1684152481,"updated":1684152490}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2414'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=52.191.63.99;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.787.1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%27b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"c96edc81-ee0c-4ed5-91d5-5ebb03d0a224","deletedDateTime":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:08:08Z","displayName":"cli_test_sp_with_kv_new_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"CF3C0B35B358CCB91A51B7A600F363A758ABDF48","displayName":"CN=KeyVault
        Generated","endDateTime":"2024-05-15T12:08:10Z","key":null,"keyId":"88888888-0000-0000-0000-000000000002","startDateTime":"2023-05-15T12:08:10Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1908'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:46 GMT
      odata-version:
      - '4.0'
      request-id:
      - 242e52ac-31e6-4889-a3f5-323e5acc8c75
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00016947"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications/$entity","id":"c96edc81-ee0c-4ed5-91d5-5ebb03d0a224","deletedDateTime":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:08:08Z","displayName":"cli_test_sp_with_kv_new_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"CF3C0B35B358CCB91A51B7A600F363A758ABDF48","displayName":"CN=KeyVault
        Generated","endDateTime":"2024-05-15T12:08:10Z","key":null,"keyId":"88888888-0000-0000-0000-000000000002","startDateTime":"2023-05-15T12:08:10Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1904'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:47 GMT
      odata-version:
      - '4.0'
      request-id:
      - bfc7d99a-7096-4517-9961-dc59ab94d9bb
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0001694C"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20%27b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7%27
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"c96edc81-ee0c-4ed5-91d5-5ebb03d0a224","deletedDateTime":null,"appId":"b2cde3ce-be0d-4d7e-bcb3-a8e4e3414fd7","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2023-05-15T12:08:08Z","displayName":"cli_test_sp_with_kv_new_cert000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlMetadataUrl":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"servicePrincipalLockConfiguration":null,"requestSignatureVerification":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[{"customKeyIdentifier":"CF3C0B35B358CCB91A51B7A600F363A758ABDF48","displayName":"CN=KeyVault
        Generated","endDateTime":"2024-05-15T12:08:10Z","key":null,"keyId":"88888888-0000-0000-0000-000000000002","startDateTime":"2023-05-15T12:08:10Z","type":"AsymmetricX509Cert","usage":"Verify"}],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false},"redirectUriSettings":[]},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1908'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Mon, 15 May 2023 12:08:46 GMT
      odata-version:
      - '4.0'
      request-id:
      - 5d5fccac-070c-411b-894d-188ec3c801ae
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00011788"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/applications/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:08:51 GMT
      request-id:
      - fe0dbb88-45bf-4465-9342-e45b7979e713
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF00016952"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - rest
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --method --url
      User-Agent:
      - python/3.10.11 (Linux-5.15.0-1036-azure-x86_64-with-glibc2.31) AZURECLI/2.48.1
        VSTS_7b238909-6802-4b65-b90d-184bca47f458_build_220_0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/directory/deletedItems/c96edc81-ee0c-4ed5-91d5-5ebb03d0a224
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Mon, 15 May 2023 12:08:52 GMT
      request-id:
      - dbcea2e9-0eec-415e-9781-71e1160214f8
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"East US","Slice":"E","Ring":"5","ScaleUnit":"003","RoleInstance":"BL6PEPF0000BCFF"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
version: 1
