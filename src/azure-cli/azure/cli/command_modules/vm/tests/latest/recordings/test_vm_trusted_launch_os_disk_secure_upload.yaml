interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-12-16T02:55:14Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "UploadPreparedSecure", "uploadSizeBytes": 34359738880}, "securityProfile":
      {"securityType": "TrustedLaunch"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '282'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\"\r\n\
        \  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n    \"hyperVGeneration\"\
        : \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\": \"UploadPreparedSecure\"\
        ,\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"provisioningState\"\
        : \"Updating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/0e2306ab-a59f-4881-88ba-dc4261b6fa8e?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '647'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:21 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/0e2306ab-a59f-4881-88ba-dc4261b6fa8e?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;995,Microsoft.Compute/CreateUpdateDisks30Min;7995
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/0e2306ab-a59f-4881-88ba-dc4261b6fa8e?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:55:22.2989185+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:55:22.4083443+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk000002\"\
        ,\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:55:22.3145698+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"4389afe5-e3ce-4341-90c6-2afbeb190911\"\r\n  }\r\n\
        }\r\n  },\r\n  \"name\": \"0e2306ab-a59f-4881-88ba-dc4261b6fa8e\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1265'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49972,Microsoft.Compute/GetOperation30Min;399972
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:55:22.3145698+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"4389afe5-e3ce-4341-90c6-2afbeb190911\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1040'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14970,Microsoft.Compute/LowCostGet30Min;119970
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:55:22.3145698+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"4389afe5-e3ce-4341-90c6-2afbeb190911\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1040'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14969,Microsoft.Compute/LowCostGet30Min;119969
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400, "getSecureVMGuestStateSAS":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002/beginGetAccess?api-version=2022-07-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/b56a9b05-5b8d-4f89-b8ba-ba30aab7db21?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 16 Dec 2022 02:55:29 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/b56a9b05-5b8d-4f89-b8ba-ba30aab7db21?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;996,Microsoft.Compute/HighCostDiskHydrate30Min;7996
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/b56a9b05-5b8d-4f89-b8ba-ba30aab7db21?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:55:28.9083799+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:55:29.361492+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/hsc4ngp4dhtp/abcd?sv=2018-03-28&sr=b&si=02e24525-211e-409c-ae53-7c1712ab9db2&sig=sCXdE8BVtNq2tD%2FJCPtPwiL%2FT%2B7p9q3RhgtZInDbmVQ%3D\"\
        ,\r\n  \"securityDataAccessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/k4qf3bs2rnzq/757f88c7-fb75-4825-9b67-8088648291e2_vmgs?sv=2018-03-28&sr=b&si=e9c36fc3-f2a3-4fcc-ac8f-5deb2e1ace93&sig=3IxMmn%2BFg7eW3mOtyzneIyj3AI6iJtmZsIa2AiI1Hkw%3D\"\
        \r\n}\r\n  },\r\n  \"name\": \"b56a9b05-5b8d-4f89-b8ba-ba30aab7db21\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '694'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49964,Microsoft.Compute/GetOperation30Min;399963
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/b56a9b05-5b8d-4f89-b8ba-ba30aab7db21?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/hsc4ngp4dhtp/abcd?sv=2018-03-28&sr=b&si=02e24525-211e-409c-ae53-7c1712ab9db2&sig=sCXdE8BVtNq2tD%2FJCPtPwiL%2FT%2B7p9q3RhgtZInDbmVQ%3D\"\
        ,\r\n  \"securityDataAccessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/k4qf3bs2rnzq/757f88c7-fb75-4825-9b67-8088648291e2_vmgs?sv=2018-03-28&sr=b&si=e9c36fc3-f2a3-4fcc-ac8f-5deb2e1ace93&sig=3IxMmn%2BFg7eW3mOtyzneIyj3AI6iJtmZsIa2AiI1Hkw%3D\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '470'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:55:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49965,Microsoft.Compute/GetOperation30Min;399962
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-12-16T02:55:14Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "UploadPreparedSecure", "uploadSizeBytes": 34359738880}, "securityProfile":
      {"securityType": "TrustedLaunch"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '282'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\"\r\n\
        \  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n    \"hyperVGeneration\"\
        : \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\": \"UploadPreparedSecure\"\
        ,\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"provisioningState\"\
        : \"Updating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/72808ed7-54f6-4e29-9db4-1fe50b19ace9?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '649'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:06 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/72808ed7-54f6-4e29-9db4-1fe50b19ace9?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;995,Microsoft.Compute/CreateUpdateDisks30Min;7994
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/72808ed7-54f6-4e29-9db4-1fe50b19ace9?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:56:05.8461165+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:56:05.9399139+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk1000003\"\
        ,\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:05.8461165+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"0a331186-1dfa-4d23-9da4-97aebbc7a6f9\"\r\n  }\r\n\
        }\r\n  },\r\n  \"name\": \"72808ed7-54f6-4e29-9db4-1fe50b19ace9\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1267'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49964,Microsoft.Compute/GetOperation30Min;399961
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:05.8461165+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"0a331186-1dfa-4d23-9da4-97aebbc7a6f9\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14964,Microsoft.Compute/LowCostGet30Min;119960
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\"\
        : 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\"\
        : 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"securityProfile\"\
        : {\r\n      \"securityType\": \"TrustedLaunch\"\r\n    },\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:05.8461165+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"0a331186-1dfa-4d23-9da4-97aebbc7a6f9\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14963,Microsoft.Compute/LowCostGet30Min;119959
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400, "getSecureVMGuestStateSAS":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003/beginGetAccess?api-version=2022-07-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/98e4587f-b373-4f75-b3cd-dfae99ed2051?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 16 Dec 2022 02:56:13 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/98e4587f-b373-4f75-b3cd-dfae99ed2051?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;996,Microsoft.Compute/HighCostDiskHydrate30Min;7995
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/98e4587f-b373-4f75-b3cd-dfae99ed2051?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:56:12.3461779+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:56:12.5961671+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/mk3gmx3qqxmm/abcd?sv=2018-03-28&sr=b&si=1fb8976b-21dd-4aca-842a-0c67fd815c3b&sig=8X2GV0tSChlikqd67qXW3Nbe%2B0aNVDHRIKEJ1934FrE%3D\"\
        ,\r\n  \"securityDataAccessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/l1lpn1t0x3fk/ae604fff-98ec-4d0e-ac4a-964b3bae64b2_vmgs?sv=2018-03-28&sr=b&si=27a7259f-5172-4649-83d5-690ed249188c&sig=yzL3mf48mLOB3s0DDs5RjVd9xZY8wCNGRQejg98yHss%3D\"\
        \r\n}\r\n  },\r\n  \"name\": \"98e4587f-b373-4f75-b3cd-dfae99ed2051\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '689'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49961,Microsoft.Compute/GetOperation30Min;399953
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/98e4587f-b373-4f75-b3cd-dfae99ed2051?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/mk3gmx3qqxmm/abcd?sv=2018-03-28&sr=b&si=1fb8976b-21dd-4aca-842a-0c67fd815c3b&sig=8X2GV0tSChlikqd67qXW3Nbe%2B0aNVDHRIKEJ1934FrE%3D\"\
        ,\r\n  \"securityDataAccessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/l1lpn1t0x3fk/ae604fff-98ec-4d0e-ac4a-964b3bae64b2_vmgs?sv=2018-03-28&sr=b&si=27a7259f-5172-4649-83d5-690ed249188c&sig=yzL3mf48mLOB3s0DDs5RjVd9xZY8wCNGRQejg98yHss%3D\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '464'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49960,Microsoft.Compute/GetOperation30Min;399952
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-12-16T02:55:14Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "Upload", "uploadSizeBytes": 34359738880}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '214'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\"\r\n\
        \  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n    \"hyperVGeneration\"\
        : \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\": \"Upload\"\
        ,\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"provisioningState\"\
        : \"Updating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/55c1e6ba-b4e8-458a-8528-d1e43d10455f?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '562'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:50 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/55c1e6ba-b4e8-458a-8528-d1e43d10455f?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;995,Microsoft.Compute/CreateUpdateDisks30Min;7993
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/55c1e6ba-b4e8-458a-8528-d1e43d10455f?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:56:51.3307991+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:56:51.4245442+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk2000004\"\
        ,\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\
        \n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\":\
        \ 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:51.3307991+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"3f60a6ee-2001-4ddc-a9ac-0166aac8c1af\"\r\n  }\r\n\
        }\r\n  },\r\n  \"name\": \"55c1e6ba-b4e8-458a-8528-d1e43d10455f\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1180'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49959,Microsoft.Compute/GetOperation30Min;399951
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\
        \n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\":\
        \ 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:51.3307991+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"3f60a6ee-2001-4ddc-a9ac-0166aac8c1af\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '955'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14957,Microsoft.Compute/LowCostGet30Min;119949
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n\
        \    \"tier\": \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\"\
        : \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\"\
        : {\r\n      \"createOption\": \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\
        \n    },\r\n    \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\":\
        \ 60,\r\n    \"encryption\": {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\
        \r\n    },\r\n    \"networkAccessPolicy\": \"AllowAll\",\r\n    \"publicNetworkAccess\"\
        : \"Enabled\",\r\n    \"timeCreated\": \"2022-12-16T02:56:51.3307991+00:00\"\
        ,\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"diskState\": \"ReadyToUpload\"\
        ,\r\n    \"uniqueId\": \"3f60a6ee-2001-4ddc-a9ac-0166aac8c1af\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '955'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:56:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14956,Microsoft.Compute/LowCostGet30Min;119948
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004/beginGetAccess?api-version=2022-07-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/20c73518-396f-4f7a-a560-2af26dc8f4ff?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 16 Dec 2022 02:56:56 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/20c73518-396f-4f7a-a560-2af26dc8f4ff?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;996,Microsoft.Compute/HighCostDiskHydrate30Min;7994
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/20c73518-396f-4f7a-a560-2af26dc8f4ff?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-12-16T02:56:57.3933198+00:00\",\r\n  \"\
        endTime\": \"2022-12-16T02:56:57.5964426+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/h3nrd0w5jg53/abcd?sv=2018-03-28&sr=b&si=1684bc92-8e5d-4de0-97eb-6c3390bd3101&sig=0KSHZ3kDmGfMS6uqNhd6DGuhcZHQ60i7hlbY6bf4i88%3D\"\
        \r\n}\r\n  },\r\n  \"name\": \"20c73518-396f-4f7a-a560-2af26dc8f4ff\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '433'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:57:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49960,Microsoft.Compute/GetOperation30Min;399948
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.43.0 azsdk-python-azure-mgmt-compute/29.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/20c73518-396f-4f7a-a560-2af26dc8f4ff?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-kqzpcmrdcvlq.z19.blob.storage.azure.net/h3nrd0w5jg53/abcd?sv=2018-03-28&sr=b&si=1684bc92-8e5d-4de0-97eb-6c3390bd3101&sig=0KSHZ3kDmGfMS6uqNhd6DGuhcZHQ60i7hlbY6bf4i88%3D\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '208'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 16 Dec 2022 02:57:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49959,Microsoft.Compute/GetOperation30Min;399947
    status:
      code: 200
      message: OK
version: 1
