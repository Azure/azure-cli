interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Metadata:
      - 'true'
      User-Agent:
      - python/3.8.10 (Linux-6.5.0-1021-azure-x86_64-with-glibc2.29) msrest/0.7.1
        msrest_azure/0.6.4
    method: GET
    uri: http://169.254.169.254/metadata/identity/oauth2/token?resource=https%3A%2F%2Fmanagement.core.windows.net%2F&api-version=2018-02-01&msi_res_id=%2Fsubscriptions%2F2b915285-1302-4a0f-8b54-f502a6b619a6%2FresourceGroups%2FInfrastructures%2Fproviders%2FMicrosoft.ManagedIdentity%2FuserAssignedIdentities%2Faksdevinfra1esagentpool
  response:
    body:
      string: '{"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCIsImtpZCI6IkwxS2ZLRklfam5YYndXYzIyeFp4dzFzVUhIMCJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNzE3NTQxNTA2LCJuYmYiOjE3MTc1NDE1MDYsImV4cCI6MTcxNzYyODIwNiwiYWlvIjoiRTJOZ1lNZzhHYmI4MDZlK3VLWFRhKy85c2Z1N0d3QT0iLCJhcHBpZCI6IjcwNWFjMDAwLWJmNjctNGVlZC05YmEwLTllZTcyM2RmMjgzYSIsImFwcGlkYWNyIjoiMiIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0Ny8iLCJpZHR5cCI6ImFwcCIsIm9pZCI6IjVhZjA5YjVmLWFmOGYtNDkxMi1iOWZiLWRiNWMyMjdhZDgzNCIsInJoIjoiMC5BQm9BdjRqNWN2R0dyMEdScXkxODBCSGJSMFpJZjNrQXV0ZFB1a1Bhd2ZqMk1CTWFBQUEuIiwic3ViIjoiNWFmMDliNWYtYWY4Zi00OTEyLWI5ZmItZGI1YzIyN2FkODM0IiwidGlkIjoiNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3IiwidXRpIjoiaDVacVE3Z2xrVVd2Mll4NGEyZ0RBZyIsInZlciI6IjEuMCIsInhtc19hel9yaWQiOiIvc3Vic2NyaXB0aW9ucy8yYjkxNTI4NS0xMzAyLTRhMGYtOGI1NC1mNTAyYTZiNjE5YTYvcmVzb3VyY2Vncm91cHMvMUVTSG9zdGVkUG9vbC1BS1MtRGV2SW5mcmEtR3JlZW4vcHJvdmlkZXJzL01pY3Jvc29mdC5DbG91ZFRlc3QvaG9zdGVkcG9vbHMvMUVTLUFLUy1EZXZJbmZyYS1BdXRvLVRlYXJEb3duLUdyZWVuIiwieG1zX21pcmlkIjoiL3N1YnNjcmlwdGlvbnMvMmI5MTUyODUtMTMwMi00YTBmLThiNTQtZjUwMmE2YjYxOWE2L3Jlc291cmNlZ3JvdXBzL0luZnJhc3RydWN0dXJlcy9wcm92aWRlcnMvTWljcm9zb2Z0Lk1hbmFnZWRJZGVudGl0eS91c2VyQXNzaWduZWRJZGVudGl0aWVzL2Frc2RldmluZnJhMWVzYWdlbnRwb29sIiwieG1zX3RjZHQiOjEyODkyNDE1NDd9.dqzdkyfkmQlEpfB_uD9GxQdY1AanDDsggKbYvo4iX4sT26npt_lmOIuNQ_72hAG9XoXR1eqAXXAcCXDIGLP5GqlOIupL8OeEXV4CRJql_07ADjXyQpnqdqlsUHELXaypKhhbeASne9_Yph6YsRWYoYx8YPJOX5hK72x-e0PRSXHAF1aci3aED4ibrbfFK5fScFgjAH8pjNxiJ2FtTrUeWFHo3jOKkgAcyNzF6adwaoQM1Ir0gUjjAqljTqf623xtuy1qDCoHkOVcqqrIM6OHwQj9f0gvXf7nJ-VF7fnPv4SE1IVinSehWcGrCs1gE0DjUZ2L5X64s-GTH6oi-R9aSw","client_id":"705ac000-bf67-4eed-9ba0-9ee723df283a","expires_in":"86380","expires_on":"1717628206","ext_expires_in":"86399","not_before":"1717541506","resource":"https://management.core.windows.net/","token_type":"Bearer"}'
    headers:
      content-length:
      - '2036'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 04 Jun 2024 22:57:06 GMT
      server:
      - IMDS/150.870.65.1305
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aks mesh get-revisions
      Connection:
      - keep-alive
      ParameterSetName:
      - -l
      User-Agent:
      - AZURECLI/2.61.0 azsdk-python-core/1.28.0 Python/3.8.10 (Linux-6.5.0-1021-azure-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/meshRevisionProfiles?api-version=2024-02-01
  response:
    body:
      string: "{\n  \"value\": [\n   {\n    \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.ContainerService/locations/westus2/meshRevisionProfiles/istio\",\n
        \   \"name\": \"istio\",\n    \"type\": \"Microsoft.ContainerService/locations/meshRevisionProfiles\",\n
        \   \"properties\": {\n     \"meshRevisions\": [\n      {\n       \"revision\":
        \"asm-1-20\",\n       \"upgrades\": [\n        \"asm-1-21\"\n       ],\n       \"compatibleWith\":
        [\n        {\n         \"name\": \"kubernetes\",\n         \"versions\": [\n
        \         \"1.25\",\n          \"1.26\",\n          \"1.27\",\n          \"1.28\",\n
        \         \"1.29\"\n         ]\n        }\n       ]\n      },\n      {\n       \"revision\":
        \"asm-1-21\",\n       \"compatibleWith\": [\n        {\n         \"name\":
        \"kubernetes\",\n         \"versions\": [\n          \"1.26\",\n          \"1.27\",\n
        \         \"1.28\",\n          \"1.29\",\n          \"1.30\"\n         ]\n
        \       }\n       ]\n      }\n     ]\n    }\n   }\n  ]\n }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '894'
      content-type:
      - application/json
      date:
      - Tue, 04 Jun 2024 22:57:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 2C172B11D1A940F58E850499C3FF0F8F Ref B: MNZ221060608011 Ref C: 2024-06-04T22:57:07Z'
    status:
      code: 200
      message: OK
version: 1
