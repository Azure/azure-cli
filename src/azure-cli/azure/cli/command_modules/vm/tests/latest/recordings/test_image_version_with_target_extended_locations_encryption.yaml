interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_target_extended_locations_encryption000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001","name":"cli_test_target_extended_locations_encryption000001","type":"Microsoft.Resources/resourceGroups","location":"westus","tags":{"product":"azurecli","cause":"automation","test":"test_image_version_with_target_extended_locations_encryption","date":"2023-10-13T07:40:36Z","module":"vm"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '464'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "tags": {}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig create
      Connection:
      - keep-alive
      Content-Length:
      - '34'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --gallery-name
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"name\": \"gallery_000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries\",\r\n  \"location\": \"westus\"\
        ,\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"identifier\": {\r\n \
        \     \"uniqueName\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590-GALLERY_5PXTK5IA4NNZ\"\
        \r\n    },\r\n    \"provisioningState\": \"Creating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/af9bcc67-8dde-45b2-a61e-ce7d5c9b95f8?api-version=2021-10-01
      cache-control:
      - no-cache
      content-length:
      - '470'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateGallery3Min;48,Microsoft.Compute/CreateUpdateGallery30Min;298
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/af9bcc67-8dde-45b2-a61e-ce7d5c9b95f8?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:41:21.7834492+00:00\",\r\n  \"\
        endTime\": \"2023-10-13T07:41:22.0334709+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"name\": \"af9bcc67-8dde-45b2-a61e-ce7d5c9b95f8\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '184'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1194,Microsoft.Compute/GetOperationStatus30Min;4194
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"name\": \"gallery_000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries\",\r\n  \"location\": \"westus\"\
        ,\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"identifier\": {\r\n \
        \     \"uniqueName\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590-GALLERY_5PXTK5IA4NNZ\"\
        \r\n    },\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '471'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetGallery3Min;343,Microsoft.Compute/GetGallery30Min;2493
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-definition create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name --gallery-image-definition --os-type -p -f -s
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_target_extended_locations_encryption000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001","name":"cli_test_target_extended_locations_encryption000001","type":"Microsoft.Resources/resourceGroups","location":"westus","tags":{"product":"azurecli","cause":"automation","test":"test_image_version_with_target_extended_locations_encryption","date":"2023-10-13T07:40:36Z","module":"vm"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '464'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "tags": {}, "properties": {"osType": "Windows",
      "osState": "Generalized", "hyperVGeneration": "V1", "identifier": {"publisher":
      "publisher1", "offer": "offer1", "sku": "sku1"}, "disallowed": {}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-definition create
      Connection:
      - keep-alive
      Content-Length:
      - '218'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --gallery-name --gallery-image-definition --os-type -p -f -s
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"name\": \"image1\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries/images\",\r\n  \"location\"\
        : \"westus\",\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"hyperVGeneration\"\
        : \"V1\",\r\n    \"architecture\": \"x64\",\r\n    \"osType\": \"Windows\"\
        ,\r\n    \"osState\": \"Generalized\",\r\n    \"identifier\": {\r\n      \"\
        publisher\": \"publisher1\",\r\n      \"offer\": \"offer1\",\r\n      \"sku\"\
        : \"sku1\"\r\n    },\r\n    \"provisioningState\": \"Creating\"\r\n  }\r\n\
        }"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/704af6a8-f372-4add-8af0-1249b712b517?api-version=2021-10-01
      cache-control:
      - no-cache
      content-length:
      - '599'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateGalleryImage3Min;148,Microsoft.Compute/CreateUpdateGalleryImage30Min;748
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-definition create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name --gallery-image-definition --os-type -p -f -s
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/704af6a8-f372-4add-8af0-1249b712b517?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:41:44.7684791+00:00\",\r\n  \"\
        endTime\": \"2023-10-13T07:41:44.8622243+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"name\": \"704af6a8-f372-4add-8af0-1249b712b517\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '184'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1192,Microsoft.Compute/GetOperationStatus30Min;4192
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-definition create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --gallery-name --gallery-image-definition --os-type -p -f -s
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1?api-version=2021-10-01
  response:
    body:
      string: "{\r\n  \"name\": \"image1\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries/images\",\r\n  \"location\"\
        : \"westus\",\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"hyperVGeneration\"\
        : \"V1\",\r\n    \"architecture\": \"x64\",\r\n    \"osType\": \"Windows\"\
        ,\r\n    \"osState\": \"Generalized\",\r\n    \"identifier\": {\r\n      \"\
        publisher\": \"publisher1\",\r\n      \"offer\": \"offer1\",\r\n      \"sku\"\
        : \"sku1\"\r\n    },\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n\
        }"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '600'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetGalleryImage3Min;594,Microsoft.Compute/GetGalleryImage30Min;2994
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --size-gb
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_target_extended_locations_encryption000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001","name":"cli_test_target_extended_locations_encryption000001","type":"Microsoft.Resources/resourceGroups","location":"westus","tags":{"product":"azurecli","cause":"automation","test":"test_image_version_with_target_extended_locations_encryption","date":"2023-10-13T07:40:36Z","module":"vm"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '464'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "tags": {}, "sku": {"name": "Premium_LRS"}, "properties":
      {"hyperVGeneration": "V1", "creationData": {"createOption": "Empty"}, "diskSizeGB":
      10}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '169'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --size-gb
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"westus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Premium_LRS\"\r\n\
        \  },\r\n  \"properties\": {\r\n    \"hyperVGeneration\": \"V1\",\r\n    \"\
        creationData\": {\r\n      \"createOption\": \"Empty\"\r\n    },\r\n    \"\
        diskSizeGB\": 10,\r\n    \"provisioningState\": \"Updating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/829fbabd-d896-4186-bede-acfc0e2fb53f?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&api-version=2022-07-02
      cache-control:
      - no-cache
      content-length:
      - '493'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:51 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/829fbabd-d896-4186-bede-acfc0e2fb53f?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&monitor=true&api-version=2022-07-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;2999,Microsoft.Compute/CreateUpdateDisks30Min;24999
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --size-gb
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/829fbabd-d896-4186-bede-acfc0e2fb53f?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:41:51.6863787+00:00\",\r\n  \"\
        endTime\": \"2023-10-13T07:41:51.8113738+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk\",\r\n\
        \  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"westus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Premium_LRS\",\r\n\
        \    \"tier\": \"Premium\"\r\n  },\r\n  \"properties\": {\r\n    \"hyperVGeneration\"\
        : \"V1\",\r\n    \"creationData\": {\r\n      \"createOption\": \"Empty\"\r\
        \n    },\r\n    \"diskSizeGB\": 10,\r\n    \"diskIOPSReadWrite\": 120,\r\n\
        \    \"diskMBpsReadWrite\": 25,\r\n    \"encryption\": {\r\n      \"type\"\
        : \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\"\
        : \"AllowAll\",\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\"\
        : \"2023-10-13T07:41:51.6863787+00:00\",\r\n    \"provisioningState\": \"\
        Succeeded\",\r\n    \"diskState\": \"Unattached\",\r\n    \"diskSizeBytes\"\
        : 10737418240,\r\n    \"uniqueId\": \"fd012639-7701-47fd-9d7b-b28384e78a40\"\
        ,\r\n    \"tier\": \"P3\"\r\n  }\r\n}\r\n  },\r\n  \"name\": \"829fbabd-d896-4186-bede-acfc0e2fb53f\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1161'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49992,Microsoft.Compute/GetOperation30Min;399957
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --size-gb
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk?api-version=2022-07-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk\"\
        ,\r\n  \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"westus\"\
        ,\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Premium_LRS\",\r\n\
        \    \"tier\": \"Premium\"\r\n  },\r\n  \"properties\": {\r\n    \"hyperVGeneration\"\
        : \"V1\",\r\n    \"creationData\": {\r\n      \"createOption\": \"Empty\"\r\
        \n    },\r\n    \"diskSizeGB\": 10,\r\n    \"diskIOPSReadWrite\": 120,\r\n\
        \    \"diskMBpsReadWrite\": 25,\r\n    \"encryption\": {\r\n      \"type\"\
        : \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\"\
        : \"AllowAll\",\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\"\
        : \"2023-10-13T07:41:51.6863787+00:00\",\r\n    \"provisioningState\": \"\
        Succeeded\",\r\n    \"diskState\": \"Unattached\",\r\n    \"diskSizeBytes\"\
        : 10737418240,\r\n    \"uniqueId\": \"fd012639-7701-47fd-9d7b-b28384e78a40\"\
        ,\r\n    \"tier\": \"P3\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '936'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14991,Microsoft.Compute/LowCostGet30Min;119895
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.8.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://vault-000002.vault.azure.net/keys/key-000004/create?api-version=7.4-preview.1
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.microsoftonline.com/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.37;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.1018.1
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.8.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://vault-000002.vault.azure.net/keys/key-000004/create?api-version=7.4-preview.1
  response:
    body:
      string: '{"key":{"kid":"https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"tnz58yrWHfFnzaHINo2BPZ3jxRKDxdsHuOZTkjtCiG6eVGN-5cUP-F4BzpzNMNOCkq4S1M2t6PfjK5V55S6Vl8N4uzMG9SUwf7D37Qu5wctfnc1DNGMjNd4LG36XXPXoiAu8DKBTEUbQOqB7a_J6LLYgj4zNtBMhpnwGmunnTkicMp5eeP5yeNb7TyAlUKmTnWI_eIGFdJy8IVTs0Q5l7Se4xyhKDlhSMcHgXL_oDYJiOLOzXiv4qetWUSULg78O9jEjT9jHcN00Rogj6kUlUCZMb_HOD-TBg08acoG5r1yxJoEU4UIZPhA7i20lVFJfLDvthaTqRhAowKWZhBV3BQ","e":"AQAB"},"attributes":{"enabled":true,"created":1697182914,"updated":1697182914,"recoveryLevel":"CustomizedRecoverable","recoverableDays":7,"exportable":false}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '696'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.37;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.1018.1
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "identity": {"type": "SystemAssigned"}, "properties":
      {"activeKey": {"sourceVault": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002"},
      "keyUrl": "https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk-encryption-set create
      Connection:
      - keep-alive
      Content-Length:
      - '386'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --key-url --source-vault --location
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"location\": \"westus\",\r\n  \"identity\": {\r\n    \"type\"\
        : \"SystemAssigned\"\r\n  },\r\n  \"properties\": {\r\n    \"activeKey\":\
        \ {\r\n      \"sourceVault\": {\r\n        \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002\"\
        \r\n      },\r\n      \"keyUrl\": \"https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a\"\
        \r\n    },\r\n    \"provisioningState\": \"Updating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/efb9e74b-c31b-44d7-a20f-8ac9372858c9?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '495'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:59 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/efb9e74b-c31b-44d7-a20f-8ac9372858c9?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskEncryptionSet3Min;99,Microsoft.Compute/HighCostDiskEncryptionSet30Min;299
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk-encryption-set create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --key-url --source-vault --location
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/DiskOperations/efb9e74b-c31b-44d7-a20f-8ac9372858c9?p=42128af7-4c72-4222-9761-fb0d8e6cebdc&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:00.0145689+00:00\",\r\n  \"\
        endTime\": \"2023-10-13T07:42:00.0927355+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"des1-000005\"\
        ,\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        ,\r\n  \"type\": \"Microsoft.Compute/diskEncryptionSets\",\r\n  \"location\"\
        : \"westus\",\r\n  \"identity\": {\r\n    \"type\": \"SystemAssigned\",\r\n\
        \    \"principalId\": \"ca5c8a86-d759-4e1f-8451-b6c8d5fec26a\",\r\n    \"\
        tenantId\": \"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a\"\r\n  },\r\n  \"properties\"\
        : {\r\n    \"activeKey\": {\r\n      \"sourceVault\": {\r\n        \"id\"\
        : \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002\"\
        \r\n      },\r\n      \"keyUrl\": \"https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a\"\
        \r\n    },\r\n    \"encryptionType\": \"EncryptionAtRestWithCustomerKey\"\
        ,\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n}\r\n  },\r\n  \"\
        name\": \"efb9e74b-c31b-44d7-a20f-8ac9372858c9\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:41:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49990,Microsoft.Compute/GetOperation30Min;399955
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk-encryption-set create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --key-url --source-vault --location
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"des1-000005\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        ,\r\n  \"type\": \"Microsoft.Compute/diskEncryptionSets\",\r\n  \"location\"\
        : \"westus\",\r\n  \"identity\": {\r\n    \"type\": \"SystemAssigned\",\r\n\
        \    \"principalId\": \"ca5c8a86-d759-4e1f-8451-b6c8d5fec26a\",\r\n    \"\
        tenantId\": \"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a\"\r\n  },\r\n  \"properties\"\
        : {\r\n    \"activeKey\": {\r\n      \"sourceVault\": {\r\n        \"id\"\
        : \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002\"\
        \r\n      },\r\n      \"keyUrl\": \"https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a\"\
        \r\n    },\r\n    \"encryptionType\": \"EncryptionAtRestWithCustomerKey\"\
        ,\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '938'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14989,Microsoft.Compute/LowCostGet30Min;119893
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk-encryption-set show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.53.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"des1-000005\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        ,\r\n  \"type\": \"Microsoft.Compute/diskEncryptionSets\",\r\n  \"location\"\
        : \"westus\",\r\n  \"identity\": {\r\n    \"type\": \"SystemAssigned\",\r\n\
        \    \"principalId\": \"ca5c8a86-d759-4e1f-8451-b6c8d5fec26a\",\r\n    \"\
        tenantId\": \"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a\"\r\n  },\r\n  \"properties\"\
        : {\r\n    \"activeKey\": {\r\n      \"sourceVault\": {\r\n        \"id\"\
        : \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002\"\
        \r\n      },\r\n      \"keyUrl\": \"https://vault-000002.vault.azure.net/keys/key-000004/4d20df8c4492417699e82a34a9d2268a\"\
        \r\n    },\r\n    \"encryptionType\": \"EncryptionAtRestWithCustomerKey\"\
        ,\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '938'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14987,Microsoft.Compute/LowCostGet30Min;119891
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-keyvault/10.2.3 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resources?$filter=resourceType%20eq%20%27Microsoft.KeyVault%2Fvaults%27%20and%20name%20eq%20%27vault-000002%27&api-version=2015-11-01
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002","name":"vault-000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '275'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-keyvault/10.2.3 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002","name":"vault-000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"systemData":{"createdBy":"v-jingszhang@microsoft.com","createdByType":"User","createdAt":"2023-10-13T07:40:42.811Z","lastModifiedBy":"v-jingszhang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-10-13T07:40:42.811Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"d44a2991-98c6-47c3-b59b-2b30d72cfcc2","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enablePurgeProtection":true,"vaultUri":"https://vault-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1041'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.945.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "tags": {}, "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId": "d44a2991-98c6-47c3-b59b-2b30d72cfcc2",
      "permissions": {"keys": ["all"], "secrets": ["all"], "certificates": ["all"],
      "storage": ["all"]}}, {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId":
      "ca5c8a86-d759-4e1f-8451-b6c8d5fec26a", "permissions": {"keys": ["unwrapKey",
      "get", "wrapKey"]}}], "vaultUri": "https://vault-000002.vault.azure.net/", "enabledForDeployment":
      false, "enableSoftDelete": true, "softDeleteRetentionInDays": 7, "enablePurgeProtection":
      true, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      Content-Length:
      - '776'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-keyvault/10.2.3 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002?api-version=2023-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.KeyVault/vaults/vault-000002","name":"vault-000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"systemData":{"createdBy":"v-jingszhang@microsoft.com","createdByType":"User","createdAt":"2023-10-13T07:40:42.811Z","lastModifiedBy":"v-jingszhang@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2023-10-13T07:42:05.739Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"d44a2991-98c6-47c3-b59b-2b30d72cfcc2","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}},{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"ca5c8a86-d759-4e1f-8451-b6c8d5fec26a","permissions":{"keys":["unwrapKey","get","wrapKey"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"enablePurgeProtection":true,"vaultUri":"https://vault-000002.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1196'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.945.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1194'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_target_extended_locations_encryption000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001","name":"cli_test_target_extended_locations_encryption000001","type":"Microsoft.Resources/resourceGroups","location":"westus","tags":{"product":"azurecli","cause":"automation","test":"test_image_version_with_target_extended_locations_encryption","date":"2023-10-13T07:40:36Z","module":"vm"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '464'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "tags": {}, "properties": {"publishingProfile":
      {"targetRegions": [{"name": "westus", "regionalReplicaCount": 1, "encryption":
      {"osDiskImage": {"diskEncryptionSetId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005"},
      "dataDiskImages": [{"diskEncryptionSetId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005",
      "lun": 0}]}}], "targetExtendedLocations": [{"name": "westus", "extendedLocation":
      {"name": "microsoftlosangeles1", "type": "EdgeZone"}, "extendedLocationReplicaCount":
      1, "encryption": {"osDiskImage": {"diskEncryptionSetId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005"},
      "dataDiskImages": [{"diskEncryptionSetId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005",
      "lun": 0}]}}]}, "storageProfile": {"osDiskImage": {"source": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk"}}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      Content-Length:
      - '1459'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1/versions/1.0.0?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"name\": \"1.0.0\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1/versions/1.0.0\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries/images/versions\",\r\n  \"\
        location\": \"westus\",\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"\
        publishingProfile\": {\r\n      \"targetRegions\": [\r\n        {\r\n    \
        \      \"name\": \"West US\",\r\n          \"regionalReplicaCount\": 1,\r\n\
        \          \"storageAccountType\": \"Standard_LRS\",\r\n          \"encryption\"\
        : {\r\n            \"osDiskImage\": {\r\n              \"securityProfile\"\
        : {},\r\n              \"diskEncryptionSetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n            },\r\n            \"dataDiskImages\": [\r\n              {\r\
        \n                \"lun\": 0,\r\n                \"diskEncryptionSetId\":\
        \ \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n              }\r\n            ]\r\n          }\r\n        }\r\n     \
        \ ],\r\n      \"targetExtendedLocations\": [\r\n        {\r\n          \"\
        extendedLocation\": {\r\n            \"type\": \"EdgeZone\",\r\n         \
        \   \"name\": \"microsoftlosangeles1\"\r\n          },\r\n          \"name\"\
        : \"West US\",\r\n          \"extendedLocationReplicaCount\": 1,\r\n     \
        \     \"storageAccountType\": \"StandardSSD_LRS\",\r\n          \"encryption\"\
        : {\r\n            \"osDiskImage\": {\r\n              \"securityProfile\"\
        : {},\r\n              \"diskEncryptionSetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n            },\r\n            \"dataDiskImages\": [\r\n              {\r\
        \n                \"lun\": 0,\r\n                \"diskEncryptionSetId\":\
        \ \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n              }\r\n            ]\r\n          }\r\n        }\r\n     \
        \ ],\r\n      \"replicaCount\": 1,\r\n      \"excludeFromLatest\": false,\r\
        \n      \"publishedDate\": \"2023-10-13T07:42:11.1754113+00:00\",\r\n    \
        \  \"storageAccountType\": \"Standard_LRS\"\r\n    },\r\n    \"storageProfile\"\
        : {\r\n      \"osDiskImage\": {\r\n        \"hostCaching\": \"ReadWrite\"\
        ,\r\n        \"source\": {\r\n          \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk\"\
        \r\n        }\r\n      }\r\n    },\r\n    \"safetyProfile\": {\r\n      \"\
        reportedForPolicyViolation\": false,\r\n      \"allowDeletionOfReplicatedLocations\"\
        : false\r\n    },\r\n    \"provisioningState\": \"Creating\"\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
      cache-control:
      - no-cache
      content-length:
      - '2874'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateGalleryImageVersion3Min;373,Microsoft.Compute/CreateUpdateGalleryImageVersion30Min;1198
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:42:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1189,Microsoft.Compute/GetOperationStatus30Min;4188
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:43:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1188,Microsoft.Compute/GetOperationStatus30Min;4184
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:44:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1186,Microsoft.Compute/GetOperationStatus30Min;4180
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:45:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1189,Microsoft.Compute/GetOperationStatus30Min;4177
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:46:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1189,Microsoft.Compute/GetOperationStatus30Min;4173
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:47:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1189,Microsoft.Compute/GetOperationStatus30Min;4169
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:48:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1189,Microsoft.Compute/GetOperationStatus30Min;4165
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        status\": \"InProgress\",\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\
        \r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:49:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1190,Microsoft.Compute/GetOperationStatus30Min;4162
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/westus/capsOperations/f28ba633-8ba8-496d-882b-dcaa4b0c63a1?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"startTime\": \"2023-10-13T07:42:11.1441013+00:00\",\r\n  \"\
        endTime\": \"2023-10-13T07:49:41.9661471+00:00\",\r\n  \"status\": \"Succeeded\"\
        ,\r\n  \"name\": \"f28ba633-8ba8-496d-882b-dcaa4b0c63a1\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '184'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:50:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperationStatus3Min;1190,Microsoft.Compute/GetOperationStatus30Min;4158
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sig image-version create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --gallery-name --gallery-image-definition --gallery-image-version
        --os-snapshot --target-regions --target-region-encryption --target-edge-zones
        --target-edge-zone-encryption
      User-Agent:
      - AZURECLI/2.53.0 azsdk-python-azure-mgmt-compute/30.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1/versions/1.0.0?api-version=2022-03-03
  response:
    body:
      string: "{\r\n  \"name\": \"1.0.0\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/galleries/gallery_000003/images/image1/versions/1.0.0\"\
        ,\r\n  \"type\": \"Microsoft.Compute/galleries/images/versions\",\r\n  \"\
        location\": \"westus\",\r\n  \"tags\": {},\r\n  \"properties\": {\r\n    \"\
        publishingProfile\": {\r\n      \"targetRegions\": [\r\n        {\r\n    \
        \      \"name\": \"West US\",\r\n          \"regionalReplicaCount\": 1,\r\n\
        \          \"storageAccountType\": \"Standard_LRS\",\r\n          \"encryption\"\
        : {\r\n            \"osDiskImage\": {\r\n              \"securityProfile\"\
        : {},\r\n              \"diskEncryptionSetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n            },\r\n            \"dataDiskImages\": [\r\n              {\r\
        \n                \"lun\": 0,\r\n                \"diskEncryptionSetId\":\
        \ \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n              }\r\n            ]\r\n          }\r\n        }\r\n     \
        \ ],\r\n      \"targetExtendedLocations\": [\r\n        {\r\n          \"\
        extendedLocation\": {\r\n            \"type\": \"EdgeZone\",\r\n         \
        \   \"name\": \"microsoftlosangeles1\"\r\n          },\r\n          \"name\"\
        : \"West US\",\r\n          \"extendedLocationReplicaCount\": 1,\r\n     \
        \     \"storageAccountType\": \"StandardSSD_LRS\",\r\n          \"encryption\"\
        : {\r\n            \"osDiskImage\": {\r\n              \"securityProfile\"\
        : {},\r\n              \"diskEncryptionSetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n            },\r\n            \"dataDiskImages\": [\r\n              {\r\
        \n                \"lun\": 0,\r\n                \"diskEncryptionSetId\":\
        \ \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/diskEncryptionSets/des1-000005\"\
        \r\n              }\r\n            ]\r\n          }\r\n        }\r\n     \
        \ ],\r\n      \"replicaCount\": 1,\r\n      \"excludeFromLatest\": false,\r\
        \n      \"publishedDate\": \"2023-10-13T07:42:11.1754113+00:00\",\r\n    \
        \  \"storageAccountType\": \"Standard_LRS\"\r\n    },\r\n    \"storageProfile\"\
        : {\r\n      \"osDiskImage\": {\r\n        \"sizeInGB\": 10,\r\n        \"\
        hostCaching\": \"ReadWrite\",\r\n        \"source\": {\r\n          \"id\"\
        : \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_target_extended_locations_encryption000001/providers/Microsoft.Compute/disks/disk\"\
        \r\n        }\r\n      }\r\n    },\r\n    \"safetyProfile\": {\r\n      \"\
        reportedForPolicyViolation\": false,\r\n      \"allowDeletionOfReplicatedLocations\"\
        : false\r\n    },\r\n    \"provisioningState\": \"Succeeded\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2900'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 13 Oct 2023 07:50:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetGalleryImageVersion3Min;1996,Microsoft.Compute/GetGalleryImageVersion30Min;9992
    status:
      code: 200
      message: OK
version: 1
