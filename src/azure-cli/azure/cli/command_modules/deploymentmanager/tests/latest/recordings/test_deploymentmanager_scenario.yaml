interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001","name":"cliadm000001","type":"Microsoft.Resources/resourceGroups","location":"centralus","tags":{"product":"azurecli","cause":"automation","date":"2020-12-19T09:01:05Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '305'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:01:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '25'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity","name":"cliadm000001Identity","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"centralus","tags":{},"properties":{"tenantId":"01a4073e-87c8-47cd-aafc-1439b4b5ea2c","principalId":"386bb005-538b-44eb-98b0-60cc9b16aab0","clientId":"36d72ffe-de67-431a-832c-528b867c85bc","clientSecretUrl":"https://control-centralus.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity/credentials?tid=01a4073e-87c8-47cd-aafc-1439b4b5ea2c&oid=386bb005-538b-44eb-98b0-60cc9b16aab0&aid=36d72ffe-de67-431a-832c-528b867c85bc"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '816'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:01:30 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '984'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:03:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28c%3Ac%20eq%20%27386bb005-538b-44eb-98b0-60cc9b16aab0%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Sat, 19 Dec 2020 09:03:31 GMT
      duration:
      - '652754'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - gLJ+tqTXNpWZ/LQ4r8lnot9/0oeg7ZBg6IR8QK+1JiM=
      ocp-aad-session-key:
      - yg5mplb2irTiJQJY8usvPbxVwxAoCjBWkQofEi37tyR4N8QG-ui3zvMT_-1PJWWWTaUoVDNvaC-2a7NFF6S4j1fEvRBY6SGYMRoKNwxnIuE3Y_E9YEPpVKIXjpeaYVRm4R8aenkjnNdh8iuZEv1peRSAE9gWn8xbOQD2SPIXTyw.BQqaL4oPEgHeghOew7Gr7lGvgXliVfl8MMNanJIAIVs
      pragma:
      - no-cache
      request-id:
      - deae7f26-9ecd-4c5b-9194-cdb316828698
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"objectIds": ["386bb005-538b-44eb-98b0-60cc9b16aab0"], "includeDirectoryObjectReferences":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/getObjectsByObjectIds?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"386bb005-538b-44eb-98b0-60cc9b16aab0","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":["isExplicit=True","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity"],"appDisplayName":null,"appId":"36d72ffe-de67-431a-832c-528b867c85bc","applicationTemplateId":null,"appOwnerTenantId":null,"appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cliadm000001Identity","errorUrl":null,"homepage":null,"informationalUrls":null,"keyCredentials":[{"customKeyIdentifier":"491E051C21CBDB846F942358D75C77F3AB49BE6F","endDate":"2021-03-19T08:56:00Z","keyId":"953a3b5e-df24-4ba9-8fa0-c228e654ca73","startDate":"2020-12-19T08:56:00Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":null,"replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["36d72ffe-de67-431a-832c-528b867c85bc","https://identity.azure.net/n2ixpv6KUEDv8HL6BLTXqneQC21KFEvRzfeGEy7e4Qk="],"servicePrincipalType":"ManagedIdentity","signInAudience":null,"tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1593'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Sat, 19 Dec 2020 09:03:32 GMT
      duration:
      - '342499'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 5CtF8qBNjLqtxzaKLOIpQ/qdT7p2WXsr2QgsKgwSIkQ=
      ocp-aad-session-key:
      - JLt0n8a84vtuJWp5ayTafYSJKZLw9lzHCG90RVOOXEUdXXbjleZc7P9wTpKd3h3rW5VlHp7MGeHgi3pIxf5o79SSQzWndSGUJPTYs3hF_33CwO3xl_httgFTO2AChREQ_P-M6dgsOzfCFarnsybT0NgOEGjEWNkJo2isKqtHPV8.f1e5I-HfpfaYBY3WtFP5p24CKfyHW-2YelJc1xEDocA
      pragma:
      - no-cache
      request-id:
      - b919e2df-cec8-4d16-92f8-817c233b537f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '3'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "386bb005-538b-44eb-98b0-60cc9b16aab0"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments/b7ca6d10-27c5-4423-8983-2b4829632db9?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"386bb005-538b-44eb-98b0-60cc9b16aab0","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","condition":null,"conditionVersion":null,"createdOn":"2020-12-19T09:03:32.9863009Z","updatedOn":"2020-12-19T09:03:33.1513172Z","createdBy":null,"updatedBy":"5310aa29-9a44-4cbc-adb3-6347a539537e","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments/b7ca6d10-27c5-4423-8983-2b4829632db9","type":"Microsoft.Authorization/roleAssignments","name":"b7ca6d10-27c5-4423-8983-2b4829632db9"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '823'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:03:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account keys list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g --query -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002/listKeys?api-version=2019-06-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Sat, 19 Dec 2020 09:04:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:03 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Sat, 19 Dec 2020 09:04:03 GMT
      etag:
      - '"0x8D8A3FD0919789F"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:04 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"cliadmxy32gystgtemplate\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"value\": \"Standard_RAGRS\"\r\n        },\r\n        \"kind\":
      {\r\n            \"value\": \"StorageV2\"\r\n        },\r\n        \"accessTier\":
      {\r\n            \"value\": \"Hot\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"value\": true\r\n        }\r\n    }\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '613'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:03 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - ne6IERAxIhvMrqRELGmC1A==
      date:
      - Sat, 19 Dec 2020 09:04:04 GMT
      etag:
      - '"0x8D8A3FD09750ED7"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:05 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "\uFEFF{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"cliadmxy32gystgtemplate\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"value\": \"Standard_RAGRS\"\r\n        },\r\n        \"kind\":
      {\r\n            \"value\": \"StorageV2\"\r\n        },\r\n        \"accessTier\":
      {\r\n            \"value\": \"Hot\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"value\": true\r\n        }\r\n    }\r\n}\r\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '618'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:04 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.copy.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - kKXGK5330ursPOIjwfFX9A==
      date:
      - Sat, 19 Dec 2020 09:04:04 GMT
      etag:
      - '"0x8D8A3FD09AC0772"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:05 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"kind\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"accessTier\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"type\": \"bool\"\r\n        }\r\n    },\r\n    \"variables\":
      {},\r\n    \"resources\": [\r\n        {\r\n            \"name\": \"[parameters('storageAccountName')]\",\r\n
      \           \"type\": \"Microsoft.Storage/storageAccounts\",\r\n            \"apiVersion\":
      \"2018-07-01\",\r\n            \"location\": \"[parameters('location')]\",\r\n
      \           \"properties\": {\r\n                \"accessTier\": \"[parameters('accessTier')]\",\r\n
      \               \"supportsHttpsTrafficOnly\": \"[parameters('supportsHttpsTrafficOnly')]\"\r\n
      \           },\r\n            \"dependsOn\": [],\r\n            \"sku\": {\r\n
      \               \"name\": \"[parameters('accountType')]\"\r\n            },\r\n
      \           \"kind\": \"[parameters('kind')]\"\r\n        }\r\n    ],\r\n    \"outputs\":
      {}\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1242'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:04 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.template.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - /SSTMoFKkG8ZQg+1oXFMBQ==
      date:
      - Sat, 19 Dec 2020 09:04:05 GMT
      etag:
      - '"0x8D8A3FD09E7BBD7"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:06 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"kind\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"accessTier\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"type\": \"bool\"\r\n        }\r\n    },\r\n    \"variables\":
      {},\r\n    \"resources\": [\r\n        {\r\n            \"name\": \"[parameters('storageAccountName')]\",\r\n
      \           \"type\": \"Microsoft.Storage/storageAccounts\",\r\n            \"apiVersion\":
      \"2018-07-01\",\r\n            \"location\": \"[parameters('location')]\",\r\n
      \           \"properties\": {\r\n                \"accessTier\": \"[parameters('accessTier')]\",\r\n
      \               \"supportsHttpsTrafficOnly\": \"[parameters('supportsHttpsTrafficOnly')]\"\r\n
      \           },\r\n            \"dependsOn\": [],\r\n            \"sku\": {\r\n
      \               \"name\": \"[parameters('accountType')]\"\r\n            },\r\n
      \           \"kind\": \"[parameters('kind')]\"\r\n        }\r\n    ],\r\n    \"outputs\":
      {}\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1242'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:05 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.copy.template.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - /SSTMoFKkG8ZQg+1oXFMBQ==
      date:
      - Sat, 19 Dec 2020 09:04:05 GMT
      etag:
      - '"0x8D8A3FD0A234929"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:06 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"(Invalid_Storage.Account/Name)\"\r\n        },\r\n
      \       \"accountType\": {\r\n            \"value\": \"Standard_RAGRS\"\r\n
      \       },\r\n        \"kind\": {\r\n            \"value\": \"StorageV2\"\r\n
      \       },\r\n        \"accessTier\": {\r\n            \"value\": \"Hot\"\r\n
      \       },\r\n        \"supportsHttpsTrafficOnly\": {\r\n            \"value\":
      true\r\n        }\r\n    }\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '620'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Sat, 19 Dec 2020 09:04:05 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage_invalid.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - 9bTPRFFO473q3qv5fvgUOA==
      date:
      - Sat, 19 Dec 2020 09:04:06 GMT
      etag:
      - '"0x8D8A3FD0A61E44B"'
      last-modified:
      - Sat, 19 Dec 2020 09:04:06 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container generate-sas
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --account-name --permissions --start --expiry -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/storageAccounts?api-version=2019-06-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002","name":"cliadm000002","type":"Microsoft.Storage/storageAccounts","location":"centralus","tags":{},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-12-19T09:01:07.9339588Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-12-19T09:01:07.9339588Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2020-12-19T09:01:07.8402346Z","primaryEndpoints":{"blob":"https://cliadm000002.blob.core.windows.net/","queue":"https://cliadm000002.queue.core.windows.net/","table":"https://cliadm000002.table.core.windows.net/","file":"https://cliadm000002.file.core.windows.net/"},"primaryLocation":"centralus","statusOfPrimary":"available"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1195'
      content-type:
      - application/json
      date:
      - Sat, 19 Dec 2020 09:04:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container generate-sas
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --account-name --permissions --start --expiry -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002/listKeys?api-version=2019-06-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Sat, 19 Dec 2020 09:04:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"sourceType": "AzureStorage",
      "artifactRoot": "artifactroot", "authentication": {"type": "Sas", "properties":
      {"sasUri": "https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-19T08%3A04Z&se=2020-12-19T19%3A04Z&sp=rl&sv=2018-11-09&sr=c&sig=YYWtZk9MoGSG473G%2BJsD2ET8obOyLLN7TQoNJkiA0Jc%3D"}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager artifact-source create
      Connection:
      - keep-alive
      Content-Length:
      - '356'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -n -l --sas-uri --artifact-root
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"sourceType":"AzureStorage","artifactRoot":"artifactroot","authentication":{"type":"Sas","properties":{"sasUri":"https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-19T08%3A04Z&se=2020-12-19T19%3A04Z&sp=rl&sv=2018-11-09&sr=c&sig=YYWtZk9MoGSG473G%2BJsD2ET8obOyLLN7TQoNJkiA0Jc%3D"}},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/artifactSources","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","name":"cliadm000001ArtifactSource","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '667'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager artifact-source show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"sourceType":"AzureStorage","artifactRoot":"artifactroot","authentication":{"type":"Sas","properties":{"sasUri":"https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-19T08%3A04Z&se=2020-12-19T19%3A04Z&sp=rl&sv=2018-11-09&sr=c&sig=YYWtZk9MoGSG473G%2BJsD2ET8obOyLLN7TQoNJkiA0Jc%3D"}},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/artifactSources","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","name":"cliadm000001ArtifactSource","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '667'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"artifactSourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-topology create
      Connection:
      - keep-alive
      Content-Length:
      - '225'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -n -l --artifact-source
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"artifactSourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology","name":"cliadm000001ServiceTopology","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '550'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-topology show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"artifactSourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource"},"type":"Microsoft.DeploymentManager/serviceTopologies","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology","name":"cliadm000001ServiceTopology","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '518'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"targetLocation": "centralus",
      "targetSubscriptionId": "5e87627b-4ffa-4abf-8040-b1103c84a2fd"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service create
      Connection:
      - keep-alive
      Content-Length:
      - '136'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name -n -l --target-location --target-subscription-id
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetSubscriptionId":"5e87627b-4ffa-4abf-8040-b1103c84a2fd","targetLocation":"centralus","provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service","name":"cliadm000001Service","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '489'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: '{"location": "centralus", "properties": {"targetResourceGroup": "cliadm000001",
      "deploymentMode": "Incremental", "artifacts": {"templateArtifactSourceRelativePath":
      "storage.template.json", "parametersArtifactSourceRelativePath": "storage.parameters.json"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      Content-Length:
      - '258'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Running"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/09790f4e-d6ab-4b41-8b9a-ef3b4ae6bf1e?api-version=2019-11-01-preview
      cache-control:
      - no-store, no-cache
      content-length:
      - '658'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:04:38 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/09790f4e-d6ab-4b41-8b9a-ef3b4ae6bf1e?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/09790f4e-d6ab-4b41-8b9a-ef3b4ae6bf1e?api-version=2019-11-01-preview
  response:
    body:
      string: '{"status":"Succeeded","startTime":"2020-12-19T09:04:14.9630000Z","endTime":"2020-12-19T09:04:40.3120000Z"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:05:22 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '660'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:05:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '660'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:05:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"targetResourceGroup": "cliadm000001",
      "deploymentMode": "Incremental", "artifacts": {"templateArtifactSourceRelativePath":
      "storage.template.json", "parametersArtifactSourceRelativePath": "storage_invalid.parameters.json"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      Content-Length:
      - '266'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Running"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/a1b8ab82-a4f1-4f9a-b65a-80848bf11866?api-version=2019-11-01-preview
      cache-control:
      - no-store, no-cache
      content-length:
      - '680'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:05:25 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/a1b8ab82-a4f1-4f9a-b65a-80848bf11866?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/a1b8ab82-a4f1-4f9a-b65a-80848bf11866?api-version=2019-11-01-preview
  response:
    body:
      string: '{"status":"Succeeded","startTime":"2020-12-19T09:05:24.9240000Z","endTime":"2020-12-19T09:05:31.3690000Z"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:12 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"stepType": "Wait", "attributes":
      {"duration": "PT5M"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager step create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -l -n --duration
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"stepType":"Wait","attributes":{"duration":"PT5M"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/steps","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep","name":"cliadm000001WaitStep","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '381'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager step show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"stepType":"Wait","attributes":{"duration":"PT5M"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/steps","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep","name":"cliadm000001WaitStep","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '381'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: "{\"properties\": {\"parameters\": {}, \"mode\": \"Incremental\", template:{\r\n
      \ \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json\",\r\n
      \ \"resources\": [\r\n    {\r\n      \"location\": \"Central US\",\r\n      \"apiVersion\":
      \"2018-09-01-preview\",\r\n      \"type\": \"Microsoft.DeploymentManager/rollouts\",\r\n
      \     \"name\": \"cliadmxd57xgRollout\",\r\n      \"Identity\": {\r\n        \"type\":
      \"userAssigned\",\r\n        \"identityIds\": [\r\n          \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity\"\r\n
      \       ]\r\n      },\r\n      \"properties\": {\r\n        \"buildVersion\":
      \"1.0.0\",\r\n        \"targetServiceTopologyId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology\",\r\n
      \       \"artifactSourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/artifactSources/cliadmxd57xgArtifactSource\",\r\n
      \       \"stepGroups\": [\r\n          {\r\n            \"name\": \"PilotRegion\",\r\n
      \           \"preDeploymentSteps\": [\r\n              {\r\n                \"stepId\":
      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/steps/cliadmxd57xgWaitStep\"\r\n
      \             }\r\n            ],\r\n            \"deploymentTargetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology/services/cliadmxd57xgService/serviceUnits/cliadmxd57xgServiceUnit\"\r\n
      \         }\r\n        ]\r\n      }\r\n    }\r\n  ],\r\n  \"contentVersion\":
      \"1.0.0.0\"\r\n}\r\n}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      Content-Length:
      - '1777'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout","name":"createrollout","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9487145448868255408","mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-12-19T09:06:19.8529637Z","duration":"PT0S","correlationId":"393b1063-6b6c-4c84-942f-0191cb8d4208","providers":[{"namespace":"Microsoft.DeploymentManager","resourceTypes":[{"resourceType":"rollouts","locations":["centralus"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/rollouts/cliadmxd57xgRollout"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '756'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"properties\": {\"parameters\": {}, \"mode\": \"Incremental\", template:{\r\n
      \ \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json\",\r\n
      \ \"resources\": [\r\n    {\r\n      \"location\": \"Central US\",\r\n      \"apiVersion\":
      \"2018-09-01-preview\",\r\n      \"type\": \"Microsoft.DeploymentManager/rollouts\",\r\n
      \     \"name\": \"cliadmxd57xgRollout\",\r\n      \"Identity\": {\r\n        \"type\":
      \"userAssigned\",\r\n        \"identityIds\": [\r\n          \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity\"\r\n
      \       ]\r\n      },\r\n      \"properties\": {\r\n        \"buildVersion\":
      \"1.0.0\",\r\n        \"targetServiceTopologyId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology\",\r\n
      \       \"artifactSourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/artifactSources/cliadmxd57xgArtifactSource\",\r\n
      \       \"stepGroups\": [\r\n          {\r\n            \"name\": \"PilotRegion\",\r\n
      \           \"preDeploymentSteps\": [\r\n              {\r\n                \"stepId\":
      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/steps/cliadmxd57xgWaitStep\"\r\n
      \             }\r\n            ],\r\n            \"deploymentTargetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology/services/cliadmxd57xgService/serviceUnits/cliadmxd57xgServiceUnit\"\r\n
      \         }\r\n        ]\r\n      }\r\n    }\r\n  ],\r\n  \"contentVersion\":
      \"1.0.0.0\"\r\n}\r\n}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      Content-Length:
      - '1777'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout","name":"createrollout","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9487145448868255408","mode":"Incremental","provisioningState":"Accepted","timestamp":"2020-12-19T09:06:20.1405787Z","duration":"PT0.0524881S","correlationId":"5a8af806-538b-4a02-8a1f-99cf3b78fb58","providers":[{"namespace":"Microsoft.DeploymentManager","resourceTypes":[{"resourceType":"rollouts","locations":["centralus"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout/operationStatuses/08585932381053895104?api-version=2020-10-01
      cache-control:
      - no-cache
      content-length:
      - '584'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585932381053895104?api-version=2020-10-01
  response:
    body:
      string: '{"status":"Failed","error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"FailedIdentityOperation\",\r\n    \"message\": \"Identity
        operation for resource ''/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/rollouts/cliadmxd57xgRollout''
        failed with error ''Failed to perform resource identity operation. Status:
        ''BadRequest''. Response: ''{\\\"error\\\":{\\\"code\\\":\\\"BadRequest\\\",\\\"message\\\":\\\"Resource
        ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity''
        was not found.\\\"}}''.''.\"\r\n  }\r\n}"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '919'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 19 Dec 2020 09:06:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
