interactions:
- request:
    body: '{"location": "westus", "tags": {"date": "2018-08-14T19:45:39Z", "cause":
      "automation", "product": "azurecli"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group create]
      Connection: [keep-alive]
      Content-Length: ['110']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 resourcemanagementclient/2.0.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2016-02-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","name":"cli_test_sp_with_kv_existing_cert000001","location":"westus","tags":{"date":"2018-08-14T19:45:39Z","cause":"automation","product":"azurecli"},"properties":{"provisioningState":"Succeeded"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['384']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:45:41 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/me?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.User/@Element","odata.type":"Microsoft.DirectoryServices.User","objectType":"User","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","deletionTimestamp":null,"accountEnabled":true,"ageGroup":null,"assignedLicenses":[],"assignedPlans":[],"city":null,"companyName":null,"consentProvidedForMinor":null,"country":null,"createdDateTime":"2016-01-21T22:10:16Z","creationType":null,"department":null,"dirSyncEnabled":null,"displayName":"admin3","employeeId":null,"facsimileTelephoneNumber":null,"givenName":"admin3","immutableId":null,"isCompromised":null,"jobTitle":null,"lastDirSyncTime":null,"legalAgeGroupClassification":null,"mail":null,"mailNickname":"admin3","mobile":null,"onPremisesDistinguishedName":null,"onPremisesSecurityIdentifier":null,"otherMails":["yugangw@microsoft.com"],"passwordPolicies":"None","passwordProfile":null,"physicalDeliveryOfficeName":null,"postalCode":null,"preferredLanguage":"en-US","provisionedPlans":[],"provisioningErrors":[],"proxyAddresses":[],"refreshTokensValidFromDateTime":"2018-06-11T19:00:31Z","showInAddressList":null,"signInNames":[],"sipProxyAddress":null,"state":null,"streetAddress":null,"surname":"sdk","telephoneNumber":null,"usageLocation":null,"userIdentities":[],"userPrincipalName":"admin3@AzureSDKTeam.onmicrosoft.com","userState":null,"userStateChangedOn":null,"userType":"Member"}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1471']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:45:41 GMT']
      duration: ['404984']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [9GQqI6S1ECS4j4T2qnjxLorVEkd1sq21GP7tQfmsPNE=]
      ocp-aad-session-key: [j1Yzh3nHtieMZwFCZbJTrTivkZEedq2XXoBOoYMU3KVVSLxIEvhWNNAe73Nd3o6uBQsGc4ivvi5CrJmYMwWPL0D77clT8eFzNXNW0E0L5LMl51Vp4DJvGuXQ_v4A3psZ.mNwYJlY3zVCx59HMLnEcz0UeVy7_xJsundPOTJjqPns]
      pragma: [no-cache]
      request-id: [ab0a899d-4df8-467a-bf5e-1e77849488c8]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"accessPolicies": [{"objectId": "e7e158d3-7cdc-47cd-8825-5859d7ab2b55",
      "tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "permissions": {"keys":
      ["get", "create", "delete", "list", "update", "import", "backup", "restore",
      "recover"], "storage": ["get", "list", "delete", "set", "update", "regeneratekey",
      "setsas", "listsas", "getsas", "deletesas"], "certificates": ["get", "list",
      "delete", "create", "import", "update", "managecontacts", "getissuers", "listissuers",
      "setissuers", "deleteissuers", "manageissuers", "recover"], "secrets": ["get",
      "list", "set", "delete", "backup", "restore", "recover"]}}], "tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "standard"}}, "location": "westus"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [keyvault create]
      Connection: [keep-alive]
      Content-Length: ['746']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-keyvault/1.1.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002?api-version=2016-10-01
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002","name":"clitest000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","permissions":{"keys":["get","create","delete","list","update","import","backup","restore","recover"],"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"],"secrets":["get","list","set","delete","backup","restore","recover"]}}],"enabledForDeployment":false,"vaultUri":"https://clitest000002.vault.azure.net","provisioningState":"RegisteringDns"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1106']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:45:44 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-service-version: [1.0.0.224]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: ''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: [0]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: ''}
    headers:
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Tue, 14 Aug 2018 19:45:49 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      www-authenticate: ['Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
          resource="https://vault.azure.net"']
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 401, message: Unauthorized}
- request:
    body: '{"policy": {"issuer": {"name": "Self"}, "lifetime_actions": [{"trigger":
      {"days_before_expiry": 90}, "action": {"action_type": "AutoRenew"}}], "x509_props":
      {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign", "dataEncipherment",
      "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"], "validity_months":
      24}, "key_props": {"key_size": 2048, "reuse_key": true, "exportable": true,
      "kty": "RSA"}, "secret_props": {"contentType": "application/x-pkcs12"}}, "attributes":
      {"enabled": true}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['511']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"00459ec588724ad1ab1f73d3c30020db"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:45:51 GMT']
      expires: ['-1']
      location: ['https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=00459ec588724ad1ab1f73d3c30020db']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"00459ec588724ad1ab1f73d3c30020db"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:45:50 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"00459ec588724ad1ab1f73d3c30020db"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:01 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"00459ec588724ad1ab1f73d3c30020db"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1217']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:11 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['166']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:12 GMT']
      duration: ['751244']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [2gCJyEullf37VKgfupb1dpGiYlGUN8HjqZHuUwtlts8=]
      ocp-aad-session-key: [Wq5nMckX5MI_5qLsnE2dFs1GtmHQ-2_qGUuyIt_XUae-OO2wIlMeCgKvpNYnuxgOCB7_crUiDOvcs4JKCnTXITdvo_uNLP7IHUxDU7SMKTYQ8_hjN0Aya5_8yllIcCuHvNwc5Xamv_PDNyd6ATvkQA.iOnbe-ANMFfb84MQgp1diVOL7VYMh32JX6QUQfoJGrE]
      pragma: [no-cache]
      request-id: [ae386448-1fb6-40c3-af29-25363cbb85c6]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/55d23b100a8244f48de89d8cd823c3ed","kid":"https://clitest000002.vault.azure.net/keys/cert1/55d23b100a8244f48de89d8cd823c3ed","sid":"https://clitest000002.vault.azure.net/secrets/cert1/55d23b100a8244f48de89d8cd823c3ed","x5t":"mONDiqxdjSnFGBYkYxhLb3sCoEU","cer":"MIIDQjCCAiqgAwIBAgIQWXsnuqJNSB2mNXBoySmcMTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYwOFoXDTIwMDgxNDE5NDYwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAdLINg9Ex5MoXLFj2AC2h2w0kXILGKBzbuaOCJZU2t17LKnHTXxE2YuKXOykAHwvt44BN9Ax5jsB93DJXSmpBN4KpqNMSsPSoDRX5NJIjISchha03JZsAg5Ykl1YIVkT+bjBYljv2ChSJ43Hm8Xy26ZHHikHSjwwicSYhcatMPrXZ0qFmxpvaLekchgwZv4wXgA472hXTMSG1a0cR7Srd27+5ImFzob2VgnGvjpqAx9qdrEoM+4A8R6fm8CwpziL0aS34jGlufPFFC37bLPra151VqHN3nFi1LsWAylfgxlXM7ypeZ+hr6YkXV7FOKnmboYLnCR0R0n0wSMhkD28YYA==","attributes":{"enabled":true,"nbf":1534275368,"exp":1597434368,"created":1534275968,"updated":1534275968,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1534275950,"updated":1534275950}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2387']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:11 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: 'b''b\''{"keyCredentials": [{"type": "AsymmetricX509Cert", "keyId": "88888888-0000-0000-0000-000000000001",
      "value": "MIIDQjCCAiqgAwIBAgIQWXsnuqJNSB2mNXBoySmcMTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYwOFoXDTIwMDgxNDE5NDYwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAdLINg9Ex5MoXLFj2AC2h2w0kXILGKBzbuaOCJZU2t17LKnHTXxE2YuKXOykAHwvt44BN9Ax5jsB93DJXSmpBN4KpqNMSsPSoDRX5NJIjISchha03JZsAg5Ykl1YIVkT+bjBYljv2ChSJ43Hm8Xy26ZHHikHSjwwicSYhcatMPrXZ0qFmxpvaLekchgwZv4wXgA472hXTMSG1a0cR7Srd27+5ImFzob2VgnGvjpqAx9qdrEoM+4A8R6fm8CwpziL0aS34jGlufPFFC37bLPra151VqHN3nFi1LsWAylfgxlXM7ypeZ+hr6YkXV7FOKnmboYLnCR0R0n0wSMhkD28YYA==",
      "usage": "Verify", "startDate": "2018-08-14T19:46:12.762346Z", "endDate": "2019-08-14T19:46:12.762346Z"}],
      "displayName": "azure-cli-2018-08-14-19-46-12", "availableToOtherTenants": false,
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"], "homepage":
      "http://azure-cli-2018-08-14-19-46-12"}\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['1579']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"5b0017cf-053f-4bbd-a326-c03f660326d4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"6b431809-9e48-43f0-b083-957670f2198c","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"98E3438AAC5D8D29C518162463184B6F7B02A045","endDate":"2019-08-14T19:46:12.762346Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-08-14T19:46:12.762346Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2241']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:12 GMT']
      duration: ['3997587']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/5b0017cf-053f-4bbd-a326-c03f660326d4/Microsoft.DirectoryServices.Application']
      ocp-aad-diagnostics-server-name: [/lC86iJ3cwwJGyTWjAKYWDPkB/lyglon9hmrn0nLUXM=]
      ocp-aad-session-key: [un6Ga56yvC4aMCWNB2uTtgJfTWPomjn9g58Av_Jugfv_WQsa9XRhQ46fVDvgRoU4pWs0Y90a0PaAvaM4Totpu5Auv3stl24i4U8jdhSNrJGmGeMg1fVP5yub0tNXYtQ-gpkCSnPj3426-aaXg7MnNA.9tlReRJ47459qiJs_la6zy94t9cM9Van4pfiyQ_Wpmk]
      pragma: [no-cache]
      request-id: [a1c13d10-b3f6-442a-8a4e-abd8a8a59873]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: '{"accountEnabled": true, "appId": "6b431809-9e48-43f0-b083-957670f2198c"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['73']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6969c046-fde0-42ec-a8da-418339400f7f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-08-14-19-46-12","appId":"6b431809-9e48-43f0-b083-957670f2198c","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["6b431809-9e48-43f0-b083-957670f2198c","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1616']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:13 GMT']
      duration: ['1926712']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/6969c046-fde0-42ec-a8da-418339400f7f/Microsoft.DirectoryServices.ServicePrincipal']
      ocp-aad-diagnostics-server-name: [vzT+9Yq+aEnlFAqW4ArMt4wc+vCo9D3Xgf5jgx/UnQk=]
      ocp-aad-session-key: [VVV3LEkDTG789v_8gSWVIxySX49gt9u28zghD4hpfAfjtZwJv72MBpHys3DwEfMSPvqdFGmwdkaY8rH2M7mSYMy2rvpIaDrslg29S4E6CxX9K7ajyaCLrnv30fOFwsDwD6I8cP6CRMtmtQ3OwhpbcQ.VqYrB1nDzTug5iNZDF9TgfZOjNx4YbcxmDJq4Sglqwk]
      pragma: [no-cache]
      request-id: [5eddb585-9c2f-4a0b-b3e5-4aa5dbe4a9ab]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:13 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "6969c046-fde0-42ec-a8da-418339400f7f",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body: {string: '{"error":{"code":"PrincipalNotFound","message":"Principal 6969c046fde042eca8da418339400f7f
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['163']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:15 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 400, message: Bad Request}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:20 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "6969c046-fde0-42ec-a8da-418339400f7f",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2015-07-01
  response:
    body: {string: '{"error":{"code":"PrincipalNotFound","message":"Principal 6969c046fde042eca8da418339400f7f
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['163']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:21 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 400, message: Bad Request}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:27 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "6969c046-fde0-42ec-a8da-418339400f7f",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004?api-version=2015-07-01
  response:
    body: {string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"6969c046-fde0-42ec-a8da-418339400f7f","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2018-08-14T19:46:28.9875654Z","updatedOn":"2018-08-14T19:46:28.9875654Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000004","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000004"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['868']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:32 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-ms-request-charge: ['4']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6969c046-fde0-42ec-a8da-418339400f7f","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-08-14-19-46-12","appId":"6b431809-9e48-43f0-b083-957670f2198c","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","6b431809-9e48-43f0-b083-957670f2198c"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1619']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:33 GMT']
      duration: ['5504307']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [HsKElesTxiLgdPMB0FbOxcZnfgWfQ52qrxu3V/VUL9s=]
      ocp-aad-session-key: [q7A_nhVZD3HafWEIBipvOlt-seMzYttOZHy37ph8gcLCEN8twzTxZqSWvpnbCnzkrucbAwyzdW1HzWOpcERPauSxkIH7uAcHLAGShGt-LsBsQIVHCyBl_nW8akKEAlOgqTpCVPqJ8bUJ0yRhWEbzQg.31CnARdeWHKOusLyJiQzbCHapaQ4XKHTJpaSR5gQW-k]
      pragma: [no-cache]
      request-id: [b8310059-4ae3-43d4-97fe-931871fc466e]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%276b431809-9e48-43f0-b083-957670f2198c%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['161']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:33 GMT']
      duration: ['528897']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [DAEEhUUzhQ8pu+4OxvItbpuvqegmLWoSgzWL1kkCnyk=]
      ocp-aad-session-key: [JGBF6c_yDg17vXqmGgCaHDCNwf_hiA7GJyGO7qDKlAPwNptQuzY1hq7dZSXNHLq_ROetA3-jrah6uoJKXwoUPnp2ICWkFrvbt-98p53K8pHh9fe-F-IbfaytfqjpS_WXbMD_i2LOB6HqToEcASNV-Q._CIzfpvLmtLAU_qfMOR8IZRz7bSY_6uKDsV9Xe-U-b8]
      pragma: [no-cache]
      request-id: [b11b21e2-9c58-43aa-8909-23b41fd689bd]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=appId%20eq%20%276b431809-9e48-43f0-b083-957670f2198c%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"5b0017cf-053f-4bbd-a326-c03f660326d4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"6b431809-9e48-43f0-b083-957670f2198c","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"98E3438AAC5D8D29C518162463184B6F7B02A045","endDate":"2019-08-14T19:46:12.762346Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-08-14T19:46:12.762346Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2158']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:33 GMT']
      duration: ['404173']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [XOs9gGfyH50gS8B3zPgeXNS3pfhaVVLdmqEFzm9FoHE=]
      ocp-aad-session-key: [oS5CLKcsfAhxadGDhds3xsD02XGiXhfFj1ItZ6qc79KsCrDalWmAlcNuCfyuVhhqMeib5rO69dfC0Ofqd-zUi9lXtbi1Pe5xZ3donkxnun0sBIfRt2wWjASlo4skvEb216eE7njXKU3FbZbKRK-64w.T-H2qhuS6ug5ZhrSheXlspq__N0XHjn2byKse1LC2vk]
      pragma: [no-cache]
      request-id: [1460b6c3-56ab-4196-8f2c-654b661000b5]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/5b0017cf-053f-4bbd-a326-c03f660326d4?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"5b0017cf-053f-4bbd-a326-c03f660326d4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"6b431809-9e48-43f0-b083-957670f2198c","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"98E3438AAC5D8D29C518162463184B6F7B02A045","endDate":"2019-08-14T19:46:12.762346Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2018-08-14T19:46:12.762346Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2155']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:33 GMT']
      duration: ['493351']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [0sfE/ORXQruXagUwgN6LKCMJnfSNsPKIg39HCVmIqe8=]
      ocp-aad-session-key: [LkHSKOFDVUeJULwXVcNzIsym5bORdMg39X5d4DS5yORspmjAXAvHlGmefdFsKZSMwWrphZo5r-UOoM-J4o2iUNhX8Yx-XOuTXCHmi7zz0rQzcLNag0NIVyIe2M1vecTD5fHYyVJrd4MB8IBgSAO4DA.X8PeN2IfF1AiSK0lne5iw03sKJ6F3uRCqADZqXwVbDo]
      pragma: [no-cache]
      request-id: [9e84bfe6-3c50-42a0-99b3-8125981af54b]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/55d23b100a8244f48de89d8cd823c3ed","kid":"https://clitest000002.vault.azure.net/keys/cert1/55d23b100a8244f48de89d8cd823c3ed","sid":"https://clitest000002.vault.azure.net/secrets/cert1/55d23b100a8244f48de89d8cd823c3ed","x5t":"mONDiqxdjSnFGBYkYxhLb3sCoEU","cer":"MIIDQjCCAiqgAwIBAgIQWXsnuqJNSB2mNXBoySmcMTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYwOFoXDTIwMDgxNDE5NDYwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAdLINg9Ex5MoXLFj2AC2h2w0kXILGKBzbuaOCJZU2t17LKnHTXxE2YuKXOykAHwvt44BN9Ax5jsB93DJXSmpBN4KpqNMSsPSoDRX5NJIjISchha03JZsAg5Ykl1YIVkT+bjBYljv2ChSJ43Hm8Xy26ZHHikHSjwwicSYhcatMPrXZ0qFmxpvaLekchgwZv4wXgA472hXTMSG1a0cR7Srd27+5ImFzob2VgnGvjpqAx9qdrEoM+4A8R6fm8CwpziL0aS34jGlufPFFC37bLPra151VqHN3nFi1LsWAylfgxlXM7ypeZ+hr6YkXV7FOKnmboYLnCR0R0n0wSMhkD28YYA==","attributes":{"enabled":true,"nbf":1534275368,"exp":1597434368,"created":1534275968,"updated":1534275968,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1534275950,"updated":1534275950}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2387']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:34 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"keyCredentials": [{"type": "AsymmetricX509Cert", "keyId": "02d9e725-3f94-42e4-9993-f7464c7a088d",
      "value": "MIIDQjCCAiqgAwIBAgIQWXsnuqJNSB2mNXBoySmcMTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYwOFoXDTIwMDgxNDE5NDYwOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAdLINg9Ex5MoXLFj2AC2h2w0kXILGKBzbuaOCJZU2t17LKnHTXxE2YuKXOykAHwvt44BN9Ax5jsB93DJXSmpBN4KpqNMSsPSoDRX5NJIjISchha03JZsAg5Ykl1YIVkT+bjBYljv2ChSJ43Hm8Xy26ZHHikHSjwwicSYhcatMPrXZ0qFmxpvaLekchgwZv4wXgA472hXTMSG1a0cR7Srd27+5ImFzob2VgnGvjpqAx9qdrEoM+4A8R6fm8CwpziL0aS34jGlufPFFC37bLPra151VqHN3nFi1LsWAylfgxlXM7ypeZ+hr6YkXV7FOKnmboYLnCR0R0n0wSMhkD28YYA==",
      "usage": "Verify", "startDate": "2018-08-14T19:46:34.27319Z", "endDate": "2019-08-14T19:46:34.27319Z"}]}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Length: ['1337']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/5b0017cf-053f-4bbd-a326-c03f660326d4?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Tue, 14 Aug 2018 19:46:34 GMT']
      duration: ['1923246']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [q5Xbh3MZA2oHL2aMV5BkPDdbnE4y3W66Ql7+EgkvqGE=]
      ocp-aad-session-key: [sFjhgYC019FDgjQJRYfG45OAyQDn6JzgaWp4GQm3U0wfQtc7iCXVMnL1t6g2ZVkV9bc_WfCrdNR0i-k-mVGtXDQyQ3ymY3-WcWhbEOh64NLwvfaMz3RtE4gZl3qmRTuM9aIcNmqvn_dZP1ThoEoBKA.b0LsEsM9ohOtczoDJnBgrHojOaEYO864rrcrw32GOLU]
      pragma: [no-cache]
      request-id: [8bc428a0-395c-4b78-984c-c0c4b3d76f31]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"5b0017cf-053f-4bbd-a326-c03f660326d4","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"6b431809-9e48-43f0-b083-957670f2198c","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-12","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-12","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"98E3438AAC5D8D29C518162463184B6F7B02A045","endDate":"2019-08-14T19:46:34.27319Z","keyId":"02d9e725-3f94-42e4-9993-f7464c7a088d","startDate":"2018-08-14T19:46:34.27319Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-12","id":"cd854578-5d09-4e46-bc3d-77582a407917","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-12 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-12","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2156']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:34 GMT']
      duration: ['398523']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [UasoFGN58uUDZzrA1RYY1/OBZjmM666H3oLwSIakuf0=]
      ocp-aad-session-key: [9BVsfHXtS6ROQNq0FhVxiWfJodRYU4lXnHFehMVmpMCPWoIaEf1O3vvYjRISCrQB65oCN4JunB8WM6pRXsWjGvaQgP8k3rqgnzzKHmcJDKvSubZUC03xOa0yeQ-Yovf5ra_h0EstYJpt4OMtONPy0Q.WtqV830Tn40LF96lYzwgeESUQkLjYmwa_B78SVtY-78]
      pragma: [no-cache]
      request-id: [13797d49-2ac4-4ef9-b86d-49e7a1400044]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/5b0017cf-053f-4bbd-a326-c03f660326d4?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Tue, 14 Aug 2018 19:46:35 GMT']
      duration: ['2875074']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [03tJtVtrK59o2WrrDjJFasNQO9BoGoGL+dG53QSLpQQ=]
      ocp-aad-session-key: [fMJrDa2dDQc69ct3kLO_uMCML4ACvijj-Rb_FIKcvD4J-oQ1XL5H4FtKhIABetRijY-VqpMss485MPMwzNpDSrXVigPKby4f2SDlPZ2uCV6sJDN6Q5olRGZBjoNe93NI0YojMEgkZUvk5hakHGX5kw.SOUIiUIDOUowLHh8zmqHV8JW65I_DBn3NmAsUAMdwwI]
      pragma: [no-cache]
      request-id: [5b0ff242-81cd-4d08-919b-78ebe085fdc3]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: '{"policy": {"issuer": {"name": "Self"}, "lifetime_actions": [{"trigger":
      {"days_before_expiry": 90}, "action": {"action_type": "AutoRenew"}}], "x509_props":
      {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign", "dataEncipherment",
      "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"], "validity_months":
      6}, "key_props": {"key_size": 2048, "reuse_key": true, "exportable": true, "kty":
      "RSA"}, "secret_props": {"contentType": "application/x-pkcs12"}}, "attributes":
      {"enabled": true}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Length: ['510']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: POST
    uri: https://clitest000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"2ed773f2b86f44dba271fe9848a9d2f2"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:35 GMT']
      expires: ['-1']
      location: ['https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=2ed773f2b86f44dba271fe9848a9d2f2']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"2ed773f2b86f44dba271fe9848a9d2f2"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1303']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:35 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB8Yj2Zst53ICqd7KpFiTPM+enBKSvITUPK7p/I8WnlT5F7LpI2Jfh0OdcajQGyX5K7/d4mhuYHtSW7ponnx284Ge7BhEWQgbOqnAzhREcFY54BiEmt+KBDg0k39SgP61H/mmlvQmWPF92xKNpM5HkD6ahAnLnMjiGt/Jz3LqGPy6fSArET/rGSWrTCA8Qjbn23VAuX74dL3dOzchbi9BXTQUR2Xs/hLl54s1l90dQFlDrVTo8EtWSNunV3Lhl+u6MuokfX7X5kOlOjTyyMsQ5+6PIJx38vS/jhzpOMstyINsoyjWpnblzegOZWwOA5PN6HS4LT2vuaRxTDHdLcrNnA","cancellation_requested":false,"status":"completed","target":"https://clitest000002.vault.azure.net/certificates/cert1","request_id":"2ed773f2b86f44dba271fe9848a9d2f2"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1217']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:46 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['166']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:46 GMT']
      duration: ['909191']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [vzT+9Yq+aEnlFAqW4ArMt4wc+vCo9D3Xgf5jgx/UnQk=]
      ocp-aad-session-key: [scBy8pAkk38NtiXut86ontTE45mzyH7e-vtNtcwjD63va5fOuuj1tFdxhFdTAGnp4b8WUadkfz4MG0nmacn1na0-fMra2iIyduyFtgTCKOL0WxZrE80IfFTdtMGcVNxA0u08MAMms_wSRiSwXCTAoA._EFHxlG07fzg6y1VfcvSFwdkDZRTgakmrXS2NaExg74]
      pragma: [no-cache]
      request-id: [14610fb9-0a60-4082-a06d-b036ae044676]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/5269785f06a64637b1651cf84363444e","kid":"https://clitest000002.vault.azure.net/keys/cert1/5269785f06a64637b1651cf84363444e","sid":"https://clitest000002.vault.azure.net/secrets/cert1/5269785f06a64637b1651cf84363444e","x5t":"YP3ZDx0Jk0rgMs64xHEb1ReRO_U","cer":"MIIDQjCCAiqgAwIBAgIQJE8Et525R/evPKEMz7INgjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYzOVoXDTE5MDIxNDE5NDYzOVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAiUsCyhWbnHKJZp46JivP3qd/qupg8n6qJNRRZBSEsq3Q0fi3nF6Z3U9/DnXBp5czt9lnsspHmoYa1ZyQRt3AsPDcpd06KVMjbWHVF6w//3TRRypvqAyH7kBwgqjMb9dEeJbYe4wIjW/cD+xw0TAvBz0Qj9O2bZlVhwUJFCynI8ojwi+4iIxKTQIjFTG5LqffmEJw1/89LTICmNrZN4iKaYH/3hCVTcKPon6mIeyHPTp3kc1zgCCJq9Pah+34YDbCMGoPOafGg/rlliHZtBW+FxQIvNgMMOXaTSLGbKaT0piIj1XHUxq/nfoceXxU6COibaC0iepMWnal9zHaRTcWFQ==","attributes":{"enabled":true,"nbf":1534275399,"exp":1550173599,"created":1534275999,"updated":1534275999,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1534275950,"updated":1534275995}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2386']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:46 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: 'b''b\''{"keyCredentials": [{"type": "AsymmetricX509Cert", "keyId": "88888888-0000-0000-0000-000000000005",
      "value": "MIIDQjCCAiqgAwIBAgIQJE8Et525R/evPKEMz7INgjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYzOVoXDTE5MDIxNDE5NDYzOVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAiUsCyhWbnHKJZp46JivP3qd/qupg8n6qJNRRZBSEsq3Q0fi3nF6Z3U9/DnXBp5czt9lnsspHmoYa1ZyQRt3AsPDcpd06KVMjbWHVF6w//3TRRypvqAyH7kBwgqjMb9dEeJbYe4wIjW/cD+xw0TAvBz0Qj9O2bZlVhwUJFCynI8ojwi+4iIxKTQIjFTG5LqffmEJw1/89LTICmNrZN4iKaYH/3hCVTcKPon6mIeyHPTp3kc1zgCCJq9Pah+34YDbCMGoPOafGg/rlliHZtBW+FxQIvNgMMOXaTSLGbKaT0piIj1XHUxq/nfoceXxU6COibaC0iepMWnal9zHaRTcWFQ==",
      "usage": "Verify", "startDate": "2018-08-14T19:46:47.397512Z", "endDate": "2019-02-14T19:46:38.000Z"}],
      "displayName": "azure-cli-2018-08-14-19-46-47", "availableToOtherTenants": false,
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"], "homepage":
      "http://azure-cli-2018-08-14-19-46-47"}\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['1577']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bc6a944c-90da-4647-81e1-16af66c0e140","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"60FDD90F1D09934AE032CEB8C4711BD517913BF5","endDate":"2019-02-14T19:46:38Z","keyId":"88888888-0000-0000-0000-000000000005","startDate":"2018-08-14T19:46:47.397512Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2235']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:47 GMT']
      duration: ['2940975']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/bc6a944c-90da-4647-81e1-16af66c0e140/Microsoft.DirectoryServices.Application']
      ocp-aad-diagnostics-server-name: [+i/Z4hAbtnUv8GUTjtLUQH8z9Wzcl8K6N3Y4i1a4li4=]
      ocp-aad-session-key: [WcCygyxKkzccSu3LM56_hgisLKVplOrcW1EUt-EYFwQX1l1ySZ3DrOGvdRGKj_VpJUw-Rg_vxBuXLT-6SQAz6UsUyNPLF0CTI1tJm0X1cuko4ks-W-oykoe6We2EtsKwp--JnC7Xsg2kvMOADVYcdA.WNMLzNFI2i_C5YVQ1vT7kHzJ5b7AY8U9z78vAjfu6Mk]
      pragma: [no-cache]
      request-id: [803ac4d4-26dd-4015-abfd-8f8c3319cd5c]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: '{"accountEnabled": true, "appId": "78bb5526-df20-4dc0-ba48-c53f37c388bc"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['73']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"2deea270-37aa-46e1-aeea-354c2d461595","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-08-14-19-46-47","appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["78bb5526-df20-4dc0-ba48-c53f37c388bc","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1617']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:47 GMT']
      duration: ['1346326']
      expires: ['-1']
      location: ['https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/2deea270-37aa-46e1-aeea-354c2d461595/Microsoft.DirectoryServices.ServicePrincipal']
      ocp-aad-diagnostics-server-name: [r0ucqRySMGW17Bkg7aZeW8iIhWNGY21tM0A78ijUzdE=]
      ocp-aad-session-key: [6vbXoW7fxXaOfWmvGW36izf8OSS-W6oAY53WZ1qUD4e3dsOSexmxbb0QntJytaxDveZVXq13dY9V5cNj7KMmPaa-gWUE1falIILos2AF8Ce4WR6W4q7Wrko-oPpz3bR46YBNtNWroLXtFVBOPbk-kw.5cHwknhm6F0CS_XTZw_1JIBFNAMAoXAM6cG8GD69Q_w]
      pragma: [no-cache]
      request-id: [7ca8641d-8fa9-4c04-a1d6-c754183d16ad]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:48 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "2deea270-37aa-46e1-aeea-354c2d461595",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006?api-version=2015-07-01
  response:
    body: {string: '{"error":{"code":"PrincipalNotFound","message":"Principal 2deea27037aa46e1aeea354c2d461595
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['163']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:50 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 400, message: Bad Request}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?api-version=2015-07-01&$filter=roleName%20eq%20%27Contributor%27
  response:
    body: {string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"0001-01-01T08:00:00.0000000Z","updatedOn":"2018-05-30T19:22:32.4538167Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['795']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:55 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: [Accept-Encoding]
      x-content-type-options: [nosniff]
      x-ms-request-charge: ['1']
    status: {code: 200, message: OK}
- request:
    body: '{"properties": {"principalId": "2deea270-37aa-46e1-aeea-354c2d461595",
      "roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c"}}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp create-for-rbac]
      Connection: [keep-alive]
      Content-Length: ['233']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000007?api-version=2015-07-01
  response:
    body: {string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"2deea270-37aa-46e1-aeea-354c2d461595","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2018-08-14T19:46:56.5373497Z","updatedOn":"2018-08-14T19:46:56.5373497Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000007","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000007"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['868']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:46:59 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      set-cookie: [x-ms-gateway-slice=productionb; path=/; secure; HttpOnly]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
      x-ms-request-charge: ['3']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6&$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.ServicePrincipal","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"2deea270-37aa-46e1-aeea-354c2d461595","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"azure-cli-2018-08-14-19-46-47","appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","keyCredentials":[],"logoutUrl":null,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"passwordCredentials":[],"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","78bb5526-df20-4dc0-ba48-c53f37c388bc"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['1620']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:58 GMT']
      duration: ['910551']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [IENUBJawjVCNeOFfPW1GFeJcp26vWA0p4gBL1NaxNik=]
      ocp-aad-session-key: [nV-OqhvRtDW58LQ0aqg-pZB4l5CR7Qj59vJFneW0JL0zlm-FcIbWrs0gZgf7Ewy6set9_75exZUYiKA1Xjf0MsQWCaKHKundMM1hnf-tAyTtb8gTAyVr2-JrH0dkMhB_ViHmJvwa8nomyNvUdfhlMQ.pvSX7_j5pH7tH6hwCgjgTOAys5EX7cnK9wFvRtcIick]
      pragma: [no-cache]
      request-id: [f2443479-9a8b-4fd0-b597-7669af520caa]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%2778bb5526-df20-4dc0-ba48-c53f37c388bc%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['161']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:46:59 GMT']
      duration: ['319598']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [6fg+R91TudKTiH8ukAn6DjKOEcAdu3Q+jEgq6nJAxfA=]
      ocp-aad-session-key: [F6vbdupAkeppATb8sAsuRCivgwCourXinOoflHIXcklyFCE6i14EQCMNCiZ55XjxIjf8p-_kjYDA9dF-hUbQVsVT4lxby6yX65538yuqP_GT-lN54dL9YPGo1M2UB_ByyPDrGAQt_Plo1lVOkasURA.QuZA_kUJ6IePUSphAeagxY92BdRBT9XOVNOeSKTw4PI]
      pragma: [no-cache]
      request-id: [af98de8b-81e2-4a9c-aa45-4f011f32a557]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=appId%20eq%20%2778bb5526-df20-4dc0-ba48-c53f37c388bc%27
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bc6a944c-90da-4647-81e1-16af66c0e140","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"60FDD90F1D09934AE032CEB8C4711BD517913BF5","endDate":"2019-02-14T19:46:38Z","keyId":"88888888-0000-0000-0000-000000000005","startDate":"2018-08-14T19:46:47.397512Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2152']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:47:00 GMT']
      duration: ['615432']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [XOs9gGfyH50gS8B3zPgeXNS3pfhaVVLdmqEFzm9FoHE=]
      ocp-aad-session-key: [kMUBAKwK5CD3QmfiNN8CbDcBghfr7xgG2M5pMMt_ERtOCb8W0xrj58Nma2rHwfd-NXTfmFZydoU7Ggt80QMMhm4Pl5eUkN0qiVufg2FU5JQttOytRYG8i3eVO9EZd9DJkbhx69ZXqTZrfIokk53WqA.1V-BDfFTeo1iyAJYWLSE-hxorxqFVMinKOMTbgv5GCM]
      pragma: [no-cache]
      request-id: [93809268-71ac-449a-937b-7ec3d4a36c9f]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bc6a944c-90da-4647-81e1-16af66c0e140?api-version=1.6
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bc6a944c-90da-4647-81e1-16af66c0e140","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"60FDD90F1D09934AE032CEB8C4711BD517913BF5","endDate":"2019-02-14T19:46:38Z","keyId":"88888888-0000-0000-0000-000000000005","startDate":"2018-08-14T19:46:47.397512Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2149']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:47:00 GMT']
      duration: ['466793']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [d1JB6ucVep7/SQwUJWs6eqivZfWvC07ij1sG/PhNZn0=]
      ocp-aad-session-key: [L3PABRWvS2jjZ3SNVx4sZlVWy-nadTpnNa4KYyoX652MYKXqyX1Mjc5Lpeq-B_9z9U8cjBvBkaXwygkR-AY7D2hh5idEYd4aV93fmEXp7HW-EXO5vK5Mc4nO0gWun3NtXDnQ7X48rr6D6fG71pfulQ.1WXrIE9jPDkrN4fJEYpA_F8cdtTnhOh_qWvuQJ6a67Q]
      pragma: [no-cache]
      request-id: [ed7401f1-52a6-459e-8659-3c84e31cde15]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-keyvault/2016-10-01 Azure-SDK-For-Python]
      accept-language: [en-US]
    method: GET
    uri: https://clitest000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body: {string: '{"id":"https://clitest000002.vault.azure.net/certificates/cert1/5269785f06a64637b1651cf84363444e","kid":"https://clitest000002.vault.azure.net/keys/cert1/5269785f06a64637b1651cf84363444e","sid":"https://clitest000002.vault.azure.net/secrets/cert1/5269785f06a64637b1651cf84363444e","x5t":"YP3ZDx0Jk0rgMs64xHEb1ReRO_U","cer":"MIIDQjCCAiqgAwIBAgIQJE8Et525R/evPKEMz7INgjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYzOVoXDTE5MDIxNDE5NDYzOVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAiUsCyhWbnHKJZp46JivP3qd/qupg8n6qJNRRZBSEsq3Q0fi3nF6Z3U9/DnXBp5czt9lnsspHmoYa1ZyQRt3AsPDcpd06KVMjbWHVF6w//3TRRypvqAyH7kBwgqjMb9dEeJbYe4wIjW/cD+xw0TAvBz0Qj9O2bZlVhwUJFCynI8ojwi+4iIxKTQIjFTG5LqffmEJw1/89LTICmNrZN4iKaYH/3hCVTcKPon6mIeyHPTp3kc1zgCCJq9Pah+34YDbCMGoPOafGg/rlliHZtBW+FxQIvNgMMOXaTSLGbKaT0piIj1XHUxq/nfoceXxU6COibaC0iepMWnal9zHaRTcWFQ==","attributes":{"enabled":true,"nbf":1534275399,"exp":1550173599,"created":1534275999,"updated":1534275999,"recoveryLevel":"Purgeable"},"policy":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1534275950,"updated":1534275995}},"pending":{"id":"https://clitest000002.vault.azure.net/certificates/cert1/pending"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2386']
      content-type: [application/json; charset=utf-8]
      date: ['Tue, 14 Aug 2018 19:47:00 GMT']
      expires: ['-1']
      pragma: [no-cache]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000;includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-keyvault-network-info: [addr=167.220.2.148;act_addr_fam=InterNetwork;]
      x-ms-keyvault-region: [westus]
      x-ms-keyvault-service-version: [1.0.0.855]
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: '{"keyCredentials": [{"type": "AsymmetricX509Cert", "keyId": "d93ea81a-5e11-4648-9c05-68152b8b956d",
      "value": "MIIDQjCCAiqgAwIBAgIQJE8Et525R/evPKEMz7INgjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE4MDgxNDE5MzYzOVoXDTE5MDIxNDE5NDYzOVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJuMkR4mYiFheLSneE7oFLL0VJZy9jwTN8Ot9tz+Nwoxw3IrUd9aS+/RjPNXoQ0Ge2nMYTVwTeuMdJi6onyaLozaPrdaN/sC3kRb2NcCns+43b+xEIDHBJSW4VhXn1YkfX9ZM/H704xq1Gx2pLWbFFoaQRr85m/a1d6Gms0SA7kf8PCHQ+3ItFeC1Uu7aHkIoctDz/wRYFx8yCmAuViFe+F055q7yOWWeR1aHb/3vr2epV2dr6ckSPolMgIyho9y0K0sbHwMXxRXCy/yfGkNDhegMIcjtGgfZ0ojdBjzdsUxHXLCijlDwXAtzrlFunCid7UYVOijAH+hb+IJHx2z8WsCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFByqp4wkHmjEOY/Du+GwCOruZkAEMB0GA1UdDgQWBBQcqqeMJB5oxDmPw7vhsAjq7mZABDANBgkqhkiG9w0BAQsFAAOCAQEAiUsCyhWbnHKJZp46JivP3qd/qupg8n6qJNRRZBSEsq3Q0fi3nF6Z3U9/DnXBp5czt9lnsspHmoYa1ZyQRt3AsPDcpd06KVMjbWHVF6w//3TRRypvqAyH7kBwgqjMb9dEeJbYe4wIjW/cD+xw0TAvBz0Qj9O2bZlVhwUJFCynI8ojwi+4iIxKTQIjFTG5LqffmEJw1/89LTICmNrZN4iKaYH/3hCVTcKPon6mIeyHPTp3kc1zgCCJq9Pah+34YDbCMGoPOafGg/rlliHZtBW+FxQIvNgMMOXaTSLGbKaT0piIj1XHUxq/nfoceXxU6COibaC0iepMWnal9zHaRTcWFQ==",
      "usage": "Verify", "startDate": "2018-08-14T19:47:00.719094Z", "endDate": "2019-02-14T19:46:38.000Z"}]}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad sp credential reset]
      Connection: [keep-alive]
      Content-Length: ['1336']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bc6a944c-90da-4647-81e1-16af66c0e140?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Tue, 14 Aug 2018 19:47:01 GMT']
      duration: ['1873698']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [NecIdAbtcl2G5DavAD0ay+NyJ0bZ8m4qvkKAOpQmV0w=]
      ocp-aad-session-key: [XJ60btdeWdjPH4ab2G9ey4Na6Rrr6qfIf0uZ62jSY9PsuGIP16ucpgBFPq-zxqyjrPFQpIuXzrG-Zq_wTUU6ye4td60He7jHl-uViJ8_SqCcOsJl9mb6LWOLwZao423SWZpww6svIdZ-IEDTgrY_3w.7axseQ7GIIGGLl-27Xl2hmYdJfkQ5oUUHt1qx-55CvI]
      pragma: [no-cache]
      request-id: [aeedecc2-d180-4f94-8977-75bd4c963b7a]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6&$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29
  response:
    body: {string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/Microsoft.DirectoryServices.Application","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"bc6a944c-90da-4647-81e1-16af66c0e140","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"78bb5526-df20-4dc0-ba48-c53f37c388bc","appRoles":[],"availableToOtherTenants":false,"displayName":"azure-cli-2018-08-14-19-46-47","errorUrl":null,"groupMembershipClaims":null,"homepage":"http://azure-cli-2018-08-14-19-46-47","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"60FDD90F1D09934AE032CEB8C4711BD517913BF5","endDate":"2019-02-14T19:46:38Z","keyId":"d93ea81a-5e11-4648-9c05-68152b8b956d","startDate":"2018-08-14T19:47:00.719094Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logoUrl":null,"oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on behalf of the signed-in
        user.","adminConsentDisplayName":"Access azure-cli-2018-08-14-19-46-47","id":"21ea3d9e-fc9a-48bd-95e3-9e3c3dae5de7","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access azure-cli-2018-08-14-19-46-47 on your behalf.","userConsentDisplayName":"Access
        azure-cli-2018-08-14-19-46-47","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      content-length: ['2152']
      content-type: [application/json; odata=minimalmetadata; streaming=true; charset=utf-8]
      dataserviceversion: [3.0;]
      date: ['Tue, 14 Aug 2018 19:47:01 GMT']
      duration: ['568051']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [sjU31wcZZQkSllvwYiJGtga5DQTbyVp6msGr4BIoWXU=]
      ocp-aad-session-key: [k3cHx8nDkMdU9OsYc9IzEWJ2svEGe7vCDPplw0V_u9uvUYOZ3JRt8ilxmYX-mlyKnJpsKBD5Abefu9ts502z-A_tVe8jklZvyBFg73Udmeyq1Tt5BWZLdHrfEpnu90TCMbIF9TshSL1kjw5ygVFTlA.wg9X3ofU52q-EFu-JOxEXI4KCdq19njCmr3QvB_0Zms]
      pragma: [no-cache]
      request-id: [6750ab19-3b85-4a70-ad8d-cc528e0e671c]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [ad app delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 azure-graphrbac/0.40.0 Azure-SDK-For-Python AZURECLI/2.0.45]
      accept-language: [en-US]
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/bc6a944c-90da-4647-81e1-16af66c0e140?api-version=1.6
  response:
    body: {string: ''}
    headers:
      access-control-allow-origin: ['*']
      cache-control: [no-cache]
      dataserviceversion: [1.0;]
      date: ['Tue, 14 Aug 2018 19:47:01 GMT']
      duration: ['1735104']
      expires: ['-1']
      ocp-aad-diagnostics-server-name: [8FSoKn5C+xKnzMxVB24u9W0B3o/Ls6Mt3pri2fVg6OA=]
      ocp-aad-session-key: [D3vTlvSX9jkB_xuLVhyiqhnTZYK6hxy5bn5q1QRS_wI4MLBS7rcZbSoaYXcs_cZVM-Z9V0ALLC60PhWw_kELqVNokpTTwPGehWsygmHPyQPxuLw6-xT28XK5VeNIiKr0bXCyqbvNrzNc7a37ZCzCDA.oZ3Xq6Ykg7FmzEHosGL0tGHl4hsJddJIoZTQAuYtEKw]
      pragma: [no-cache]
      request-id: [cec71ab5-dbdf-420a-b4af-d32718868a46]
      server: [Microsoft-IIS/10.0]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-aspnet-version: [4.0.30319]
      x-content-type-options: [nosniff]
      x-ms-dirapi-data-contract-version: ['1.6']
      x-powered-by: [ASP.NET]
    status: {code: 204, message: No Content}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.4 (Windows-10-10.0.17134-SP0) requests/2.19.1 msrest/0.5.4
          msrest_azure/0.4.34 resourcemanagementclient/2.0.0 Azure-SDK-For-Python
          AZURECLI/2.0.45]
      accept-language: [en-US]
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2016-02-01
  response:
    body: {string: ''}
    headers:
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Tue, 14 Aug 2018 19:47:02 GMT']
      expires: ['-1']
      location: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURVNUOjVGU1A6NUZXSVRIOjVGS1Y6NUZFWElTVElORzo1RkNFUlRRQ3wzMUNCMDdBODNDNUJEMUY5LVdFU1RVUyIsImpvYkxvY2F0aW9uIjoid2VzdHVzIn0?api-version=2016-02-01']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-content-type-options: [nosniff]
      x-ms-ratelimit-remaining-subscription-deletes: ['14998']
    status: {code: 202, message: Accepted}
version: 1
