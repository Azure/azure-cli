interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001","name":"cliadm000001","type":"Microsoft.Resources/resourceGroups","location":"centralus","tags":{"product":"azurecli","cause":"automation","date":"2020-12-18T20:31:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '305'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:32:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '25'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity","name":"cliadm000001Identity","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"centralus","tags":{},"properties":{"tenantId":"01a4073e-87c8-47cd-aafc-1439b4b5ea2c","principalId":"8754e3b2-56cc-4614-99b7-d43e371b2fe8","clientId":"92e6a9d9-c1d0-4a4f-8635-05b2f4956846","clientSecretUrl":"https://control-centralus.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity/credentials?tid=01a4073e-87c8-47cd-aafc-1439b4b5ea2c&oid=8754e3b2-56cc-4614-99b7-d43e371b2fe8&aid=92e6a9d9-c1d0-4a4f-8635-05b2f4956846"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '816'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:32:03 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '984'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28c%3Ac%20eq%20%278754e3b2-56cc-4614-99b7-d43e371b2fe8%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 18 Dec 2020 20:34:04 GMT
      duration:
      - '685397'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - u84kEvNmBHxW4/vtHqUleUYQGGbAjaquR19gMFnyQJs=
      ocp-aad-session-key:
      - Mu7HJj2fIGriOTeyH38L9sUZVSlDHH_oRf9glguVv-f7Mh3BRe6EcsLWyxzDRKnutHY7PfaLWk6898NsSd8gDS0m6Tmjr8APp9XDMWeQBHKeSytbvtFXmIihwl14OLnSyTYYHs_fvrSyuyrQ9Q-TTEC7jrPh9uJsEI8LILEyhlE.Ys3gNu4V6o4C-PNsxyQiLyHe1wcGBV3bS6GM6mdjGGc
      pragma:
      - no-cache
      request-id:
      - ec1799ed-e84c-4d22-bd7b-a6369397c4e5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"objectIds": ["8754e3b2-56cc-4614-99b7-d43e371b2fe8"], "includeDirectoryObjectReferences":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/getObjectsByObjectIds?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"8754e3b2-56cc-4614-99b7-d43e371b2fe8","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":["isExplicit=True","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadm000001Identity"],"appDisplayName":null,"appId":"92e6a9d9-c1d0-4a4f-8635-05b2f4956846","applicationTemplateId":null,"appOwnerTenantId":null,"appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cliadm000001Identity","errorUrl":null,"homepage":null,"informationalUrls":null,"keyCredentials":[{"customKeyIdentifier":"3F674FAC511360F094C1596234AAE6F5C02B43D8","endDate":"2021-03-18T20:27:00Z","keyId":"ce50eb70-411d-4f09-ba93-3994a4c38275","startDate":"2020-12-18T20:27:00Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":null,"replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["92e6a9d9-c1d0-4a4f-8635-05b2f4956846","https://identity.azure.net/rcIZ1CGIC1mzKUNEThlNNzrQ/JYqDklVA9E5+DPUtz4="],"servicePrincipalType":"ManagedIdentity","signInAudience":null,"tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1593'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 18 Dec 2020 20:34:04 GMT
      duration:
      - '341873'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - NAD+2/o3LjyrhIqIm5JlkwHB2nKjL0M6wdGgd+eQ688=
      ocp-aad-session-key:
      - 2HH_egQNtwQGbBHRTXrdCy-847cid-yG6jIVQK-BhVLTZRgk8cEnH6jhdFagtiJgqKDLFatmOQ7C-N8QUflQYRJgfi2I-ZfW7REIxMHk2nXoqqwnGTXS15GViS3KhL7lozofqojAR-i6b5cVPT6RtUIHvIYiDsyQy_15DXAv3rE.rc0Yw31pY_mA87Kb7mIAsBlAfoSOxqJfxrFW16mBNW0
      pragma:
      - no-cache
      request-id:
      - f3ef30f1-ca98-46ec-a216-c8d52d2366ea
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '3'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "8754e3b2-56cc-4614-99b7-d43e371b2fe8"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --assignee --role --scope
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments/cd32ac11-24a2-4857-b007-208033436dca?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"8754e3b2-56cc-4614-99b7-d43e371b2fe8","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","condition":null,"conditionVersion":null,"createdOn":"2020-12-18T20:34:05.4076975Z","updatedOn":"2020-12-18T20:34:05.7277343Z","createdBy":null,"updatedBy":"5310aa29-9a44-4cbc-adb3-6347a539537e","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleAssignments/cd32ac11-24a2-4857-b007-208033436dca","type":"Microsoft.Authorization/roleAssignments","name":"cd32ac11-24a2-4857-b007-208033436dca"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '823'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account keys list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g --query -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002/listKeys?api-version=2019-06-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Fri, 18 Dec 2020 20:34:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:36 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Fri, 18 Dec 2020 20:34:37 GMT
      etag:
      - '"0x8D8A39456752599"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:37 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"cliadmxy32gystgtemplate\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"value\": \"Standard_RAGRS\"\r\n        },\r\n        \"kind\":
      {\r\n            \"value\": \"StorageV2\"\r\n        },\r\n        \"accessTier\":
      {\r\n            \"value\": \"Hot\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"value\": true\r\n        }\r\n    }\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '613'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:36 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - ne6IERAxIhvMrqRELGmC1A==
      date:
      - Fri, 18 Dec 2020 20:34:37 GMT
      etag:
      - '"0x8D8A39456DAE1B5"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:38 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "\uFEFF{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"cliadmxy32gystgtemplate\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"value\": \"Standard_RAGRS\"\r\n        },\r\n        \"kind\":
      {\r\n            \"value\": \"StorageV2\"\r\n        },\r\n        \"accessTier\":
      {\r\n            \"value\": \"Hot\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"value\": true\r\n        }\r\n    }\r\n}\r\n"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '618'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:37 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.copy.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - kKXGK5330ursPOIjwfFX9A==
      date:
      - Fri, 18 Dec 2020 20:34:37 GMT
      etag:
      - '"0x8D8A39457173280"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:38 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"kind\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"accessTier\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"type\": \"bool\"\r\n        }\r\n    },\r\n    \"variables\":
      {},\r\n    \"resources\": [\r\n        {\r\n            \"name\": \"[parameters('storageAccountName')]\",\r\n
      \           \"type\": \"Microsoft.Storage/storageAccounts\",\r\n            \"apiVersion\":
      \"2018-07-01\",\r\n            \"location\": \"[parameters('location')]\",\r\n
      \           \"properties\": {\r\n                \"accessTier\": \"[parameters('accessTier')]\",\r\n
      \               \"supportsHttpsTrafficOnly\": \"[parameters('supportsHttpsTrafficOnly')]\"\r\n
      \           },\r\n            \"dependsOn\": [],\r\n            \"sku\": {\r\n
      \               \"name\": \"[parameters('accountType')]\"\r\n            },\r\n
      \           \"kind\": \"[parameters('kind')]\"\r\n        }\r\n    ],\r\n    \"outputs\":
      {}\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1242'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:37 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.template.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - /SSTMoFKkG8ZQg+1oXFMBQ==
      date:
      - Fri, 18 Dec 2020 20:34:38 GMT
      etag:
      - '"0x8D8A394575817F9"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:38 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"accountType\":
      {\r\n            \"type\": \"string\"\r\n        },\r\n        \"kind\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"accessTier\": {\r\n
      \           \"type\": \"string\"\r\n        },\r\n        \"supportsHttpsTrafficOnly\":
      {\r\n            \"type\": \"bool\"\r\n        }\r\n    },\r\n    \"variables\":
      {},\r\n    \"resources\": [\r\n        {\r\n            \"name\": \"[parameters('storageAccountName')]\",\r\n
      \           \"type\": \"Microsoft.Storage/storageAccounts\",\r\n            \"apiVersion\":
      \"2018-07-01\",\r\n            \"location\": \"[parameters('location')]\",\r\n
      \           \"properties\": {\r\n                \"accessTier\": \"[parameters('accessTier')]\",\r\n
      \               \"supportsHttpsTrafficOnly\": \"[parameters('supportsHttpsTrafficOnly')]\"\r\n
      \           },\r\n            \"dependsOn\": [],\r\n            \"sku\": {\r\n
      \               \"name\": \"[parameters('accountType')]\"\r\n            },\r\n
      \           \"kind\": \"[parameters('kind')]\"\r\n        }\r\n    ],\r\n    \"outputs\":
      {}\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '1242'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:38 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage.copy.template.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - /SSTMoFKkG8ZQg+1oXFMBQ==
      date:
      - Fri, 18 Dec 2020 20:34:39 GMT
      etag:
      - '"0x8D8A39457957A65"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:39 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: "{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\",\r\n
      \   \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        \"location\":
      {\r\n            \"value\": \"centralus\"\r\n        },\r\n        \"storageAccountName\":
      {\r\n            \"value\": \"(Invalid_Storage.Account/Name)\"\r\n        },\r\n
      \       \"accountType\": {\r\n            \"value\": \"Standard_RAGRS\"\r\n
      \       },\r\n        \"kind\": {\r\n            \"value\": \"StorageV2\"\r\n
      \       },\r\n        \"accessTier\": {\r\n            \"value\": \"Hot\"\r\n
      \       },\r\n        \"supportsHttpsTrafficOnly\": {\r\n            \"value\":
      true\r\n        }\r\n    }\r\n}"
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '620'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.6; Windows 10) AZURECLI/2.16.0
      x-ms-blob-content-type:
      - application/json
      x-ms-blob-type:
      - BlockBlob
      x-ms-date:
      - Fri, 18 Dec 2020 20:34:38 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://cliadm000002.blob.core.windows.net/artifacts/artifactroot/storage_invalid.parameters.json
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      content-md5:
      - 9bTPRFFO473q3qv5fvgUOA==
      date:
      - Fri, 18 Dec 2020 20:34:38 GMT
      etag:
      - '"0x8D8A39457D1CB2B"'
      last-modified:
      - Fri, 18 Dec 2020 20:34:39 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container generate-sas
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --account-name --permissions --start --expiry -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/storageAccounts?api-version=2019-06-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002","name":"cliadm000002","type":"Microsoft.Storage/storageAccounts","location":"centralus","tags":{},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-12-18T20:31:44.2760641Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-12-18T20:31:44.2760641Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2020-12-18T20:31:44.1979525Z","primaryEndpoints":{"blob":"https://cliadm000002.blob.core.windows.net/","queue":"https://cliadm000002.queue.core.windows.net/","table":"https://cliadm000002.table.core.windows.net/","file":"https://cliadm000002.file.core.windows.net/"},"primaryLocation":"centralus","statusOfPrimary":"available"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1195'
      content-type:
      - application/json
      date:
      - Fri, 18 Dec 2020 20:34:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container generate-sas
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --account-name --permissions --start --expiry -o
      User-Agent:
      - AZURECLI/2.16.0 azsdk-python-azure-mgmt-storage/16.0.0 Python/3.8.6 (Windows-10-10.0.19041-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Storage/storageAccounts/cliadm000002/listKeys?api-version=2019-06-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Fri, 18 Dec 2020 20:34:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"sourceType": "AzureStorage",
      "artifactRoot": "artifactroot", "authentication": {"type": "Sas", "properties":
      {"sasUri": "https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-18T19%3A34Z&se=2020-12-19T06%3A34Z&sp=rl&sv=2018-11-09&sr=c&sig=oQ033LcDRj0YINrHziet2be1ci/MLVyHeCgDIy/EDv4%3D"}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager artifact-source create
      Connection:
      - keep-alive
      Content-Length:
      - '354'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -n -l --sas-uri --artifact-root
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource?api-version=2019-11-01-preview
  response:
    body:
      string: '{"error":{"code":"MissingSubscriptionRegistration","message":"The subscription
        is not registered to use namespace ''Microsoft.DeploymentManager''. See https://aka.ms/rps-not-found
        for how to register subscriptions.","details":[{"code":"MissingSubscriptionRegistration","target":"Microsoft.DeploymentManager","message":"The
        subscription is not registered to use namespace ''Microsoft.DeploymentManager''.
        See https://aka.ms/rps-not-found for how to register subscriptions."}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '472'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 409
      message: Conflict
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python-requests/2.22.0
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DeploymentManager/register?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DeploymentManager","namespace":"Microsoft.DeploymentManager","authorizations":[{"applicationId":"5b306cba-9c71-49db-96c3-d17ca2379c4d"}],"resourceTypes":[{"resourceType":"artifactSources","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies/services","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies/services/serviceUnits","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"steps","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"rollouts","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"operationResults","locations":["global"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"]},{"resourceType":"operations","locations":["global"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4578'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.22.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DeploymentManager?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.DeploymentManager","namespace":"Microsoft.DeploymentManager","authorizations":[{"applicationId":"5b306cba-9c71-49db-96c3-d17ca2379c4d"}],"resourceTypes":[{"resourceType":"artifactSources","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies/services","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"serviceTopologies/services/serviceUnits","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"steps","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"rollouts","locations":["Central
        US","East US","East US 2","West US","West US 2","West Central US","North Central
        US","South Central US","North Europe","West Europe","East Asia","Southeast
        Asia","Japan East","Japan West","Australia East","Australia Southeast","Australia
        Central","Australia Central 2","Brazil South","South India","Central India","West
        India","Canada Central","Canada East","UK South","UK West","Korea Central","Korea
        South","France Central","France South","South Africa North","South Africa
        West"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"operationResults","locations":["global"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"]},{"resourceType":"operations","locations":["global"],"apiVersions":["2019-11-01-preview","2018-09-01-preview"]}],"registrationState":"Registered"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4577'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"sourceType": "AzureStorage",
      "artifactRoot": "artifactroot", "authentication": {"type": "Sas", "properties":
      {"sasUri": "https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-18T19%3A34Z&se=2020-12-19T06%3A34Z&sp=rl&sv=2018-11-09&sr=c&sig=oQ033LcDRj0YINrHziet2be1ci/MLVyHeCgDIy/EDv4%3D"}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager artifact-source create
      Connection:
      - keep-alive
      Content-Length:
      - '354'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -n -l --sas-uri --artifact-root
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"sourceType":"AzureStorage","artifactRoot":"artifactroot","authentication":{"type":"Sas","properties":{"sasUri":"https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-18T19%3A34Z&se=2020-12-19T06%3A34Z&sp=rl&sv=2018-11-09&sr=c&sig=oQ033LcDRj0YINrHziet2be1ci/MLVyHeCgDIy/EDv4%3D"}},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/artifactSources","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","name":"cliadm000001ArtifactSource","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '665'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager artifact-source show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"sourceType":"AzureStorage","artifactRoot":"artifactroot","authentication":{"type":"Sas","properties":{"sasUri":"https://cliadm000002.blob.core.windows.net/artifacts?st=2020-12-18T19%3A34Z&se=2020-12-19T06%3A34Z&sp=rl&sv=2018-11-09&sr=c&sig=oQ033LcDRj0YINrHziet2be1ci/MLVyHeCgDIy/EDv4%3D"}},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/artifactSources","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","name":"cliadm000001ArtifactSource","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '665'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"artifactSourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-topology create
      Connection:
      - keep-alive
      Content-Length:
      - '225'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -n -l --artifact-source
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"artifactSourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource","provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology","name":"cliadm000001ServiceTopology","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '550'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-topology show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"artifactSourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/artifactSources/cliadm000001ArtifactSource"},"type":"Microsoft.DeploymentManager/serviceTopologies","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology","name":"cliadm000001ServiceTopology","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '518'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"targetLocation": "centralus",
      "targetSubscriptionId": "5e87627b-4ffa-4abf-8040-b1103c84a2fd"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service create
      Connection:
      - keep-alive
      Content-Length:
      - '136'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name -n -l --target-location --target-subscription-id
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetSubscriptionId":"5e87627b-4ffa-4abf-8040-b1103c84a2fd","targetLocation":"centralus","provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service","name":"cliadm000001Service","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '489'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:34:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: '{"location": "centralus", "properties": {"targetResourceGroup": "cliadm000001",
      "deploymentMode": "Incremental", "artifacts": {"templateArtifactSourceRelativePath":
      "storage.template.json", "parametersArtifactSourceRelativePath": "storage.parameters.json"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      Content-Length:
      - '258'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Running"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/c0e4a955-79d8-47ee-8e4f-d58d3c115601?api-version=2019-11-01-preview
      cache-control:
      - no-store, no-cache
      content-length:
      - '658'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:35:00 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/c0e4a955-79d8-47ee-8e4f-d58d3c115601?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/c0e4a955-79d8-47ee-8e4f-d58d3c115601?api-version=2019-11-01-preview
  response:
    body:
      string: '{"status":"Succeeded","startTime":"2020-12-18T20:35:00.5450000Z","endTime":"2020-12-18T20:35:05.8080000Z"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:35:33 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '660'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:35:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001ServiceUnit","name":"cliadm000001ServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '660'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:35:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"targetResourceGroup": "cliadm000001",
      "deploymentMode": "Incremental", "artifacts": {"templateArtifactSourceRelativePath":
      "storage.template.json", "parametersArtifactSourceRelativePath": "storage_invalid.parameters.json"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      Content-Length:
      - '266'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Running"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/10f1055f-3bc6-4bb0-b5be-e72c7257d55e?api-version=2019-11-01-preview
      cache-control:
      - no-store, no-cache
      content-length:
      - '680'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:35:39 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/10f1055f-3bc6-4bb0-b5be-e72c7257d55e?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/operationResults/10f1055f-3bc6-4bb0-b5be-e72c7257d55e?api-version=2019-11-01-preview
  response:
    body:
      string: '{"status":"Succeeded","startTime":"2020-12-18T20:35:37.6130000Z","endTime":"2020-12-18T20:35:41.3600000Z"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:13 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n -l --target-resource-group --deployment-mode
        --parameters-path --template-path
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager service-unit show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --service-topology-name --service-name -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"targetResourceGroup":"cliadm000001","deploymentMode":"Incremental","artifacts":{"templateArtifactSourceRelativePath":"storage.template.json","parametersArtifactSourceRelativePath":"storage_invalid.parameters.json"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/serviceTopologies/cliadm000001ServiceTopology/services/cliadm000001Service/serviceUnits/cliadm000001InvalidServiceUnit","name":"cliadm000001InvalidServiceUnit","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '682'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "centralus", "properties": {"stepType": "Wait", "attributes":
      {"duration": "PT5M"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager step create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g -l -n --duration
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"stepType":"Wait","attributes":{"duration":"PT5M"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/steps","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep","name":"cliadm000001WaitStep","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '381'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deploymentmanager step show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-deploymentmanager/0.2.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep?api-version=2019-11-01-preview
  response:
    body:
      string: '{"properties":{"stepType":"Wait","attributes":{"duration":"PT5M"},"provisioningState":"Succeeded"},"type":"Microsoft.DeploymentManager/steps","apiVersion":"2019-11-01-preview","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.DeploymentManager/steps/cliadm000001WaitStep","name":"cliadm000001WaitStep","location":"centralus"}'
    headers:
      cache-control:
      - no-store, no-cache
      content-length:
      - '381'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-frame-options:
      - DENY
    status:
      code: 200
      message: OK
- request:
    body: "{\"properties\": {\"parameters\": {}, \"mode\": \"Incremental\", template:{\r\n
      \ \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json\",\r\n
      \ \"resources\": [\r\n    {\r\n      \"location\": \"Central US\",\r\n      \"apiVersion\":
      \"2018-09-01-preview\",\r\n      \"type\": \"Microsoft.DeploymentManager/rollouts\",\r\n
      \     \"name\": \"cliadmxd57xgRollout\",\r\n      \"Identity\": {\r\n        \"type\":
      \"userAssigned\",\r\n        \"identityIds\": [\r\n          \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity\"\r\n
      \       ]\r\n      },\r\n      \"properties\": {\r\n        \"buildVersion\":
      \"1.0.0\",\r\n        \"targetServiceTopologyId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology\",\r\n
      \       \"artifactSourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/artifactSources/cliadmxd57xgArtifactSource\",\r\n
      \       \"stepGroups\": [\r\n          {\r\n            \"name\": \"PilotRegion\",\r\n
      \           \"preDeploymentSteps\": [\r\n              {\r\n                \"stepId\":
      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/steps/cliadmxd57xgWaitStep\"\r\n
      \             }\r\n            ],\r\n            \"deploymentTargetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology/services/cliadmxd57xgService/serviceUnits/cliadmxd57xgServiceUnit\"\r\n
      \         }\r\n        ]\r\n      }\r\n    }\r\n  ],\r\n  \"contentVersion\":
      \"1.0.0.0\"\r\n}\r\n}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      Content-Length:
      - '1777'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout","name":"createrollout","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9487145448868255408","mode":"Incremental","provisioningState":"Succeeded","timestamp":"2020-12-18T20:36:19.5109959Z","duration":"PT0S","correlationId":"7c3cd65a-96b2-4f4f-9f05-5e1f873619f8","providers":[{"namespace":"Microsoft.DeploymentManager","resourceTypes":[{"resourceType":"rollouts","locations":["centralus"]}]}],"dependencies":[],"validatedResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/rollouts/cliadmxd57xgRollout"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '756'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"properties\": {\"parameters\": {}, \"mode\": \"Incremental\", template:{\r\n
      \ \"$schema\": \"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json\",\r\n
      \ \"resources\": [\r\n    {\r\n      \"location\": \"Central US\",\r\n      \"apiVersion\":
      \"2018-09-01-preview\",\r\n      \"type\": \"Microsoft.DeploymentManager/rollouts\",\r\n
      \     \"name\": \"cliadmxd57xgRollout\",\r\n      \"Identity\": {\r\n        \"type\":
      \"userAssigned\",\r\n        \"identityIds\": [\r\n          \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity\"\r\n
      \       ]\r\n      },\r\n      \"properties\": {\r\n        \"buildVersion\":
      \"1.0.0\",\r\n        \"targetServiceTopologyId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology\",\r\n
      \       \"artifactSourceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/artifactSources/cliadmxd57xgArtifactSource\",\r\n
      \       \"stepGroups\": [\r\n          {\r\n            \"name\": \"PilotRegion\",\r\n
      \           \"preDeploymentSteps\": [\r\n              {\r\n                \"stepId\":
      \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/steps/cliadmxd57xgWaitStep\"\r\n
      \             }\r\n            ],\r\n            \"deploymentTargetId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.DeploymentManager/serviceTopologies/cliadmxd57xgServiceTopology/services/cliadmxd57xgService/serviceUnits/cliadmxd57xgServiceUnit\"\r\n
      \         }\r\n        ]\r\n      }\r\n    }\r\n  ],\r\n  \"contentVersion\":
      \"1.0.0.0\"\r\n}\r\n}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      Content-Length:
      - '1777'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2020-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout","name":"createrollout","type":"Microsoft.Resources/deployments","properties":{"templateHash":"9487145448868255408","mode":"Incremental","provisioningState":"Accepted","timestamp":"2020-12-18T20:36:19.7851836Z","duration":"PT0.0323024S","correlationId":"29001daa-1778-47ae-a189-17608bbe8108","providers":[{"namespace":"Microsoft.DeploymentManager","resourceTypes":[{"resourceType":"rollouts","locations":["centralus"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/createrollout/operationStatuses/08585932831057247204?api-version=2020-10-01
      cache-control:
      - no-cache
      content-length:
      - '584'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group deployment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --template-file
      User-Agent:
      - python/3.8.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-resource/12.0.0 Azure-SDK-For-Python AZURECLI/2.16.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadm000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585932831057247204?api-version=2020-10-01
  response:
    body:
      string: '{"status":"Failed","error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"FailedIdentityOperation\",\r\n    \"message\": \"Identity
        operation for resource ''/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cliadm000001/providers/Microsoft.DeploymentManager/rollouts/cliadmxd57xgRollout''
        failed with error ''Failed to perform resource identity operation. Status:
        ''BadRequest''. Response: ''{\\\"error\\\":{\\\"code\\\":\\\"BadRequest\\\",\\\"message\\\":\\\"Resource
        ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cliadmxd57xg/providers/Microsoft.ManagedIdentity/userAssignedIdentities/cliadmxd57xgIdentity''
        was not found.\\\"}}''.''.\"\r\n  }\r\n}"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '919'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 18 Dec 2020 20:36:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
