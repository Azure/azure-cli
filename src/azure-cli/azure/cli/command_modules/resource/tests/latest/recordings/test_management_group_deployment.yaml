interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2624'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:06:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2624'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:06:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "azure-cli-management000002", "properties": {"details": {"parent":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002","type":"Microsoft.Management/managementGroups","name":"azure-cli-management000002","status":"NotStarted"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
      cache-control:
      - no-cache
      content-length:
      - '189'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:02 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/create/managementGroups/azure-cli-management000002?api-version=2021-04-01
      pragma:
      - no-cache
      request-id:
      - 4d17f918-bff6-4a62-93b3-d07b6a1cba91
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-managementgroups-requests:
      - '59'
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002","name":"azure-cli-management000002","status":"Running"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
      cache-control:
      - no-cache
      content-length:
      - '185'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:12 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/create/managementGroups/azure-cli-management000002?api-version=2021-04-01
      pragma:
      - no-cache
      request-id:
      - 6b141add-4b03-461e-93bc-a07ef81768bb
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/operationResults/create/asyncOperation/status/managementGroups/azure-cli-management000002","name":"azure-cli-management000002","status":"Succeeded","properties":{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","displayName":"azure-cli-management000002","details":{"version":1,"updatedTime":"2023-03-14T09:07:08.4963632Z","updatedBy":"d44a2991-98c6-47c3-b59b-2b30d72cfcc2"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '415'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - 15653ca0-9451-457d-b0da-d7fb0a073798
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002","type":"Microsoft.Management/managementGroups","name":"azure-cli-management000002","properties":{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","displayName":"azure-cli-management000002","details":{"version":1,"updatedTime":"2023-03-14T09:07:08.4963632Z","updatedBy":"d44a2991-98c6-47c3-b59b-2b30d72cfcc2","parent":{"id":"/providers/Microsoft.Management/managementGroups/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","name":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","displayName":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '598'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - 7edc5e01-791b-418c-a447-6e78246cb9d5
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-managementgroups-requests:
      - '59'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\"\
      : {\"value\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590\"}, \"targetMG\": {\"value\"\
      : \"azure-cli-management000002\"}, \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000003\"\
      }, \"storageAccountName\": {\"value\": \"armbuilddemo000005\"}}, \"mode\": \"\
      Incremental\", template:{\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#\"\
      ,\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {\r\n    \"targetMG\"\
      : {\r\n      \"type\": \"string\"\r\n    },\r\n    \"nestedsubId\": {\r\n  \
      \    \"type\": \"string\"\r\n    },\r\n    \"nestedRG\": {\r\n      \"type\"\
      : \"string\"\r\n    },\r\n    \"storageAccountName\": {\r\n      \"type\": \"\
      string\"\r\n    }\r\n  },\r\n  \"variables\": {\r\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',\
      \ parameters('targetMG'))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n    \
      \  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n      \"name\"\
      : \"policy2\",\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"properties\"\
      : {\r\n        \"policyType\": \"Custom\",\r\n        \"parameters\": {\r\n\r\
      \n        },\r\n        \"policyRule\": {\r\n          \"if\": {\r\n       \
      \     \"field\": \"location\",\r\n            \"equals\": \"northeurope\"\r\n\
      \          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\
      \n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\":\
      \ \"Microsoft.Authorization/policyAssignments\",\r\n      \"name\": \"location-lock\"\
      ,\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"dependsOn\": [\r\n   \
      \     \"policy2\"\r\n      ],\r\n      \"properties\": {\r\n        \"scope\"\
      : \"[variables('mgScope')]\",\r\n        \"policyDefinitionId\": \"[concat(variables('mgScope'),\
      \ '/providers/', 'Microsoft.Authorization/policyDefinitions/', 'policy2')]\"\
      \r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n      \"name\": \"sdktest-subnested\",\r\n      \"apiVersion\": \"2018-05-01\"\
      ,\r\n      \"location\": \"West US\",\r\n      \"subscriptionId\": \"[parameters('nestedSubId')]\"\
      ,\r\n      \"properties\": {\r\n        \"template\": {\r\n          \"$schema\"\
      : \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\"\
      : {\r\n\r\n          },\r\n          \"variables\": {\r\n\r\n          },\r\n\
      \          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\"\
      ,\r\n              \"name\": \"[parameters('nestedRG')]\",\r\n             \
      \ \"apiVersion\": \"2018-05-01\",\r\n              \"location\": \"East US 2\
      \ EUAP\",\r\n              \"properties\": {\r\n\r\n              }\r\n    \
      \        },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\"\
      : \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedRG')]\"\
      ,\r\n              \"dependsOn\": [ \"[parameters('nestedRG')]\" ],\r\n    \
      \          \"properties\": {\r\n                \"template\": {\r\n        \
      \          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                \
      \  \"parameters\": {\r\n\r\n                  },\r\n                  \"variables\"\
      : {\r\n\r\n                  },\r\n                  \"resources\": [\r\n  \
      \                  {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\"\
      ,\r\n                      \"name\": \"[parameters('storageAccountName')]\"\
      ,\r\n                      \"apiVersion\": \"2015-06-15\",\r\n             \
      \         \"location\": \"East US\",\r\n                      \"properties\"\
      : {\r\n                        \"accountType\": \"Standard_LRS\",\r\n      \
      \                  \"supportsHttpsTrafficOnly\": true\r\n                  \
      \    }\r\n                    }\r\n                  ]\r\n                },\r\
      \n                \"mode\": \"Incremental\"\r\n              }\r\n         \
      \   }\r\n          ]\r\n        },\r\n        \"mode\": \"Incremental\"\r\n\
      \      }\r\n    }\r\n  ] // comment\r\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg validate
      Connection:
      - keep-alive
      Content-Length:
      - '3808'
      Content-Type:
      - application/json
      ParameterSetName:
      - --management-group-id --location --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/management_group_level_template","name":"management_group_level_template","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"fe833cb1-0497-41e5-a9d3-28b5219dc191","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2457'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\"\
      : {\"value\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590\"}, \"targetMG\": {\"value\"\
      : \"azure-cli-management000002\"}, \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000003\"\
      }, \"storageAccountName\": {\"value\": \"armbuilddemo000005\"}}, \"mode\": \"\
      Incremental\", template:{\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#\"\
      ,\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {\r\n    \"targetMG\"\
      : {\r\n      \"type\": \"string\"\r\n    },\r\n    \"nestedsubId\": {\r\n  \
      \    \"type\": \"string\"\r\n    },\r\n    \"nestedRG\": {\r\n      \"type\"\
      : \"string\"\r\n    },\r\n    \"storageAccountName\": {\r\n      \"type\": \"\
      string\"\r\n    }\r\n  },\r\n  \"variables\": {\r\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',\
      \ parameters('targetMG'))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n    \
      \  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n      \"name\"\
      : \"policy2\",\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"properties\"\
      : {\r\n        \"policyType\": \"Custom\",\r\n        \"parameters\": {\r\n\r\
      \n        },\r\n        \"policyRule\": {\r\n          \"if\": {\r\n       \
      \     \"field\": \"location\",\r\n            \"equals\": \"northeurope\"\r\n\
      \          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\
      \n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\":\
      \ \"Microsoft.Authorization/policyAssignments\",\r\n      \"name\": \"location-lock\"\
      ,\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"dependsOn\": [\r\n   \
      \     \"policy2\"\r\n      ],\r\n      \"properties\": {\r\n        \"scope\"\
      : \"[variables('mgScope')]\",\r\n        \"policyDefinitionId\": \"[concat(variables('mgScope'),\
      \ '/providers/', 'Microsoft.Authorization/policyDefinitions/', 'policy2')]\"\
      \r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n      \"name\": \"sdktest-subnested\",\r\n      \"apiVersion\": \"2018-05-01\"\
      ,\r\n      \"location\": \"West US\",\r\n      \"subscriptionId\": \"[parameters('nestedSubId')]\"\
      ,\r\n      \"properties\": {\r\n        \"template\": {\r\n          \"$schema\"\
      : \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\"\
      : {\r\n\r\n          },\r\n          \"variables\": {\r\n\r\n          },\r\n\
      \          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\"\
      ,\r\n              \"name\": \"[parameters('nestedRG')]\",\r\n             \
      \ \"apiVersion\": \"2018-05-01\",\r\n              \"location\": \"East US 2\
      \ EUAP\",\r\n              \"properties\": {\r\n\r\n              }\r\n    \
      \        },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\"\
      : \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedRG')]\"\
      ,\r\n              \"dependsOn\": [ \"[parameters('nestedRG')]\" ],\r\n    \
      \          \"properties\": {\r\n                \"template\": {\r\n        \
      \          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                \
      \  \"parameters\": {\r\n\r\n                  },\r\n                  \"variables\"\
      : {\r\n\r\n                  },\r\n                  \"resources\": [\r\n  \
      \                  {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\"\
      ,\r\n                      \"name\": \"[parameters('storageAccountName')]\"\
      ,\r\n                      \"apiVersion\": \"2015-06-15\",\r\n             \
      \         \"location\": \"East US\",\r\n                      \"properties\"\
      : {\r\n                        \"accountType\": \"Standard_LRS\",\r\n      \
      \                  \"supportsHttpsTrafficOnly\": true\r\n                  \
      \    }\r\n                    }\r\n                  ]\r\n                },\r\
      \n                \"mode\": \"Incremental\"\r\n              }\r\n         \
      \   }\r\n          ]\r\n        },\r\n        \"mode\": \"Incremental\"\r\n\
      \      }\r\n    }\r\n  ] // comment\r\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3808'
      Content-Type:
      - application/json
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"373797c5-ba29-42bf-b91e-b6cfcb490e55","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2481'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\"\
      : {\"value\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590\"}, \"targetMG\": {\"value\"\
      : \"azure-cli-management000002\"}, \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000003\"\
      }, \"storageAccountName\": {\"value\": \"armbuilddemo000005\"}}, \"mode\": \"\
      Incremental\", template:{\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#\"\
      ,\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {\r\n    \"targetMG\"\
      : {\r\n      \"type\": \"string\"\r\n    },\r\n    \"nestedsubId\": {\r\n  \
      \    \"type\": \"string\"\r\n    },\r\n    \"nestedRG\": {\r\n      \"type\"\
      : \"string\"\r\n    },\r\n    \"storageAccountName\": {\r\n      \"type\": \"\
      string\"\r\n    }\r\n  },\r\n  \"variables\": {\r\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',\
      \ parameters('targetMG'))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n    \
      \  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n      \"name\"\
      : \"policy2\",\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"properties\"\
      : {\r\n        \"policyType\": \"Custom\",\r\n        \"parameters\": {\r\n\r\
      \n        },\r\n        \"policyRule\": {\r\n          \"if\": {\r\n       \
      \     \"field\": \"location\",\r\n            \"equals\": \"northeurope\"\r\n\
      \          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\
      \n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\":\
      \ \"Microsoft.Authorization/policyAssignments\",\r\n      \"name\": \"location-lock\"\
      ,\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"dependsOn\": [\r\n   \
      \     \"policy2\"\r\n      ],\r\n      \"properties\": {\r\n        \"scope\"\
      : \"[variables('mgScope')]\",\r\n        \"policyDefinitionId\": \"[concat(variables('mgScope'),\
      \ '/providers/', 'Microsoft.Authorization/policyDefinitions/', 'policy2')]\"\
      \r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n      \"name\": \"sdktest-subnested\",\r\n      \"apiVersion\": \"2018-05-01\"\
      ,\r\n      \"location\": \"West US\",\r\n      \"subscriptionId\": \"[parameters('nestedSubId')]\"\
      ,\r\n      \"properties\": {\r\n        \"template\": {\r\n          \"$schema\"\
      : \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\"\
      : {\r\n\r\n          },\r\n          \"variables\": {\r\n\r\n          },\r\n\
      \          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\"\
      ,\r\n              \"name\": \"[parameters('nestedRG')]\",\r\n             \
      \ \"apiVersion\": \"2018-05-01\",\r\n              \"location\": \"East US 2\
      \ EUAP\",\r\n              \"properties\": {\r\n\r\n              }\r\n    \
      \        },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\"\
      : \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedRG')]\"\
      ,\r\n              \"dependsOn\": [ \"[parameters('nestedRG')]\" ],\r\n    \
      \          \"properties\": {\r\n                \"template\": {\r\n        \
      \          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                \
      \  \"parameters\": {\r\n\r\n                  },\r\n                  \"variables\"\
      : {\r\n\r\n                  },\r\n                  \"resources\": [\r\n  \
      \                  {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\"\
      ,\r\n                      \"name\": \"[parameters('storageAccountName')]\"\
      ,\r\n                      \"apiVersion\": \"2015-06-15\",\r\n             \
      \         \"location\": \"East US\",\r\n                      \"properties\"\
      : {\r\n                        \"accountType\": \"Standard_LRS\",\r\n      \
      \                  \"supportsHttpsTrafficOnly\": true\r\n                  \
      \    }\r\n                    }\r\n                  ]\r\n                },\r\
      \n                \"mode\": \"Incremental\"\r\n              }\r\n         \
      \   }\r\n          ]\r\n        },\r\n        \"mode\": \"Incremental\"\r\n\
      \      }\r\n    }\r\n  ] // comment\r\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3808'
      Content-Type:
      - application/json
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-03-14T09:07:42.8734811Z","duration":"PT0.005991S","correlationId":"16dfb41e-b3a9-46f6-b6fe-26a0b927ff88","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operationStatuses/08585228220279926815?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1607'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:07:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585228220279926815?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:08:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585228220279926815?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:08:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08585228220279926815?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:03.1315293Z","duration":"PT1M20.2640392S","correlationId":"16dfb41e-b3a9-46f6-b6fe-26a0b927ff88","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}'
    headers:
      cache-control:
      - no-cache
      connection:
      - close
      content-length:
      - '2213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/?api-version=2022-09-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:03.1315293Z","duration":"PT1M20.2640392S","correlationId":"16dfb41e-b3a9-46f6-b6fe-26a0b927ff88","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2225'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id --filter
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/?$filter=provisioningState%20eq%20%27Succeeded%27&api-version=2022-09-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:03.1315293Z","duration":"PT1M20.2640392S","correlationId":"16dfb41e-b3a9-46f6-b6fe-26a0b927ff88","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2225'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001","name":"azure-cli-management-group-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:03.1315293Z","duration":"PT1M20.2640392S","correlationId":"16dfb41e-b3a9-46f6-b6fe-26a0b927ff88","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg export
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/exportTemplate?api-version=2022-09-01
  response:
    body:
      string: '{"template":{"$schema":"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"targetMG":{"type":"String"},"nestedsubId":{"type":"String"},"nestedRG":{"type":"String"},"storageAccountName":{"type":"String"}},"variables":{"mgScope":"[concat(''/providers/Microsoft.Management/managementGroups/'',
        parameters(''targetMG''))]"},"resources":[{"type":"Microsoft.Authorization/policyDefinitions","apiVersion":"2016-12-01","name":"policy2","properties":{"policyType":"Custom","parameters":{},"policyRule":{"if":{"field":"location","equals":"northeurope"},"then":{"effect":"deny"}}}},{"type":"Microsoft.Authorization/policyAssignments","apiVersion":"2016-12-01","name":"location-lock","dependsOn":["policy2"],"properties":{"scope":"[variables(''mgScope'')]","policyDefinitionId":"[concat(variables(''mgScope''),
        ''/providers/'', ''Microsoft.Authorization/policyDefinitions/'', ''policy2'')]"}},{"type":"Microsoft.Resources/deployments","apiVersion":"2018-05-01","name":"sdktest-subnested","location":"West
        US","properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Resources/resourceGroups","name":"[parameters(''nestedRG'')]","apiVersion":"2018-05-01","location":"East
        US 2 EUAP","properties":{}},{"type":"Microsoft.Resources/deployments","name":"rg-nested","apiVersion":"2017-05-10","resourceGroup":"[parameters(''nestedRG'')]","dependsOn":["[parameters(''nestedRG'')]"],"properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Storage/storageAccounts","name":"[parameters(''storageAccountName'')]","apiVersion":"2015-06-15","location":"East
        US","properties":{"accountType":"Standard_LRS","supportsHttpsTrafficOnly":true}}]},"mode":"Incremental"}}]},"mode":"Incremental"},"subscriptionId":"[parameters(''nestedSubId'')]"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2080'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation mg list
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operations?api-version=2022-09-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/410446C471B0E0AB","operationId":"410446C471B0E0AB","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:07:52.937934Z","duration":"PT7.6850722S","trackingId":"953aeaf8-3f6e-4e03-a077-a82c97a48979","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/109CD47881A549C7","operationId":"109CD47881A549C7","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:07:51.9774743Z","duration":"PT6.7246125S","trackingId":"8d4b71ca-fca6-4867-a7bf-2f4de01462df","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/AB0501E36D519C96","operationId":"AB0501E36D519C96","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:02.9460731Z","duration":"PT1M17.6932113S","trackingId":"56c45499-8642-4da6-a3f4-4bc0fa1aa02a","statusCode":"OK","targetResource":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested","resourceType":"Microsoft.Resources/deployments","resourceName":"sdktest-subnested"}}},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/08585228220279926815","operationId":"08585228220279926815","properties":{"provisioningOperation":"EvaluateDeploymentOutput","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:03.1128351Z","duration":"PT0.1209091S","trackingId":"dd1f4b9d-0953-47bd-882d-c2c478f95e31","statusCode":"OK"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2579'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n --operation-ids
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operations/410446C471B0E0AB?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/410446C471B0E0AB","operationId":"410446C471B0E0AB","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:07:52.937934Z","duration":"PT7.6850722S","trackingId":"953aeaf8-3f6e-4e03-a077-a82c97a48979","serviceRequestId":"96f1eab2-02fc-419c-9681-f1f3558755a5","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '770'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n --operation-ids
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operations/109CD47881A549C7?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/109CD47881A549C7","operationId":"109CD47881A549C7","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:07:51.9774743Z","duration":"PT6.7246125S","trackingId":"8d4b71ca-fca6-4867-a7bf-2f4de01462df","serviceRequestId":"595fabc9-adb7-4829-8a64-a92444d27432","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '759'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n --operation-ids
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/operations/AB0501E36D519C96?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-management-group-deployment000001/operations/AB0501E36D519C96","operationId":"AB0501E36D519C96","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2023-03-14T09:09:02.9460731Z","duration":"PT1M17.6932113S","trackingId":"56c45499-8642-4da6-a3f4-4bc0fa1aa02a","serviceRequestId":"7c87acc7-5d7e-47e5-a3f3-7e9f0009301e","statusCode":"OK","targetResource":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested","resourceType":"Microsoft.Resources/deployments","resourceName":"sdktest-subnested"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '733'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: DELETE
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 14 Mar 2023 09:09:29 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Resources/operationResults/eyJqb2JJZCI6IkRlcGxveW1lbnREZWxldGlvbkpvYi1NR05TLUFaVVJFOjJEQ0xJOjJETUFOQUdFTUVOVFNFN1RYWUdTMzQtQVpVUkU6MkRDTEk6MkRNQU5BR0VNRU5UOjJER1JPVVA6MkRERVBMT1lNRU5UTkl8MkE2MDQ3NjRDNkQ1QzA5OC0iLCJqb2JMb2NhdGlvbiI6Indlc3R1cyJ9?api-version=2022-09-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --management-group-id -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/operationResults/eyJqb2JJZCI6IkRlcGxveW1lbnREZWxldGlvbkpvYi1NR05TLUFaVVJFOjJEQ0xJOjJETUFOQUdFTUVOVFNFN1RYWUdTMzQtQVpVUkU6MkRDTEk6MkRNQU5BR0VNRU5UOjJER1JPVVA6MkRERVBMT1lNRU5UTkl8MkE2MDQ3NjRDNkQ1QzA5OC0iLCJqb2JMb2NhdGlvbiI6Indlc3R1cyJ9?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Tue, 14 Mar 2023 09:09:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\"\
      : {\"value\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590\"}, \"targetMG\": {\"value\"\
      : \"azure-cli-management000002\"}, \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000003\"\
      }, \"storageAccountName\": {\"value\": \"armbuilddemo000005\"}}, \"mode\": \"\
      Incremental\", template:{\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#\"\
      ,\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {\r\n    \"targetMG\"\
      : {\r\n      \"type\": \"string\"\r\n    },\r\n    \"nestedsubId\": {\r\n  \
      \    \"type\": \"string\"\r\n    },\r\n    \"nestedRG\": {\r\n      \"type\"\
      : \"string\"\r\n    },\r\n    \"storageAccountName\": {\r\n      \"type\": \"\
      string\"\r\n    }\r\n  },\r\n  \"variables\": {\r\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',\
      \ parameters('targetMG'))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n    \
      \  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n      \"name\"\
      : \"policy2\",\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"properties\"\
      : {\r\n        \"policyType\": \"Custom\",\r\n        \"parameters\": {\r\n\r\
      \n        },\r\n        \"policyRule\": {\r\n          \"if\": {\r\n       \
      \     \"field\": \"location\",\r\n            \"equals\": \"northeurope\"\r\n\
      \          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\
      \n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\":\
      \ \"Microsoft.Authorization/policyAssignments\",\r\n      \"name\": \"location-lock\"\
      ,\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"dependsOn\": [\r\n   \
      \     \"policy2\"\r\n      ],\r\n      \"properties\": {\r\n        \"scope\"\
      : \"[variables('mgScope')]\",\r\n        \"policyDefinitionId\": \"[concat(variables('mgScope'),\
      \ '/providers/', 'Microsoft.Authorization/policyDefinitions/', 'policy2')]\"\
      \r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n      \"name\": \"sdktest-subnested\",\r\n      \"apiVersion\": \"2018-05-01\"\
      ,\r\n      \"location\": \"West US\",\r\n      \"subscriptionId\": \"[parameters('nestedSubId')]\"\
      ,\r\n      \"properties\": {\r\n        \"template\": {\r\n          \"$schema\"\
      : \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\"\
      : {\r\n\r\n          },\r\n          \"variables\": {\r\n\r\n          },\r\n\
      \          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\"\
      ,\r\n              \"name\": \"[parameters('nestedRG')]\",\r\n             \
      \ \"apiVersion\": \"2018-05-01\",\r\n              \"location\": \"East US 2\
      \ EUAP\",\r\n              \"properties\": {\r\n\r\n              }\r\n    \
      \        },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\"\
      : \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedRG')]\"\
      ,\r\n              \"dependsOn\": [ \"[parameters('nestedRG')]\" ],\r\n    \
      \          \"properties\": {\r\n                \"template\": {\r\n        \
      \          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                \
      \  \"parameters\": {\r\n\r\n                  },\r\n                  \"variables\"\
      : {\r\n\r\n                  },\r\n                  \"resources\": [\r\n  \
      \                  {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\"\
      ,\r\n                      \"name\": \"[parameters('storageAccountName')]\"\
      ,\r\n                      \"apiVersion\": \"2015-06-15\",\r\n             \
      \         \"location\": \"East US\",\r\n                      \"properties\"\
      : {\r\n                        \"accountType\": \"Standard_LRS\",\r\n      \
      \                  \"supportsHttpsTrafficOnly\": true\r\n                  \
      \    }\r\n                    }\r\n                  ]\r\n                },\r\
      \n                \"mode\": \"Incremental\"\r\n              }\r\n         \
      \   }\r\n          ]\r\n        },\r\n        \"mode\": \"Incremental\"\r\n\
      \      }\r\n    }\r\n  ] // comment\r\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3808'
      Content-Type:
      - application/json
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters --no-wait
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000004","name":"azure-cli-resource-group-deployment000004","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"0001-01-01T00:00:00Z","duration":"PT0S","correlationId":"8ee9d23a-cb9e-4999-89ed-99f71bd6299d","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}],"validatedResources":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sdktest-subnested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Resources/deployments/rg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/azure-cli-sub-resource-group000003/providers/Microsoft.Storage/storageAccounts/armbuilddemo000005"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2477'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: "{\"location\": \"WestUS\", \"properties\": {\"parameters\": {\"nestedsubId\"\
      : {\"value\": \"0b1f6471-1bf0-4dda-aec3-cb9272f09590\"}, \"targetMG\": {\"value\"\
      : \"azure-cli-management000002\"}, \"nestedRG\": {\"value\": \"azure-cli-sub-resource-group000003\"\
      }, \"storageAccountName\": {\"value\": \"armbuilddemo000005\"}}, \"mode\": \"\
      Incremental\", template:{\r\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-08-01/managementGroupDeploymentTemplate.json#\"\
      ,\r\n  \"contentVersion\": \"1.0.0.0\",\r\n  \"parameters\": {\r\n    \"targetMG\"\
      : {\r\n      \"type\": \"string\"\r\n    },\r\n    \"nestedsubId\": {\r\n  \
      \    \"type\": \"string\"\r\n    },\r\n    \"nestedRG\": {\r\n      \"type\"\
      : \"string\"\r\n    },\r\n    \"storageAccountName\": {\r\n      \"type\": \"\
      string\"\r\n    }\r\n  },\r\n  \"variables\": {\r\n    \"mgScope\": \"[concat('/providers/Microsoft.Management/managementGroups/',\
      \ parameters('targetMG'))]\"\r\n  },\r\n  \"resources\": [\r\n    {\r\n    \
      \  \"type\": \"Microsoft.Authorization/policyDefinitions\",\r\n      \"name\"\
      : \"policy2\",\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"properties\"\
      : {\r\n        \"policyType\": \"Custom\",\r\n        \"parameters\": {\r\n\r\
      \n        },\r\n        \"policyRule\": {\r\n          \"if\": {\r\n       \
      \     \"field\": \"location\",\r\n            \"equals\": \"northeurope\"\r\n\
      \          },\r\n          \"then\": {\r\n            \"effect\": \"deny\"\r\
      \n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"type\":\
      \ \"Microsoft.Authorization/policyAssignments\",\r\n      \"name\": \"location-lock\"\
      ,\r\n      \"apiVersion\": \"2016-12-01\",\r\n      \"dependsOn\": [\r\n   \
      \     \"policy2\"\r\n      ],\r\n      \"properties\": {\r\n        \"scope\"\
      : \"[variables('mgScope')]\",\r\n        \"policyDefinitionId\": \"[concat(variables('mgScope'),\
      \ '/providers/', 'Microsoft.Authorization/policyDefinitions/', 'policy2')]\"\
      \r\n      }\r\n    },\r\n    {\r\n      \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n      \"name\": \"sdktest-subnested\",\r\n      \"apiVersion\": \"2018-05-01\"\
      ,\r\n      \"location\": \"West US\",\r\n      \"subscriptionId\": \"[parameters('nestedSubId')]\"\
      ,\r\n      \"properties\": {\r\n        \"template\": {\r\n          \"$schema\"\
      : \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n          \"contentVersion\": \"1.0.0.0\",\r\n          \"parameters\"\
      : {\r\n\r\n          },\r\n          \"variables\": {\r\n\r\n          },\r\n\
      \          \"resources\": [\r\n            {\r\n              \"type\": \"Microsoft.Resources/resourceGroups\"\
      ,\r\n              \"name\": \"[parameters('nestedRG')]\",\r\n             \
      \ \"apiVersion\": \"2018-05-01\",\r\n              \"location\": \"East US 2\
      \ EUAP\",\r\n              \"properties\": {\r\n\r\n              }\r\n    \
      \        },\r\n            {\r\n              \"type\": \"Microsoft.Resources/deployments\"\
      ,\r\n              \"name\": \"rg-nested\",\r\n              \"apiVersion\"\
      : \"2017-05-10\",\r\n              \"resourceGroup\": \"[parameters('nestedRG')]\"\
      ,\r\n              \"dependsOn\": [ \"[parameters('nestedRG')]\" ],\r\n    \
      \          \"properties\": {\r\n                \"template\": {\r\n        \
      \          \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\"\
      ,\r\n                  \"contentVersion\": \"1.0.0.0\",\r\n                \
      \  \"parameters\": {\r\n\r\n                  },\r\n                  \"variables\"\
      : {\r\n\r\n                  },\r\n                  \"resources\": [\r\n  \
      \                  {\r\n                      \"type\": \"Microsoft.Storage/storageAccounts\"\
      ,\r\n                      \"name\": \"[parameters('storageAccountName')]\"\
      ,\r\n                      \"apiVersion\": \"2015-06-15\",\r\n             \
      \         \"location\": \"East US\",\r\n                      \"properties\"\
      : {\r\n                        \"accountType\": \"Standard_LRS\",\r\n      \
      \                  \"supportsHttpsTrafficOnly\": true\r\n                  \
      \    }\r\n                    }\r\n                  ]\r\n                },\r\
      \n                \"mode\": \"Incremental\"\r\n              }\r\n         \
      \   }\r\n          ]\r\n        },\r\n        \"mode\": \"Incremental\"\r\n\
      \      }\r\n    }\r\n  ] // comment\r\n}}}"
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg create
      Connection:
      - keep-alive
      Content-Length:
      - '3808'
      Content-Type:
      - application/json
      ParameterSetName:
      - --management-group-id --location -n --template-file --parameters --parameters
        --parameters --parameters --no-wait
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000004","name":"azure-cli-resource-group-deployment000004","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2023-03-14T09:09:59.1090855Z","duration":"PT0.0007046S","correlationId":"d036fd41-61dd-4297-b8b4-bf5042940227","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000004/operationStatuses/08585228218918365448?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1604'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:09:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg cancel
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --management-group-id
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment/cancel?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Tue, 14 Mar 2023 09:10:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg wait
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --management-group-id --custom
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000004","name":"azure-cli-resource-group-deployment000004","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Canceled","timestamp":"2023-03-14T09:10:01.034245Z","duration":"PT1.9258641S","correlationId":"d036fd41-61dd-4297-b8b4-bf5042940227","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1603'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment mg show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --management-group-id
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Resources/deployments/azure-cli-resource-group-deployment000004","name":"azure-cli-resource-group-deployment000004","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"13634145777404228626","parameters":{"targetMG":{"type":"String","value":"azure-cli-management000002"},"nestedsubId":{"type":"String","value":"0b1f6471-1bf0-4dda-aec3-cb9272f09590"},"nestedRG":{"type":"String","value":"azure-cli-sub-resource-group000003"},"storageAccountName":{"type":"String","value":"armbuilddemo000005"}},"mode":"Incremental","provisioningState":"Canceled","timestamp":"2023-03-14T09:10:01.034245Z","duration":"PT1.9258641S","correlationId":"d036fd41-61dd-4297-b8b4-bf5042940227","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"policyAssignments","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyDefinitions/policy2","resourceType":"Microsoft.Authorization/policyDefinitions","resourceName":"policy2"}],"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002/providers/Microsoft.Authorization/policyAssignments/location-lock","resourceType":"Microsoft.Authorization/policyAssignments","resourceName":"location-lock"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1603'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2624'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"managementGroups/settings","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2021-04-01","2020-10-01","2020-05-01","2020-02-01","2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2624'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: DELETE
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/azure-cli-management000002","type":"Microsoft.Management/managementGroups","name":"azure-cli-management000002","status":"NotStarted"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
      cache-control:
      - no-cache
      content-length:
      - '189'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:22 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/azure-cli-management000002?api-version=2021-04-01
      pragma:
      - no-cache
      request-id:
      - 9ef1296a-adf5-4558-99a6-8d6e12661eb6
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-managementgroups-requests:
      - '59'
      x-ms-ratelimit-remaining-tenant-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002","name":"azure-cli-management000002","status":"NotStarted"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
      cache-control:
      - no-cache
      content-length:
      - '188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:33 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/azure-cli-management000002?api-version=2021-04-01
      pragma:
      - no-cache
      request-id:
      - e4a06364-0061-4e74-9d1f-2b1e1ebfd21b
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002","name":"azure-cli-management000002","status":"Running"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
      cache-control:
      - no-cache
      content-length:
      - '185'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:44 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/azure-cli-management000002?api-version=2021-04-01
      pragma:
      - no-cache
      request-id:
      - 54afb81c-89f7-482f-a43a-504773059fec
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.46.0 azsdk-python-mgmt-managementgroups/1.0.0 Python/3.10.9 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/operationResults/delete/asyncOperation/status/managementGroups/azure-cli-management000002","name":"azure-cli-management000002","status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '187'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 14 Mar 2023 09:10:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - df4a6893-8414-4e4e-ac64-f6a81195a9c6
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ba-restapi:
      - 0.0.0.0
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
