parameters:
  - name: CLIRepoPath
    type: string
    default: '.'
  - name: CLIExtensionRepoPath
    type: string
    default: 'None'

steps:
  - bash: |
      set -ev

      python -m venv env
      chmod +x env/bin/activate
      . env/bin/activate

      pip install -q azdev
      azdev --version

      if [[ ${{ parameters.CLIExtensionRepoPath }} != 'None' ]]; then
        azdev setup -c ${{ parameters.CLIRepoPath }} -r ${{ parameters.CLIExtensionRepoPath }}
      else:
        azdev setup -c ${{ parameters.CLIRepoPath }}
      fi
    displayName: 'Azdev Setup'
