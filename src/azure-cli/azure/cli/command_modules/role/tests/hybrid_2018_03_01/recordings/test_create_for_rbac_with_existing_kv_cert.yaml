interactions:
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"928a6669fc5d4f31b5dbc7b52a29fdad"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:05 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=928a6669fc5d4f31b5dbc7b52a29fdad
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"928a6669fc5d4f31b5dbc7b52a29fdad"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"928a6669fc5d4f31b5dbc7b52a29fdad"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"928a6669fc5d4f31b5dbc7b52a29fdad"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"928a6669fc5d4f31b5dbc7b52a29fdad"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:41 GMT
      duration:
      - '2278298'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Fx8PzcuHCuAd6KwdYaR8Jbh5iYvsxqGaB99OzlyvT2w=
      ocp-aad-session-key:
      - U7V3f8epHJvQAEfkrAtioq8mfUWd924ZxUhcq6AFyI2bmarm6gKasWzo88d_vcEIC3dmUeTb725f-yXGDJH8xrIwM-dk9I7YwimxOohc_yJZ-mlQ-khadvjFDZBtgPWdZ79pYq5jRrlYPHlsJObUNRClodxZefOVrLgtbu2JoFg.q6_mqRts1qmKDjNqYA3KkfNSaL4qtiLMFpYAgiJwW1I
      pragma:
      - no-cache
      request-id:
      - e5fe5b59-0690-4a41-99b8-dbad5780a84d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/2f3f32cbe25246d19daaef0986b6fd27","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/2f3f32cbe25246d19daaef0986b6fd27","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/2f3f32cbe25246d19daaef0986b6fd27","x5t":"JRiRbRjH_XRWWVviMxJhGF27HS8","cer":"MIIDQjCCAiqgAwIBAgIQfLAWssZhTYGjtujZmNQHHjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjgzNloXDTIzMDYwMjA3MzgzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAvQw2wnN94eQEVIOio9YAsk8AJuuOYSsLW3+fpg9gBsqs5oH36X1yh5Sbd1DD9uGnxemKIbwOrhYeQ089RqVNUKdSQ2tHY0Oi9985P091BG2T4E3AYplt7VYicSlp6zk2wyFUEJWKwkyih0cLC1enygyG2UzMmwT3c+7yFmJrJpSIzcKMOvA4j2iIyq+Un9V3G6k6mU6hBUhGaMA6SdMOqAOIIywMmKKnUSh8fgudx8Z7DWRktFAo7C9V4j9H5v5UJ9q97DPAb+ISBNCNlBnJD3o9Nmno39cxEZI721FrLHywEQCI3JpOej8b7PGNLGTRqQo4pFS2OOQdH/bvve0law==","attributes":{"enabled":true,"nbf":1622618916,"exp":1685691516,"created":1622619516,"updated":1622619516,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1622619485,"updated":1622619485}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:42 GMT
      duration:
      - '3312919'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - VpOw18yUKo6/vgTQHk/4rGZ24ORALTjBMQUZyg5rDAc=
      ocp-aad-session-key:
      - aEOKKlbycSSq7wJCq3aitrdVYCEo084i6pvK_wFNG5S_Wpa29Q-7FMhKtbGYkhu4ri9EOC610pVsSup1TsCA3iK1i3OsPPY093BqFkxjI1JMkoN5KURc8ot8pPE8fV_7.tlDgn-z_5boQKGeR4MA6WBKJ6AzQ1ETTJZnGzBG4p3s
      pragma:
      - no-cache
      request-id:
      - 5945a043-8fdc-431b-98df-7dcf7652bec3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "keyCredentials": [{"startDate": "2021-06-02T07:38:41.831258Z",
      "endDate": "2022-06-02T07:38:41.831258Z", "value": "MIIDQjCCAiqgAwIBAgIQfLAWssZhTYGjtujZmNQHHjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjgzNloXDTIzMDYwMjA3MzgzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAvQw2wnN94eQEVIOio9YAsk8AJuuOYSsLW3+fpg9gBsqs5oH36X1yh5Sbd1DD9uGnxemKIbwOrhYeQ089RqVNUKdSQ2tHY0Oi9985P091BG2T4E3AYplt7VYicSlp6zk2wyFUEJWKwkyih0cLC1enygyG2UzMmwT3c+7yFmJrJpSIzcKMOvA4j2iIyq+Un9V3G6k6mU6hBUhGaMA6SdMOqAOIIywMmKKnUSh8fgudx8Z7DWRktFAo7C9V4j9H5v5UJ9q97DPAb+ISBNCNlBnJD3o9Nmno39cxEZI721FrLHywEQCI3JpOej8b7PGNLGTRqQo4pFS2OOQdH/bvve0law==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert000001",
      "identifierUris": []}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1489'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "6d58d3f9-609e-4f30-b308-3117be0088fc", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "f4f3212e-bde6-4531-a0d6-352ea5626c27",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert000001", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": null, "identifierUris": [],
        "informationalUrls": {"termsOfService": null, "support": null, "privacy":
        null, "marketing": null}, "isDeviceOnlyAuthSupported": null, "keyCredentials":
        [{"customKeyIdentifier": "2518916D18C7FD7456595BE2331261185DBB1D2F", "endDate":
        "2022-06-02T07:38:41.831258Z", "keyId": "88888888-0000-0000-0000-000000000001",
        "startDate": "2021-06-02T07:38:41.831258Z", "type": "AsymmetricX509Cert",
        "usage": "Verify", "value": null}], "knownClientApplications": [], "logoutUrl":
        null, "logo@odata.mediaEditLink": "directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert000001 on
        behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "id": "77b25461-49b7-41e2-9a92-2a0ab6c8e43e", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2606'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:43 GMT
      duration:
      - '5391086'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - p/ipKYzBfXsI/KpxXlUIYEEgy1l3MdCrsMt4Im4gD/s=
      ocp-aad-session-key:
      - ddnKWLCZ-1XPjeWGz46rEl43WUthf5v5hu-XlrMC5D4jJOWFVsA5I33nILJbFR1SortpKNG8rIHM8N_6PHPSjH16TGNjRIg8bCtlnRAMjW6CXh4WbnfRPuSXufjCm6A_uBeIw-DE9-dVqvWEtbebJJFbqU25348qTT06Nz4-Czo.VbVk2JfDJo98tbMc7rXvXfB8kUQnpTamIbN4kqt5ALY
      pragma:
      - no-cache
      request-id:
      - 7c44d8f0-b70f-4d1c-aac0-8f5e6e62773a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "f4f3212e-bde6-4531-a0d6-352ea5626c27"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"5085d6b2-3e22-4cf2-9b74-a4b538ad36b2","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"f4f3212e-bde6-4531-a0d6-352ea5626c27","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"77b25461-49b7-41e2-9a92-2a0ab6c8e43e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["f4f3212e-bde6-4531-a0d6-352ea5626c27"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1988'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:44 GMT
      duration:
      - '4018506'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/5085d6b2-3e22-4cf2-9b74-a4b538ad36b2/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - YWpKdtP1KeafyNrjBatKulLLZb6BpG/nSugneJ2JoEI=
      ocp-aad-session-key:
      - 7ETu0KM3FEugmC-rsk4I3P655xTZknhKLgAEGYWvvnWlq8t-D4TnAFBP90OBxPbEvhRK9DV4RKVLquE4dTeOdn71SqJ7ZCivHgwmlY_1G_bHOyr9y2pf8-g0FW5tU9EkNMQDYOTOlhoKnZc-K-U9SBzh_1eN37gj3Kh0l-UZiWY.519O1t_ryNUeWzWxcaYwFxJiSqRCpK9o67SaIPl1JWk
      pragma:
      - no-cache
      request-id:
      - a6df5064-c3da-44ef-b971-6c5eb0706244
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '947'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "5085d6b2-3e22-4cf2-9b74-a4b538ad36b2"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 5085d6b23e224cf29b74a4b538ad36b2
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '947'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "5085d6b2-3e22-4cf2-9b74-a4b538ad36b2"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"5085d6b2-3e22-4cf2-9b74-a4b538ad36b2","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2021-06-02T07:38:51.4828964Z","updatedOn":"2021-06-02T07:38:51.8078995Z","createdBy":null,"updatedBy":"6d97229a-391f-473a-893f-f0608b592d7b"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27%29%20or%20displayName%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"5085d6b2-3e22-4cf2-9b74-a4b538ad36b2","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"f4f3212e-bde6-4531-a0d6-352ea5626c27","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"77b25461-49b7-41e2-9a92-2a0ab6c8e43e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["f4f3212e-bde6-4531-a0d6-352ea5626c27"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1991'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:54 GMT
      duration:
      - '2504961'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - MYEuq6VC19ZDUndvD07AhUS/maJ+uZPnQqDgHVxi9Ow=
      ocp-aad-session-key:
      - Jfnh1AAGEQErynxjJjeZkXtHo_ygQEqD0t9_YntIbZoyfA3flLdgJ4SLQTXHmzYFSULe9hC8nl56hLHxRb9VfEL72d55Srv0G2hVQtbhx34o7r1MnVuyhq-_IbyE6dBNBzv_gsetQKiYc1bDQaVgfjSLuT0_n_hufECcUQAtOWs.GRfKKK7IDY9aGOy1c_XZTyRthdU98BGc5gXsfgGSWso
      pragma:
      - no-cache
      request-id:
      - e5a31665-3854-4ee3-ab18-fd340440d955
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:54 GMT
      duration:
      - '2192625'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - IoWP89eHqiwimKklTjof8a0ky519sUWptN+HypStlsY=
      ocp-aad-session-key:
      - m4If38_uFys477Z0hRxr_DKmGkm5XW3DbmsNFx-8t_GgO0DZdX2sjs_DdZ7kIz0CZWdTpxmYuo-P2hF_auAV6GXAQwlrCngqmFQ4SDX6WcVyiMNWt79d8q3ZtQbA6bH4iWK9zLKsDWv3hS4gaI6vzJDk30Gr-ZWkZt-ACvpr1r4.q2pwOTUCvtZunVQ8txdd-71GlxKth0RqEHwBU1whr6I
      pragma:
      - no-cache
      request-id:
      - 88232daf-599c-4ba3-a217-c32aeaf8b75c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"6d58d3f9-609e-4f30-b308-3117be0088fc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f4f3212e-bde6-4531-a0d6-352ea5626c27","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"2518916D18C7FD7456595BE2331261185DBB1D2F","endDate":"2022-06-02T07:38:41.831258Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2021-06-02T07:38:41.831258Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"77b25461-49b7-41e2-9a92-2a0ab6c8e43e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2523'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:55 GMT
      duration:
      - '3078974'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - USTiYn+GwSGd1RqrEt0KUEQobSKdGphoqzSfYvif5uU=
      ocp-aad-session-key:
      - 1dIU0SnASDxsqF7CSslR4FejIFIsZbtULbkK_nxmjxJ6QuQAw2Dx7GelzmvZUGc4AnLx3vOau2WSxilWo-h0tbMRRyeF7RLb0P0PUkAHx_zV8-4RrUGNxOv5sYUHgOXUX_YmvkwYmOJhOlYigerqQut7aT0VctjH0GBdDxw3tjM.Zo2ABQ5thQHYw3SYXsTDe1Uj6L5p4dr2FNp7fjFlBKw
      pragma:
      - no-cache
      request-id:
      - 4e9fbe0b-c07a-4af8-985d-ab6cc101ada5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/6d58d3f9-609e-4f30-b308-3117be0088fc?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"6d58d3f9-609e-4f30-b308-3117be0088fc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f4f3212e-bde6-4531-a0d6-352ea5626c27","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"2518916D18C7FD7456595BE2331261185DBB1D2F","endDate":"2022-06-02T07:38:41.831258Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2021-06-02T07:38:41.831258Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"77b25461-49b7-41e2-9a92-2a0ab6c8e43e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2520'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:56 GMT
      duration:
      - '2471274'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - tJsh7ZRZVoeN3txW0Hj9i4UdYNmypwx687tPyQ6Ax6U=
      ocp-aad-session-key:
      - 9cK3SRUdmTt_zYIiZZipfwfrHbkQHIp2TsxSMK537WZXIjQqnx1slBR5iPp-zp6-cwJpikfkDxoF3ACOBpIWoy3bRstELYDEXnE-uaXppxoLAWpB6jnLXsh_6sMIo_6JTyBMhWZdw0CFJJNPb8xese7FMC9LGt5oJWiTAgzMphE.g3lEii2x7sQwfTLqgfYvpS4J5XYq0eYJQTWpw4qBrZE
      pragma:
      - no-cache
      request-id:
      - 3866a507-a444-4448-8dd8-639b8d45b458
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/2f3f32cbe25246d19daaef0986b6fd27","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/2f3f32cbe25246d19daaef0986b6fd27","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/2f3f32cbe25246d19daaef0986b6fd27","x5t":"JRiRbRjH_XRWWVviMxJhGF27HS8","cer":"MIIDQjCCAiqgAwIBAgIQfLAWssZhTYGjtujZmNQHHjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjgzNloXDTIzMDYwMjA3MzgzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAvQw2wnN94eQEVIOio9YAsk8AJuuOYSsLW3+fpg9gBsqs5oH36X1yh5Sbd1DD9uGnxemKIbwOrhYeQ089RqVNUKdSQ2tHY0Oi9985P091BG2T4E3AYplt7VYicSlp6zk2wyFUEJWKwkyih0cLC1enygyG2UzMmwT3c+7yFmJrJpSIzcKMOvA4j2iIyq+Un9V3G6k6mU6hBUhGaMA6SdMOqAOIIywMmKKnUSh8fgudx8Z7DWRktFAo7C9V4j9H5v5UJ9q97DPAb+ISBNCNlBnJD3o9Nmno39cxEZI721FrLHywEQCI3JpOej8b7PGNLGTRqQo4pFS2OOQdH/bvve0law==","attributes":{"enabled":true,"nbf":1622618916,"exp":1685691516,"created":1622619516,"updated":1622619516,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1622619485,"updated":1622619485}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:38:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2021-06-02T07:38:54.648371Z", "endDate":
      "2022-06-02T07:38:54.648371Z", "value": "MIIDQjCCAiqgAwIBAgIQfLAWssZhTYGjtujZmNQHHjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjgzNloXDTIzMDYwMjA3MzgzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAvQw2wnN94eQEVIOio9YAsk8AJuuOYSsLW3+fpg9gBsqs5oH36X1yh5Sbd1DD9uGnxemKIbwOrhYeQ089RqVNUKdSQ2tHY0Oi9985P091BG2T4E3AYplt7VYicSlp6zk2wyFUEJWKwkyih0cLC1enygyG2UzMmwT3c+7yFmJrJpSIzcKMOvA4j2iIyq+Un9V3G6k6mU6hBUhGaMA6SdMOqAOIIywMmKKnUSh8fgudx8Z7DWRktFAo7C9V4j9H5v5UJ9q97DPAb+ISBNCNlBnJD3o9Nmno39cxEZI721FrLHywEQCI3JpOej8b7PGNLGTRqQo4pFS2OOQdH/bvve0law==",
      "keyId": "ebe5f5ce-f23f-4d9e-a002-940bde4300c4", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1339'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/6d58d3f9-609e-4f30-b308-3117be0088fc?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Wed, 02 Jun 2021 07:38:58 GMT
      duration:
      - '4704971'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - GiVz8KzZwiXDnBWbdzhFv3BSVeS7l5YKIeeK88Nb/UY=
      ocp-aad-session-key:
      - rm844XEpy5YVYEHJVqpK9OQzgRtaLlFJMIU9nME15G0HLsRO9qCLU5jGT9nbW4-SR-7NqmQxcOI3ipRSLFixGreasmoImOV0nudJlIJQt2c3BOB_gpWaSWsueLjod4KGj8kBqntftoMEaWZlcZNxNhP5c-jx7qiB578AvTrOlrA.WjuhWVn1TWrvqDOErregodFJwkLwergIk95Xqldui5Y
      pragma:
      - no-cache
      request-id:
      - dec11e03-682b-4aff-af84-2701418ef18b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:58 GMT
      duration:
      - '2320088'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - tTD3m4vsK5qETrUall3OVrq1LBZW9uKA0ByooP4koK8=
      ocp-aad-session-key:
      - Km0Qb-TsnfHQTSKtKki4LB3d5VB-QO1RoJ_t1WVG13ZJn78KSxeBVooeilGRuIZQBKnihnIo5u6L-J0aaoRLlQgPAN0OW0lWfBzCf6OW6660Kk9GaTxzG5VtIcr94UQp-7V2lOR9G9JM95SktLXsyBAC6I-F2aqekkrSJUK8ESE.KQJhR5FG_XjDxSJjR9X5JIQajdqhhZ7OyKcvUXYjGlc
      pragma:
      - no-cache
      request-id:
      - b3d2199c-f7d6-46d2-8ead-616c84bb6991
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27f4f3212e-bde6-4531-a0d6-352ea5626c27%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"6d58d3f9-609e-4f30-b308-3117be0088fc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"f4f3212e-bde6-4531-a0d6-352ea5626c27","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"2518916D18C7FD7456595BE2331261185DBB1D2F","endDate":"2022-06-02T07:38:54.648371Z","keyId":"ebe5f5ce-f23f-4d9e-a002-940bde4300c4","startDate":"2021-06-02T07:38:54.648371Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/6d58d3f9-609e-4f30-b308-3117be0088fc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"77b25461-49b7-41e2-9a92-2a0ab6c8e43e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2523'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:38:59 GMT
      duration:
      - '2256769'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - akYo4S2rhOPXaWdN+QOFfl8ltYQC5OWVWFVi5fPlSNs=
      ocp-aad-session-key:
      - bg6E8PwRr-2q60XHToYdPf7dXbUm0BNNOv4PNwWFfAlEliqFdKU3QM5oOmlVw1uVOsM2E-FwrD-PsaHRIUEOA0NiBckgH_W5oT90_5KnUKFR1rf0gp_ej95zp7mIZeb_SdojVppeuqMhSh3U4DVq3mDDq3rWpfpQPCCkinKWhNc.BmfFrsqIeGUCmTw5B8uMiokhxzW0-B-V8-3wOUvrhiE
      pragma:
      - no-cache
      request-id:
      - 1e2c17dd-b55a-4b13-89dc-04815c4c03d3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/6d58d3f9-609e-4f30-b308-3117be0088fc?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Wed, 02 Jun 2021 07:39:00 GMT
      duration:
      - '4415807'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - HCD/Q+Mk5V7Zu87AZk8mq2N3rW0RTfxHRHl1meACbKs=
      ocp-aad-session-key:
      - 7H6PkhTqxuqxaC7SbY4iJXEW7ymYVixlRVkfzPllJASlNd1z8NLhuLsXnan3AYtSI1RO-kR9ejdikNHBvtn3c5GN14do56Mu-sZFAtrLs8cM529RycEmtJKhfNEqcK0FaAIyGGQcaWk1fbbzBv4BMQRK2mBKfcG0kR-i8g0W2Wo.9rB1biPiDvV0t2SSKMB_lF7VjFjiIDDVFpvwmIK1J6o
      pragma:
      - no-cache
      request-id:
      - 3e942cbb-80db-47a9-a061-bcd239dccad1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"faff7534e75e48c28dee19b9bdda9695"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:01 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=faff7534e75e48c28dee19b9bdda9695
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"faff7534e75e48c28dee19b9bdda9695"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"faff7534e75e48c28dee19b9bdda9695"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"faff7534e75e48c28dee19b9bdda9695"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAy8NBOIaPpzQy/4ycgrO8WIEhGlv+55x1LfOwXv/A7OyA1wdpWwJ/BYMxKsHuzj8kAqD4ZmnY+mIKziTkOvmzLZa32pLGS2hrJmetOu7oSge+Ql9n9xdU1TuzZJRcpu+xDBl1dFT5c6UqIyDGWvnuVXZgXz7XPZf1Rp/ZVhYrUn2F0kXX+vMODoDwBbR9EIRuB4jnTFicd3oy1xXyVhywpV+jyor+YXoPLuAdJ2IxACRthnUTOFKcBYbJbWfkxYxuQ3rI6ochdIMk7xEx0ILagaKZo+pSaOaFxB3wRZdCW7AkN4Iz5ej3y9Sq9x8xzRAVWZ4S62Jw1jgRvaGISHqGi","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"faff7534e75e48c28dee19b9bdda9695"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:38 GMT
      duration:
      - '2294318'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - YTfzkFZQQajxIzIJHdayU/HUhmB7Z6UfOwX5UiUL8k8=
      ocp-aad-session-key:
      - _tqxBPTscpf5VtXoWPNNLmGQOQuAAFCLSt3f4KVLDFqlybfJ7963iQw-ydVAC2HgAGbhWR_ZFEHgRS0LDIhN9jRxgNjTbQk015XtI0ne6Ydt_A8tEd1aFGubEbJ7edTQf9HIJHb-k4kBTr11nBo9It7J4IeU8bMSp-mRIQNv3d4.wW7HO2UaJRZK5YWEnd2LX1xFBEf3wPFtdMS8eNcMX5E
      pragma:
      - no-cache
      request-id:
      - 6bbca010-53a3-4d48-a275-a114b47a05db
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/ef439f484b0445c19e8d7b49893b5bf8","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/ef439f484b0445c19e8d7b49893b5bf8","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/ef439f484b0445c19e8d7b49893b5bf8","x5t":"_Uy3u7gvKspFWgWHtpef-Lx3T-I","cer":"MIIDQjCCAiqgAwIBAgIQQch1mNdATqaoHTN8kvFCWzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjkzNloXDTIxMTIwMjA3MzkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAL4xdsFty+WaXvNaUkGtMoTyOw1OIjcgXv7TRxz4Z/eKkAXt9b417TrqlJTs8CBYftjhdjui2/sGDQfC/AAxQumkPL6LEBuKjsqwNWE+ZYuDZb2Zj6ZN2yx4H2bwxHFnLdeadudMGWQ4rMRjpEmK0OEJor+G/VZJwj3J9N2eGlEP95fHt4God3e+XbY/mOdeYp+Gbp16KXL01yYMx+h8CfX2/2MKzqwiMVRKVjI84xv1GZtb2Ss0H8ZEKUYUFXsIus3cDSGhhKzyDE0YrTcbbhrlgFBTbV7je+QM4IHCoTkgA96E1nrvSbKWqa6ZwTRqIhAM21d+9JoKoPO8XLgLcEQ==","attributes":{"enabled":true,"nbf":1622618976,"exp":1638430776,"created":1622619577,"updated":1622619577,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1622619485,"updated":1622619542}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:40 GMT
      duration:
      - '2713675'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - tJsh7ZRZVoeN3txW0Hj9i4UdYNmypwx687tPyQ6Ax6U=
      ocp-aad-session-key:
      - RHAUDNlNhB4DiGIj6-J6x1HnnuVgd6wnDlf9AnaJ1sqd-0CR1h7ubk8w5krmlCbvhjfoB8Spi3JAjw2O4c7GQdsFeEaxs7h7g5h2eUCnNxVvPbqaEXZ0C-P17om72ZhpM6snOAiYCoucF53K6Z8pgv9z1jpKkOkraH8ISDk93UE.jjHHTW4zuCJ06eY6NofBRZqTAiRKmunhsUpGBTkzuWw
      pragma:
      - no-cache
      request-id:
      - 30fd686d-c337-4db0-9ff8-3fde3d57a5cd
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "keyCredentials": [{"startDate": "2021-06-02T07:39:38.915734Z",
      "endDate": "2021-12-02T07:39:35.000Z", "value": "MIIDQjCCAiqgAwIBAgIQQch1mNdATqaoHTN8kvFCWzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjkzNloXDTIxMTIwMjA3MzkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAL4xdsFty+WaXvNaUkGtMoTyOw1OIjcgXv7TRxz4Z/eKkAXt9b417TrqlJTs8CBYftjhdjui2/sGDQfC/AAxQumkPL6LEBuKjsqwNWE+ZYuDZb2Zj6ZN2yx4H2bwxHFnLdeadudMGWQ4rMRjpEmK0OEJor+G/VZJwj3J9N2eGlEP95fHt4God3e+XbY/mOdeYp+Gbp16KXL01yYMx+h8CfX2/2MKzqwiMVRKVjI84xv1GZtb2Ss0H8ZEKUYUFXsIus3cDSGhhKzyDE0YrTcbbhrlgFBTbV7je+QM4IHCoTkgA96E1nrvSbKWqa6ZwTRqIhAM21d+9JoKoPO8XLgLcEQ==",
      "keyId": "88888888-0000-0000-0000-000000000004", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert0000012",
      "identifierUris": []}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1487'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "3f277376-80d9-46e4-ad30-324884534092", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "7a561cbc-8106-4fdd-9143-5edf0eea6ac0",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert0000012", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": null, "identifierUris": [],
        "informationalUrls": {"termsOfService": null, "support": null, "privacy":
        null, "marketing": null}, "isDeviceOnlyAuthSupported": null, "keyCredentials":
        [{"customKeyIdentifier": "FD4CB7BBB82F2ACA455A0587B6979FF8BC774FE2", "endDate":
        "2021-12-02T07:39:35Z", "keyId": "88888888-0000-0000-0000-000000000004", "startDate":
        "2021-06-02T07:39:38.915734Z", "type": "AsymmetricX509Cert", "usage": "Verify",
        "value": null}], "knownClientApplications": [], "logoutUrl": null, "logo@odata.mediaEditLink":
        "directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "id": "24a9e325-4585-4e8e-a056-91603091af45", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2604'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:40 GMT
      duration:
      - '5347268'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - Qj3VtyCrF/9PKrQvSpzVjjuoNn/EFBSx7YoEruDxyMc=
      ocp-aad-session-key:
      - 6gxbkxs31t7p5-uRwyrMXAuSKThYILFTXKbbQQl3ml84WIX9fk_Vx7xKLsVwfNNg_LZ2dRQBLKheB7LbHv3ujzS-BoMAvCORHl14RLiRgjmnK4gvh0MQmiPRLMSwkLlO7EzyKu2Dz1Ofpdm2-FDjr14yOAtMg5i3bR2YF-HlB6k.54SFo_h3uSb7jRdfXF3GlupiTR87d4-SrhBdUqfk-eI
      pragma:
      - no-cache
      request-id:
      - 5deb810d-98f3-4bf3-aee0-4511cee6b631
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "7a561cbc-8106-4fdd-9143-5edf0eea6ac0"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"500cd8c3-4ac7-40ff-8b97-42295613dd54","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"7a561cbc-8106-4fdd-9143-5edf0eea6ac0","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"24a9e325-4585-4e8e-a056-91603091af45","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["7a561cbc-8106-4fdd-9143-5edf0eea6ac0"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1994'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:42 GMT
      duration:
      - '8050880'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/500cd8c3-4ac7-40ff-8b97-42295613dd54/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - VATMR8N0mptbFBoB9GM2FgSFHquE8//dDDCFZG8WC1A=
      ocp-aad-session-key:
      - pLDtuL787aQFq1W8vBUh2HsnXf7r5CAVWnwFxg5VuZf3XpYElQ0fIiif5z4eFFiwr_Zv1_PLbVfw47jpnuWtlJvCf2tZ00USWDgxkuUplkqrqTtVz2EeZRscq1AganIEcaTi3_cCInuJCkiDUxJiHmM7ypYN47jhK-wRN3BKRx4.eVZBbCFe9HkDRQUNw5j09z7bIxmVGPbLWtpDNzpdWcI
      pragma:
      - no-cache
      request-id:
      - 13f34b38-4bf0-483f-8643-78aad5878fb7
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '947'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "500cd8c3-4ac7-40ff-8b97-42295613dd54"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 500cd8c34ac740ff8b9742295613dd54
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete","Microsoft.Compute/galleries/share/action"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-12-04T00:34:54.8501087Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '947'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "500cd8c3-4ac7-40ff-8b97-42295613dd54"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"500cd8c3-4ac7-40ff-8b97-42295613dd54","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2021-06-02T07:39:49.2028459Z","updatedOn":"2021-06-02T07:39:49.5228340Z","createdBy":null,"updatedBy":"6d97229a-391f-473a-893f-f0608b592d7b"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000006"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27%29%20or%20displayName%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"500cd8c3-4ac7-40ff-8b97-42295613dd54","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"7a561cbc-8106-4fdd-9143-5edf0eea6ac0","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"24a9e325-4585-4e8e-a056-91603091af45","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["7a561cbc-8106-4fdd-9143-5edf0eea6ac0"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1997'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:51 GMT
      duration:
      - '2422664'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 4whk3+h990MesMDfngMN4yMafZ3kFcMSJYXliPZar04=
      ocp-aad-session-key:
      - DXnPdKbOjkz1qHyL0p8q1aIP0pYlTS87T4skheatZurzf2K-xUdoDR6rnFtYlmJymlZXwSfPmThZ1El6QWIQabordq6--2PV2wZyUV88gAUZ5GmBj6yD4Zdma9DqL-cQnrx65o0MKmWyKZNYHvdXtGQwCy6Xxa9M5KtewIjYsKQ.y6flENw_MYXfDaIN-NcwB2QiIYaQSmcWkyhHr71yWg8
      pragma:
      - no-cache
      request-id:
      - 007d7912-dcf2-40ec-8b6f-668607ffaa55
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:51 GMT
      duration:
      - '2283207'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 6Ukz2nGbEWFk65exVfhvcZq6ZGnJp3X5v9SNltEpHL0=
      ocp-aad-session-key:
      - e1Uv1UAAP3qBf_mpqCuu1tPFwakhl4zNGu1Su-7AxgQtxZcWRsGQVDZ1DwkXHA5wrrUFg3NX97mVsz4JWMZHwoy32CTnoclBHjCHOiHjAwxjFg7JJaZDkVzUBk0PL7eDAEu7ejM4NFgEe9OylyUAe0mKU0v9KxtayvXuqkT9LV0.90t093Rxp9RTIzfviOpygdua9zrm5iruj7N_VHsyW3E
      pragma:
      - no-cache
      request-id:
      - 4344f034-a16a-45f6-bba7-ad2366b030a5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f277376-80d9-46e4-ad30-324884534092","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"7a561cbc-8106-4fdd-9143-5edf0eea6ac0","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"FD4CB7BBB82F2ACA455A0587B6979FF8BC774FE2","endDate":"2021-12-02T07:39:35Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2021-06-02T07:39:38.915734Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"24a9e325-4585-4e8e-a056-91603091af45","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2521'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:52 GMT
      duration:
      - '2505973'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ZgZqoP1PknGEic5PsfWhOuxqxb5YmrFQHfyox3A5dHQ=
      ocp-aad-session-key:
      - 80sM7n1xQBqLDgsiVgBQjRiNL0qBZnP1_A3NPWaIZlbCKZrGKl6pcaACoq3o5QKzc9FOBDxXK04vsVAhkCAGTfvRRO_aY3Ag6gyJ6bPZfw17qypWWFRkCQUmIqWpQCUalgl6K6jd8JqUHOXfPrgjPN_6tgE4OPA-hXE2DBarM1Y.VWQDdAjnnHfA292IaZ6fOZyuLii199idXncrpRl2YJM
      pragma:
      - no-cache
      request-id:
      - a48b9346-0ddd-448f-8ba6-778455e73c6c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f277376-80d9-46e4-ad30-324884534092?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f277376-80d9-46e4-ad30-324884534092","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"7a561cbc-8106-4fdd-9143-5edf0eea6ac0","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"FD4CB7BBB82F2ACA455A0587B6979FF8BC774FE2","endDate":"2021-12-02T07:39:35Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2021-06-02T07:39:38.915734Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"24a9e325-4585-4e8e-a056-91603091af45","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2518'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:52 GMT
      duration:
      - '2433098'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - TCjJ0/W0yFtK2qY/SYMmX8RfXQpUtjzYIdBQwB6JrRg=
      ocp-aad-session-key:
      - tT2Y5K5D7oOswY-0EXsiu_l4o_MA0R0Qn9q1fvZ5HU80ciz-nfjD0WMv3tGSf40oToulz1LXRbYC6GMYzrIs6ncy6kuEzjiw5dhrrC2IVRsPRKayxu-wYWOEpusyUSit7qzc94pRl-JCMWCmbrwhO5ReVmJJHQ0kHpjWwyRsl5g.2hAgGFoLFRLZTksjPsuPArFBfWytUblmXhUCu5EPLCc
      pragma:
      - no-cache
      request-id:
      - 1aa304bc-3639-49ea-82c2-bfdcb31199a3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/ef439f484b0445c19e8d7b49893b5bf8","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/ef439f484b0445c19e8d7b49893b5bf8","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/ef439f484b0445c19e8d7b49893b5bf8","x5t":"_Uy3u7gvKspFWgWHtpef-Lx3T-I","cer":"MIIDQjCCAiqgAwIBAgIQQch1mNdATqaoHTN8kvFCWzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjkzNloXDTIxMTIwMjA3MzkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAL4xdsFty+WaXvNaUkGtMoTyOw1OIjcgXv7TRxz4Z/eKkAXt9b417TrqlJTs8CBYftjhdjui2/sGDQfC/AAxQumkPL6LEBuKjsqwNWE+ZYuDZb2Zj6ZN2yx4H2bwxHFnLdeadudMGWQ4rMRjpEmK0OEJor+G/VZJwj3J9N2eGlEP95fHt4God3e+XbY/mOdeYp+Gbp16KXL01yYMx+h8CfX2/2MKzqwiMVRKVjI84xv1GZtb2Ss0H8ZEKUYUFXsIus3cDSGhhKzyDE0YrTcbbhrlgFBTbV7je+QM4IHCoTkgA96E1nrvSbKWqa6ZwTRqIhAM21d+9JoKoPO8XLgLcEQ==","attributes":{"enabled":true,"nbf":1622618976,"exp":1638430776,"created":1622619577,"updated":1622619577,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1622619485,"updated":1622619542}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 02 Jun 2021 07:39:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.73;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.2.297.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2021-06-02T07:39:51.637782Z", "endDate":
      "2021-12-02T07:39:35.000Z", "value": "MIIDQjCCAiqgAwIBAgIQQch1mNdATqaoHTN8kvFCWzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIxMDYwMjA3MjkzNloXDTIxMTIwMjA3MzkzNlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMMq3UeqhbmA4q1aNhq+AiMfNoniyqZjEuquzfl6P5jo8tDT1yaVFKTTKWJoj1IMvz0lNiqjTSxcOafxx/wS5p8F+SD8XG956ubGzAkAMLrZYtB9TpzQyRGGrWJJjZOXK5JrII3CAA2aSz8MB+C5f7HOaZh7ZXJp+MO3rnxzCF8IlqJiDRnULFJ5QcxNCW7YpHTQgtp9PE2iPM28Nmkr+H/E+cws6nRseyt6l9F+VhLWHbNg8VaBwk3zV4i+Xy1OzWZPj0N9qK2Ozk8K6RTcomKK9w262SAI4RFtwsZKXYn3VhKIhtPQBKrFapODaObydIpge/q2q9XSeKJ6eGgHxukCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFAshHBx7RjJIgByAWRCUck/5vkPrMB0GA1UdDgQWBBQLIRwce0YySIAcgFkQlHJP+b5D6zANBgkqhkiG9w0BAQsFAAOCAQEAL4xdsFty+WaXvNaUkGtMoTyOw1OIjcgXv7TRxz4Z/eKkAXt9b417TrqlJTs8CBYftjhdjui2/sGDQfC/AAxQumkPL6LEBuKjsqwNWE+ZYuDZb2Zj6ZN2yx4H2bwxHFnLdeadudMGWQ4rMRjpEmK0OEJor+G/VZJwj3J9N2eGlEP95fHt4God3e+XbY/mOdeYp+Gbp16KXL01yYMx+h8CfX2/2MKzqwiMVRKVjI84xv1GZtb2Ss0H8ZEKUYUFXsIus3cDSGhhKzyDE0YrTcbbhrlgFBTbV7je+QM4IHCoTkgA96E1nrvSbKWqa6ZwTRqIhAM21d+9JoKoPO8XLgLcEQ==",
      "keyId": "a0265cd4-3005-4360-b03f-842efc76f6a1", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1336'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f277376-80d9-46e4-ad30-324884534092?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Wed, 02 Jun 2021 07:39:55 GMT
      duration:
      - '5089598'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - RLI9UdIdDJJqGiKQEXMm6ubh1e+7h32Mlq0U1wgcREA=
      ocp-aad-session-key:
      - Acak50fHeMWFOHhYk3qhJ8LiMv4eRJ9Oy1Sd6DMOLcLSNICJHeszK8wdWeEk5i4VMmgNkeLJglk2Nr03Y_ccA6-ifjAaE2piZGjycxTrTPzp5IPbtdZAcpqdb3q1g9j2bYxx5jycW9Lk_bemOOrl8A7HmtW5zyX9_EwTZ3cfjOo.gcFrL_Dpch26fTMY9tUD4WiiXEi2NEtwD16lH7kASzk
      pragma:
      - no-cache
      request-id:
      - 3e91f103-c8e0-4c63-ae56-5b02fa876563
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:55 GMT
      duration:
      - '2226814'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 2gccB9dMNXEk6Q7SzG8duZ4yeODd68YaThoWSEn7ub0=
      ocp-aad-session-key:
      - ZDDaShl3y8krP7m7MCOuA-a_9jWJY_pbhdZagDPr-Vu11vUbw3xnFd_ALhxxhSe1eWJwbklFL27av3c0E_Vm5_i6YKRRZXNEmMLX-zAjgyzzstM0DZUgL5hiY_SbW55QZjXfQo5Iuf546nsQ5Hvl5bAhqjNzk-Y90bJoEfEC95Q.KmiCYMQiWPqPV37E021SI55jbYMgt35gJ2WulegzwwY
      pragma:
      - no-cache
      request-id:
      - d44b69e5-ed1a-4f68-8544-bd0e8585e5f5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%277a561cbc-8106-4fdd-9143-5edf0eea6ac0%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f277376-80d9-46e4-ad30-324884534092","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"7a561cbc-8106-4fdd-9143-5edf0eea6ac0","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"FD4CB7BBB82F2ACA455A0587B6979FF8BC774FE2","endDate":"2021-12-02T07:39:35Z","keyId":"a0265cd4-3005-4360-b03f-842efc76f6a1","startDate":"2021-06-02T07:39:51.637782Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f277376-80d9-46e4-ad30-324884534092/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"24a9e325-4585-4e8e-a056-91603091af45","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2521'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Wed, 02 Jun 2021 07:39:56 GMT
      duration:
      - '2260276'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Qj3VtyCrF/9PKrQvSpzVjjuoNn/EFBSx7YoEruDxyMc=
      ocp-aad-session-key:
      - _rZNIobsGiZORmkEWcMeJ5hXTkKfLM7fU3u5MB1NuUfqVqrGoeY1KbmrHtwgpxvr9yR1Uv_JrUBJ-ENUg_r7_mU1i2XcKc3cABvGe_xdcZ7pkIwQowdubj7gD0b1xRWlwPv2sLguP3MD7FMvuAwMtz7_t0qC0Km2ZmgvM9ldFUs.FfrUhizBY4xxotsWHlotrJNn5eqhlcT9r9Te-5L5_7Y
      pragma:
      - no-cache
      request-id:
      - fe2e6ce8-0075-4c24-af1a-ee10529fa00b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.9.5 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.24.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f277376-80d9-46e4-ad30-324884534092?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Wed, 02 Jun 2021 07:40:02 GMT
      duration:
      - '58645243'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Gam4/88acIlNctRbbE4w5nYZAjuAPF6ZgZ5xGM4GJGY=
      ocp-aad-session-key:
      - Jeh3gXcTOCEh8zr5T_hd9JHRgGZHXUCgMXjZ9oowSYIsz4fzpcSFAURjkN9rGXSM4rDrLDXuI3S53XxGecRk9xD-2QAK-cPXJ_-De-WkL8nPF0zZhImZESUucJ7rc2I4_l38ne6RkMc97_6Psk1AspGdhbEpWvNDQYhvfZnkF5M.GB5nS9o_a7p51gqktl3sNca1CKXdxtURkE7mDsH6_jE
      pragma:
      - no-cache
      request-id:
      - de83cc2d-8411-4c36-80a7-12a6ba944dbd
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
