version: 1
content:
- group:
    name: dms
    summary: Manage Azure Data Migration Service (DMS) instances.
- command:
    name: dms check-name
    summary: Check if a given DMS instance name is available in a given region as well as the name's validity.
    arguments:
    - name: --name
      summary: >
        The Service name to check.
- command:
    name: dms check-status
    summary: Perform a health check and return the status of the service and virtual machine size.
- command:
    name: dms create
    summary: Create an instance of the Data Migration Service.
    arguments:
    - name: --sku-name
      summary: >
        The name of the CPU SKU on which the service's Virtual Machine will run. Check the name and the availability of SKUs in your area with "az dms list-skus".
    - name: --subnet
      summary: >
        The Resource ID of the VNet's Subnet you will use to connect the source and target DBs.
        Use "az network vnet subnet show -h" for help to get your subnet's ID.
    examples:
    - summary: Create an instance of DMS.
      command: >
        az dms create -l westus -n mydms -g myresourcegroup --sku-name Basic_2vCores --subnet /subscriptions/{vnetSubscriptionId}/resourceGroups/{vnetResourceGroup}/providers/Microsoft.Network/virtualNetworks/{vnetName}/subnets/{subnetName} --tags tagName1=tagValue1 tagWithNoValue
- command:
    name: dms delete
    summary: Delete an instance of the Data Migration Service.
    arguments:
    - name: --delete-running-tasks
      summary: >
        Cancel any running tasks before deleting the service.
- command:
    name: dms list
    summary: List the DMS instances within your currently configured subscription (to set this use "az account set"). If provided, only show the instances within a given resource group.
    examples:
    - summary: List all the instances in your subscription.
      command: >
        az dms list
    - summary: List all the instances in a given resource group.
      command: >
        az dms list -g myresourcegroup
- command:
    name: dms list-skus
    summary: List the SKUs that are supported by the Data Migration Service.
- command:
    name: dms show
    summary: Show the details for an instance of the Data Migration Service.
- command:
    name: dms start
    summary: Start an instance of the Data Migration Service. It can then be used to run data migrations.
- command:
    name: dms stop
    summary: Stop an instance of the Data Migration Service. While stopped, it can't be used to run data migrations and the owner won't be billed.
- command:
    name: dms wait
    summary: Place the CLI in a waiting state until a condition of the DMS instance is met.
- group:
    name: dms project
    summary: Manage Projects for an instance of the Data Migration Service.
- command:
    name: dms project create
    summary: Create a migration Project which can contain multiple Tasks.
    arguments:
    - name: --source-platform
      summary: >
        The type of server for the source database. The supported types are: SQL.
    - name: --target-platform
      summary: >
        The type of service for the target database. The supported types are: SQLDB.
    examples:
    - summary: Create a Project for a DMS instance.
      command: >
        az dms project create -l westus -n myproject -g myresourcegroup --service-name mydms --source-platform SQL --target-platform SQLDB --tags tagName1=tagValue1 tagWithNoValue
- command:
    name: dms project delete
    summary: Delete a Project.
    arguments:
    - name: --delete-running-tasks
      summary: >
        Cancel any running tasks before deleting the Project.
- command:
    name: dms project list
    summary: List the Projects within an instance of DMS.
- command:
    name: dms project show
    summary: Show the details of a migration Project.
- command:
    name: dms project check-name
    summary: Check if a given Project name is available within a given instance of DMS as well as the name's validity.
    arguments:
    - name: --name
      summary: >
        The Project name to check.
- group:
    name: dms project task
    summary: Manage Tasks for a Data Migration Service instance's Project.
- command:
    name: dms project task create
    summary: Create and start a migration Task.
    arguments:
    - name: --database-options-json
      summary: >
        Database and table information. This can be either a JSON-formatted string or the location to a file containing the JSON object. See example below for the format.
    - name: --source-connection-json
      summary: >
        The connection information to the source server. This can be either a JSON-formatted string or the location to a file containing the JSON object. See example below for the format.
    - name: --target-connection-json
      summary: >
        The connection information to the target server. This can be either a JSON-formatted string or the location to a file containing the JSON object. See example below for the format.
    - name: --enable-data-integrity-validation
      summary: >
        Whether to perform a checksum based data integrity validation between source and target for the selected database and tables.
    - name: --enable-query-analysis-validation
      summary: >
        Whether to perform a quick and intelligent query analysis by retrieving queries from the source database and
        executing them in the target. The result will have execution statistics for executions in source and target databases
        for the extracted queries.
    - name: --enable-schema-validation
      summary: >
        Whether to compare the schema information between source and target.
    examples:
    - summary: Create and start a Task which performs no validation checks.
      command: >
        az dms project task create --database-options-json "C:\CLI Files\databaseOptions.json" -n mytask --project-name myproject -g myresourcegroup --service-name mydms --source-connection-json "{'dataSource': 'myserver', 'authentication': 'SqlAuthentication', 'encryptConnection': 'true', 'trustServerCertificate': 'true'}" --target-connection-json "C:\CLI Files\targetConnection.json"
    - summary: Create and start a Task which performs all validation checks.
      command: >
        az dms project task create --database-options-json "C:\CLI Files\databaseOptions.json" -n mytask --project-name myproject -g myresourcegroup --service-name mydms --source-connection-json "C:\CLI Files\sourceConnection.json" --target-connection-json "C:\CLI Files\targetConnection.json" --enable-data-integrity-validation --enable-query-analysis-validation --enable-schema-validation
    - summary: The format of the database options JSON object.
      command: >
        [
            {
                "name": "source database",
                "target_database_name": "target database",
                "make_source_db_read_only": false|true,
                "table_map": {
                    "schema.SourceTableName1": "schema.TargetTableName1",
                    "schema.SourceTableName2": "schema.TargetTableName2",
                    ...n
                }
            },
            ...n
        ]
    - summary: The format of the connection JSON object.
      command: >
        {
            "userName": "user name",    // if this is missing or null, you will be prompted
            "password": null,           // if this is missing or null (highly recommended) you will be prompted
            "dataSource": "server name[,port]",
            "authentication": "SqlAuthentication|WindowsAuthentication",
            "encryptConnection": true,      // highly recommended to leave as true
            "trustServerCertificate": true  // highly recommended to leave as true
        }
- command:
    name: dms project task delete
    summary: Delete a migration Task.
    arguments:
    - name: --delete-running-tasks
      summary: >
        If the Task is currently running, cancel the Task before deleting the Project.
- command:
    name: dms project task list
    summary: List the Tasks within a Project. Some tasks may have a status of Unknown, which indicates that an error occurred while querying the status of that task.
    arguments:
    - name: --task-type
      summary: >
        Filters the list by the type of task. For the list of possible types see "az dms check-status".
    examples:
    - summary: List all Tasks within a Project.
      command: >
        az dms project task list --project-name myproject -g myresourcegroup --service-name mydms
    - summary: List only the SQL to SQL migration tasks within a Project.
      command: >
        az dms project task list --project-name myproject -g myresourcegroup --service-name mydms --task-type Migrate.SqlServer.SqlDb
- command:
    name: dms project task show
    summary: Show the details of a migration Task. Use the "--expand" to get more details.
    arguments:
    - name: --expand
      summary: >
        Expand the response to provide more details. Use with "command" to see more details of the Task.
        Use with "output" to see the results of the Task's migration.
- command:
    name: dms project task cancel
    summary: Cancel a Task if it's currently queued or running.
- command:
    name: dms project task check-name
    summary: Check if a given Task name is available within a given instance of DMS as well as the name's validity.
    arguments:
    - name: --name
      summary: >
        The Task name to check.
