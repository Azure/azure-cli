interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:21:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"sku": {"name": "Standard_RAGRS"}, "kind": "StorageV2", "location": "westus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      Content-Length:
      - '79'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/iothubteststorage1?api-version=2019-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - text/plain; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:21:46 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - text/plain; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:03 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - text/plain; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:06 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - text/plain; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:09 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      content-type:
      - text/plain; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:12 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/locations/westus2/asyncoperations/75289c39-b492-42d3-8d37-0dc4b3893a3e?monitor=true&api-version=2019-06-01
  response:
    body:
      string: '{"sku":{"name":"Standard_RAGRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/iothubteststorage1","name":"iothubteststorage1","type":"Microsoft.Storage/storageAccounts","location":"westus2","tags":{},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-03-09T21:21:46.5998310Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-03-09T21:21:46.5998310Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2020-03-09T21:21:46.5372690Z","primaryEndpoints":{"dfs":"https://iothubteststorage1.dfs.core.windows.net/","web":"https://iothubteststorage1.z5.web.core.windows.net/","blob":"https://iothubteststorage1.blob.core.windows.net/","queue":"https://iothubteststorage1.queue.core.windows.net/","table":"https://iothubteststorage1.table.core.windows.net/","file":"https://iothubteststorage1.file.core.windows.net/"},"primaryLocation":"westus2","statusOfPrimary":"available","secondaryLocation":"westcentralus","statusOfSecondary":"available","secondaryEndpoints":{"dfs":"https://iothubteststorage1-secondary.dfs.core.windows.net/","web":"https://iothubteststorage1-secondary.z5.web.core.windows.net/","blob":"https://iothubteststorage1-secondary.blob.core.windows.net/","queue":"https://iothubteststorage1-secondary.queue.core.windows.net/","table":"https://iothubteststorage1-secondary.table.core.windows.net/"}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1785'
      content-type:
      - application/json
      date:
      - Mon, 09 Mar 2020 21:22:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --account-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/storageAccounts?api-version=2019-06-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Storage/storageAccounts/testiotextstor0","name":"testiotextstor0","type":"Microsoft.Storage/storageAccounts","location":"eastus2","tags":{},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-10-19T00:06:41.0740705Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-10-19T00:06:41.0740705Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2019-10-19T00:06:41.0115264Z","primaryEndpoints":{"dfs":"https://testiotextstor0.dfs.core.windows.net/","web":"https://testiotextstor0.z20.web.core.windows.net/","blob":"https://testiotextstor0.blob.core.windows.net/","queue":"https://testiotextstor0.queue.core.windows.net/","table":"https://testiotextstor0.table.core.windows.net/","file":"https://testiotextstor0.file.core.windows.net/"},"primaryLocation":"eastus2","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cloud-shell-storage-westus/providers/Microsoft.Storage/storageAccounts/cs4a386d5eaea90x441ax826","name":"cs4a386d5eaea90x441ax826","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{"ms-resource-usage":"azure-cloud-shell"},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-11-25T17:05:48.4365854Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-11-25T17:05:48.4365854Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2019-11-25T17:05:48.3897448Z","primaryEndpoints":{"dfs":"https://cs4a386d5eaea90x441ax826.dfs.core.windows.net/","web":"https://cs4a386d5eaea90x441ax826.z22.web.core.windows.net/","blob":"https://cs4a386d5eaea90x441ax826.blob.core.windows.net/","queue":"https://cs4a386d5eaea90x441ax826.queue.core.windows.net/","table":"https://cs4a386d5eaea90x441ax826.table.core.windows.net/","file":"https://cs4a386d5eaea90x441ax826.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_RAGRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/iothubteststorage1","name":"iothubteststorage1","type":"Microsoft.Storage/storageAccounts","location":"westus2","tags":{},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-03-09T21:21:46.5998310Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-03-09T21:21:46.5998310Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2020-03-09T21:21:46.5372690Z","primaryEndpoints":{"dfs":"https://iothubteststorage1.dfs.core.windows.net/","web":"https://iothubteststorage1.z5.web.core.windows.net/","blob":"https://iothubteststorage1.blob.core.windows.net/","queue":"https://iothubteststorage1.queue.core.windows.net/","table":"https://iothubteststorage1.table.core.windows.net/","file":"https://iothubteststorage1.file.core.windows.net/"},"primaryLocation":"westus2","statusOfPrimary":"available","secondaryLocation":"westcentralus","statusOfSecondary":"available","secondaryEndpoints":{"dfs":"https://iothubteststorage1-secondary.dfs.core.windows.net/","web":"https://iothubteststorage1-secondary.z5.web.core.windows.net/","blob":"https://iothubteststorage1-secondary.blob.core.windows.net/","queue":"https://iothubteststorage1-secondary.queue.core.windows.net/","table":"https://iothubteststorage1-secondary.table.core.windows.net/"}}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"StorageV2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Storage/storageAccounts/rkdatalake","name":"rkdatalake","type":"Microsoft.Storage/storageAccounts","location":"westus2","tags":{},"properties":{"privateEndpointConnections":[],"isHnsEnabled":true,"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-10-04T18:12:47.2100284Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2019-10-04T18:12:47.2100284Z"}},"keySource":"Microsoft.Storage"},"accessTier":"Hot","provisioningState":"Succeeded","creationTime":"2019-10-04T18:12:47.1458110Z","primaryEndpoints":{"dfs":"https://rkdatalake.dfs.core.windows.net/","web":"https://rkdatalake.z5.web.core.windows.net/","blob":"https://rkdatalake.blob.core.windows.net/","queue":"https://rkdatalake.queue.core.windows.net/","table":"https://rkdatalake.table.core.windows.net/","file":"https://rkdatalake.file.core.windows.net/"},"primaryLocation":"westus2","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Storage/storageAccounts/smynxhb57vgq22","name":"smynxhb57vgq22","type":"Microsoft.Storage/storageAccounts","location":"westus2","tags":{"resourceType":"Service
        Fabric","clusterName":"azureportalapplication"},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":false,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-01-10T21:50:46.8413086Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-01-10T21:50:46.8413086Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2020-01-10T21:50:46.7787937Z","primaryEndpoints":{"blob":"https://smynxhb57vgq22.blob.core.windows.net/","queue":"https://smynxhb57vgq22.queue.core.windows.net/","table":"https://smynxhb57vgq22.table.core.windows.net/","file":"https://smynxhb57vgq22.file.core.windows.net/"},"primaryLocation":"westus2","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Storage/storageAccounts/wadsmynxhb57vgq23","name":"wadsmynxhb57vgq23","type":"Microsoft.Storage/storageAccounts","location":"westus2","tags":{"resourceType":"Service
        Fabric","clusterName":"azureportalapplication"},"properties":{"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":false,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-01-10T21:50:46.7787937Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2020-01-10T21:50:46.7787937Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2020-01-10T21:50:46.7163266Z","primaryEndpoints":{"blob":"https://wadsmynxhb57vgq23.blob.core.windows.net/","queue":"https://wadsmynxhb57vgq23.queue.core.windows.net/","table":"https://wadsmynxhb57vgq23.table.core.windows.net/","file":"https://wadsmynxhb57vgq23.file.core.windows.net/"},"primaryLocation":"westus2","statusOfPrimary":"available"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '8062'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - 4d9216ba-9555-421e-87d9-4780190292e8
      - bc79a11a-bdc9-453b-99a6-31ac79aaeabd
      - 2315d7c0-96a4-41a1-b825-1ad9d8362d21
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --account-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/iothubteststorage1/listKeys?api-version=2019-06-01
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Mon, 09 Mar 2020 21:22:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.7.1; Windows 10) AZURECLI/2.2.0
      x-ms-date:
      - Mon, 09 Mar 2020 21:22:17 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://iothubteststorage1.blob.core.windows.net/iothubcontainer1?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:22:17 GMT
      etag:
      - '"0x8D7C46FF2328450"'
      last-modified:
      - Mon, 09 Mar 2020 21:22:18 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-storage/8.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/iothubteststorage1/listKeys?api-version=2019-06-01
  response:
    body:
      string: '{"keys":[{"keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '288'
      content-type:
      - application/json
      date:
      - Mon, 09 Mar 2020 21:22:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "sku": {"name": "Standard", "tier": "Standard"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      Content-Length:
      - '72'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1?api-version=2017-04-01
  response:
    body:
      string: '{"error":{"code":"MissingSubscriptionRegistration","message":"The subscription
        is not registered to use namespace ''Microsoft.EventHub''. See https://aka.ms/rps-not-found
        for how to register subscriptions.","details":[{"code":"MissingSubscriptionRegistration","target":"Microsoft.EventHub","message":"The
        subscription is not registered to use namespace ''Microsoft.EventHub''. See
        https://aka.ms/rps-not-found for how to register subscriptions."}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '445'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 409
      message: Conflict
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - python-requests/2.23.0
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub/register?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:22:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registering"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3306'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python-requests/2.23.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub?api-version=2016-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.EventHub","namespace":"Microsoft.EventHub","authorizations":[{"applicationId":"80369ed6-5f11-4dd9-bef3-692475845e77","roleDefinitionId":"eb8e1991-5de0-42a6-a64b-29b059341b7b"},{"applicationId":"6201d19e-14fb-4472-a2d6-5634a5c97568"}],"resourceTypes":[{"resourceType":"namespaces","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","UAE
        North","Australia Central","Switzerland North","Germany West Central","Norway
        East"],"apiVersions":["2018-01-01-preview","2017-04-01","2015-08-01","2014-09-01"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove, SystemAssignedResourceIdentity"},{"resourceType":"clusters","locations":["Australia
        East","Australia Southeast","Central US","East US","East US 2","West US","West
        US 2","North Central US","South Central US","West Central US","East Asia","Southeast
        Asia","Brazil South","Japan East","Japan West","North Europe","West Europe","Central
        India","South India","West India","Canada Central","Canada East","UK West","UK
        South","Korea Central","Korea South","France Central","South Africa North","Australia
        Central","Switzerland North","Germany West Central","Norway East"],"apiVersions":["2018-01-01-preview"],"capabilities":"CrossResourceGroupResourceMove,
        CrossSubscriptionResourceMove"},{"resourceType":"namespaces/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/networkrulesets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"namespaces/eventhubs","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/authorizationrules","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/eventhubs/consumergroups","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"checkNamespaceAvailability","locations":[],"apiVersions":["2015-08-01","2014-09-01"]},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"sku","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"operations","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs","locations":[],"apiVersions":["2017-04-01"]},{"resourceType":"namespaces/disasterrecoveryconfigs/checkNameAvailability","locations":[],"apiVersions":["2017-04-01","2015-08-01","2014-09-01"]},{"resourceType":"locations","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"locations/deleteVirtualNetworkOrSubnets","locations":[],"apiVersions":["2018-01-01-preview","2017-04-01"]},{"resourceType":"availableClusterRegions","locations":[],"apiVersions":["2018-01-01-preview"]}],"registrationState":"Registered"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3305'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "sku": {"name": "Standard", "tier": "Standard"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      Content-Length:
      - '72'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1?api-version=2017-04-01
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1","name":"ehNamespaceiothubfortest-1","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"a386d5ea-ea90-441a-8263-d816368c84a1:ehnamespaceiothubfortest-1","createdAt":"2020-03-09T21:23:53.277Z","updatedAt":"2020-03-09T21:23:53.277Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest-1.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '767'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:23:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '48'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1?api-version=2017-04-01
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1","name":"ehNamespaceiothubfortest-1","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"a386d5ea-ea90-441a-8263-d816368c84a1:ehnamespaceiothubfortest-1","createdAt":"2020-03-09T21:23:53.277Z","updatedAt":"2020-03-09T21:23:53.277Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest-1.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '767'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1?api-version=2017-04-01
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1","name":"ehNamespaceiothubfortest-1","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Succeeded","metricId":"a386d5ea-ea90-441a-8263-d816368c84a1:ehnamespaceiothubfortest-1","createdAt":"2020-03-09T21:23:53.277Z","updatedAt":"2020-03-09T21:24:38.76Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest-1.servicebus.windows.net:443/","status":"Active"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '764'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1?api-version=2017-04-01
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1","name":"ehNamespaceiothubfortest-1","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Succeeded","metricId":"a386d5ea-ea90-441a-8263-d816368c84a1:ehnamespaceiothubfortest-1","createdAt":"2020-03-09T21:23:53.277Z","updatedAt":"2020-03-09T21:24:38.76Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest-1.servicebus.windows.net:443/","status":"Active"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '764'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub create
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --namespace-name --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1/eventhubs/eventHubiothubfortest?api-version=2017-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1/eventhubs/eventHubiothubfortest","name":"eventHubiothubfortest","type":"Microsoft.EventHub/Namespaces/EventHubs","location":"West
        US 2","properties":{"messageRetentionInDays":7,"partitionCount":4,"status":"Active","createdAt":"2020-03-09T21:24:56.293Z","updatedAt":"2020-03-09T21:24:56.517Z","partitionIds":["0","1","2","3"]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '543'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"rights": ["Send"]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub authorization-rule create
      Connection:
      - keep-alive
      Content-Length:
      - '36'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --namespace-name --eventhub-name --name --rights
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1/eventhubs/eventHubiothubfortest/authorizationRules/eventHubPolicyiothubfortest?api-version=2017-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1/eventhubs/eventHubiothubfortest/authorizationRules/eventHubPolicyiothubfortest","name":"eventHubPolicyiothubfortest","type":"Microsoft.EventHub/Namespaces/EventHubs/AuthorizationRules","location":"West
        US 2","properties":{"rights":["Send"]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '458'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub authorization-rule keys list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --namespace-name --eventhub-name --name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-eventhub/3.0.0 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest-1/eventhubs/eventHubiothubfortest/authorizationRules/eventHubPolicyiothubfortest/ListKeys?api-version=2017-04-01
  response:
    body:
      string: '{"primaryConnectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","secondaryConnectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=XubC7Xd4nDIXXnHNT+WKmib0Nmnn0xFgKCBc5rXdce8=;EntityPath=eventHubiothubfortest","primaryKey":"4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=","secondaryKey":"XubC7Xd4nDIXXnHNT+WKmib0Nmnn0xFgKCBc5rXdce8=","keyName":"eventHubPolicyiothubfortest"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '635'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:24:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":true,"reason":"Invalid","message":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '56'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H",
      "feedback": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount":
      10}}}, "sku": {"name": "F1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '571'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"code":400016,"httpStatusCode":"BadRequest","message":"Invalid PartitionCount
        4 - value must be between 2 and 2. If you contact a support representative
        please include this correlation identifier: aa009f70-a6fb-464d-bdbd-d276f4e7e7fb,
        timestamp: 2020-03-09 21:25:07Z, errorcode: IH400016."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":true,"reason":"Invalid","message":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '56'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H",
      "feedback": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount":
      10}}}, "sku": {"name": "F1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '571'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"code":400016,"httpStatusCode":"BadRequest","message":"Invalid PartitionCount
        4 - value must be between 2 and 2. If you contact a support representative
        please include this correlation identifier: 4bcc1682-eee2-4760-a1ca-2bf6143f985d,
        timestamp: 2020-03-09 21:25:09Z, errorcode: IH400016."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":true,"reason":"Invalid","message":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '56'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 2}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H",
      "feedback": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount":
      10}}}, "sku": {"name": "F1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '571'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","properties":{"state":"Activating","provisioningState":"Accepted","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":2},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":2}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"F1","tier":"Free","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTJjMTg0ZWUtMjU4YS00YTY3LWExMWYtY2FjYjdkNWVhOTY2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '1147'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTJjMTg0ZWUtMjU4YS00YTY3LWExMWYtY2FjYjdkNWVhOTY2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:25:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTJjMTg0ZWUtMjU4YS00YTY3LWExMWYtY2FjYjdkNWVhOTY2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx91Q=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":2,"partitionIds":["0","1"],"path":"iothub-ehub-iot-hub-fo-3055639-4a78e77cde","endpoint":"sb://ihsuprodmwhres008dednamespace.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"F1","tier":"Free","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1661'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx91Q=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":2,"partitionIds":["0","1"],"path":"iothub-ehub-iot-hub-fo-3055639-4a78e77cde","endpoint":"sb://ihsuprodmwhres008dednamespace.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"F1","tier":"Free","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17889'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYWU3NWVjMjgtZjg2OC00ZmYxLTkzMmMtYzEzYTYxMzNmODJh?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:26 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYWU3NWVjMjgtZjg2OC00ZmYxLTkzMmMtYzEzYTYxMzNmODJh?api-version=2019-03-22-preview&operationSource=os_ih
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYWU3NWVjMjgtZjg2OC00ZmYxLTkzMmMtYzEzYTYxMzNmODJh?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":true,"reason":"Invalid","message":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '56'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2020-03-09T21:21:42Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 3, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"ttlAsIso8601": "PT20H", "maxDeliveryCount": 79}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 89, "defaultTtlAsIso8601": "PT23H",
      "feedback": {"lockDurationAsIso8601": "PT35S", "ttlAsIso8601": "P1DT5H", "maxDeliveryCount":
      40}}}, "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '576'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","properties":{"state":"Activating","provisioningState":"Accepted","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '1156'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:26:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:27:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:27:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:28:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:28:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOWI3MTVjYjEtNjYyOC00MzM4LTljNDktNjRlY2ZjYTU5ZTA5?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count --retention-day --c2d-ttl --c2d-max-delivery-count
        --feedback-ttl --feedback-lock-duration --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1665'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/iothubowner/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/iothubowner/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g --all
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '905'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --all
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAAAAvx+WY=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1167'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx+WY=''}'
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+WY=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:28:09 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:28:09 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:28:09 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:28:09 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:28:09 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:28:09 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:28:09 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:28:09 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZmE3MzBmZTEtMzMxOC00NjkyLWFhOGYtOGI5NTFkNDNmODVm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4322'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:29:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZmE3MzBmZTEtMzMxOC00NjkyLWFhOGYtOGI5NTFkNDNmODVm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list
      Connection:
      - keep-alive
      ParameterSetName:
      - -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1805'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list-skus
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list-skus
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/skus?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S1","tier":"Standard"},"capacity":{"minimum":1,"maximum":200,"default":1,"scaleType":"Manual"}},{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S2","tier":"Standard"},"capacity":{"minimum":1,"maximum":200,"default":1,"scaleType":"Manual"}},{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S3","tier":"Standard"},"capacity":{"minimum":1,"maximum":10,"default":1,"scaleType":"Manual"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '475'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '905'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAAAAvx+pw=", "properties":
      {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey": "acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=",
      "secondaryKey": "zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}, {"keyName": "service", "primaryKey": "NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=",
      "secondaryKey": "qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=", "rights": "ServiceConnect"},
      {"keyName": "device", "primaryKey": "pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=",
      "secondaryKey": "7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=", "rights": "DeviceConnect"},
      {"keyName": "registryRead", "primaryKey": "DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=",
      "secondaryKey": "EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=", "rights": "RegistryRead"},
      {"keyName": "registryReadWrite", "primaryKey": "hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=",
      "secondaryKey": "4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"}],
      "ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      Content-Length:
      - '2130'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx+pw=''}'
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+pw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"6J4IEQQHoKZjQGlIPfYZR7FxvGoJUbX5nsu3hx2PoBs=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:29:52 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:29:52 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:29:52 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:29:52 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:29:52 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:29:52 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:29:52 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:29:52 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMzFkZTQwM2QtNjgzMS00YmM2LTg0MzEtYjg3ODBkZmZkMmQ0?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4526'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMzFkZTQwM2QtNjgzMS00YmM2LTg0MzEtYjg3ODBkZmZkMmQ0?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+7M=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:30:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+7M=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"6J4IEQQHoKZjQGlIPfYZR7FxvGoJUbX5nsu3hx2PoBs=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1109'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+7M=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy show
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/test_policy/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"6J4IEQQHoKZjQGlIPfYZR7FxvGoJUbX5nsu3hx2PoBs=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+7M=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"6J4IEQQHoKZjQGlIPfYZR7FxvGoJUbX5nsu3hx2PoBs=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1109'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAAAAvx+7M=", "properties":
      {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey": "acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=",
      "secondaryKey": "zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}, {"keyName": "service", "primaryKey": "NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=",
      "secondaryKey": "qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=", "rights": "ServiceConnect"},
      {"keyName": "device", "primaryKey": "pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=",
      "secondaryKey": "7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=", "rights": "DeviceConnect"},
      {"keyName": "registryRead", "primaryKey": "DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=",
      "secondaryKey": "EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=", "rights": "RegistryRead"},
      {"keyName": "registryReadWrite", "primaryKey": "hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=",
      "secondaryKey": "4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "primaryKey": "JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=",
      "secondaryKey": "qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}], "ipFilterRules": [], "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '2256'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx+7M=''}'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx+7M=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:30:35 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:30:35 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:30:35 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:30:35 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:30:35 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:30:35 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:30:35 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:30:35 GMT"},{"KeyName":"test_policy","PrimaryKey":"6J4IEQQHoKZjQGlIPfYZR7FxvGoJUbX5nsu3hx2PoBs=","SecondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:30:35 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:30:35 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZDQ5Y2ZmNWYtNDVmYy00N2JiLWJiNzMtZjBhNWNiOWRmMGY1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4837'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:31:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZDQ5Y2ZmNWYtNDVmYy00N2JiLWJiNzMtZjBhNWNiOWRmMGY1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/test_policy/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/test_policy/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","secondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1109'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAAAAvx/I8=", "properties":
      {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey": "acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=",
      "secondaryKey": "zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}, {"keyName": "service", "primaryKey": "NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=",
      "secondaryKey": "qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=", "rights": "ServiceConnect"},
      {"keyName": "device", "primaryKey": "pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=",
      "secondaryKey": "7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=", "rights": "DeviceConnect"},
      {"keyName": "registryRead", "primaryKey": "DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=",
      "secondaryKey": "EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=", "rights": "RegistryRead"},
      {"keyName": "registryReadWrite", "primaryKey": "hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=",
      "secondaryKey": "4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "primaryKey": "qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=",
      "secondaryKey": "JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}], "ipFilterRules": [], "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '2256'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx/I8=''}'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/I8=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","secondaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:31:36 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:31:36 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:31:36 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:31:36 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:31:36 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:31:36 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:31:36 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:31:36 GMT"},{"KeyName":"test_policy","PrimaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","SecondaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:31:36 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:31:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYmQ5NDI1NTctODUyOS00MDFmLWEwMWMtOTUyYzJiYzMzNWQ2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4837'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYmQ5NDI1NTctODUyOS00MDFmLWEwMWMtOTUyYzJiYzMzNWQ2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/bc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/bc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/test_policy/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","secondaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:32:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/bc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","secondaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1109'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","secondaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1109'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAAAAvx/bc=", "properties":
      {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey": "acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=",
      "secondaryKey": "zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=", "rights": "RegistryWrite,
      ServiceConnect, DeviceConnect"}, {"keyName": "service", "primaryKey": "NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=",
      "secondaryKey": "qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=", "rights": "ServiceConnect"},
      {"keyName": "device", "primaryKey": "pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=",
      "secondaryKey": "7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=", "rights": "DeviceConnect"},
      {"keyName": "registryRead", "primaryKey": "DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=",
      "secondaryKey": "EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=", "rights": "RegistryRead"},
      {"keyName": "registryReadWrite", "primaryKey": "hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=",
      "secondaryKey": "4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=", "rights": "RegistryWrite"}],
      "ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '2044'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx/bc=''}'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/bc=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:32:33 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:32:33 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:32:33 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:32:33 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:32:33 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:32:33 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:32:33 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:32:33 GMT"},{"KeyName":"test_policy","PrimaryKey":"qXlnm+YPq1HgQHK3XVgLWxrhUWRrv4k5NVmJp0jhxts=","SecondaryKey":"JRJAQDM3QEQZRHlzMnlsZxBjBGEwbgxlNXhRRyhzVE4=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:32:33 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:32:33 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOThhMjJmOWEtZWYxMi00Nzc3LWFmZDAtNjlkMDM5NmYzMWFj?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4633'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOThhMjJmOWEtZWYxMi00Nzc3LWFmZDAtNjlkMDM5NmYzMWFj?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '905'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"properties":{"created":"Mon, 09 Mar 2020 21:33:43 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '400'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"properties":{"created":"Mon, 09 Mar 2020 21:33:43 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '400'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"properties":{"created":"Mon, 09 Mar 2020 21:28:02 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/%24Default","name":"$Default","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null},{"properties":{"created":"Mon,
        09 Mar 2020 21:33:43 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '825'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2019-03-22-preview
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:33:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"properties":{"created":"Mon, 09 Mar 2020 21:28:02 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/eventHubEndpoints/events/ConsumerGroups/%24Default","name":"$Default","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '424'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/jobs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '12'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name --job-id
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:33:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name --job-id
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/jobs/fake-job?api-version=2019-03-22-preview
  response:
    body:
      string: '{"code":404011,"httpStatusCode":"NotFound","message":"Job not found
        with ID ''fake-job''. If you contact a support representative please include
        this correlation identifier: 98bfd8d4-ec92-40cb-8220-8c15c4e0b33e, timestamp:
        2020-03-09 21:34:00Z, errorcode: IH404011."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '265'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job cancel
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name --job-id
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job cancel
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name --job-id
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub job cancel
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name --job-id
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubKeys/iothubowner/listkeys?api-version=2019-03-22-preview
  response:
    body:
      string: '{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        iothubdeviceclient/2016-11-14 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: DELETE
    uri: https://iot-hub-for-test-1.azure-devices.net/jobs/fake-job?api-version=2016-11-14
  response:
    body:
      string: '{"Message":"ErrorCode:JobNotFound;NotFound","ExceptionMessage":"Tracking
        ID:9d6fe5037b9a4b4b8dc52bd6cee45d79-G:11-TimeStamp:03/09/2020 21:34:05"}'
    headers:
      content-length:
      - '145'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:04 GMT
      iothub-errorcode:
      - JobNotFound
      server:
      - Microsoft-HTTPAPI/2.0
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-quota-metrics
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-quota-metrics
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/quotaMetrics?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"name":"TotalMessages","currentValue":0,"maxValue":400000},{"name":"TotalDeviceCount","currentValue":0,"maxValue":1000000}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '135'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-stats
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18021'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-stats
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/IotHubStats?api-version=2019-03-22-preview
  response:
    body:
      string: '{"totalDeviceCount":0,"enabledDeviceCount":0,"disabledDeviceCount":0}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '69'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:34:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1793'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvx/nw=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [{"connectionString": "Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest",
      "name": "Event1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": []}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '1485'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx/nw=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/nw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:33:15 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:33:15 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:33:15 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:33:15 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:33:15 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:33:15 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:33:15 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:33:15 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjg3YjExYTQtMDMxOC00MWIyLWIzMTYtOWEzNmM4Y2JhMWM1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4761'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjg3YjExYTQtMDMxOC00MWIyLWIzMTYtOWEzNmM4Y2JhMWM1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2197'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:34:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2197'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:34:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2197'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:34:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2197'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:34:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2197'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvx/6c=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [{"connectionString": "Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest",
      "name": "Event1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '2033'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvx/6c=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvx/6c=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:34:23 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:34:23 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:34:23 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:34:23 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:34:23 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:34:23 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:34:23 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:34:23 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYmRhNGM5YmYtNmMxZi00Yzc4LWJhY2MtMDlmMGQ3ZTRkMzc2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5371'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:34:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYmRhNGM5YmYtNmMxZi00Yzc4LWJhY2MtMDlmMGQ3ZTRkMzc2?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:35:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyADQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2723'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:35:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:35:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:35:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyADQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2723'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:35:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyADQ=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [{"connectionString": "Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest",
      "name": "Event1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [{"name":
      "route1", "source": "devicemessages", "condition": "true", "endpointNames":
      ["Event1"], "isEnabled": true}], "fallbackRoute": {"name": "$fallback", "source":
      "DeviceMessages", "condition": "true", "endpointNames": ["events"], "isEnabled":
      true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      Content-Length:
      - '2064'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyADQ=''}'
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyADQ=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:35:04 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:35:04 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:35:04 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:35:04 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:35:04 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:35:04 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:35:04 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:35:04 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzg4NjY3MDAtYjE1Ny00ODY1LWExZGUtODQwNmJiYTE2ZTk3?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5477'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:35:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzg4NjY3MDAtYjE1Ny00ODY1LWExZGUtODQwNmJiYTE2ZTk3?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzg4NjY3MDAtYjE1Ny00ODY1LWExZGUtODQwNmJiYTE2ZTk3?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:36:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:36:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:36:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"message": {}, "route": {"name": "route1", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["Event1"], "isEnabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '141'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/routing/routes/$testnew?api-version=2019-03-22-preview
  response:
    body:
      string: '{"result":"true"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"routingSource": "devicemessages", "message": {}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '50'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/routing/routes/$testall?api-version=2019-03-22-preview
  response:
    body:
      string: '{"routes":[{"properties":{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:36:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyAWA=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [{"connectionString": "Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest",
      "name": "Event1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [{"name":
      "route1", "source": "twinchangeevents", "condition": "true", "endpointNames":
      ["Event1"], "isEnabled": true}], "fallbackRoute": {"name": "$fallback", "source":
      "DeviceMessages", "condition": "true", "endpointNames": ["events"], "isEnabled":
      true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2066'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyAWA=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAWA=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:03 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:03 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:03 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:03 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:03 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:03 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:03 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:03 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMWNkNjJjZjItYWQyYS00N2IwLWE3ODAtNmFlNWE3ZTQ0N2Vl?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5479'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:36:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMWNkNjJjZjItYWQyYS00N2IwLWE3ODAtNmFlNWE3ZTQ0N2Vl?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAnw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2831'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:37:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAnw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2831'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyAnw=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [{"connectionString": "Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest",
      "name": "Event1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      Content-Length:
      - '1949'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyAnw=''}'
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyAnw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:59 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:59 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:59 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:59 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:59 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:59 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:36:59 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:36:59 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=4n1cykK9D4DlvLgx3aOcSZtJKv3ZnQBa9lDYLGjR2UU=;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzVjYTIwMjAtY2QyOS00ZTEyLWFkNmItN2E5OTU0MmY3Y2Nm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5371'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzVjYTIwMjAtY2QyOS00ZTEyLWFkNmItN2E5OTU0MmY3Y2Nm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyA0A=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2723'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:37:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:37:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyA0A=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest-1.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest","name":"Event1","id":"2746bce7-ca16-4612-a979-cf9c2b6e6e92","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2723'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyA0A=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '1582'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyA0A=''}'
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyA0A=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:37:37 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:37:37 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:37:37 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:37:37 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:37:37 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:37:37 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:37:37 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:37:37 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTYwYmRkMzQtMTA5Yi00M2ZkLWFmZmQtODJlNTI4MWRkNDZh?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4932'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTYwYmRkMzQtMTA5Yi00M2ZkLWFmZmQtODJlNTI4MWRkNDZh?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBCg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub devicestream show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:38:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub devicestream show
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub devicestream show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBCg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:38:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBCg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyBCg=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments": [{"key":
      "key", "value": "value", "endpointNames": ["events", "fake_endpoint"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '1679'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyBCg=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"code":400131,"httpStatusCode":"BadRequest","message":"Enrichment
        has an undefined endpoint, Enrichment Key:key, EndpointName:fake_endpoint.
        If you contact a support representative please include this correlation identifier:
        1a606795-a879-4538-aef0-12dbeab27c81, timestamp: 2020-03-09 21:38:43Z, errorcode:
        IH400131."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:38:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBCg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyBCg=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments": [{"key":
      "key", "value": "value", "endpointNames": ["events"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '1662'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyBCg=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBCg=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:13 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:13 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:13 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:13 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:13 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:13 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:13 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:13 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMWI4YjlhMDYtMDhhYS00NjRkLWFjYTItOTVlZDA1NzMxNDFk?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5005'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:38:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMWI4YjlhMDYtMDhhYS00NjRkLWFjYTItOTVlZDA1NzMxNDFk?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBOk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:39:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBOk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:39:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBOk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyBOk=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments": [{"key":
      "key", "value": "value", "endpointNames": ["events", "fake_endpoint"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '1679'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyBOk=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"code":400131,"httpStatusCode":"BadRequest","message":"Enrichment
        has an undefined endpoint, Enrichment Key:key, EndpointName:fake_endpoint.
        If you contact a support representative please include this correlation identifier:
        5ecb6797-2c84-4ea0-833e-288ec39f28c2, timestamp: 2020-03-09 21:39:26Z, errorcode:
        IH400131."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:39:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBOk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyBOk=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments": [{"key":
      "key", "value": "value", "endpointNames": ["events"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '1662'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyBOk=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBOk=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:55 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:55 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:55 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:55 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:55 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:55 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:38:55 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:38:55 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMDc0NWIxNWYtZTQ3Ni00ZmQ2LWIzNDEtODU0YmQxN2RiZDM1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5005'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:39:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMDc0NWIxNWYtZTQ3Ni00ZmQ2LWIzNDEtODU0YmQxN2RiZDM1?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBV4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:40:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBV4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:40:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBV4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:40:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBV4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"location": "westus2", "tags": {}, "etag": "AAAAAAvyBV4=", "properties":
      {"ipFilterRules": [], "eventHubEndpoints": {"events": {"retentionTimeInDays":
      4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues": [],
      "serviceBusTopics": [], "eventHubs": [], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "name": "Storage1", "subscriptionId": "a386d5ea-ea90-441a-8263-d816368c84a1",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1", "fileNameFormat":
      "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}]}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments": []},
      "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****",
      "containerName": "iothubcontainer1"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT1M", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '1601'
      Content-Type:
      - application/json; charset=utf-8
      If-Match:
      - '{''IF-MATCH'': ''AAAAAAvyBV4=''}'
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBV4=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","secondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","secondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"pIGEMlpYmtjnMe6RlqpDtIyfSWcZdiTWx2bIRvYziPk=","secondaryKey":"7pR9lXFhf2M9HubLlSSF/eLTyF93YpzK1viq5SMGyDI=","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"DTghK+k+pjR6GlPovIGeSE6MPtlUPcConzlc0LLZQIc=","secondaryKey":"EdH5Ajnpk0qN1T6ksZTNhTvGY97xM8zGSfSgkukMg84=","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"hr1ZxJpa3y4I0gKSBp/UrAqq5HIUA1/1brxe/fS4niQ=","secondaryKey":"4UiUMa2o9SsF9ykbi5yzpqAftN9we0HW+oo0SXM2F/E=","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/","internalAuthorizationPolicies":[{"KeyName":"scaleunitsend-d46debba-b49d-4550-9b39-0ed30a07173b-iothub","PrimaryKey":"OTXRjZHgCzAyzXA/DLZDF2Mjf/4cRcZUOTHctITZTwU=","SecondaryKey":"0xd6K6FIL8wDq8NH8Qs082w+7HvzTFVnxRmwTGOU6D8=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:39:39 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:39:39 GMT"},{"KeyName":"owner-a7f3de9b-4f14-403c-a12e-2245b7f6eaab-iothub","PrimaryKey":"SNUbueGukQS7fOGeXmGdWW87aKBVkxv9MEvCsdNhsVI=","SecondaryKey":"63xXoUpwI9ekGYvBFT8A/ZBtsm9BtlRtJgWlfnRcIRE=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen","Manage","Send"],"CreatedTime":"Mon,
        09 Mar 2020 21:39:39 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:39:39 GMT"}],"authorizationPolicies":[{"KeyName":"iothubowner","PrimaryKey":"acwgCYEg2tWTOuj8nI5Wvtmg8hFgC1amB499e1+nnvQ=","SecondaryKey":"zpPwy9o/JniYsgjmXj55EATeDcvvCZsjFMTucxgHIbY=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:39:39 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:39:39 GMT"},{"KeyName":"service","PrimaryKey":"NtGgJXwzm1aZ13gbFTn+jGj2JFolqfigwdLAOECNHN4=","SecondaryKey":"qDz/M5MZJ73z91oUfdFif257FNLdWxRF/o9+9Swz8Ds=","ClaimType":"SharedAccessKey","ClaimValue":"None","Rights":["Listen"],"CreatedTime":"Mon,
        09 Mar 2020 21:39:39 GMT","ModifiedTime":"Mon, 09 Mar 2020 21:39:39 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZGRjYTRkNTMtYjY5MS00ZmY1LWIyMzQtOGM5MTViY2RjMTJm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4949'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZGRjYTRkNTMtYjY5MS00ZmY1LWIyMzQtOGM5MTViY2RjMTJm?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBfc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2336'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:40:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyBfc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-3f56d8dfa2.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2336'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"failoverRegion": "West Central US"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1/failover?api-version=2019-03-22-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:40:48 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:41:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:41:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:42:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:42:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:43:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:43:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:44:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:44:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:45:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:45:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:46:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:46:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:47:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:47:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:48:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:48:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODNhNmNjMmMtZDFkYy00MzBkLWI3ZDgtMmNmNGU4MDRlZTdi?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-resource/8.0.1 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 09 Mar 2020 21:49:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '30'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2019-03-22-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-1'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '110'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyDqU=","properties":{"locations":[{"location":"West
        Central US","role":"primary"},{"location":"West US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-5c9e41b1db.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2336'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2019-03-22-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/logs-hub","name":"logs-hub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAtSozQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[{"filterName":"test_1","action":"Reject","ipMask":"123.1.1.1"},{"filterName":"test_21","action":"Reject","ipMask":"11.1.1.1"}],"hostName":"logs-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"logs-hub","endpoint":"sb://iothub-ns-logs-hub-1757890-51a967930d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"enrichments":[{"key":"test","value":"test","endpointNames":["events"]}],"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":false}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/TestIotExt1","name":"TestIotExt1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtS5ak=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"TestIotExt1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testiotext1","endpoint":"sb://iothub-ns-testiotext-2312279-f90eed5388.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/AddOnHub","name":"AddOnHub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAttm9o=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"AddOnHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"addonhub","endpoint":"sb://iothub-ns-addonhub-2356736-922c3306ac.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PaymaunHub","name":"PaymaunHub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtifu0=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PaymaunHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"paymaunhub","endpoint":"sb://iothub-ns-paymaunhub-2363588-460f33d1a4.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=testiotextstor0;AccountKey=****","containerName":"devices"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rk-iot-rg/providers/Microsoft.Devices/IotHubs/ryan-testhub","name":"ryan-testhub","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"rk-iot-rg","etag":"AAAAAAvdCxk=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ryan-testhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"ryan-testhub","endpoint":"sb://iothub-ns-ryan-testh-2518193-ff7820fd43.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":104857600,"encoding":"avro","name":"teststorageendpoint","id":"84c039cc-8127-4cab-bc45-5c82f2b0674a","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"rk-iot-rg"}]},"routes":[{"name":"test","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true},{"name":"test_storage_route","source":"DeviceMessages","condition":"true","endpointNames":["teststorageendpoint"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"P1D","connectionString":"DefaultEndpointsProtocol=https;AccountName=rkdatalake;AccountKey=****","containerName":"test"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT48H","maxDeliveryCount":100}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/Testing_Houman/providers/Microsoft.Devices/IotHubs/testHP","name":"testHP","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"Testing_Houman","etag":"AAAAAAttTU4=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"testHP.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"testhp","endpoint":"sb://iothub-ns-testhp-2634624-42af86f47d.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/ProHub","name":"ProHub","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAtTNAg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"ProHub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"prohub","endpoint":"sb://iothub-ns-prohub-2773227-3cde9e3ef9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-int","name":"upx-adu-int","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMFQg=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-int.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-int","endpoint":"sb://iothub-ns-upx-adu-in-3020691-340db736ec.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/ADU/providers/Microsoft.Devices/IotHubs/upx-adu-prod","name":"upx-adu-prod","type":"Microsoft.Devices/IotHubs","location":"centralus","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"ADU","etag":"AAAAAAvMF70=","properties":{"locations":[{"location":"Central
        US","role":"primary"},{"location":"East US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"upx-adu-prod.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"upx-adu-prod","endpoint":"sb://iothub-ns-upx-adu-pr-3020700-04500165c8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/TestCLI/providers/Microsoft.Devices/IotHubs/PartitionTest","name":"PartitionTest","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"TestCLI","etag":"AAAAAAvhi3s=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"PartitionTest.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"partitiontest","endpoint":"sb://iothub-ns-partitiont-3040621-f2570be7f9.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1","name":"iot-hub-for-test-1","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a386d5ea-ea90-441a-8263-d816368c84a1","resourcegroup":"clitest.rg000001","etag":"AAAAAAvyDqU=","properties":{"locations":[{"location":"West
        Central US","role":"primary"},{"location":"West US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-1.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-1","endpoint":"sb://iothub-ns-iot-hub-fo-3055644-5c9e41b1db.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"2ca399e9-62e4-4d4a-aaaf-b9018d76ec42","subscriptionId":"a386d5ea-ea90-441a-8263-d816368c84a1","resourceGroup":"clitest.rg000001"}]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=iothubteststorage1;AccountKey=****","containerName":"iothubcontainer1"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '18564'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-1?api-version=2019-03-22-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNzZmZTE3NGEtYWQ1Mi00M2RhLTg1ZjAtMWFjZjkxZjMxODFl?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:49:46 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNzZmZTE3NGEtYWQ1Mi00M2RhLTg1ZjAtMWFjZjkxZjMxODFl?api-version=2019-03-22-preview&operationSource=os_ih
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.7.1 (Windows-10-10.0.18362-SP0) msrest/0.6.11 msrest_azure/0.6.2
        azure-mgmt-iothub/0.8.2 Azure-SDK-For-Python AZURECLI/2.2.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNzZmZTE3NGEtYWQ1Mi00M2RhLTg1ZjAtMWFjZjkxZjMxODFl?api-version=2019-03-22-preview&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Mar 2020 21:50:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
