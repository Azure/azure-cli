interactions:
- request:
    body: '{"location": "eastus", "properties": {"publicNetworkAccessForIngestion":
      "Enabled", "publicNetworkAccessForQuery": "Enabled", "retentionInDays": 30,
      "sku": {"name": "PerGB2018"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - monitor log-analytics workspace create
      Connection:
      - keep-alive
      Content-Length:
      - '179'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --location --workspace-name
      User-Agent:
      - AZURECLI/2.60.0 azsdk-python-core/1.28.0 Python/3.8.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/connection_monitor_v2_test_000001/providers/Microsoft.OperationalInsights/workspaces/clitest000002?api-version=2023-09-01
  response:
    body:
      string: '{"properties":{"customerId":"bd2d014d-19d7-4427-9a1e-2635cbee872a","provisioningState":"Creating","sku":{"name":"PerGB2018","lastSkuUpdate":"2024-06-12T09:22:30.2292283Z"},"retentionInDays":30,"features":{"legacy":0,"searchVersion":1,"enableLogAccessUsingOnlyResourcePermissions":true},"workspaceCapping":{"dailyQuotaGb":-1.0,"quotaNextResetTime":"2024-06-12T21:00:00Z","dataIngestionStatus":"RespectQuota"},"publicNetworkAccessForIngestion":"Enabled","publicNetworkAccessForQuery":"Enabled","createdDate":"2024-06-12T09:22:30.2292283Z","modifiedDate":"2024-06-12T09:22:30.2292283Z"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/connection_monitor_v2_test_000001/providers/Microsoft.OperationalInsights/workspaces/clitest000002","name":"clitest000002","type":"Microsoft.OperationalInsights/workspaces","etag":"\"67009835-0000-0100-0000-666968d60000\""}'
    headers:
      access-control-allow-origin:
      - '*'
      api-supported-versions:
      - 2015-03-20, 2020-08-01, 2020-10-01, 2021-06-01, 2022-10-01, 2023-09-01
      cache-control:
      - no-cache
      content-length:
      - '900'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 12 Jun 2024 09:22:30 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/connection_monitor_v2_test_000001/providers/Microsoft.OperationalInsights/workspaces/clitest000002?api-version=2023-09-01
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:e6336c63-aab2-45f0-996a-e5dbab2a1508
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: CAA7CB690F7B40C0808EB2FEB3463B9B Ref B: MAA201060514035 Ref C: 2024-06-12T09:22:26Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - monitor log-analytics workspace create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --location --workspace-name
      User-Agent:
      - AZURECLI/2.60.0 azsdk-python-core/1.28.0 Python/3.8.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/connection_monitor_v2_test_000001/providers/Microsoft.OperationalInsights/workspaces/clitest000002?api-version=2023-09-01
  response:
    body:
      string: '{"properties":{"customerId":"bd2d014d-19d7-4427-9a1e-2635cbee872a","provisioningState":"Creating","sku":{"name":"PerGB2018","lastSkuUpdate":"2024-06-12T09:22:30.2292283Z"},"retentionInDays":30,"features":{"legacy":0,"searchVersion":1,"enableLogAccessUsingOnlyResourcePermissions":true},"workspaceCapping":{"dailyQuotaGb":-1.0,"quotaNextResetTime":"2024-06-12T21:00:00Z","dataIngestionStatus":"RespectQuota"},"publicNetworkAccessForIngestion":"Enabled","publicNetworkAccessForQuery":"Enabled","createdDate":"2024-06-12T09:22:30.2292283Z","modifiedDate":"2024-06-12T09:22:30.2292283Z"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/connection_monitor_v2_test_000001/providers/Microsoft.OperationalInsights/workspaces/clitest000002","name":"clitest000002","type":"Microsoft.OperationalInsights/workspaces","etag":"\"67009835-0000-0100-0000-666968d60000\""}'
    headers:
      access-control-allow-origin:
      - '*'
      api-supported-versions:
      - 2015-03-20, 2020-08-01, 2020-10-01, 2021-06-01, 2022-10-01, 2023-09-01
      cache-control:
      - no-cache
      content-length:
      - '900'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 12 Jun 2024 09:22:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-context:
      - appId=cid-v1:e6336c63-aab2-45f0-996a-e5dbab2a1508
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 92CCFC24E74E405AB937EB7B87F85EC7 Ref B: MAA201060514035 Ref C: 2024-06-12T09:22:30Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network watcher connection-monitor output list
      Connection:
      - keep-alive
      ParameterSetName:
      - --location --connection-monitor
      User-Agent:
      - AZURECLI/2.60.0 azsdk-python-core/1.28.0 Python/3.8.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/networkWatchers?api-version=2022-01-01
  response:
    body:
      string: '{"value":[{"name":"NetworkWatcher_westus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westus","etag":"W/\"9ee17509-9f09-4c24-9afa-17af01ee9d8c\"","type":"Microsoft.Network/networkWatchers","location":"westus","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_eastus","etag":"W/\"eba871f5-0356-48e7-b99b-b43d77ee2681\"","type":"Microsoft.Network/networkWatchers","location":"eastus","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"nwcmtest-team-internal1234-diagnostics-networkwatcher-westeurope","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/nwcmtest-team-internal1234-diagnostics-networkwatcher-westeurope/providers/Microsoft.Network/networkWatchers/nwcmtest-team-internal1234-diagnostics-networkwatcher-westeurope","etag":"W/\"b098d3bc-75c5-4566-a0ee-1072da189dbc\"","type":"Microsoft.Network/networkWatchers","location":"westeurope","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_eastus2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_eastus2","etag":"W/\"32d1e9f4-84c6-4a4e-9125-806616c2e6a6\"","type":"Microsoft.Network/networkWatchers","location":"eastus2","properties":{"provisioningState":"Deleting","runningOperationIds":[]}},{"name":"NetworkWatcher_westcentralus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westcentralus","etag":"W/\"2f363d7b-b86d-4a5e-8fff-0eede96ac7ee\"","type":"Microsoft.Network/networkWatchers","location":"westcentralus","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_westus2","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_westus2","etag":"W/\"7e93220d-ee08-4844-85e4-eb67550bda5d\"","type":"Microsoft.Network/networkWatchers","location":"westus2","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_uksouth","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_uksouth","etag":"W/\"bdc53e1c-db21-4a59-94e5-241b4f45487c\"","type":"Microsoft.Network/networkWatchers","location":"uksouth","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_norwayeast","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/SanthoshRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_norwayeast","etag":"W/\"86450203-330c-4541-9800-60bc81e5100a\"","type":"Microsoft.Network/networkWatchers","location":"norwayeast","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_italynorth","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_italynorth","etag":"W/\"4b23f718-e5df-40f9-9301-a1eaca92c618\"","type":"Microsoft.Network/networkWatchers","location":"italynorth","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_centraluseuap","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_centraluseuap","etag":"W/\"75b437ac-10b7-41a2-9768-e26dae98e30a\"","type":"Microsoft.Network/networkWatchers","location":"centraluseuap","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}},{"name":"NetworkWatcher_eastus2euap","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_eastus2euap","etag":"W/\"da74b460-17cb-47b2-be02-120947efc49d\"","type":"Microsoft.Network/networkWatchers","location":"eastus2euap","properties":{"provisioningState":"Succeeded","runningOperationIds":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4379'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 12 Jun 2024 09:22:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - cb7200ee-377d-4b62-8aaa-c54450862054
      - ef719c5d-61cf-48e3-9a04-4355b41f0e43
      - c9524091-29f0-417f-aa7f-fa2f37f7993e
      - bb885646-767c-4c06-8ed6-769a4f22a816
      - 97a3bb10-b554-4d93-bc2b-f54eece74962
      - c1404b71-de6a-409b-b8b7-36ee1f7933f8
      - 2d265d58-b41a-44f6-a3e2-372bffe9d976
      - 9d523d25-e476-4292-886b-fef7d7b781f2
      - 288a4f21-f630-4c25-a81b-f8bf595e5281
      - 645dbf84-5191-4db5-9b54-43e943ff3a43
      - 83fd61e3-f4b2-4299-bba4-bef5b1f07e64
      x-msedge-ref:
      - 'Ref A: 6CBEC755E5804525823980688BB54131 Ref B: MAA201060513053 Ref C: 2024-06-12T09:22:33Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network watcher connection-monitor output list
      Connection:
      - keep-alive
      ParameterSetName:
      - --location --connection-monitor
      User-Agent:
      - AZURECLI/2.60.0 azsdk-python-core/1.28.0 Python/3.8.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_eastus/connectionMonitors/CMv2-01?api-version=2022-01-01
  response:
    body:
      string: "{\r\n  \"name\": \"CMv2-01\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/NetworkWatcherRG/providers/Microsoft.Network/networkWatchers/NetworkWatcher_eastus/connectionMonitors/CMv2-01\",\r\n
        \ \"etag\": \"W/\\\"eba871f5-0356-48e7-b99b-b43d77ee2681\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"resourceGuid\": \"d46f812c-71f2-448a-a297-9d654486ad0e\",\r\n
        \   \"endpoints\": [\r\n      {\r\n        \"name\": \"vm1\",\r\n        \"resourceId\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/connection_monitor_v2_test_d7n36fzgxmpzczsccgkbz3eqhibyy7q626q3rzmehocjhyw4/providers/Microsoft.Compute/virtualMachines/vm1\"\r\n
        \     },\r\n      {\r\n        \"name\": \"bing\",\r\n        \"address\":
        \"bing.com\"\r\n      }\r\n    ],\r\n    \"testConfigurations\": [\r\n      {\r\n
        \       \"name\": \"DefaultTestConfig\",\r\n        \"testFrequencySec\":
        60,\r\n        \"protocol\": \"Tcp\",\r\n        \"tcpConfiguration\": {\r\n
        \         \"port\": 2048,\r\n          \"disableTraceRoute\": false\r\n        }\r\n
        \     }\r\n    ],\r\n    \"testGroups\": [\r\n      {\r\n        \"name\":
        \"DefaultTestGroup\",\r\n        \"disable\": false,\r\n        \"testConfigurations\":
        [\r\n          \"DefaultTestConfig\"\r\n        ],\r\n        \"sources\":
        [\r\n          \"vm1\"\r\n        ],\r\n        \"destinations\": [\r\n          \"bing\"\r\n
        \       ]\r\n      }\r\n    ],\r\n    \"outputs\": [\r\n      {\r\n        \"type\":
        \"Workspace\",\r\n        \"workspaceSettings\": {\r\n          \"workspaceResourceId\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-9cece3e3-0f7d-47ca-af0e-9772773f90b7-eus\"\r\n
        \       }\r\n      }\r\n    ],\r\n    \"startTime\": \"2024-05-24T16:36:19.9766399Z\",\r\n
        \   \"connectionMonitorType\": \"MultiEndpoint\"\r\n  },\r\n  \"type\": \"Microsoft.Network/networkWatchers/connectionMonitors\",\r\n
        \ \"location\": \"eastus\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1852'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 12 Jun 2024 09:22:36 GMT
      etag:
      - W/"eba871f5-0356-48e7-b99b-b43d77ee2681"
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - fc6fa93d-368c-4d1c-a15e-4eb6eb557e94
      x-msedge-ref:
      - 'Ref A: 73C9D30B94664052BC7EF27C1E5F5860 Ref B: MAA201060514051 Ref C: 2024-06-12T09:22:35Z'
    status:
      code: 200
      message: OK
version: 1
