interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy assignment show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.Authorization/policyAssignments/2a47116300b347c599c4c4d3?api-version=2019-09-01
  response:
    body:
      string: '{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"chegg
        cli tmp","policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/e0efc13a-122a-47c5-b817-2ccfe5d12615","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test","notScopes":[],"parameters":{"ExecutionPolicy":{"value":"AllSigned"}},"description":"asdf","metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-12-09T19:28:03.8853753Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-12-09T19:34:17.8856984Z"},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"5ca72371-59ae-48ec-b5ce-b7b2b7e2a265","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.Authorization/policyAssignments/2a47116300b347c599c4c4d3","type":"Microsoft.Authorization/policyAssignments","name":"2a47116300b347c599c4c4d3","location":"eastus"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1096'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g -a
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments?api-version=2019-09-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"Test
        Modify initiative","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/55afae72-7df0-417b-9eb7-f756576c854a","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{},"description":"","metadata":{"assignedBy":"Robert
        Gao","parameterScopes":{},"createdBy":"0dc80135-ae53-4da3-8695-220a2d93aad8","createdOn":"2019-08-29T00:36:56.3908822Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-11-11T22:00:41.5492656Z"},"enforcementMode":"Default"},"identity":{"principalId":"48036e81-a2af-4e6c-9624-4908615cc36d","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3cf2c941d7b2418ca7b860e2","type":"Microsoft.Authorization/policyAssignments","name":"3cf2c941d7b2418ca7b860e2","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"chegg
        replace tag RG","policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/d157c373-a6c4-483d-aaad-570756956268","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{"tagName":{"value":"cheggReplaced"},"tagValue":{"value":"true_112019_246PM"}},"description":"","metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-11-06T23:26:56.0841235Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-11-20T22:46:27.8117346Z"},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"9f6b0b38-d4b1-43d7-9ec8-4905306fe6fa","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/98a7c096f5154b8eadd36f8c","type":"Microsoft.Authorization/policyAssignments","name":"98a7c096f5154b8eadd36f8c","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"[Preview]:
        Audit NIST SP 800-53 R4 controls and deploy specific VM Extensions to support
        audit requirements","policyDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/cf25b9c1-bd23-4eb6-bd2c-f4f3ac644a5f","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{"logAnalyticsWorkspaceIdforVMReporting":{"value":"fasdff"},"listOfResourceTypesWithDiagnosticLogsEnabled":{"value":["Microsoft.Network/applicationGateways","Microsoft.Automation/automationAccounts","Microsoft.ContainerInstance/containerGroups","Microsoft.ContainerRegistry/registries","Microsoft.ContainerService/managedClusters","Microsoft.Batch/batchAccounts","Microsoft.Cdn/profiles/endpoints","Microsoft.CognitiveServices/accounts","Microsoft.DocumentDB/databaseAccounts","Microsoft.DataFactory/factories","Microsoft.DataLakeAnalytics/accounts","Microsoft.DataLakeStore/accounts","Microsoft.EventGrid/eventSubscriptions","Microsoft.EventGrid/topics","Microsoft.EventHub/namespaces","Microsoft.Network/expressRouteCircuits","Microsoft.Network/azureFirewalls","Microsoft.HDInsight/clusters","Microsoft.Devices/IotHubs","Microsoft.KeyVault/vaults","Microsoft.Network/loadBalancers","Microsoft.Logic/integrationAccounts","Microsoft.Logic/workflows","Microsoft.DBforMySQL/servers","Microsoft.Network/networkInterfaces","Microsoft.Network/networkSecurityGroups","Microsoft.DBforPostgreSQL/servers","Microsoft.PowerBIDedicated/capacities","Microsoft.Network/publicIPAddresses","Microsoft.RecoveryServices/vaults","Microsoft.Cache/redis","Microsoft.Relay/namespaces","Microsoft.Search/searchServices","Microsoft.ServiceBus/namespaces","Microsoft.SignalRService/SignalR","Microsoft.Sql/servers/databases","Microsoft.Sql/servers/elasticPools","Microsoft.StreamAnalytics/streamingjobs","Microsoft.TimeSeriesInsights/environments","Microsoft.Network/trafficManagerProfiles","Microsoft.Compute/virtualMachines","Microsoft.Compute/virtualMachineScaleSets","Microsoft.Network/virtualNetworks","Microsoft.Network/virtualNetworkGateways"]},"listOfMembersToExcludeFromWindowsVMAdministratorsGroup":{"value":"cheggert"},"listOfMembersToIncludeInWindowsVMAdministratorsGroup":{"value":"rohitbh"}},"description":"This
        initiative includes audit and VM Extension deployment policies that address
        a subset of NIST SP 800-53 R4 controls. Additional policies will be added
        in upcoming releases. For more information, please visit https://aka.ms/nist80053-blueprint.","metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-11-20T22:11:26.047177Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-11-22T04:20:25.4141918Z"},"enforcementMode":"Default"},"identity":{"principalId":"c7519ca7-0d79-4b0f-af0b-0a4cfe3402d0","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/d17bc2764dae4ec1be07d178","type":"Microsoft.Authorization/policyAssignments","name":"d17bc2764dae4ec1be07d178","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"rohitbh:
        Key vault access policy (Always give Joel access)","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/3863c624-094c-480d-bc42-74970b55e5e1","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{"userObjectId":{"value":"644c17f7-2b49-4549-a67f-bcc0448cd850"}},"description":"Assignment
        description","metadata":{"assignedBy":"Rohit Bhardwaj","parameterScopes":{},"createdBy":"22ac4b8c-9194-4feb-b6c6-0e7a995fca2e","createdOn":"2019-03-26T00:12:03.5422031Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-11-12T22:23:50.9933459Z"},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"f12ee62c-35e6-45ec-b44b-13587ca23514","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/ebccc544c4dd43d29c937f0c","type":"Microsoft.Authorization/policyAssignments","name":"ebccc544c4dd43d29c937f0c","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"chegg:
        Replace tag without becoming compliant","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/270f0d11-af30-4c15-95f7-28ba884518f0","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{},"metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-11-21T00:28:49.7568462Z","updatedBy":null,"updatedOn":null},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"8b9d526a-9e43-4d1b-8bfe-cfe4d90f3b58","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/ee5909f9ee3f4c12bbed6efc","type":"Microsoft.Authorization/policyAssignments","name":"ee5909f9ee3f4c12bbed6efc","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"Empty
        deployment on each KeyVault resource (SUB)","policyDefinitionId":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest/providers/Microsoft.Authorization/policyDefinitions/78a38c70-5549-49bd-8a16-fe3619e5d2cf","scope":"/subscriptions/00000000-0000-0000-0000-000000000000","notScopes":[],"parameters":{},"description":"Deploys
        an empty deployment (with one output) on each KeyVault vault.  Used for some
        PolicyInsights SDK tests.","metadata":{"assignedBy":"Chris Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-11-21T17:43:53.4694168Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-11-21T17:44:38.1610927Z"},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"dfd2385a-7700-420f-b164-bd9ffb52285b","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/fcddeb6113ec43798567dce2","type":"Microsoft.Authorization/policyAssignments","name":"fcddeb6113ec43798567dce2","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"chegg
        cli tmp","policyDefinitionId":"/providers/Microsoft.Authorization/policyDefinitions/e0efc13a-122a-47c5-b817-2ccfe5d12615","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test","notScopes":[],"parameters":{"ExecutionPolicy":{"value":"AllSigned"}},"description":"asdf","metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-12-09T19:28:03.8853753Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-12-09T19:34:17.8856984Z"},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"5ca72371-59ae-48ec-b5ce-b7b2b7e2a265","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.Authorization/policyAssignments/2a47116300b347c599c4c4d3","type":"Microsoft.Authorization/policyAssignments","name":"2a47116300b347c599c4c4d3","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"Empty
        deployment on each KeyVault resource (MG)","policyDefinitionId":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest/providers/Microsoft.Authorization/policyDefinitions/78a38c70-5549-49bd-8a16-fe3619e5d2cf","scope":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest","notScopes":[],"parameters":{},"description":"Deploys
        an empty deployment (with one output) on each KeyVault vault.  Used for some
        PolicyInsights SDK tests.","metadata":{"assignedBy":"Chris Eggert","parameterScopes":{},"createdBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","createdOn":"2019-11-21T17:44:17.3643721Z","updatedBy":null,"updatedOn":null},"enforcementMode":"DoNotEnforce"},"identity":{"principalId":"067c1aa0-c425-4ad5-80fe-41d4639b1d42","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned"},"id":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest/providers/Microsoft.Authorization/policyAssignments/d80d743b97874fd3bfd1d539","type":"Microsoft.Authorization/policyAssignments","name":"d80d743b97874fd3bfd1d539","location":"eastus"},{"sku":{"name":"A0","tier":"Free"},"properties":{"displayName":"Audit
        tag at MG","policyDefinitionId":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest/providers/Microsoft.Authorization/policyDefinitions/03ae6c12-b46a-43f1-9f3d-c20620473106","scope":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest","notScopes":["/subscriptions/00000000-0000-0000-0000-000000000000"],"parameters":{},"metadata":{"assignedBy":"Chris
        Eggert","parameterScopes":{},"createdBy":"327c26bf-bf3e-4128-9b75-fbbd99e98739","createdOn":"2019-09-19T21:02:48.2629834Z","updatedBy":"36e2f355-d2e2-4fbc-88ab-4281639dff94","updatedOn":"2019-10-01T17:50:28.4254014Z"},"enforcementMode":"Default"},"id":"/providers/Microsoft.Management/managementGroups/AzGovPerfTest/providers/Microsoft.Authorization/policyAssignments/ef26e8bbc3da423ebf7fcb80","type":"Microsoft.Authorization/policyAssignments","name":"ef26e8bbc3da423ebf7fcb80"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '11729'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"policyAssignmentId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.Authorization/policyAssignments/2a47116300b347c599c4c4d3"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation create
      Connection:
      - keep-alive
      Content-Length:
      - '213'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g -a
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-policyinsights/0.3.1 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.PolicyInsights/remediations/azurecli-test-remediation000001?api-version=2018-07-01-preview
  response:
    body:
      string: '{"properties":{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.authorization/policyassignments/2a47116300b347c599c4c4d3","provisioningState":"Accepted","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:12.8692658Z","deploymentStatus":{"totalDeployments":2,"successfulDeployments":0,"failedDeployments":0},"resourceDiscoveryMode":"ExistingNonCompliant"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.policyinsights/remediations/azurecli-test-remediation000001","name":"azurecli-test-remediation000001","type":"Microsoft.PolicyInsights/remediations"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '757'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-policyinsights/0.3.1 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.PolicyInsights/remediations/azurecli-test-remediation000001?api-version=2018-07-01-preview
  response:
    body:
      string: '{"properties":{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.authorization/policyassignments/2a47116300b347c599c4c4d3","provisioningState":"Accepted","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:12.8692658Z","deploymentStatus":{"totalDeployments":2,"successfulDeployments":0,"failedDeployments":0},"resourceDiscoveryMode":"ExistingNonCompliant"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.policyinsights/remediations/azurecli-test-remediation000001","name":"azurecli-test-remediation000001","type":"Microsoft.PolicyInsights/remediations"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '757'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation list
      Connection:
      - keep-alive
      ParameterSetName:
      - -g
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-policyinsights/0.3.1 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.PolicyInsights/remediations?api-version=2018-07-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.authorization/policyassignments/2a47116300b347c599c4c4d3","provisioningState":"Running","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:15.7523935Z","deploymentStatus":{"totalDeployments":2,"successfulDeployments":0,"failedDeployments":0},"resourceDiscoveryMode":"ExistingNonCompliant"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.policyinsights/remediations/azurecli-test-remediation000001","name":"azurecli-test-remediation000001","type":"Microsoft.PolicyInsights/remediations"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '768'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '598'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation deployment list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-policyinsights/0.3.1 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.PolicyInsights/remediations/azurecli-test-remediation000001/listDeployments?api-version=2018-07-01-preview
  response:
    body:
      string: '{"value":[{"remediatedResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.compute/virtualmachines/cheggvm2","status":"Evaluating","resourceLocation":"westus2","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:15.736768Z"},{"remediatedResourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.compute/virtualmachines/cheggvm1","status":"Evaluating","resourceLocation":"eastus","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:15.6876601Z"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '641'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '598'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy remediation cancel
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.0 (Windows-10-10.0.18362-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-policyinsights/0.3.1 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/az-cli-policy-insights-test/providers/Microsoft.PolicyInsights/remediations/azurecli-test-remediation000001/cancel?api-version=2018-07-01-preview
  response:
    body:
      string: '{"properties":{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.authorization/policyassignments/2a47116300b347c599c4c4d3","provisioningState":"Cancelling","createdOn":"2019-12-09T19:53:12.5238887Z","lastUpdatedOn":"2019-12-09T19:53:17.7954419Z","deploymentStatus":{"totalDeployments":2,"successfulDeployments":0,"failedDeployments":0},"resourceDiscoveryMode":"ExistingNonCompliant"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/az-cli-policy-insights-test/providers/microsoft.policyinsights/remediations/azurecli-test-remediation000001","name":"azurecli-test-remediation000001","type":"Microsoft.PolicyInsights/remediations"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '759'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 09 Dec 2019 19:53:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
version: 1
