interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=displayName%20eq%20%27cli_test_sp_with_kv_new_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:29:50 GMT
      duration:
      - '2399928'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - YawNQr1dZQ305g4BraOh4D2uiFNsxdHpUlcdUQYyck0=
      ocp-aad-session-key:
      - XXmpdZbmzkTugJ65BUwyQCj8d3UKhYb5ZUeuffO3tpg2rW-Dp89eI--jwJj_Zb0AVLucFPAQmTWA5Eg8Kg916BlQDrhtBlBxLG3Prri8Tm89qVbTTtUS7o256RirgnpHKi9oJO8tHndsPWCl8HxizIaxE7sDx8igdGYWecbi8oc.E_8BmmxDUonmJuVj6QR7Pzni06-WSdKEUFwBA0HJFWQ
      pragma:
      - no-cache
      request-id:
      - bbd67dfe-7a68-48c0-a96b-5232f1cd2c09
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:29:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 13}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"a4be8227b4ff4c7e94d61f805d5cb8b2"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:29:53 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=a4be8227b4ff4c7e94d61f805d5cb8b2
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"a4be8227b4ff4c7e94d61f805d5cb8b2"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:29:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"a4be8227b4ff4c7e94d61f805d5cb8b2"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/d213cac25de44bf5a7622220d13b47ef","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/d213cac25de44bf5a7622220d13b47ef","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/d213cac25de44bf5a7622220d13b47ef","x5t":"c_8UIOvVP57E0Gq8WZ3JTn6RACs","cer":"MIIDQDCCAiigAwIBAgIQc1T2oQfGQhCW+F+lkNHUmDANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUxOTU2WhcNMjMwMzE3MDUyOTU2WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBAKo18uqcxwwFTud0rxj91fRPxyexvNve8eKOh1r1Pcb0CO2P3qHL74Z8F4DfbSAjWYnmf+xfIwntn13N6Cfd7DfjMve7+7oTQ0qhZfR90EAiB90Fq4aIe0rlDKG1nB32Hpgs1uW41g3E65VHivdsvfdc/lY2If/e7zvYDmi0duYVUGyk5TXr2UekqXrJq1+MHtQEHAcL34wVjp6dAdBUxhQMGH2v0sJu6JkJvI9DZuf6zkwVMnyG4SBO6GpAEu41zf41uYJru6prDdpElWyVU5wyKOX2EhliRYH3RPgctccz3AMrhnsvxu07VWeryGAbEGXe+IPbwiC2JgpbQlJeLvc=","attributes":{"enabled":true,"nbf":1645075196,"exp":1679030996,"created":1645075797,"updated":1645075797,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1645075793,"updated":1645075793}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_new_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:03 GMT
      duration:
      - '2349491'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Rq4v5lEboZ0Ynm8yTHts4KZB+bdecsqzrEzFNE6Z0Wg=
      ocp-aad-session-key:
      - ux8CmZea0RYEaiEP-crf736Sz-b9uTm7zoL1P0mL5VNdaRh_dFubD_RlkRKXLEkBX6rD0QlSe_yoLtFWlwOFNWs9Mv67CY3XlnOuggkUmdrhJ6h46gnbWPTvsGQLRjFQQtbHNjQGHs8d2wglLDpPKgXMIYP42--Zv9zo70z1gA4.cRBV29L7tFrYWpB2t2esRLN8J3KiT0RsO3CnVjBqMv4
      pragma:
      - no-cache
      request-id:
      - 8d331904-63a2-4093-9bd6-83d2c9bec1a3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "keyCredentials": [{"startDate": "2022-02-17T05:29:51.449006Z",
      "endDate": "2023-02-17T05:29:51.449006Z", "value": "MIIDQDCCAiigAwIBAgIQc1T2oQfGQhCW+F+lkNHUmDANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUxOTU2WhcNMjMwMzE3MDUyOTU2WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBAKo18uqcxwwFTud0rxj91fRPxyexvNve8eKOh1r1Pcb0CO2P3qHL74Z8F4DfbSAjWYnmf+xfIwntn13N6Cfd7DfjMve7+7oTQ0qhZfR90EAiB90Fq4aIe0rlDKG1nB32Hpgs1uW41g3E65VHivdsvfdc/lY2If/e7zvYDmi0duYVUGyk5TXr2UekqXrJq1+MHtQEHAcL34wVjp6dAdBUxhQMGH2v0sJu6JkJvI9DZuf6zkwVMnyG4SBO6GpAEu41zf41uYJru6prDdpElWyVU5wyKOX2EhliRYH3RPgctccz3AMrhnsvxu07VWeryGAbEGXe+IPbwiC2JgpbQlJeLvc=",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_new_cert000001",
      "identifierUris": []}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1444'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "3f1cffab-db1a-4c7f-a833-32a123cb7c92", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "b67a504d-1a24-4e40-b15f-6539c207d5b7",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_new_cert000001", "errorUrl": null,
        "groupMembershipClaims": null, "homepage": null, "identifierUris": [], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "73FF1420EBD53F9EC4D06ABC599DC94E7E91002B", "endDate": "2023-02-17T05:29:51.449006Z",
        "keyId": "88888888-0000-0000-0000-000000000001", "startDate": "2022-02-17T05:29:51.449006Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_new_cert000001 on behalf
        of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_new_cert000001",
        "id": "7ab1d854-5cfe-4b47-b334-737d73aff9b8", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_new_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_new_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2522'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:04 GMT
      duration:
      - '4800212'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - Y14Dpr6leD4UVfrzdRG1VJxF7/mw+HEvVSmSmtMwt80=
      ocp-aad-session-key:
      - vLOIR8Re7KDqWlnbKDJl4K2VcKkIAL54EpWdIOVL3u-wnRRwvAisJavbx6wkWoS8QZxfGIV4aeKNJ6tGHt_lKfbXQRvM8OT0L_poz9P8ddBMzfxaScY9dm62UvIyHKUg79ia5Yl0Y2ZNUkh30P1gt8-9gOKKvWitwZrm4ZLyZXQ.XopB0AfiPxERXLmYT5-ltdJUMknHRmq-lBkqwLNk-tk
      pragma:
      - no-cache
      request-id:
      - 867b18ff-38db-4c35-b63c-d372a86d117a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "b67a504d-1a24-4e40-b15f-6539c207d5b7"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --create-cert --keyvault --cert -n
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"51237fac-cf0f-443f-a6ca-0e811bea1c1c","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_new_cert000001","appId":"b67a504d-1a24-4e40-b15f-6539c207d5b7","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"7ab1d854-5cfe-4b47-b334-737d73aff9b8","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["b67a504d-1a24-4e40-b15f-6539c207d5b7"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1742'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:05 GMT
      duration:
      - '3188247'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/51237fac-cf0f-443f-a6ca-0e811bea1c1c/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - LmoegqZCop2sZTnyD3yNt8vInhxCwLu9olxb7rKTDRo=
      ocp-aad-session-key:
      - B-5UHA-FdXMqmuBDOl5b2Z6iqTgvrvNDTKFf3wfTwO_CY4gYVKBseLldivIs_1AYmdCB5d1ar4dmT2DFgS6OzZi0elJRoAWckhwCq4-q8Nnfdx9Kh0UxZ61isVweKSlpazzxYfTzc3O3RydNBDk89sBYDnEb4DeXZkVqBDe9GhY.w_q5BnnmDIqSmNtRRW2Jf3AYKMd4vnR00tyPvRR-szU
      pragma:
      - no-cache
      request-id:
      - e7b6c3ce-043e-49ff-8e32-d34b9bc064cf
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/d213cac25de44bf5a7622220d13b47ef","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/d213cac25de44bf5a7622220d13b47ef","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/d213cac25de44bf5a7622220d13b47ef","x5t":"c_8UIOvVP57E0Gq8WZ3JTn6RACs","cer":"MIIDQDCCAiigAwIBAgIQc1T2oQfGQhCW+F+lkNHUmDANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUxOTU2WhcNMjMwMzE3MDUyOTU2WjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBAKo18uqcxwwFTud0rxj91fRPxyexvNve8eKOh1r1Pcb0CO2P3qHL74Z8F4DfbSAjWYnmf+xfIwntn13N6Cfd7DfjMve7+7oTQ0qhZfR90EAiB90Fq4aIe0rlDKG1nB32Hpgs1uW41g3E65VHivdsvfdc/lY2If/e7zvYDmi0duYVUGyk5TXr2UekqXrJq1+MHtQEHAcL34wVjp6dAdBUxhQMGH2v0sJu6JkJvI9DZuf6zkwVMnyG4SBO6GpAEu41zf41uYJru6prDdpElWyVU5wyKOX2EhliRYH3RPgctccz3AMrhnsvxu07VWeryGAbEGXe+IPbwiC2JgpbQlJeLvc=","attributes":{"enabled":true,"nbf":1645075196,"exp":1679030996,"created":1645075797,"updated":1645075797,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1645075793,"updated":1645075793}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27%29%20or%20displayName%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"51237fac-cf0f-443f-a6ca-0e811bea1c1c","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_new_cert000001","appId":"b67a504d-1a24-4e40-b15f-6539c207d5b7","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"7ab1d854-5cfe-4b47-b334-737d73aff9b8","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["b67a504d-1a24-4e40-b15f-6539c207d5b7"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1745'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:07 GMT
      duration:
      - '4101752'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - YawNQr1dZQ305g4BraOh4D2uiFNsxdHpUlcdUQYyck0=
      ocp-aad-session-key:
      - fbNLPsJDuUEpzEGQfUZaj8CmXfRM1-IKohYlZUTJ_J_1WVSSid13k3Ge-SNII_JgXeK89jZ3TWT6xJtRS5mxY1HK6R8RnF7P5hjIZNq-ojEoBxhy8XzY7ROTVmX1pca2KpZKPWTUi6DioVeHx5LMEpvFbYG1fKmPnQukUv-8imM.Vxv6MBKbLzC1DSq7Rn1KVQAaSA8YQ14HOoufh6LWAek
      pragma:
      - no-cache
      request-id:
      - eda7aad8-d555-460f-961e-ba3a07311ee2
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:07 GMT
      duration:
      - '2371557'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - YawNQr1dZQ305g4BraOh4D2uiFNsxdHpUlcdUQYyck0=
      ocp-aad-session-key:
      - tN5EmbIMzZXmI9aTprhJa23qFWHMcDm_d3FZLJx6KETPP_03kGKXSSpgooDdf_Wi7WKh6yBQm95h_RykwfIrAin68ZXZ0srBRf2SygjK5Mc8rmVzEfIy83mVzFSuPk3lR1KGMOPqpyo7pzg3_bqPCR5BlTGWvG8oc5ihyTZOwnc.zfpD3Xmkj6FOMuqMTG-ZGfCJfnEgAdwW3mVjaG9OhAc
      pragma:
      - no-cache
      request-id:
      - 80e55749-76d5-4e8e-9140-815adefcc0dc
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f1cffab-db1a-4c7f-a833-32a123cb7c92","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b67a504d-1a24-4e40-b15f-6539c207d5b7","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"73FF1420EBD53F9EC4D06ABC599DC94E7E91002B","endDate":"2023-02-17T05:29:51.449006Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2022-02-17T05:29:51.449006Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"7ab1d854-5cfe-4b47-b334-737d73aff9b8","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2318'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:08 GMT
      duration:
      - '2618310'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y14Dpr6leD4UVfrzdRG1VJxF7/mw+HEvVSmSmtMwt80=
      ocp-aad-session-key:
      - SLjJFGcAnmlX8r-OzGVzeZ8mGCxaE61IdUqUXwjesjG4cBAyaq-4KYFpfaBDX2CPKVS5-qCKeh7eBEsD0bnEQTlASShJ1wmSLmA0LsFcZLFDGoy4MgZt3SZ_wEPkVwhCEfB_2KhYouidUgLtP-56iYzk84uubkWa7XWaexMJgJ0.sT_R_MWHSwzzfWNKWzkXJ0SGNJAEbSbnVNqhkKpHQJY
      pragma:
      - no-cache
      request-id:
      - d85b8e0b-7404-421b-8144-7cc53c174d7f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f1cffab-db1a-4c7f-a833-32a123cb7c92?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f1cffab-db1a-4c7f-a833-32a123cb7c92","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b67a504d-1a24-4e40-b15f-6539c207d5b7","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"73FF1420EBD53F9EC4D06ABC599DC94E7E91002B","endDate":"2023-02-17T05:29:51.449006Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2022-02-17T05:29:51.449006Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"7ab1d854-5cfe-4b47-b334-737d73aff9b8","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2315'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:09 GMT
      duration:
      - '2528544'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y2iXiMm2DZsPlDThXQrjP5np/vbJ131SFHRDIV8KDwA=
      ocp-aad-session-key:
      - eiaKTqXzqPaUHUCX96PLLYbt8Y6-SNWKxakuGUSCy9piA7nOd3qJjnYfei1gSMYP4ff_1TC4rDGGEwf1-YVCFkYAdXPZVGEu-12Oj8X1vcUB-ymppp5wHCKyH7d3Gx7U6GOJKB5ES0hzb6oUryUUHyjPXLHLbO522T_O4aFwVnE.Fh1CfFb_91NGT_QMUbPxP1J1xFgDGC1meRuT9Tr4v4k
      pragma:
      - no-cache
      request-id:
      - 29bdf684-0075-4f62-9e2e-8adbd61f6f02
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=KeyVault Generated", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 13}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '477'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"1387833d336a45bdad487f1255d1d814"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:11 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=1387833d336a45bdad487f1255d1d814
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"1387833d336a45bdad487f1255d1d814"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrTCCAZUCAQAwHTEbMBkGA1UEAxMSS2V5VmF1bHQgR2VuZXJhdGVkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuPXIdiFybjGysAB5G4PrDoNivPsqnL9DIgY5+/Nqyu1M1OMlHJAH7FtZTuxKbxJ4lFsZlmCe4pX6u2lgiyNonT2YAB840vezcDYSq9vStNm9EScVIKv0TqP/HDu9db0OhJOJKxut/9W4/q/63xt982aVZ/bwgjSaw+Kly3lsFc6ybtmwGdADBCgdqIbg1OoS6zSV/MdoMumIWd9lRUU7L+P533JAlf7zSOp/ddw5UXsOw+0fGcgA0rJ5d/y/V5LfcAIjZL10LYd0sIS6alvZlcfgkxsFiIHaLC/HgqSmB/jjAGtr3pqa8MjUcnXfyOPincppDOm3TUF1oQLbAHp7mQIDAQABoEswSQYJKoZIhvcNAQkOMTwwOjAOBgNVHQ8BAf8EBAMCAb4wHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAkGA1UdEwQCMAAwDQYJKoZIhvcNAQELBQADggEBAFjOm0opE40P1TeDe5Mj/QNOgcyMwhOo+9fCbm460EgXSyB5JraV6G7c7XeIvUUOhGh3nKz/vOos9tsJ8QKipKU6ZCQ2X0uZhi0YdS7WDcpdvkyT6tHE718fqXhthTRmtxM4h37eLWsS9tywYshYjg+nSS2knKfam0gyMyR02EPwNX37C4h0J9wiSDaUOdcXMEu1jjRamhVVN1pGo/qh6PpMsMHnV2lx+3A9nWRi/VhnxbLrhBfEP/+GvkVxLnM4+qYxGyzjjGsEp4pZ1WVAKeM1dKcM8HjKHVT/X9MkvTe+6r5f9dOmh8QrTwChpdcpZyfi4O3jMqQeU7LbKkfUjr0=","cancellation_requested":false,"status":"completed","target":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1","request_id":"1387833d336a45bdad487f1255d1d814"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1213'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/11d3f792dec84536a48560dc81c607ed","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/11d3f792dec84536a48560dc81c607ed","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/11d3f792dec84536a48560dc81c607ed","x5t":"2mPrEKlF8TkcSXsmhVsjaCOiPl8","cer":"MIIDQDCCAiigAwIBAgIQKPoL51XtQ3Ggf9quF/HoFjANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUyMDEzWhcNMjMwMzE3MDUzMDEzWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBACrFHvQe9M3/g8i09SchXCng0ZY00TUZZOo0UyrJajZauX71mFeRH/MjVF7WCeTd950b1oq57N/liIV4LcnbfJXEN2cXhrd6cyF7FEXvpSmkiiIBtPloyqIjnAG/beIM739xY6/EQL5ImKLb2rgLmiWOI9B89q8FDesGxvaoU+WYZLyuqRHtNPCvpigBsc7keiirk2IDvc5JeNPxlR5B/t7DwD2ahJGF/v4zHA+xreVfT3cBVAEoYqoWGyxWTMGLObUyIh2gF7MWYtL/xyUInXcaMmLR8gp/FShGhMdY1Jrgj/38rXkDxYSRd/aBgjHzuQyDKblkLKCAQM59NxT6C4Q=","attributes":{"enabled":true,"nbf":1645075213,"exp":1679031013,"created":1645075813,"updated":1645075813,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1645075793,"updated":1645075810}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2022-02-17T05:30:07.219814Z", "endDate":
      "2023-02-17T05:30:07.219814Z", "value": "MIIDQDCCAiigAwIBAgIQKPoL51XtQ3Ggf9quF/HoFjANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUyMDEzWhcNMjMwMzE3MDUzMDEzWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBACrFHvQe9M3/g8i09SchXCng0ZY00TUZZOo0UyrJajZauX71mFeRH/MjVF7WCeTd950b1oq57N/liIV4LcnbfJXEN2cXhrd6cyF7FEXvpSmkiiIBtPloyqIjnAG/beIM739xY6/EQL5ImKLb2rgLmiWOI9B89q8FDesGxvaoU+WYZLyuqRHtNPCvpigBsc7keiirk2IDvc5JeNPxlR5B/t7DwD2ahJGF/v4zHA+xreVfT3cBVAEoYqoWGyxWTMGLObUyIh2gF7MWYtL/xyUInXcaMmLR8gp/FShGhMdY1Jrgj/38rXkDxYSRd/aBgjHzuQyDKblkLKCAQM59NxT6C4Q=",
      "keyId": "88888888-0000-0000-0000-000000000002", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1335'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --create-cert --keyvault --cert
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f1cffab-db1a-4c7f-a833-32a123cb7c92?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Thu, 17 Feb 2022 05:30:20 GMT
      duration:
      - '3469428'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y14Dpr6leD4UVfrzdRG1VJxF7/mw+HEvVSmSmtMwt80=
      ocp-aad-session-key:
      - n4XWTxzWzgUxQbCAsG4qsSgWrMNyvMlCHj1bSzS-R4XGkIfSZ-o3WPxsenIupH10x_F7egaxSIlaqfKIBvZlIKaHOeVXg16ZK1f66HZbPCs4jvtWu73bEcSRb1KMj0GgJ7Aq2wEtXSC7_PbZx3i_yCUBMVod6pqbLJZl4h0fyro.cb4B4U-Vsp4f29R_RriJlQO4XHTYzUFji0t32vdjepY
      pragma:
      - no-cache
      request-id:
      - 790418b1-84eb-4a88-ba2a-849bddd628cb
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/11d3f792dec84536a48560dc81c607ed","kid":"https://test-rbac-new-kv000002.vault.azure.net/keys/cert1/11d3f792dec84536a48560dc81c607ed","sid":"https://test-rbac-new-kv000002.vault.azure.net/secrets/cert1/11d3f792dec84536a48560dc81c607ed","x5t":"2mPrEKlF8TkcSXsmhVsjaCOiPl8","cer":"MIIDQDCCAiigAwIBAgIQKPoL51XtQ3Ggf9quF/HoFjANBgkqhkiG9w0BAQsFADAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwHhcNMjIwMjE3MDUyMDEzWhcNMjMwMzE3MDUzMDEzWjAdMRswGQYDVQQDExJLZXlWYXVsdCBHZW5lcmF0ZWQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC49ch2IXJuMbKwAHkbg+sOg2K8+yqcv0MiBjn782rK7UzU4yUckAfsW1lO7EpvEniUWxmWYJ7ilfq7aWCLI2idPZgAHzjS97NwNhKr29K02b0RJxUgq/ROo/8cO711vQ6Ek4krG63/1bj+r/rfG33zZpVn9vCCNJrD4qXLeWwVzrJu2bAZ0AMEKB2ohuDU6hLrNJX8x2gy6YhZ32VFRTsv4/nfckCV/vNI6n913DlRew7D7R8ZyADSsnl3/L9Xkt9wAiNkvXQth3SwhLpqW9mVx+CTGwWIgdosL8eCpKYH+OMAa2vemprwyNRydd/I4+KdymkM6bdNQXWhAtsAenuZAgMBAAGjfDB6MA4GA1UdDwEB/wQEAwIBvjAJBgNVHRMEAjAAMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAfBgNVHSMEGDAWgBSIJOMe9hfEkbxfukuawrqWNvTU2DAdBgNVHQ4EFgQUiCTjHvYXxJG8X7pLmsK6ljb01NgwDQYJKoZIhvcNAQELBQADggEBACrFHvQe9M3/g8i09SchXCng0ZY00TUZZOo0UyrJajZauX71mFeRH/MjVF7WCeTd950b1oq57N/liIV4LcnbfJXEN2cXhrd6cyF7FEXvpSmkiiIBtPloyqIjnAG/beIM739xY6/EQL5ImKLb2rgLmiWOI9B89q8FDesGxvaoU+WYZLyuqRHtNPCvpigBsc7keiirk2IDvc5JeNPxlR5B/t7DwD2ahJGF/v4zHA+xreVfT3cBVAEoYqoWGyxWTMGLObUyIh2gF7MWYtL/xyUInXcaMmLR8gp/FShGhMdY1Jrgj/38rXkDxYSRd/aBgjHzuQyDKblkLKCAQM59NxT6C4Q=","attributes":{"enabled":true,"nbf":1645075213,"exp":1679031013,"created":1645075813,"updated":1645075813,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=KeyVault
        Generated","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":13,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1645075793,"updated":1645075810}},"pending":{"id":"https://test-rbac-new-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 17 Feb 2022 05:30:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.27;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.9.276.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:22 GMT
      duration:
      - '2540761'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y14Dpr6leD4UVfrzdRG1VJxF7/mw+HEvVSmSmtMwt80=
      ocp-aad-session-key:
      - gkieP4SJjMdDSxrCsbBnGn2C_yPTNw8nBhubpvh56joU32pEY-7_L3mnzF0JxJiGilhFIEOEW5xJxCNcQbLNHl2z1O9Xur5G7UqWJ0OwWrZlqD-a9OODGrYkcncKmZmMVJ3sTEz3rGFN2yyYA5dbe7_34X7O1dd6DXfjArew3sw.WSnL2z3OTcWJANYvPfvYfJsKMo0pjtdrSQo9KiDPCR0
      pragma:
      - no-cache
      request-id:
      - 454bfcc0-2791-4f7b-b3d2-87394f70bf41
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27b67a504d-1a24-4e40-b15f-6539c207d5b7%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"3f1cffab-db1a-4c7f-a833-32a123cb7c92","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"b67a504d-1a24-4e40-b15f-6539c207d5b7","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_new_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":null,"identifierUris":[],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"DA63EB10A945F1391C497B26855B236823A23E5F","endDate":"2023-02-17T05:30:07.219814Z","keyId":"88888888-0000-0000-0000-000000000002","startDate":"2022-02-17T05:30:07.219814Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/3f1cffab-db1a-4c7f-a833-32a123cb7c92/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on behalf of
        the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_new_cert000001","id":"7ab1d854-5cfe-4b47-b334-737d73aff9b8","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_new_cert000001 on your behalf.","userConsentDisplayName":"Access
        cli_test_sp_with_kv_new_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2318'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Thu, 17 Feb 2022 05:30:23 GMT
      duration:
      - '2537205'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - YawNQr1dZQ305g4BraOh4D2uiFNsxdHpUlcdUQYyck0=
      ocp-aad-session-key:
      - wGSinjwdT5QLDSw8aN7NUlWOaGVjq1uih4WUKBwrC1m6PppxcZ1f-25vWlYRb5n4H5nhhG4JqKnByzdGsxQH9R4s62C0vmtoj8QtiTCh-_m-52mR1O7FoSg__vMdV24HuY00S41nnHHA-pTbVrYQYpXlFezjEGO2lyRkUnb28Yk.45Ylz3JR1_ywW16-rQSyyyGW_2Xd0vUpfyqA6Gh0M-U
      pragma:
      - no-cache
      request-id:
      - 956f5292-ebea-42e0-af5e-97ff875bfd6c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.2 (Windows-10-10.0.19044-SP0) msrest/0.6.21 msrest_azure/0.6.4
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.33.0
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/3f1cffab-db1a-4c7f-a833-32a123cb7c92?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Thu, 17 Feb 2022 05:30:24 GMT
      duration:
      - '3400814'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Rq4v5lEboZ0Ynm8yTHts4KZB+bdecsqzrEzFNE6Z0Wg=
      ocp-aad-session-key:
      - 4zgt007Qi7hUxvKcNr0Lb-pzBGP47TL13QcjQa4tf1R5CVGC_nGg2saflFPvqbSVEDbbo6PgEqb6bowAwyeboBzDPZHZpySXoP-G9-hiB8lkmAzh7Bws7P1w2DA-ZwmuX7XisI5eS0l4CzvviR2TZ3uWQwKU0SedHBXPq9Wp2k8.hGkRvT-g8IDKq3LM3sP3mlLv_CeN--nwfstcjlsCtYU
      pragma:
      - no-cache
      request-id:
      - bb700948-9a32-45de-bac2-b17ccf4ed755
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
