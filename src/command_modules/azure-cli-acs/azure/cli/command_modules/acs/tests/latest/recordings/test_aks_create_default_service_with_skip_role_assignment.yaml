interactions:
- request:
    body: '{"location": "eastus", "tags": {"product": "azurecli", "cause": "automation",
      "date": "2019-04-19T22:09:32Z"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group create
      Connection:
      - keep-alive
      Content-Length:
      - '110'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location --name --tag
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 resourcemanagementclient/2.1.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001?api-version=2018-05-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest000001","name":"clitest000001","location":"eastus","tags":{"product":"azurecli","cause":"automation","date":"2019-04-19T22:09:32Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '268'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 19 Apr 2019 22:09:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fclitest000002%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:37 GMT
      duration:
      - '982868'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - C5i4KmZZRRg9/zlL8YneK3IZk+awsuOz7OwRp4mYCnU=
      ocp-aad-session-key:
      - gszSUSqsYHfw-W6QwUI_jbgGRQpNcQMyfxnUpZlJ7leVdWnsBTuGIFnxKQmUwa3Nc1ti1FcXAzD51fS-AOVXo43djyj9YQ5pUQpw9Xp_MdJbNxclm1KexDUjn1cmzDci.QS3WzLDqc-PHF9Td7bRjNCnA_eI4mVo2jdnAEbDxhQ0
      pragma:
      - no-cache
      request-id:
      - 9e0e91da-2f2e-4631-8d28-b7b681971a0a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27clitest000002%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:37 GMT
      duration:
      - '654639'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ZGx5BTxWx3rJ0qV6fN7KouGYhLhktis4+Etrku5CN4A=
      ocp-aad-session-key:
      - b1hR5N_mDogTl8cVuTOs3mwmGLfsC5FahXJRBwpl5VriU7glTMQXYWFq3zXBuhxoOtQHVXnVRPZrsurtYP1_Zm1K_i1WYKMnDtxexIUyD4YmDBB6xv50_QYh0UY_7_vc.I6C7y_gFJEiU7uF-SavSMz00mAqyG_kEPIXekkVoYTs
      pragma:
      - no-cache
      request-id:
      - b688110b-21cd-45c1-afde-c792d450f8fc
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''{"availableToOtherTenants": false, "homepage": "https://clitest000002",
      "passwordCredentials": [{"startDate": "2019-04-19T22:09:38.10951Z", "endDate":
      "2020-04-19T22:09:38.10951Z", "keyId": "ad1de5cd-16aa-4ff7-82fe-10359adfba41",
      "value": "12a9f44a-e582-4c1b-9efe-a2a6ee4f9ae7", "customKeyIdentifier": "//5yAGIAYQBjAA=="}],
      "displayName": "clitest000002", "identifierUris": ["http://clitest000002"]}'''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '432'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"826ba74c-448a-42fd-af11-f23bf25f6352","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"e8002146-03d2-40eb-957e-6fdcaaf786d9","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"clitest000002","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://clitest000002","identifierUris":["http://clitest000002"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/826ba74c-448a-42fd-af11-f23bf25f6352/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/826ba74c-448a-42fd-af11-f23bf25f6352/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access clitest000002 on behalf of the signed-in user.","adminConsentDisplayName":"Access
        clitest000002","id":"92273d0d-082a-4dfb-b0b9-1798ca7a9646","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access clitest000002 on your behalf.","userConsentDisplayName":"Access
        clitest000002","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":"//5yAGIAYQBjAA==","endDate":"2020-04-19T22:09:38.10951Z","keyId":"ad1de5cd-16aa-4ff7-82fe-10359adfba41","startDate":"2019-04-19T22:09:38.10951Z","value":null}],"publicClient":null,"publisherDomain":"microsoft.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2340'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:39 GMT
      duration:
      - '10087448'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/826ba74c-448a-42fd-af11-f23bf25f6352/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - oNrsfdz3Fhte7wfqy+uUhdb2Yij4mN6MnViek/b/vco=
      ocp-aad-session-key:
      - iUwt3Uktk6t0ar_BbsoMG8GyexD33NulotY48_JmBkJNUHlQYxwsBb3XEL3ICAiC-RM9WqY09v0FliuH9vW6-ZixHoI6KSkK4QGsuSgZpZwnshlmIQPLQtwIyAmw3iIWQM0fQ1NGNyKSmq5hLWD1Nw.qVkNnaV09Hwm_dZexecmJ70AaO8atn-4gvDAcs-SISo
      pragma:
      - no-cache
      request-id:
      - 5fb3d3a5-db38-40fc-89d8-aa1688834bb9
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "e8002146-03d2-40eb-957e-6fdcaaf786d9"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --skip-assignment
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-graphrbac/0.60.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.error":{"code":"Authentication_Unauthorized","message":{"lang":"en","value":"Authenticating
        principal does not havepermission to instantiate multi-tenantapplications
        and there is not matching Applicationin the request tenant."},"requestId":"1e6d93e8-d184-47c9-8690-3382c4f64680","date":"2019-04-19T22:09:39"}}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '317'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 19 Apr 2019 22:09:39 GMT
      duration:
      - '1063911'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - gs8C01f5KRN9nNLnTmZX5CWrEWq6NpXoaIB755uhVTs=
      ocp-aad-session-key:
      - g1GfL2dVjlDqWK2df7A-gtSnatvEuwc0ZUZm4nWt35SV65y7prQLG25fkLWcn7tOyA7VK4P-HZ-g0wSD3D3dG3QmRrALeJCySEPSgyV-nsAnJ-bqfxmOMkY_d3U2yMFGYyQmpv4RCA214wxToFLHbw.M8K2uVV2lbn6Sc4HBZUk60Vmx9nI7dqCGvJLbufhdDM
      pragma:
      - no-cache
      request-id:
      - 1e6d93e8-d184-47c9-8690-3382c4f64680
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 403
      message: Forbidden
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --yes --no-wait
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 resourcemanagementclient/2.1.0
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest000001?api-version=2018-05-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Fri, 19 Apr 2019 22:09:40 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTElURVNURTZYN1VGRkgzWi1FQVNUVVMiLCJqb2JMb2NhdGlvbiI6ImVhc3R1cyJ9?api-version=2018-05-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
version: 1
