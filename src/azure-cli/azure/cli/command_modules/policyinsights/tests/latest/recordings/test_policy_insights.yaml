interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -m --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '202'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-policy-insights-requests:
      - '199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -m --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4e4179ff39194a62bad4ef3e","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/paposkrotest/providers/microsoft.compute/virtualmachines/paposkrotest","numRecords":8},{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/1e4e70f9cd4846268b6998ee","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/paposkrotest/providers/microsoft.compute/virtualmachines/paposkrotest","numRecords":8}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1236'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-policy-insights-requests:
      - '199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -m --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":19,"nonCompliantPolicies":5,"resourceDetails":[{"complianceState":"noncompliant","count":19}],"policyDetails":[{"complianceState":"noncompliant","count":5}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4e4179ff39194a62bad4ef3e","policySetDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/1f3afdf9-d0c9-4c3d-847f-89da613e70a8","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4e4179ff39194a62bad4ef3e''","nonCompliantResources":19,"nonCompliantPolicies":0,"resourceDetails":[{"complianceState":"noncompliant","count":19}]},"policyDefinitions":[]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/1e4e70f9cd4846268b6998ee","policySetDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/1f3afdf9-d0c9-4c3d-847f-89da613e70a8","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/1e4e70f9cd4846268b6998ee''","nonCompliantResources":19,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":19}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"vnetenableddosprotectionmonitoring","policyDefinitionId":"/providers/microsoft.authorization/policydefinitions/a7aca53f-2ed4-4466-a25e-0b45ade68efd","effect":"auditifnotexists","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/1e4e70f9cd4846268b6998ee''
        and PolicyDefinitionId eq ''/providers/microsoft.authorization/policydefinitions/a7aca53f-2ed4-4466-a25e-0b45ade68efd''
        and PolicyDefinitionReferenceId eq ''vnetenableddosprotectionmonitoring''","nonCompliantResources":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3727'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-policy-insights-requests:
      - '198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/argh/providers/microsoft.authorization/policyassignments/77fec4647f8442e3b7ce96db","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/argh/providers/microsoft.network/networksecuritygroups/portlockdown-westeurope","numRecords":46373},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/argh/providers/microsoft.authorization/policyassignments/beb85152cea0475ba4942c26","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/argh/providers/microsoft.network/networksecuritygroups/portlockdown-westeurope","numRecords":46373}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1281'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/testyoshen/providers/microsoft.compute/virtualmachines/largevm","numRecords":14},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/testyoshen/providers/microsoft.compute/virtualmachines/yoshentest","numRecords":13}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1203'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":1711,"nonCompliantPolicies":93,"resourceDetails":[{"complianceState":"noncompliant","count":1711}],"policyDetails":[{"complianceState":"noncompliant","count":93}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","policySetDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/89c6cddc-1c73-4ac1-b19c-54d1a15a42f2","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693''","nonCompliantResources":980,"nonCompliantPolicies":0,"resourceDetails":[{"complianceState":"noncompliant","count":980}]},"policyDefinitions":[]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/cf3396c38714442ca6afc500","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/cf3396c38714442ca6afc500''","nonCompliantResources":46,"nonCompliantPolicies":0,"resourceDetails":[{"complianceState":"noncompliant","count":46}]},"policyDefinitions":[]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2528'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '599'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -g --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationsmanagement/solutions/containerinsights(defaultworkspace-d0610b27-9663-4c05-89f8-5b4be01e86a5-eus)","numRecords":24},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationsmanagement/solutions/containerinsights(kubernetes-loganalytics-workspace-build506)","numRecords":5}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1567'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '598'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -g --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-d0610b27-9663-4c05-89f8-5b4be01e86a5-eus","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationsmanagement/solutions/logicappsmanagement(defaultworkspace-d0610b27-9663-4c05-89f8-5b4be01e86a5-eus)","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1561'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '598'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -g --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":6,"nonCompliantPolicies":3,"resourceDetails":[{"complianceState":"noncompliant","count":6}],"policyDetails":[{"complianceState":"noncompliant","count":3}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464''","nonCompliantResources":3,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":3}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.authorization/policydefinitions/0a914e76-4921-4c19-b460-a2d36003525a","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464''
        and PolicyDefinitionId eq ''/providers/microsoft.authorization/policydefinitions/0a914e76-4921-4c19-b460-a2d36003525a''","nonCompliantResources":3,"resourceDetails":[{"complianceState":"noncompliant","count":3}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.authorization/policyassignments/677b0cab4d454f52bf46a52f''","nonCompliantResources":4,"nonCompliantPolicies":0,"resourceDetails":[{"complianceState":"noncompliant","count":4}]},"policyDefinitions":[]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3692'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '597'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '946'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '596'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1567'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '595'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":1,"nonCompliantPolicies":2,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":2}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef''","nonCompliantResources":1,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207''","nonCompliantResources":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","policySetDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/89c6cddc-1c73-4ac1-b19c-54d1a15a42f2","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693''","nonCompliantResources":1,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"auditdiagnosticsetting","policyDefinitionId":"/providers/microsoft.authorization/policydefinitions/7f89b1eb-583c-429a-8828-af049802c1d9","effect":"auditifnotexists","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693''
        and PolicyDefinitionId eq ''/providers/microsoft.authorization/policydefinitions/7f89b1eb-583c-429a-8828-af049802c1d9''
        and PolicyDefinitionReferenceId eq ''auditdiagnosticsetting''","nonCompliantResources":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5392'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '597'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type -g --from --to --filter --apply --select
        --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '271'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '594'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type -g --from --to --filter --apply --select
        --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/8eb0d51fd4dc4b43aebb3b96","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/b9d524217e864c71bca195b5","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1427'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '593'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type -g --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":1,"nonCompliantPolicies":6,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":6}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4f3dae2da43841f2ba625495","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4f3dae2da43841f2ba625495''","nonCompliantResources":1,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/a5ad9428-4cf9-4e9e-b2a5-f345f9b57202","effect":"deployifnotexists","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/4f3dae2da43841f2ba625495''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/a5ad9428-4cf9-4e9e-b2a5-f345f9b57202''","nonCompliantResources":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/00810acb83044ed1b084bfb5","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/00810acb83044ed1b084bfb5''","nonCompliantResources":1,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/8df0e928-692c-4cce-8ed1-444423ac0253","effect":"auditifnotexists","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test/providers/microsoft.keyvault/vaults/cluster-test/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/00810acb83044ed1b084bfb5''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/8df0e928-692c-4cce-8ed1-444423ac0253''","nonCompliantResources":1,"resourceDetails":[{"complianceState":"noncompliant","count":1}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5088'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '596'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type --parent -g --from --to --filter --apply
        --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '305'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '598'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type --parent -g --from --to --filter --apply
        --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '304'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '597'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --namespace --resource-type --parent -g --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/akhe-sf-test-cluster-1/providers/microsoft.network/virtualnetworks/VNet-test-1/subnets/Subnet-0/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":0,"nonCompliantPolicies":0,"resourceDetails":[],"policyDetails":[]},"policyAssignments":[]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1126'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '595'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -s --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest2/providers/microsoft.authorization/policyassignments/8828df941b124d42841bfe69","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest2/providers/microsoft.compute/virtualmachines/jilimmmm","numRecords":2},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest2/providers/microsoft.authorization/policyassignments/8828df941b124d42841bfe69","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest2/providers/microsoft.network/networksecuritygroups/jilimmmm-nsg","numRecords":2}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1565'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '594'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -s --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '285'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '592'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -s --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/762007ec-c5ba-41ae-a52d-db0834bea096/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":0,"nonCompliantPolicies":0,"resourceDetails":[],"policyDetails":[]},"policyAssignments":[]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1069'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '596'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -d --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.containerregistry/registries/azgovpolicy","numRecords":7},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-admin/nestedendpoints/gov-int-nus-policy-admin","numRecords":3}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1606'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '593'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -d --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.containerregistry/registries/azgovpolicy/runs/ca4","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.containerregistry/registries/azgovpolicy/runs/ca1","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1569'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '592'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -d --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":62,"nonCompliantPolicies":2,"resourceDetails":[{"complianceState":"noncompliant","count":62}],"policyDetails":[{"complianceState":"noncompliant","count":2}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef''","nonCompliantResources":57,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":57}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207''","nonCompliantResources":57,"resourceDetails":[{"complianceState":"noncompliant","count":57}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimaus/providers/microsoft.authorization/policyassignments/689b77c53cf84f84bc9860a8","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimaus/providers/microsoft.authorization/policyassignments/689b77c53cf84f84bc9860a8''","nonCompliantResources":5,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":5}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimaus/providers/microsoft.authorization/policyassignments/689b77c53cf84f84bc9860a8''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207''","nonCompliantResources":5,"resourceDetails":[{"complianceState":"noncompliant","count":5}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5317'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '591'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/camarvin/providers/microsoft.compute/virtualmachines/zone/extensions/microsoft.powershell.dsc","numRecords":14},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/elpere/providers/microsoft.compute/virtualmachines/elperetest/extensions/dscextension","numRecords":11}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1488'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '591'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/elpere/providers/microsoft.network/networkinterfaces/elperetest-singledat651","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ilidemitest/providers/microsoft.healthcareapis/services/ilidemi-healthcare-test","numRecords":1}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1460'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '590'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":342,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":342}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464''","nonCompliantResources":342,"nonCompliantPolicies":1,"resourceDetails":[{"complianceState":"noncompliant","count":342}],"policyDetails":[{"complianceState":"noncompliant","count":1}]},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.authorization/policydefinitions/0a914e76-4921-4c19-b460-a2d36003525a","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/3c3059c96b0940f0995f9464/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false) and PolicyAssignmentId
        eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/3c3059c96b0940f0995f9464''
        and PolicyDefinitionId eq ''/providers/microsoft.authorization/policydefinitions/0a914e76-4921-4c19-b460-a2d36003525a''","nonCompliantResources":342,"resourceDetails":[{"complianceState":"noncompliant","count":342}],"policyDetails":[{"complianceState":"noncompliant","count":1}]}}]}]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2998'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '589'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy event list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a -g --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '302'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '595'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a -g --from --to --filter --apply --select --order-by --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":0,"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '301'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '588'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state summarize
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -a -g --from --to --filter --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-07-01-preview&$top=2&$from=2019-03-01T00%3A00%3A00.000Z&$to=2019-04-17T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/jilimpolicytest/providers/Microsoft.Authorization/policyAssignments/1c95b94c9c394a8eb4f1d8a6/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$from=2019-03-01
        00:00:00Z&$to=2019-04-17 00:00:00Z&$filter=(isCompliant eq false)","nonCompliantResources":0,"nonCompliantPolicies":0,"resourceDetails":[],"policyDetails":[]},"policyAssignments":[]}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '594'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - policy state list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource --expand --top
      User-Agent:
      - python/3.7.3 (Windows-10-10.0.17763-SP0) msrest/0.6.6 msrest_azure/0.6.0 azure-mgmt-policyinsights/0.3.1
        Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-07-01-preview&$top=2&$expand=PolicyEvaluationDetails
  response:
    body:
      string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","timestamp":"2019-04-18T20:41:34.0346017Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/88deedb1a79843fa9b3cd693","policyDefinitionId":"/providers/microsoft.authorization/policydefinitions/7f89b1eb-583c-429a-8828-af049802c1d9","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.Network/trafficManagerProfiles","resourceLocation":"global","resourceGroup":"govintpolicyrp","resourceTags":"tbd","policyAssignmentName":"88deedb1a79843fa9b3cd693","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000","policyDefinitionName":"7f89b1eb-583c-429a-8828-af049802c1d9","policyDefinitionAction":"auditifnotexists","policyDefinitionCategory":"tbd","policySetDefinitionId":"/providers/Microsoft.Authorization/policySetDefinitions/89c6cddc-1c73-4ac1-b19c-54d1a15a42f2","policySetDefinitionName":"89c6cddc-1c73-4ac1-b19c-54d1a15a42f2","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"auditdiagnosticsetting","complianceState":"NonCompliant","policyEvaluationDetails":{"ifNotExistsDetails":{"totalResources":0}}},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","timestamp":"2019-04-18T20:41:34.03457Z","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.network/trafficmanagerprofiles/gov-int-policy-rp","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/govintpolicyrp/providers/microsoft.authorization/policyassignments/a02d10810ef84c77b956a1ef","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/796de0a7-4bc4-40e4-98b2-1ee2bf359207","effectiveParameters":"","isCompliant":false,"subscriptionId":"d0610b27-9663-4c05-89f8-5b4be01e86a5","resourceType":"/Microsoft.Network/trafficManagerProfiles","resourceLocation":"global","resourceGroup":"govintpolicyrp","resourceTags":"tbd","policyAssignmentName":"a02d10810ef84c77b956a1ef","policyAssignmentOwner":"tbd","policyAssignmentParameters":"","policyAssignmentScope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/GovIntPolicyRP","policyDefinitionName":"796de0a7-4bc4-40e4-98b2-1ee2bf359207","policyDefinitionAction":"audit","policyDefinitionCategory":"tbd","policySetDefinitionId":"","policySetDefinitionName":"","policySetDefinitionOwner":"","policySetDefinitionCategory":"","policySetDefinitionParameters":"","managementGroupIds":"ArtTest2,ArtTest1,72f988bf-86f1-41af-91ab-2d7cd011db47","policyDefinitionReferenceId":"","complianceState":"NonCompliant","policyEvaluationDetails":{"evaluatedExpressions":[{"result":"True","expression":"tags","path":"tags","expressionValue":{"Test":"Test"},"targetValue":"CostCenter","operator":"NotContainsKey"}]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4069'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 18 Apr 2019 21:31:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-policy-insights-requests:
      - '587'
    status:
      code: 200
      message: OK
version: 1
