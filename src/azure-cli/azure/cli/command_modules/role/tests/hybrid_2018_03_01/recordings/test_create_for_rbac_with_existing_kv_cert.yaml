interactions:
- request:
    body: '{"location": "westus", "tags": {"product": "azurecli", "cause": "automation",
      "date": "2019-04-15T18:37:50Z"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group create
      Connection:
      - keep-alive
      Content-Length:
      - '110'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location --name --tag
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        resourcemanagementclient/2.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","name":"cli_test_sp_with_kv_existing_cert000001","location":"westus","tags":{"product":"azurecli","cause":"automation","date":"2019-04-15T18:37:50Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '384'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:37:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/me?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.User","objectType":"User","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","deletionTimestamp":null,"accountEnabled":true,"ageGroup":null,"assignedLicenses":[],"assignedPlans":[],"city":null,"companyName":null,"consentProvidedForMinor":null,"country":null,"createdDateTime":"2016-01-21T22:10:16Z","creationType":null,"department":null,"dirSyncEnabled":null,"displayName":"admin3","employeeId":null,"facsimileTelephoneNumber":null,"givenName":"admin3","immutableId":null,"isCompromised":null,"jobTitle":null,"lastDirSyncTime":null,"legalAgeGroupClassification":null,"mail":null,"mailNickname":"admin3","mobile":null,"onPremisesDistinguishedName":null,"onPremisesSecurityIdentifier":null,"otherMails":["yugangw@microsoft.com"],"passwordPolicies":"None","passwordProfile":null,"physicalDeliveryOfficeName":null,"postalCode":null,"preferredLanguage":"en-US","provisionedPlans":[],"provisioningErrors":[],"proxyAddresses":[],"refreshTokensValidFromDateTime":"2019-03-13T03:15:27Z","showInAddressList":null,"signInNames":[],"sipProxyAddress":null,"state":null,"streetAddress":null,"surname":"sdk","telephoneNumber":null,"thumbnailPhoto@odata.mediaEditLink":"directoryObjects/e7e158d3-7cdc-47cd-8825-5859d7ab2b55/Microsoft.DirectoryServices.User/thumbnailPhoto","usageLocation":null,"userIdentities":[],"userPrincipalName":"admin3@AzureSDKTeam.onmicrosoft.com","userState":null,"userStateChangedOn":null,"userType":"Member"}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1579'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:37:53 GMT
      duration:
      - '535775'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - BQUIGmRRyeHSEXkgch2q1Q3MYXFFtGhoXfkp3cvu3XA=
      ocp-aad-session-key:
      - pQFACuY6Ib9CG0rD_9Vq3ygmvdzemQPq-zyFSSt6TNcU4OVtx4gvWNK560YOSVhJLnoFJPzq42ALkEVqBVIJViWHUTW_LVb_-vg5PEUHV3khcya8tWyEhn_tMHjICxB_QH0LXt3mjzqTdltrwzSycw.wi8toXFFynxL0nL1jN44zeIf_4B3RpSJGwP1lUV8DUs
      pragma:
      - no-cache
      request-id:
      - e426f0e2-f605-4066-951e-5ed29027345f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus", "properties": {"tenantId": "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "54826b22-38d6-4fb2-bad9-b7b93a3e9c5a", "objectId": "e7e158d3-7cdc-47cd-8825-5859d7ab2b55",
      "permissions": {"keys": ["get", "create", "delete", "list", "update", "import",
      "backup", "restore", "recover"], "secrets": ["get", "list", "set", "delete",
      "backup", "restore", "recover"], "certificates": ["get", "list", "delete", "create",
      "import", "update", "managecontacts", "getissuers", "listissuers", "setissuers",
      "deleteissuers", "manageissuers", "recover"], "storage": ["get", "list", "delete",
      "set", "update", "regeneratekey", "setsas", "listsas", "getsas", "deletesas"]}}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '746'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g -l --sku
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-keyvault/1.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002?api-version=2016-10-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.KeyVault/vaults/clitest000002","name":"clitest000002","type":"Microsoft.KeyVault/vaults","location":"westus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","accessPolicies":[{"tenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","objectId":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55","permissions":{"keys":["get","create","delete","list","update","import","backup","restore","recover"],"secrets":["get","list","set","delete","backup","restore","recover"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"],"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"]}}],"enabledForDeployment":false,"vaultUri":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net","provisioningState":"RegisteringDns"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:37:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.1.0.242
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 15 Apr 2019 18:38:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"aa02de3cb2584c7c8b400450c3157221"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:03 GMT
      expires:
      - '-1'
      location:
      - https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=aa02de3cb2584c7c8b400450c3157221
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"aa02de3cb2584c7c8b400450c3157221"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"aa02de3cb2584c7c8b400450c3157221"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"completed","target":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1","request_id":"aa02de3cb2584c7c8b400450c3157221"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:25 GMT
      duration:
      - '452738'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qS43F4iLBOJT6RGkkYs1XEqkZVQTuWFJkKZZm/yzJso=
      ocp-aad-session-key:
      - P69sHw--eAh531oihmK_2oOOYx1eaxCSzmeWZd-3-DohdDEdEE9PHk-YGz91ZXaHN4xTzTVCUKjYAom95XCiwwBikA5d2huoO-G-9M_uZcGt5ZOyctGBGebym9WhWedk72THtd7waSE4Ry5deXIp0g.DYCBsft3qOus1xTWw6Kq4sdFMykGfBQ6AqXfjDmoQmA
      pragma:
      - no-cache
      request-id:
      - 6d5ffcc5-a679-488e-883f-91a5499cf2e0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","kid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/keys/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","sid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/secrets/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","x5t":"wXaevrg4KVK5H6H11pFXKLDW96w","cer":"MIIDQjCCAiqgAwIBAgIQXHT/wIAIQ3SN89coNqbUhTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjgxOFoXDTIxMDQxNTE4MzgxOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAQWbCXEBUPHRmObGUtY2hEMI7xjOl8pE4dpKItG05WH8vvx1b8eaY0CUM6S+FZXUuCrQfM/F1u1nMWawQU4xkRpC60D7ZsjCJyTgYXg2A8YLWu2EkujKj1thP0jL8oYl/vnIGMCBGIr82WB21Ut63xa+NmWkReNoeZC6GNwmRACVzWyPAI4w5jjEyIKZvDVXCtg5N0Ee21h/rqq8g6XQTYJFCTCFgACHGNuRkUADcbQTZ1DXdfO8tluOPNALZ1DartvYpbMrZQVdOZlgbm1NKHzg2cucrT9l09IwrnULThdtPqaIbo0F8x5+gtjQDFi03t4MFVTknhwC42doofgZdxw==","attributes":{"enabled":true,"nbf":1555352898,"exp":1618511898,"created":1555353498,"updated":1555353498,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555353483,"updated":1555353483}},"pending":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:26 GMT
      duration:
      - '489902'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ViIBCnSpL6+upqRchZXti8jjuoj+Po+TypBtwan6TMg=
      ocp-aad-session-key:
      - lE3roezxI5dOOADPCUJNxHTOwmbEIx17Q8TJvXIpgjjfha2eUgD8uR2xkR33bT3RtpMItps-Ri3y3idrLRsg1Ktrmc13f6ehIhzLfVhHIUMGtbNJ9aYTasxXChp9lDkzf6yus1NF-in6WZT6_9bHpQ.z5V6fHGB7NN5as-FzKdSGJBdsMjSVdu2LSTeaJTqtvw
      pragma:
      - no-cache
      request-id:
      - a06c337c-f291-4718-a9fa-3f1b308ffb7b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''b\''{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
      "keyCredentials": [{"startDate": "2019-04-15T18:38:25.837791Z", "endDate": "2020-04-15T18:38:25.837791Z",
      "value": "MIIDQjCCAiqgAwIBAgIQXHT/wIAIQ3SN89coNqbUhTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjgxOFoXDTIxMDQxNTE4MzgxOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAQWbCXEBUPHRmObGUtY2hEMI7xjOl8pE4dpKItG05WH8vvx1b8eaY0CUM6S+FZXUuCrQfM/F1u1nMWawQU4xkRpC60D7ZsjCJyTgYXg2A8YLWu2EkujKj1thP0jL8oYl/vnIGMCBGIr82WB21Ut63xa+NmWkReNoeZC6GNwmRACVzWyPAI4w5jjEyIKZvDVXCtg5N0Ee21h/rqq8g6XQTYJFCTCFgACHGNuRkUADcbQTZ1DXdfO8tluOPNALZ1DartvYpbMrZQVdOZlgbm1NKHzg2cucrT9l09IwrnULThdtPqaIbo0F8x5+gtjQDFi03t4MFVTknhwC42doofgZdxw==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert000001",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"]}\'''''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1796a717-0a94-4490-8b3b-f737288fdfb8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"C1769EBEB8382952B91FA1F5D6915728B0D6F7AC","endDate":"2020-04-15T18:38:25.837791Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T18:38:25.837791Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:26 GMT
      duration:
      - '2599752'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - 0sfE/ORXQruXagUwgN6LKCMJnfSNsPKIg39HCVmIqe8=
      ocp-aad-session-key:
      - 6w6Mcm3sadlLTIvucSBASxnRy99mwAeB2ns64BEQnmLXyGN6pdcpf4XkEbybtEdBJQVyah1zni3t2uMvjwX4IdwBysH2XAUUW_uwEeyRZtZkFC7fn9w7Sf1ezIaKwpRHet7llYrxGFoHatPtVH1KQA.LH5NDRmnXDUOanWVNDp4k6H9vimT6Lol2BKEZ8aKYOo
      pragma:
      - no-cache
      request-id:
      - ff55b814-3af7-43ce-a190-1beeb13800e0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "5614c5e1-9a77-439d-938e-76be4154a5fe"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"bc21dc32-95da-43e3-85b9-8ba448abf8aa","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["5614c5e1-9a77-439d-938e-76be4154a5fe","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:27 GMT
      duration:
      - '1742581'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/bc21dc32-95da-43e3-85b9-8ba448abf8aa/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - UOr32UtAMU+Eq0/F3AdEK7cYLW38EohupmMJWMjvI+Q=
      ocp-aad-session-key:
      - M6Ie-YlD2sJgz5qIfPJPJJ0k8_PfqjWYXZ66egFpfX29WMRTp_RMb2OAVZ5Tj7G-wgmvrWN80PPz5mYutdwwK9y9XAAQNIxfNIu-W23nKSAe4-ToQB8D2iKF4rsiAUxDvwH5ID3SacaEiTaDbgDSEA.kWEfl4zqAukR_bE69swclepTOyAdFbVdSCqSCZE8wj0
      pragma:
      - no-cache
      request-id:
      - 4b557ff1-8c51-4219-86cc-3ceea0d81b7a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "bc21dc32-95da-43e3-85b9-8ba448abf8aa"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal bc21dc3295da43e385b98ba448abf8aa
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "bc21dc32-95da-43e3-85b9-8ba448abf8aa"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"bc21dc32-95da-43e3-85b9-8ba448abf8aa","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2019-04-15T18:38:34.6670373Z","updatedOn":"2019-04-15T18:38:34.6670373Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-ms-request-charge:
      - '3'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"bc21dc32-95da-43e3-85b9-8ba448abf8aa","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","5614c5e1-9a77-439d-938e-76be4154a5fe"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2157'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:38 GMT
      duration:
      - '571422'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - T8XZkzrl2aupEbCD6UYjY32Rv0txL1m39kZkE588G30=
      ocp-aad-session-key:
      - ULq4_b2fjprgnSVkAzpnFELSZ_ElTDIorFy9NqznQ_H0d5s1PRUJshycmNrn7SXltDXNI5N-A-6l-tfQRvroxSUd8xbK59x3-3AFsWSahsrerVDc1Aj1S3hdd8oYkIpqVku5Mvyc_JivwU9HruwQdQ.1uZreWT_qPtnz5w1-DP-a3OpYSt8RD5xpnnx96nxYr4
      pragma:
      - no-cache
      request-id:
      - 21c7daab-3b86-432d-a1ff-cb418b96749c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%275614c5e1-9a77-439d-938e-76be4154a5fe%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:38 GMT
      duration:
      - '484634'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - nz/XGp5Lt3UpE9jJSAaQvlkMcNgkH4RQOBn3fI2s7Mc=
      ocp-aad-session-key:
      - eVgQU6jqw2d-JQgZyhei1H0kElrqZnR3QxlSHof8GlPrm-6xnBQqJdI3kesh3CrWQbVGP4V57J4N-zpJ4kTZ8KNYGmpVPKToVAsTd46jVLHvnvX0vyXy-3RRaBFfr5hcXPyP3-9_x0UXsFXuZJSHmA.mSCSkU_vmmm2Aoq-v7Wtbe5SsHwJIk2DqBqEEqojGv4
      pragma:
      - no-cache
      request-id:
      - 29907fb8-4712-4e01-b2c7-4c4a10057e3c
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%275614c5e1-9a77-439d-938e-76be4154a5fe%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1796a717-0a94-4490-8b3b-f737288fdfb8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"C1769EBEB8382952B91FA1F5D6915728B0D6F7AC","endDate":"2020-04-15T18:38:25.837791Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T18:38:25.837791Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:38 GMT
      duration:
      - '532440'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qS43F4iLBOJT6RGkkYs1XEqkZVQTuWFJkKZZm/yzJso=
      ocp-aad-session-key:
      - yo_x-QdV0ZIjTuo76nFAVrCPBdHap2fKVbZ9zVlk6Qrbe1D4Z8U6FWKrNJ39_n2N8kbhqFbfAroDeWRh_d0j5ZIiIUJtYCgQDn63CInGcs85OSof0y-05Cul9xLhEARyC8Nat9oMiMede17UGT2TvQ.nkxZ6OG5Rc5rZlLqq7aA7xaX_hYGmErAa0rTTXgYzfk
      pragma:
      - no-cache
      request-id:
      - d5f6a5ee-c5a8-44f7-8613-be8433b48076
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1796a717-0a94-4490-8b3b-f737288fdfb8?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1796a717-0a94-4490-8b3b-f737288fdfb8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"C1769EBEB8382952B91FA1F5D6915728B0D6F7AC","endDate":"2020-04-15T18:38:25.837791Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2019-04-15T18:38:25.837791Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:38 GMT
      duration:
      - '546410'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - BOyHBDAxSIKAYJlLPcX4gbSnf6edPNykjDKKitPiTVQ=
      ocp-aad-session-key:
      - YGE-0yHc9ztmTcLzmtGrKSpLpSEEZosNNChJcNLYryl3pjfDGb_TTk7sxLyYr9MYNqtPw2uIpANQN__my_zYqq1eaDri3oevTarP7KNsipWgC1f3SYy8AtniX6ab8cgzmfxQkHBdWgtHT7cGY8Y6Qg.MSFF3p44Ad9zBjPtJBjvZNUN4RTm3inH6hc6RBPd1BA
      pragma:
      - no-cache
      request-id:
      - 33a2b14c-0579-436c-81a4-9320ae78f49e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","kid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/keys/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","sid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/secrets/cert1/f29ca2224e3e49a7ba69377e86e6c9d2","x5t":"wXaevrg4KVK5H6H11pFXKLDW96w","cer":"MIIDQjCCAiqgAwIBAgIQXHT/wIAIQ3SN89coNqbUhTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjgxOFoXDTIxMDQxNTE4MzgxOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAQWbCXEBUPHRmObGUtY2hEMI7xjOl8pE4dpKItG05WH8vvx1b8eaY0CUM6S+FZXUuCrQfM/F1u1nMWawQU4xkRpC60D7ZsjCJyTgYXg2A8YLWu2EkujKj1thP0jL8oYl/vnIGMCBGIr82WB21Ut63xa+NmWkReNoeZC6GNwmRACVzWyPAI4w5jjEyIKZvDVXCtg5N0Ee21h/rqq8g6XQTYJFCTCFgACHGNuRkUADcbQTZ1DXdfO8tluOPNALZ1DartvYpbMrZQVdOZlgbm1NKHzg2cucrT9l09IwrnULThdtPqaIbo0F8x5+gtjQDFi03t4MFVTknhwC42doofgZdxw==","attributes":{"enabled":true,"nbf":1555352898,"exp":1618511898,"created":1555353498,"updated":1555353498,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555353483,"updated":1555353483}},"pending":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2019-04-15T18:38:38.117878Z", "endDate":
      "2020-04-15T18:38:38.117878Z", "value": "MIIDQjCCAiqgAwIBAgIQXHT/wIAIQ3SN89coNqbUhTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjgxOFoXDTIxMDQxNTE4MzgxOFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAQWbCXEBUPHRmObGUtY2hEMI7xjOl8pE4dpKItG05WH8vvx1b8eaY0CUM6S+FZXUuCrQfM/F1u1nMWawQU4xkRpC60D7ZsjCJyTgYXg2A8YLWu2EkujKj1thP0jL8oYl/vnIGMCBGIr82WB21Ut63xa+NmWkReNoeZC6GNwmRACVzWyPAI4w5jjEyIKZvDVXCtg5N0Ee21h/rqq8g6XQTYJFCTCFgACHGNuRkUADcbQTZ1DXdfO8tluOPNALZ1DartvYpbMrZQVdOZlgbm1NKHzg2cucrT9l09IwrnULThdtPqaIbo0F8x5+gtjQDFi03t4MFVTknhwC42doofgZdxw==",
      "keyId": "ecdd83a9-b351-4eaf-a050-09b909bd1f08", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1339'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1796a717-0a94-4490-8b3b-f737288fdfb8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 18:38:40 GMT
      duration:
      - '2189592'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - pH09e0MAr+szgnSxhvrjJJGK/1HRjD2NsdZMgTOMFK0=
      ocp-aad-session-key:
      - 34-shYcrVSCxkOVsQp5xqbRh5jF5ZN1ypaJbyBEuKwDDLVhBDy9Q8MqM48i4_gFrSLAytNKTvpfLcs2v8YObZRxjXMHhKlGYE6ARafhFz2A90EUjG_jb3CS7Znrjlz6sTMPQFVtgAC_LWXk4CIuwSg.D9en7f-WxBJAl1Pz2yLRNX1WXvUOKLjDV5oe0ZPh6Nw
      pragma:
      - no-cache
      request-id:
      - cb6227b2-6197-4f13-b3f0-803947ee9452
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1796a717-0a94-4490-8b3b-f737288fdfb8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"5614c5e1-9a77-439d-938e-76be4154a5fe","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"C1769EBEB8382952B91FA1F5D6915728B0D6F7AC","endDate":"2020-04-15T18:38:38.117878Z","keyId":"ecdd83a9-b351-4eaf-a050-09b909bd1f08","startDate":"2019-04-15T18:38:38.117878Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1796a717-0a94-4490-8b3b-f737288fdfb8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ae4cec17-5bd9-4c0f-bf4e-a549ab85855c","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:38:40 GMT
      duration:
      - '1151956'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Fuw7pWZk9Llcydv7mNwwV9q9vcS0e94h6oFBoH/ulRQ=
      ocp-aad-session-key:
      - 2VNMZ68MIg6FmMDDc5_5VLsauGHDzkNFnq3yOnhh2glLnSBPPh0dxNDaa8A9u81hKT6_X7JQH2h7vMBdgFexlwx0yZlP7DmL8l98BhEl1CNFOtlOjKlZ5aKOGUa-gtJsjAmQYkcx8UeydAi6FThV2A.TPvaLiTklTSv32vO39wdt2nWY84W6cKxKyAXRmK6-KE
      pragma:
      - no-cache
      request-id:
      - 7098def4-a42c-4ef7-bf82-4d086a1db9da
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1796a717-0a94-4490-8b3b-f737288fdfb8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 18:38:41 GMT
      duration:
      - '1794144'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - s2UwUVi+htM/n2YkhPwXRPeUZqg0DtftoAt5dzpH0b8=
      ocp-aad-session-key:
      - MTrsMUDPMTePWZEBzg5oU2UGUdDkl_w-qKNM-gu_i2IY3rN-uf8zg122KLMTyOaJSq7HiPzwKC6RHk-sRt8tDs8rh3sp4lSnCBKeEQcJYD3c90qj7YthtSVpEEcsAn2Vek67RBNa3b2Lf6jrxxFNwA.7FgOvBuqgZiRZfkgQi3UpX4B_JCvKLY-LC061K8JNYI
      pragma:
      - no-cache
      request-id:
      - cb9b1d08-4da6-4dca-86e1-82ba67facfc8
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"678e3d70ce204f598f2dd5388e56ce11"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:43 GMT
      expires:
      - '-1'
      location:
      - https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=678e3d70ce204f598f2dd5388e56ce11
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"678e3d70ce204f598f2dd5388e56ce11"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"678e3d70ce204f598f2dd5388e56ce11"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:38:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAPC/FDCOf1NzMEcqWpVx5UMNU6OrvdOJfH77QcN6KQaSjKHYMLHtPBUEBoqdqzy4nbZrUrGH4GgRBtaVK1uQq6E8U/Fw3+IY/6GzTssw+EjEk83eG54PCtHHw3SOtWY2NonDfLl/WJ/ziTM0d468tK/OtLtBG5rOWCn9X9BGH20aY5RclGBY1b6tEOx35qc6xy6TCZEV2BwkvXShYmPN4Nrli4uZXkSVk9aXgqJfS9/fIDa5uVniruD2/avC5krvu0QOtrMRiYzVPvClsFYEw2X1T9oma5JUj8Ne9Z05TfeS1gw1h3jijWhFDexsT9jxrS05PtgNTiuFzUnLxqPj1/","cancellation_requested":false,"status":"completed","target":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1","request_id":"678e3d70ce204f598f2dd5388e56ce11"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:04 GMT
      duration:
      - '485065'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 5tXUu3y+ErO1/XND1tRuShyWMEydPW/DHrlAYL3nHdc=
      ocp-aad-session-key:
      - 6gPIm8f-Lqdosy38LyPH8LY0lQxps8hoT1kJeNg3zJWVF_GtZUi54Hhr6uRIbftsVxO7-H0KanLpruJvBtws5sfFFQc7u_h3KAOW5DEvGTxTXTvjMA0v8lEVyNqGz7-kbAD-TV_iQqjqB3bRQEH6OQ.lYTlMgKwIgIhjlm92e6qw9HE4HsABjGYk_f9S52JagI
      pragma:
      - no-cache
      request-id:
      - 409c074f-dd9f-4886-b374-0fb329da66ee
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/149f9f4602cc42b88691ae1888fc27d0","kid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/keys/cert1/149f9f4602cc42b88691ae1888fc27d0","sid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/secrets/cert1/149f9f4602cc42b88691ae1888fc27d0","x5t":"g7ye8R0CW5eKmlGBr7LSfo2L8OI","cer":"MIIDQjCCAiqgAwIBAgIQXHmy8IrLQoiUsCe5DTi+wzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjkwM1oXDTE5MTAxNTE4MzkwM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAPpmFyTSW0dTr53Q7Dn2FnLkn+hZw1kF1wU4/1Bnd0XMdZi2hIxpYNlA0bIeinl/Aa0EJFFXSOdZCi1ay4XLV9KnyjCR+ZrOxBT1U7EoKojMPBWzRssactuCpc4XjixVQGUQXja2yhsWPUhKhj08+LG221QwigmN/9ENaGd20hnw88IOleXePIgUWySsv1RkFaHVmZdpPWuWFhp70IsSbK0novacX7MetGeIM4EpDoLmUjpR9oI5mdCOQOjlpJ5IRF2ulNzn/fsZferEc82a6hpmwMgZeFi+HvmuYsJ9nM38cNUNyIVN5aWNFm2M6Idr4dnCjHOHklGB1qa8Gr9PcRA==","attributes":{"enabled":true,"nbf":1555352943,"exp":1571164743,"created":1555353544,"updated":1555353544,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555353483,"updated":1555353522}},"pending":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:05 GMT
      duration:
      - '604882'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - eHUy9xL/t2YPMeNAb8K3eJdZ70TbtfpQN57mnPQmQKs=
      ocp-aad-session-key:
      - 5Wu6H764hvnaY64QVhWYUvcoHtej4gPOSbXVqR7zHa7H6xO0OcXr54hrdTeKpMrJLT8R41fiSnfSFI82keOCqf2RTb1kp_jHHsWt9Zms9ZwdHp7xJSjdDWL0H8aj9d47K9JONWLMd7THN2JAQYjclQ.Nzbyv73fGh_NdwKCPwH-9kybxyMKBgktDBxuu3wZV_E
      pragma:
      - no-cache
      request-id:
      - 02bb0a90-46e4-4446-8bc8-2ba84d8faf26
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: 'b''b\''{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
      "keyCredentials": [{"startDate": "2019-04-15T18:39:05.505445Z", "endDate": "2019-10-15T18:39:02.000Z",
      "value": "MIIDQjCCAiqgAwIBAgIQXHmy8IrLQoiUsCe5DTi+wzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjkwM1oXDTE5MTAxNTE4MzkwM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAPpmFyTSW0dTr53Q7Dn2FnLkn+hZw1kF1wU4/1Bnd0XMdZi2hIxpYNlA0bIeinl/Aa0EJFFXSOdZCi1ay4XLV9KnyjCR+ZrOxBT1U7EoKojMPBWzRssactuCpc4XjixVQGUQXja2yhsWPUhKhj08+LG221QwigmN/9ENaGd20hnw88IOleXePIgUWySsv1RkFaHVmZdpPWuWFhp70IsSbK0novacX7MetGeIM4EpDoLmUjpR9oI5mdCOQOjlpJ5IRF2ulNzn/fsZferEc82a6hpmwMgZeFi+HvmuYsJ9nM38cNUNyIVN5aWNFm2M6Idr4dnCjHOHklGB1qa8Gr9PcRA==",
      "keyId": "88888888-0000-0000-0000-000000000004", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert0000012",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"]}\'''''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"cb87e8e6-48dc-4072-82fc-01b5f394ad9f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"83BC9EF11D025B978A9A5181AFB2D27E8D8BF0E2","endDate":"2019-10-15T18:39:02Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T18:39:05.505445Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/logo","logo@odata.mediaContentType":"application/json;odata=minimalmetadata;
        charset=utf-8","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:06 GMT
      duration:
      - '2514429'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - I4v0qcnOlje1nXMrnV4NRb3YM/2Yho5JJMkIV0jxR4s=
      ocp-aad-session-key:
      - yocQvFby9JFPR8SmxQp4cOkZsHsVJuQBeObMVsJd4wq81Fq3PQ5uXMk9abNueRtqcfL9xw97ikia8HiDuUShvY5_8u3wIukwida69lvIDAhw-4nH5skmybSoEBOHlXZfe0z66WJamF38rhWBOWIX7A.1b-M5o6i2qrXBJal99eO7yW2lz_bF1w2_rdhX6g_ins
      pragma:
      - no-cache
      request-id:
      - eb2af662-e96c-43b7-953f-d93ded8e50f8
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "35d55cc5-4761-4339-bbc6-8e456842533e"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"2c061655-27f7-487a-a4c6-9a3ffb9056f7","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["35d55cc5-4761-4339-bbc6-8e456842533e","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2162'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:06 GMT
      duration:
      - '1647308'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/2c061655-27f7-487a-a4c6-9a3ffb9056f7/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - CLBFhp12uVA5Nnh6MG2VC8aF6kYj6BwyK0Y6WAoeTzc=
      ocp-aad-session-key:
      - 4XS5tUzcjW5cNmTw25sQtkxVEuAUn6GA4LBboMlrBzBG5119Z9zOxrV-dMaDOZIwwsbI0iH07ihJT-486MqM_ng06jWJup-I36WDM78r9FIXCMPXZzZblqAxmYP_T7SSwHs3wi8Ymg9KJBbXdW-ibg.A-T6WNo0bBCIAuJZI742qvzo8Oc81XYgi2TvvcuvAx4
      pragma:
      - no-cache
      request-id:
      - 1481b0b4-eaa1-4605-a60a-f86f90f95af3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "2c061655-27f7-487a-a4c6-9a3ffb9056f7"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 2c06165527f7487aa4c69a3ffb9056f7
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Lets
        you manage everything except access to resources.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2019-02-05T21:24:38.4580610Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '795'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-request-charge:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "2c061655-27f7-487a-a4c6-9a3ffb9056f7"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-mgmt-authorization/0.50.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"2c061655-27f7-487a-a4c6-9a3ffb9056f7","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2019-04-15T18:39:14.6367420Z","updatedOn":"2019-04-15T18:39:14.6367420Z","createdBy":null,"updatedBy":"e7e158d3-7cdc-47cd-8825-5859d7ab2b55"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000006"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; HttpOnly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
      x-ms-request-charge:
      - '2'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"2c061655-27f7-487a-a4c6-9a3ffb9056f7","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","35d55cc5-4761-4339-bbc6-8e456842533e"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2165'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:16 GMT
      duration:
      - '554276'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - sddddXJCDv27jmu91AjCY4cjIA04nWQAsEkxbrysAOg=
      ocp-aad-session-key:
      - ux4OE-_Tejd55dGqhgJA3NkZnbXRO11kIDtJIuzHfuwz5DtjjM4M7M0JVrkjxIC89uQaBELz6T6z9pzMOh3rroIaFyh0WIcBno-IZTJCCbXp8uVOPJTUBCeoYpzGA9hlAkEI64OXCVPdo_fSHQc-XQ.MQrj3yoG0XqYFoTBtxJxXsJFGTN9nUg1wb2gQcQvXA4
      pragma:
      - no-cache
      request-id:
      - 43c6195d-5da6-4637-834c-6b5874e89aeb
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%2735d55cc5-4761-4339-bbc6-8e456842533e%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:17 GMT
      duration:
      - '495805'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 79iHEFv08Z5eYiqEE8bs8QssJ8Mw1GK/njyBHhNtDbo=
      ocp-aad-session-key:
      - CHF3n6x2jiRUm-_VKW5rpOi1yHD4fa-MV9E3mP6kGesgZa_yoGtjIE0kuzr7_PK9BSpHXgnMO9Xr_k5Zb_ESiJ_etTS1jW7eJNm7d1ft-xFM3Ro4qRMLHzRRwPIocwjqCegqi0IsGk-91V5FQWF-fg.FTc4V3Rb4FBAP0pmwkzArkKpuOVv8VIdt2Os1Iq08og
      pragma:
      - no-cache
      request-id:
      - 827d9a81-11fd-4e81-a100-54157d2adb4b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%2735d55cc5-4761-4339-bbc6-8e456842533e%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"cb87e8e6-48dc-4072-82fc-01b5f394ad9f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"83BC9EF11D025B978A9A5181AFB2D27E8D8BF0E2","endDate":"2019-10-15T18:39:02Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T18:39:05.505445Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:17 GMT
      duration:
      - '673460'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 3uFtEmQkGsYUBnGiEwpn/QXOmYb7Leu7TgWcHwMJLO8=
      ocp-aad-session-key:
      - CBsH6XBN6cwsHKwJyBG44F2rCfR-GdbJ_ySA1zyTcMuq0s5dOp7Cega6l4nvdNqGmyS_hxRu-1qf2pNtf-CiMrUVzoIPYYZAYN_3bCJrktTqtDho9S52FApFPfzhhkGzPfK5jZm9gyrZQfsMYYtOnw.5Mk7JrB7kqZq_bA5WuFeWWAdvik8Ylaylo5ffgJFDvQ
      pragma:
      - no-cache
      request-id:
      - 6d7fde37-2644-4d1a-886e-0975a1b909b7
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/cb87e8e6-48dc-4072-82fc-01b5f394ad9f?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"cb87e8e6-48dc-4072-82fc-01b5f394ad9f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"83BC9EF11D025B978A9A5181AFB2D27E8D8BF0E2","endDate":"2019-10-15T18:39:02Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2019-04-15T18:39:05.505445Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:18 GMT
      duration:
      - '809974'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - K6rldxMxky7aVh9vRPlXWYskRYxAISeuZjxkHfljrVA=
      ocp-aad-session-key:
      - KwxFYLNslijG_OpbMGmazC9uiWzQN7q4HEggpM0xUisFTB5tT8Z7LrEZZmavMiKGDSF4QRu8zeYSbrIMdhyg-3LPWuzw_hvayFD66_tJuuMgTXLIdpPjffsUEH9teRnzN9MNBfj6WGIyQYk3owtdMQ.laQd-up7EkglCl2TgAR6NrQnTWx5ZlyFm5KAhsi54o0
      pragma:
      - no-cache
      request-id:
      - c6e10b24-a577-4fd7-8d50-c318fcea92b8
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/149f9f4602cc42b88691ae1888fc27d0","kid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/keys/cert1/149f9f4602cc42b88691ae1888fc27d0","sid":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/secrets/cert1/149f9f4602cc42b88691ae1888fc27d0","x5t":"g7ye8R0CW5eKmlGBr7LSfo2L8OI","cer":"MIIDQjCCAiqgAwIBAgIQXHmy8IrLQoiUsCe5DTi+wzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjkwM1oXDTE5MTAxNTE4MzkwM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAPpmFyTSW0dTr53Q7Dn2FnLkn+hZw1kF1wU4/1Bnd0XMdZi2hIxpYNlA0bIeinl/Aa0EJFFXSOdZCi1ay4XLV9KnyjCR+ZrOxBT1U7EoKojMPBWzRssactuCpc4XjixVQGUQXja2yhsWPUhKhj08+LG221QwigmN/9ENaGd20hnw88IOleXePIgUWySsv1RkFaHVmZdpPWuWFhp70IsSbK0novacX7MetGeIM4EpDoLmUjpR9oI5mdCOQOjlpJ5IRF2ulNzn/fsZferEc82a6hpmwMgZeFi+HvmuYsJ9nM38cNUNyIVN5aWNFm2M6Idr4dnCjHOHklGB1qa8Gr9PcRA==","attributes":{"enabled":true,"nbf":1555352943,"exp":1571164743,"created":1555353544,"updated":1555353544,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1555353483,"updated":1555353522}},"pending":{"id":"https://test_create_for_rbac_with_existing_kv_cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 15 Apr 2019 18:39:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - addr=131.107.160.188;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.0.864
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2019-04-15T18:39:16.961839Z", "endDate":
      "2019-10-15T18:39:02.000Z", "value": "MIIDQjCCAiqgAwIBAgIQXHmy8IrLQoiUsCe5DTi+wzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTE5MDQxNTE4MjkwM1oXDTE5MTAxNTE4MzkwM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ9iNUZGdClEStT37DX7WhnH48RTa6LuiePL6sQCze9nXlhKQoVq11NC4/7tamxgiQrIdVr3nVgPJwrLoU0EsAYUEwG/RUYinSvw5zomVkgqIvsBpidr315a4QMxZDPxtTdohv12gzDPGbyvKE6hIQR6McZsB+VJ1yC8CFIEDTBESm/XeaEJXOnFZlpFMG3AeBOSWbD8d9uIsyIRRPaC0GdDqJH720MX5vNTrAhyY0KeWV+s1XolIyMEzTmn8lhDqnlAujJTkjEKJ6t/4mAIPMwRAN47y3e9g208fFnWR9MI6spJ474gFxlLabGkJj0lGLHHHimq66u6MdcBlARtX9MCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFC4IDISCwJ64R1r/DvQRNvLN2MAZMB0GA1UdDgQWBBQuCAyEgsCeuEda/w70ETbyzdjAGTANBgkqhkiG9w0BAQsFAAOCAQEAPpmFyTSW0dTr53Q7Dn2FnLkn+hZw1kF1wU4/1Bnd0XMdZi2hIxpYNlA0bIeinl/Aa0EJFFXSOdZCi1ay4XLV9KnyjCR+ZrOxBT1U7EoKojMPBWzRssactuCpc4XjixVQGUQXja2yhsWPUhKhj08+LG221QwigmN/9ENaGd20hnw88IOleXePIgUWySsv1RkFaHVmZdpPWuWFhp70IsSbK0novacX7MetGeIM4EpDoLmUjpR9oI5mdCOQOjlpJ5IRF2ulNzn/fsZferEc82a6hpmwMgZeFi+HvmuYsJ9nM38cNUNyIVN5aWNFm2M6Idr4dnCjHOHklGB1qa8Gr9PcRA==",
      "keyId": "1f2968fa-f2f1-4843-ae35-9ce712ea3ccc", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1336'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/cb87e8e6-48dc-4072-82fc-01b5f394ad9f?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 18:39:20 GMT
      duration:
      - '2289940'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - K6rldxMxky7aVh9vRPlXWYskRYxAISeuZjxkHfljrVA=
      ocp-aad-session-key:
      - 0GqvtUtsxz6KSMYUX0BZQYR20o1MaYkJeSWOZ-iJioVJtyETVmtUlCLSKUJsIcfvBfbT5uNzKnR7QFMmDG-NkFFv3KlOM7vnntgB0cDm7aFu0nD5j_lG_YunCj3MizS8OSoRbXxwYM__FgfVnSZORA.TEkXiPmGFQ7PvWSF053Lf9wvdq_Oh1nM7haad24XAbw
      pragma:
      - no-cache
      request-id:
      - ad4dab77-ea34-47c8-a49d-383e06794477
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"cb87e8e6-48dc-4072-82fc-01b5f394ad9f","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"35d55cc5-4761-4339-bbc6-8e456842533e","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"83BC9EF11D025B978A9A5181AFB2D27E8D8BF0E2","endDate":"2019-10-15T18:39:02Z","keyId":"1f2968fa-f2f1-4843-ae35-9ce712ea3ccc","startDate":"2019-04-15T18:39:16.961839Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/cb87e8e6-48dc-4072-82fc-01b5f394ad9f/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"8829a213-ae60-4753-8d67-80c58d422807","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 15 Apr 2019 18:39:20 GMT
      duration:
      - '618500'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - PV9J1zsszlG9dsi2dnwdeRMbCkuWb6M0+3ywEhzOiuA=
      ocp-aad-session-key:
      - eoQIETgHgfrU27oINj6fwQ7KJ6H6BmeRsSnWCa5EHXvnlqS26FDk_5V3u1R-3bUTjqvg8L9vgDea3c3nOo8RK2zI7YGcohj2lfPk3XdzYLxL2Z8clWHZK3RsNFEJEZIfPjhkPjfydW8YlhxZb_W5zA.JGjyz-P2ZHHf0L9aWaFK7YD0aGu-A-6iQMK1GMa5B1I
      pragma:
      - no-cache
      request-id:
      - cc8a4ea9-b6f8-4a11-bf50-fdbfc64b8733
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        azure-graphrbac/0.61.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/cb87e8e6-48dc-4072-82fc-01b5f394ad9f?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 15 Apr 2019 18:39:26 GMT
      duration:
      - '47466462'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 8FSoKn5C+xKnzMxVB24u9W0B3o/Ls6Mt3pri2fVg6OA=
      ocp-aad-session-key:
      - p_fOVTPVc0naIdtUhhiims-3pLOqqN7Nk7akCdIWmfuZdS2NTGcIaYXY15Y8xrxSz0L2bIbcKMS_jR_E7gkrcZxkvs6il7JXITnwiff5XDkSTejKin1X1_A2nTkVn3MqxudMQ25BHOAYFDS0f_NHnQ.xkgr0KGd6p8pOjQCJopgKBTV3UTFaA_M04c5iFpva5g
      pragma:
      - no-cache
      request-id:
      - 5301b150-d71e-4ecb-bd63-5e617cedfbbf
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --yes --no-wait
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.17763-SP0) msrest/0.6.4 msrest_azure/0.4.34
        resourcemanagementclient/2.1.0 Azure-SDK-For-Python AZURECLI/2.0.62
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_sp_with_kv_existing_cert000001?api-version=2018-02-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 15 Apr 2019 18:39:27 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURVNUOjVGU1A6NUZXSVRIOjVGS1Y6NUZFWElTVElORzo1RkNFUlRaUHxFNzdCNzczOUVDNzY3NEQzLVdFU1RVUyIsImpvYkxvY2F0aW9uIjoid2VzdHVzIn0?api-version=2018-02-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
version: 1
