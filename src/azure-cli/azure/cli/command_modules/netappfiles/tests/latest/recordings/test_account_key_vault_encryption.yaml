interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/me?api-version=1.6
  response:
    body:
      string: '{"odata.error":{"code":"Request_ResourceNotFound","message":{"lang":"en","value":"Resource
        not found for the segment ''me''."},"requestId":"3ed3d26c-4ffb-4741-bc82-6fc88bead2f0","date":"2021-04-27T11:50:48"}}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '206'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 27 Apr 2021 11:50:48 GMT
      duration:
      - '616395'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Kh3r1b6HDXhb/b272tkYzajRBXMmwkG1G84iXv2E5WY=
      ocp-aad-session-key:
      - nIZlr1p1VNOH8W83bAaxVNK1l7YQ8m_Lm4G6DQEPPgP3oLDAXNEvkchGfV_vI0yStvHxYY5RnYl21x8_c6sLPe39L6MX7FIr8dJ54MQLxmUvAx7GBTfolS3DT40fZROZ.6AvIF25-7Tknp5xq3RXf-aJ57GrG1pBh82VNU25LLbQ
      pragma:
      - no-cache
      request-id:
      - 3ed3d26c-4ffb-4741-bc82-6fc88bead2f0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-powered-by:
      - ASP.NET
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      User-Agent:
      - python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28c%3Ac%20eq%20%27c6c4faba-2b22-44d9-80a4-71ff5b71f811%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"76807fbe-f75f-4679-8cee-d05b45821160","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"netapp-rp-sdk-tester","appId":"c6c4faba-2b22-44d9-80a4-71ff5b71f811","applicationTemplateId":null,"appOwnerTenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"netapp-rp-sdk-tester","errorUrl":null,"homepage":null,"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"Microsoft","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["c6c4faba-2b22-44d9-80a4-71ff5b71f811"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":["WindowsAzureActiveDirectoryIntegratedApp"],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1274'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 27 Apr 2021 11:50:48 GMT
      duration:
      - '718548'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - FY2OFT8N8JpF57gZ+xqHkJ6bmUPAwKZVENgjVQM+8JQ=
      ocp-aad-session-key:
      - gkIzNTxlaqVD-tlRgJpQ5yZoRVA3RSE3oggJXXGXsIUE1jX8565kfPmfRBZnfwMxYLTZzr-mOEnmUSJQpzQygS6bdaGj-lYKoWLrOK55jcY1w47_m9UiL-_-O-8g6_qw.Jp96ATNtTNPzrAV6_wgtKIGaCDSzui8_dz4g_NBZpIU
      pragma:
      - no-cache
      request-id:
      - c944dcd2-09fa-40ee-9c84-5b2c9687c57b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "properties": {"tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "72f988bf-86f1-41af-91ab-2d7cd011db47", "objectId": "76807fbe-f75f-4679-8cee-d05b45821160",
      "permissions": {"keys": ["get", "create", "delete", "list", "update", "import",
      "backup", "restore", "recover"], "secrets": ["get", "list", "set", "delete",
      "backup", "restore", "recover"], "certificates": ["get", "list", "delete", "create",
      "import", "update", "managecontacts", "getissuers", "listissuers", "setissuers",
      "deleteissuers", "manageissuers", "recover"], "storage": ["get", "list", "delete",
      "set", "update", "regeneratekey", "setsas", "listsas", "getsas", "deletesas"]}}],
      "softDeleteRetentionInDays": 90, "networkAcls": {"bypass": "AzureServices",
      "defaultAction": "Allow"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      Content-Length:
      - '857'
      Content-Type:
      - application/json
      ParameterSetName:
      - -l --name -g
      User-Agent:
      - AZURECLI/2.22.1 azsdk-python-azure-mgmt-keyvault/8.0.0 Python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.KeyVault/vaults/cli-test-key-vault-000003?api-version=2019-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.KeyVault/vaults/cli-test-key-vault-000003","name":"cli-test-key-vault-000003","type":"Microsoft.KeyVault/vaults","location":"southcentralus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","objectId":"76807fbe-f75f-4679-8cee-d05b45821160","permissions":{"keys":["get","create","delete","list","update","import","backup","restore","recover"],"secrets":["get","list","set","delete","backup","restore","recover"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"],"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-key-vault-000003.vault.azure.net","provisioningState":"RegisteringDns"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1169'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 27 Apr 2021 11:50:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.1.292.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l --name -g
      User-Agent:
      - AZURECLI/2.22.1 azsdk-python-azure-mgmt-keyvault/8.0.0 Python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.KeyVault/vaults/cli-test-key-vault-000003?api-version=2019-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.KeyVault/vaults/cli-test-key-vault-000003","name":"cli-test-key-vault-000003","type":"Microsoft.KeyVault/vaults","location":"southcentralus","tags":{},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","objectId":"76807fbe-f75f-4679-8cee-d05b45821160","permissions":{"keys":["get","create","delete","list","update","import","backup","restore","recover"],"secrets":["get","list","set","delete","backup","restore","recover"],"certificates":["get","list","delete","create","import","update","managecontacts","getissuers","listissuers","setissuers","deleteissuers","manageissuers","recover"],"storage":["get","list","delete","set","update","regeneratekey","setsas","listsas","getsas","deletesas"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":90,"vaultUri":"https://cli-test-key-vault-000003.vault.azure.net/","provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1165'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 27 Apr 2021 11:51:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.1.292.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://cli-test-key-vault-000003.vault.azure.net/keys/cli-test-key-000004/create?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"Request is missing a Bearer
        or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 27 Apr 2021 11:51:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=217.70.211.12;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - southcentralus
      x-ms-keyvault-service-version:
      - 1.2.236.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit) msrest/0.6.21 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://cli-test-key-vault-000003.vault.azure.net/keys/cli-test-key-000004/create?api-version=7.0
  response:
    body:
      string: '{"key":{"kid":"https://cli-test-key-vault-000003.vault.azure.net/keys/cli-test-key-000004/d51f64aa32184a7091100eb4178affa3","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"6ON2G7bTIOEBCyrXpDNIvTFpP2LtXVSgsUQunG_8XTvAKtrcazV3rb8oB9V2N9eyeBOL9hsBwqCi0YuUuRxykPXD8-xBoc8MfdLwuvQEqKODV5mttxglvKggPjZ4yYiCp4r_e9KaoK_qJWQaPXlytYoTahNAf359XUupi9qGZep3GjCYdgt-q1QWjYXsd2MYaB8SfccneOvKwjkb5HExTOqKfzM87MzoZ6hf6SMnSW88t--stRy1RkvZMZ7VNjx2IRKNV00-izZdi5wA67Ead4Hsk_SFSR_wNXWjmqEwRBsqdohd4K1QY_o05dmbqm6RXUPVIhAGxEhLNc9UTMrYPQ","e":"AQAB"},"attributes":{"enabled":true,"created":1619524289,"updated":1619524289,"recoveryLevel":"Recoverable+Purgeable"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '683'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 27 Apr 2021 11:51:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=217.70.211.12;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - southcentralus
      x-ms-keyvault-service-version:
      - 1.2.236.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralusstage", "properties": {"encryption": {"keySource":
      "Microsoft.KeyVault", "keyVaultProperties": {"keyVaultId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.KeyVault/vaults/cli-test-key-vault-000003",
      "keyVaultUri": "https://cli-test-key-vault-000003.vault.azure.net/", "keyName":
      "cli-test-key-000004"}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - netappfiles account create
      Connection:
      - keep-alive
      Content-Length:
      - '454'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -a -l --encryption --key-vault-id --key-vault-uri --key-name
      User-Agent:
      - AZURECLI/2.22.1 azsdk-python-mgmt-netapp/3.0.0 Python/3.8.7 (macOS-11.2.3-x86_64-i386-64bit)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_netappfiles_test_account_000001/providers/Microsoft.NetApp/netAppAccounts/cli000002?api-version=2021-02-01
  response:
    body:
      string: '{"error":{"code":"InvalidIdentityForAzureKeyVaultConfig","message":"Azure
        Key Vault Encryption cannot be enabled for NetAppAccount. For the time being,
        the only identity type supported for Azure Key Vault Encryption is ''SystemAssigned''."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '239'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 27 Apr 2021 11:51:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-powered-by:
      - ASP.NET
    status:
      code: 400
      message: Bad Request
version: 1
