interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlliUkFRUlljRV9tb3RXVkpLSHJ3TEJiZF85cyIsImtpZCI6IlliUkFRUlljRV9tb3RXVkpLSHJ3TEJiZF85cyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNDcxOTMzOTA2LCJuYmYiOjE0NzE5MzM5MDYsImV4cCI6MTQ3MTkzNzgwNiwiX2NsYWltX25hbWVzIjp7Imdyb3VwcyI6InNyYzEifSwiX2NsYWltX3NvdXJjZXMiOnsic3JjMSI6eyJlbmRwb2ludCI6Imh0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3L3VzZXJzLzg2N2ZiOWQwLTE0MzEtNDFjNy05NmUyLTgzNWVhNjNkNjJlMi9nZXRNZW1iZXJPYmplY3RzIn19LCJhY3IiOiIxIiwiYW1yIjpbInB3ZCIsIm1mYSJdLCJhcHBpZCI6IjA0YjA3Nzk1LThkZGItNDYxYS1iYmVlLTAyZjllMWJmN2I0NiIsImFwcGlkYWNyIjoiMCIsImVfZXhwIjoxMDgwMCwiZmFtaWx5X25hbWUiOiJaaGFvIiwiZ2l2ZW5fbmFtZSI6IktldmluIiwiaW5fY29ycCI6InRydWUiLCJpcGFkZHIiOiIxNjcuMjIwLjI1NS40NiIsIm5hbWUiOiJLZXZpbiBaaGFvIiwib2lkIjoiODY3ZmI5ZDAtMTQzMS00MWM3LTk2ZTItODM1ZWE2M2Q2MmUyIiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTIxNDY3NzMwODUtOTAzMzYzMjg1LTcxOTM0NDcwNy0xOTYzNTcyIiwicHVpZCI6IjEwMDMwMDAwOTBGRUNDQ0UiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJCTEc1SmxRcURabFdZNEM4QkpnNmZJcXRNelFxZ1ZVZllXemJPNjZvbFB3IiwidGlkIjoiNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3IiwidW5pcXVlX25hbWUiOiJrZXZpbnpoYUBtaWNyb3NvZnQuY29tIiwidXBuIjoia2V2aW56aGFAbWljcm9zb2Z0LmNvbSIsInZlciI6IjEuMCJ9.FNl8ZGo0JwHzdV--2oMKseU4s9zUPytjjZA6uy-VOegQjhqHSvm-ZnyffR5xX17HG2mdYRgf6pDsLGY4cFynVFLCACs9-Fz29_ktc5KXUWCvuCrwxzCBpzcvw76aSlooEoKzTeKIr0apPUwxH7OV7vvm_N6AgILtVSmfwLgkV4EwGqSBADVWNKtuEHkGg61C9bgwnmjuxPJuKzZq2HAwIvIUwuQK_onTkWe1g935jo6eXZsioHPhpX-Xn4YXGw0vOgXsbpcYjE_xT2JGmHnstqglZcL84OteaddqgkpFYD9ssjqiYd7dEik9xRY6xWrszTbIQd0rqRnLaC_4Tmi8jQ]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.0 msrest_azure/0.4.1
          iothubclient/2016-02-03 Azure-SDK-For-Python AZURECLI/TEST/0.0.1.dev0]
      accept-language: [en-US]
      x-ms-client-request-id: [e9024cda-6901-11e6-9573-40a8f04ffd53]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/iot-hub-test-rg/providers/Microsoft.Devices/IotHubs/iot-hub-for-test/listkeys?api-version=2016-02-03
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9X/zR2/z6Rbag3z8qqna+nlRXy7z+aPTRqi4WWX39e+XX9NUnv/fz60+++Mmf+iR7k3+5
        /MkfvNh7+zx/svvpl5+8ff1u8YNPL+7Vrz89Pz7/tL76jN5t8mm1nNm3d57uP/lFr376p9v95+3q
        6eL+Dy6fLZ+e3Pvu/XeTL0+fLF/95Mknz4v5w3unT6d4uy4u5m1D773KL4qmra+/WxdtPkpf5/Vl
        Mc1PquUyn7aj9Gnu/fnRLxn5Y2mkLUELxnE1/+7Z8sXyi8svyk8WJz91d747P/99Pn/14O7pkye/
        1w/2qufl2fr+i9W9Vy93gElnHFfXV/e/85Pfefv5p6c//eqLnZd77dPl751/+vss3ly8enA+u3z9
        e11+cv/sycXFdYW37ThCxDuYzngU1DxAtP69vpw+/Inm7hcnP/hu+eTku8c/nb97kU3375fLs/1p
        uXt68uDe9btvXy0PvkBXHUQPvpp/+9nz3/unL19Nv/x9ftH+D+7+3k9/8N3P7z+5+mpZ3v/0937w
        4gc/mOy+eLl7+Xv9BN62iG6iaK2T8SrPZvROgO138rsP8vuXTz49efHptz+9nn/n3U/M61/08su7
        9wnDRXVVPGu/ePWg+c5Fe4r+Otj+5POdg6/2shf3n3z3B2+/84P91fne05/48vf+vQ5O7j7Nfp+3
        v8/d4nr11af3DvbuhWQ17MEYDSPL3EPvBRj/1NkXi/Pvvrs3f5n/1P2z3asHb+rvFlcvjp8//Mmf
        bh68/Mm97Onvvbj86eb+E6ZQB+OLp9/5vT59s7t/tnr35U/en1z99PUv+r2rd7tX05989RNvX/7e
        58Xs5adXzerB29dxjAWlX/L9X/L/AGYKDfWJAwAA
    headers:
      Cache-Control: [no-cache]
      Content-Encoding: [gzip]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Tue, 23 Aug 2016 07:19:22 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-HTTPAPI/2.0]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Vary: [Accept-Encoding]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 200, message: OK}
- request:
    body: !!binary |
      eyJkZXZpY2VJZCI6ICJpb3QtZGV2aWNlLWZvci10ZXN0In0=
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [SharedAccessSignature sig=RTNrGy6n%2Fs2uLLZFuVHBIJtdxIJP1LuKfhKjHwwbu7A%3D&se=1471940363&sr=iot-hub-for-test.azure-devices.net%252fdevices%252fiot-device-for-test&skn=iothubowner]
      Connection: [keep-alive]
      Content-Length: ['35']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.0 msrest_azure/0.4.1
          iothubdeviceclient/2016-02-03 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [eac6ae10-6901-11e6-8619-40a8f04ffd53]
    method: PUT
    uri: https://iot-hub-for-test.azure-devices.net/devices/iot-device-for-test?api-version=2016-02-03
  response:
    body: {string: '{"deviceId":"iot-device-for-test","generationId":"636075335640700005","etag":"MA==","connectionState":"Disconnected","status":"enabled","statusReason":null,"connectionStateUpdatedTime":"0001-01-01T00:00:00","statusUpdatedTime":"0001-01-01T00:00:00","lastActivityTime":"0001-01-01T00:00:00","cloudToDeviceMessageCount":0,"authentication":{"symmetricKey":{"primaryKey":"9QK8p3VZbLmQFC4ymC92hGkSX56OnV+wnAfjwORRc/o=","secondaryKey":"SA1bZGyZDa3GQDa6zghG6e8wii7FaQZz7EVgq7un01U="},"x509Thumbprint":null},"isManaged":false,"deviceProperties":null,"configuration":null,"serviceProperties":null,"lastServicePropertiesUpdatedTime":"0001-01-01T00:00:00","lastDevicePropertiesUpdatedTime":"0001-01-01T00:00:00"}'}
    headers:
      Content-Length: ['701']
      Content-Type: [application/json; charset=utf-8]
      Date: ['Tue, 23 Aug 2016 07:19:23 GMT']
      ETag: ['"MA=="']
      Server: [Microsoft-HTTPAPI/2.0]
    status: {code: 200, message: OK}
version: 1
