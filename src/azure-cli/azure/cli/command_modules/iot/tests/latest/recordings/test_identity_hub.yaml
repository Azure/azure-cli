interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name --account-name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-storage/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Storage/storageAccounts?api-version=2021-04-01
  response:
    body:
      string: '{"value":[{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp/providers/Microsoft.Storage/storageAccounts/clitestq3p7xjra2ktyiovd7","name":"clitestq3p7xjra2ktyiovd7","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T04:00:59.6414305Z","key2":"2021-06-29T04:00:59.6414305Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.6414305Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.6414305Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T04:00:59.5632556Z","primaryEndpoints":{"blob":"https://clitestq3p7xjra2ktyiovd7.blob.core.windows.net/","queue":"https://clitestq3p7xjra2ktyiovd7.queue.core.windows.net/","table":"https://clitestq3p7xjra2ktyiovd7.table.core.windows.net/","file":"https://clitestq3p7xjra2ktyiovd7.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002","name":"clitest000002","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T04:00:59.8914178Z","key2":"2021-06-29T04:00:59.8914178Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.8914178Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.8914178Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T04:00:59.8132820Z","primaryEndpoints":{"blob":"https://clitest000002.blob.core.windows.net/","queue":"https://clitest000002.queue.core.windows.net/","table":"https://clitest000002.table.core.windows.net/","file":"https://clitest000002.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgqpofzm6vsbahf4z7ymonv3t75nfvanke35kyo3nnhwkrkad6iqjv7n2pfm4un2fkb/providers/Microsoft.Storage/storageAccounts/clitest5x2rrpth7nstw6r55","name":"clitest5x2rrpth7nstw6r55","type":"Microsoft.Storage/storageAccounts","location":"eastasia","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-24T09:03:08.7946116Z","key2":"2021-06-24T09:03:08.7946116Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-24T09:03:08.7946116Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-24T09:03:08.7946116Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-24T09:03:08.7321545Z","primaryEndpoints":{"blob":"https://clitest5x2rrpth7nstw6r55.blob.core.windows.net/","queue":"https://clitest5x2rrpth7nstw6r55.queue.core.windows.net/","table":"https://clitest5x2rrpth7nstw6r55.table.core.windows.net/","file":"https://clitest5x2rrpth7nstw6r55.file.core.windows.net/"},"primaryLocation":"eastasia","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-w6b3b/providers/Microsoft.Storage/storageAccounts/hdicli7i3tyaybi5rivp3gvc","name":"hdicli7i3tyaybi5rivp3gvc","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:41:02.3196137Z","key2":"2021-06-29T03:41:02.3196137Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.3196137Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.3196137Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:41:02.2258522Z","primaryEndpoints":{"blob":"https://hdicli7i3tyaybi5rivp3gvc.blob.core.windows.net/","queue":"https://hdicli7i3tyaybi5rivp3gvc.queue.core.windows.net/","table":"https://hdicli7i3tyaybi5rivp3gvc.table.core.windows.net/","file":"https://hdicli7i3tyaybi5rivp3gvc.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-ht5pt/providers/Microsoft.Storage/storageAccounts/hdicliexhz4f3ehyl2zplop6","name":"hdicliexhz4f3ehyl2zplop6","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:44:59.4462628Z","key2":"2021-06-29T03:44:59.4462628Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:44:59.4462628Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:44:59.4462628Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:44:59.3524999Z","primaryEndpoints":{"blob":"https://hdicliexhz4f3ehyl2zplop6.blob.core.windows.net/","queue":"https://hdicliexhz4f3ehyl2zplop6.queue.core.windows.net/","table":"https://hdicliexhz4f3ehyl2zplop6.table.core.windows.net/","file":"https://hdicliexhz4f3ehyl2zplop6.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-iedkr/providers/Microsoft.Storage/storageAccounts/hdicliflwuckbjewa7cro2nt","name":"hdicliflwuckbjewa7cro2nt","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:41:02.0070824Z","key2":"2021-06-29T03:41:02.0070824Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.0070824Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.0070824Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:41:01.9133471Z","primaryEndpoints":{"blob":"https://hdicliflwuckbjewa7cro2nt.blob.core.windows.net/","queue":"https://hdicliflwuckbjewa7cro2nt.queue.core.windows.net/","table":"https://hdicliflwuckbjewa7cro2nt.table.core.windows.net/","file":"https://hdicliflwuckbjewa7cro2nt.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-flirb/providers/Microsoft.Storage/storageAccounts/hdiclifxijzpy24hk2uhhxte","name":"hdiclifxijzpy24hk2uhhxte","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:45:07.0713127Z","key2":"2021-06-29T03:45:07.0713127Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:45:07.0713127Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:45:07.0713127Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:45:06.9775677Z","primaryEndpoints":{"blob":"https://hdiclifxijzpy24hk2uhhxte.blob.core.windows.net/","queue":"https://hdiclifxijzpy24hk2uhhxte.queue.core.windows.net/","table":"https://hdiclifxijzpy24hk2uhhxte.table.core.windows.net/","file":"https://hdiclifxijzpy24hk2uhhxte.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-mnqvk/providers/Microsoft.Storage/storageAccounts/hdicligzezhvnpfq6uxqivum","name":"hdicligzezhvnpfq6uxqivum","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:41:01.6164743Z","key2":"2021-06-29T03:41:01.6164743Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:01.6164743Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:01.6164743Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:41:01.5226859Z","primaryEndpoints":{"blob":"https://hdicligzezhvnpfq6uxqivum.blob.core.windows.net/","queue":"https://hdicligzezhvnpfq6uxqivum.queue.core.windows.net/","table":"https://hdicligzezhvnpfq6uxqivum.table.core.windows.net/","file":"https://hdicligzezhvnpfq6uxqivum.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-ss4uy/providers/Microsoft.Storage/storageAccounts/hdicliiryui6lg3bk3iim6o7","name":"hdicliiryui6lg3bk3iim6o7","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:45:03.6337521Z","key2":"2021-06-29T03:45:03.6337521Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:45:03.6337521Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:45:03.6337521Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:45:03.5400475Z","primaryEndpoints":{"blob":"https://hdicliiryui6lg3bk3iim6o7.blob.core.windows.net/","queue":"https://hdicliiryui6lg3bk3iim6o7.queue.core.windows.net/","table":"https://hdicliiryui6lg3bk3iim6o7.table.core.windows.net/","file":"https://hdicliiryui6lg3bk3iim6o7.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-j6hce/providers/Microsoft.Storage/storageAccounts/hdicliqpc7mz6pzlxzkmgczn","name":"hdicliqpc7mz6pzlxzkmgczn","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:41:03.6946020Z","key2":"2021-06-29T03:41:03.6946020Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:03.6946020Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:03.6946020Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:41:03.6008722Z","primaryEndpoints":{"blob":"https://hdicliqpc7mz6pzlxzkmgczn.blob.core.windows.net/","queue":"https://hdicliqpc7mz6pzlxzkmgczn.queue.core.windows.net/","table":"https://hdicliqpc7mz6pzlxzkmgczn.table.core.windows.net/","file":"https://hdicliqpc7mz6pzlxzkmgczn.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}},{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/hdicli-rswgs/providers/Microsoft.Storage/storageAccounts/hdiclitmovrizbox7i3rat6z","name":"hdiclitmovrizbox7i3rat6z","type":"Microsoft.Storage/storageAccounts","location":"southcentralus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T03:41:02.9445922Z","key2":"2021-06-29T03:41:02.9445922Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.9445922Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T03:41:02.9445922Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T03:41:02.8508566Z","primaryEndpoints":{"blob":"https://hdiclitmovrizbox7i3rat6z.blob.core.windows.net/","queue":"https://hdiclitmovrizbox7i3rat6z.queue.core.windows.net/","table":"https://hdiclitmovrizbox7i3rat6z.table.core.windows.net/","file":"https://hdiclitmovrizbox7i3rat6z.file.core.windows.net/"},"primaryLocation":"southcentralus","statusOfPrimary":"available"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '14346'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - a8c4b370-6e59-419c-b904-be155bdb7b97
      - ea90e87a-d58f-4f7b-a8f8-6fa3a0fcde74
      - ebfb8320-ec87-4083-a5d5-cf3e1bb8efbe
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --account-name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-storage/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/listKeys?api-version=2021-04-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"creationTime":"2021-06-29T04:00:59.8914178Z","keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"creationTime":"2021-06-29T04:00:59.8914178Z","keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '380'
      content-type:
      - application/json
      date:
      - Tue, 29 Jun 2021 04:01:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - Azure-Storage/2.0.0-2.0.1 (Python CPython 3.8.10; Windows 10) AZURECLI/2.25.0
      x-ms-date:
      - Tue, 29 Jun 2021 04:01:21 GMT
      x-ms-version:
      - '2018-11-09'
    method: PUT
    uri: https://clitest000002.blob.core.windows.net/iothubcontainer?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:01:25 GMT
      etag:
      - '"0x8D93AB290A5F783"'
      last-modified:
      - Tue, 29 Jun 2021 04:01:25 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2018-11-09'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-storage/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/listKeys?api-version=2021-04-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"creationTime":"2021-06-29T04:00:59.8914178Z","keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"creationTime":"2021-06-29T04:00:59.8914178Z","keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '380'
      content-type:
      - application/json
      date:
      - Tue, 29 Jun 2021 04:01:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-storage/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002?api-version=2021-04-01
  response:
    body:
      string: '{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002","name":"clitest000002","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2021-06-29T04:00:59.8914178Z","key2":"2021-06-29T04:00:59.8914178Z"},"privateEndpointConnections":[],"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.8914178Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2021-06-29T04:00:59.8914178Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2021-06-29T04:00:59.8132820Z","primaryEndpoints":{"blob":"https://clitest000002.blob.core.windows.net/","queue":"https://clitest000002.queue.core.windows.net/","table":"https://clitest000002.table.core.windows.net/","file":"https://clitest000002.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1336'
      content-type:
      - application/json
      date:
      - Tue, 29 Jun 2021 04:01:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2021-06-29T04:00:47Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006","name":"iot-user-identity000006","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"westus2","tags":{},"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba","clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","clientSecretUrl":"https://control-westus2.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006/credentials?tid=72f988bf-86f1-41af-91ab-2d7cd011db47&oid=839ede46-b0b8-4bba-882e-2cd01320aaba&aid=58b88f9d-d373-4d3f-9a92-a916a52ad9ab"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '974'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:35 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2021-06-29T04:00:47Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007","name":"iot-user-identity000007","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"westus2","tags":{},"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc","clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","clientSecretUrl":"https://control-westus2.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007/credentials?tid=72f988bf-86f1-41af-91ab-2d7cd011db47&oid=20f3710e-0f41-4ea5-adee-8d907566efcc&aid=6f3a1e6b-bfd4-4f37-b950-ccd214be330b"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '974'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:44 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1194'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2021-06-29T04:00:47Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity create
      Connection:
      - keep-alive
      Content-Length:
      - '23'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008","name":"iot-user-identity000008","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"westus2","tags":{},"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3","clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","clientSecretUrl":"https://control-westus2.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008/credentials?tid=72f988bf-86f1-41af-91ab-2d7cd011db47&oid=982a9823-8994-4220-8520-9e73ecc0abf3&aid=e98cfe21-ce26-4ca4-9459-c5dd9df4e459"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '974'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:01:56 GMT
      expires:
      - '-1'
      location:
      - /subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: '{"location": "westus2", "properties": {"minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName":
      ""}}, "messagingEndpoints": {"fileNotifications": {"ttlAsIso8601": "PT1H", "maxDeliveryCount":
      10}}, "enableFileUploadNotifications": false, "cloudToDevice": {"maxDeliveryCount":
      10, "defaultTtlAsIso8601": "PT1H", "feedback": {"lockDurationAsIso8601": "PT5S",
      "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}}, "sku": {"name": "S1", "capacity":
      1}, "identity": {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities":
      {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '919'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","properties":{"state":"Activating","provisioningState":"Accepted","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '1622'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:02:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:02:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:03:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:03:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:04:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:04:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGE3NTMxNTUtMzA3ZS00MjM2LTljZjEtYzZlN2FiNmQwMmYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:05:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUdb8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2255'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:05:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Storage%20Blob%20Data%20Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Storage Blob Data Contributor","type":"BuiltInRole","description":"Allows
        for read, write and delete access to Azure Storage blob containers and data","assignableScopes":["/"],"permissions":[{"actions":["Microsoft.Storage/storageAccounts/blobServices/containers/delete","Microsoft.Storage/storageAccounts/blobServices/containers/read","Microsoft.Storage/storageAccounts/blobServices/containers/write","Microsoft.Storage/storageAccounts/blobServices/generateUserDelegationKey/action"],"notActions":[],"dataActions":["Microsoft.Storage/storageAccounts/blobServices/containers/blobs/delete","Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read","Microsoft.Storage/storageAccounts/blobServices/containers/blobs/write","Microsoft.Storage/storageAccounts/blobServices/containers/blobs/move/action","Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action"],"notDataActions":[]}],"createdOn":"2017-12-21T00:01:24.7972312Z","updatedOn":"2021-02-04T07:04:50.1529191Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe","type":"Microsoft.Authorization/roleDefinitions","name":"ba92f5b4-2d11-453d-a403-e96b0029c9fe"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1310'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:05:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe",
      "principalId": "e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n -g --sku --location --mintls --mi-system-assigned --mi-user-assigned --role
        --scopes
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000001?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/ba92f5b4-2d11-453d-a403-e96b0029c9fe","principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002","condition":null,"conditionVersion":null,"createdOn":"2021-06-29T04:05:12.2601418Z","updatedOn":"2021-06-29T04:05:12.5101362Z","createdBy":null,"updatedBy":"b0b8600b-83ec-4fed-8430-bec5b21d2c8a","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000001","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000001"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1143'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:05:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2021-03-31
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b/providers/Microsoft.Devices/IotHubs/iotmvrsar55j3rqp5qql","name":"iotmvrsar55j3rqp5qql","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b","etag":"AAAADFDUaZA=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iotmvrsar55j3rqp5qql.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iotmvrsar55j3rqp5qql","endpoint":"sb://iothub-ns-iotmvrsar5-12851992-60afbd5264.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUdb8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11hixhmuw3y43ci","name":"iot-hub-for-test-11hixhmuw3y43ci","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp","etag":"AAAADFDUZxA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Activating","provisioningState":"Activating","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5508'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:05:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2021-03-31
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b/providers/Microsoft.Devices/IotHubs/iotmvrsar55j3rqp5qql","name":"iotmvrsar55j3rqp5qql","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b","etag":"AAAADFDUaZA=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iotmvrsar55j3rqp5qql.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iotmvrsar55j3rqp5qql","endpoint":"sb://iothub-ns-iotmvrsar5-12851992-60afbd5264.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUdb8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11hixhmuw3y43ci","name":"iot-hub-for-test-11hixhmuw3y43ci","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp","etag":"AAAADFDUhUQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"iot-hub-for-test-11hixhmuw3y43ci.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-11hixhmu","endpoint":"sb://iothub-ns-iot-hub-fo-12852088-3ee9cf75d8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5729'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:06:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2021-03-31
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b/providers/Microsoft.Devices/IotHubs/iotmvrsar55j3rqp5qql","name":"iotmvrsar55j3rqp5qql","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgnwrfyygta5nuhw3goyurgc4kax3zm3emywck27rs4n4emyjhrzkwemsgntr5rnr2b","etag":"AAAADFDUaZA=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iotmvrsar55j3rqp5qql.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iotmvrsar55j3rqp5qql","endpoint":"sb://iothub-ns-iotmvrsar5-12851992-60afbd5264.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUdb8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11hixhmuw3y43ci","name":"iot-hub-for-test-11hixhmuw3y43ci","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rgupffciqp6na5fehoblcmtjkn7fm56egzzsveuinjignmzbi2gvldowq3vfav5lgsp","etag":"AAAADFDUhUQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"iot-hub-for-test-11hixhmuw3y43ci.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-11hixhmu","endpoint":"sb://iothub-ns-iot-hub-fo-12852088-3ee9cf75d8.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '5729'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:06:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDUdb8=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [], "storageContainers": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==",
      "containerName": "iothubcontainer", "authenticationType": "identitybased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1559'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDUdb8=''}'
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUdb8=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYjU3Y2UxNzUtMDgwNi00MDg3LThmMWEtYThiNDZhZWQ4Y2Ex?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4871'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:06:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYjU3Y2UxNzUtMDgwNi00MDg3LThmMWEtYThiNDZhZWQ4Y2Ex?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:07:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYjU3Y2UxNzUtMDgwNi00MDg3LThmMWEtYThiNDZhZWQ4Y2Ex?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:07:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fsa --fsi --fcs --fc --fn --fnt --fnd --rd --ct --cdd --ft --fld --fd
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUkDU=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2430'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:07:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2021-06-29T04:00:47Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:07:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "sku": {"name": "Standard", "tier": "Standard"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      Content-Length:
      - '72'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-eventhub/4.1.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009?api-version=2018-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009","name":"ehNamespaceiothubfortest1000009","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"a1bfa635-f2bf-42f1-86b5-848c674fc321:ehnamespaceiothubfortest1f5u4d2k","createdAt":"2021-06-29T04:07:44.003Z","updatedAt":"2021-06-29T04:07:44.003Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000009.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '813'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:07:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '49'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-eventhub/4.1.0 Azure-SDK-For-Python AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009?api-version=2018-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009","name":"ehNamespaceiothubfortest1000009","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"a1bfa635-f2bf-42f1-86b5-848c674fc321:ehnamespaceiothubfortest1f5u4d2k","createdAt":"2021-06-29T04:07:44.003Z","updatedAt":"2021-06-29T04:07:44.003Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000009.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '813'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-eventhub/4.1.0 Azure-SDK-For-Python AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009?api-version=2018-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009","name":"ehNamespaceiothubfortest1000009","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Succeeded","metricId":"a1bfa635-f2bf-42f1-86b5-848c674fc321:ehnamespaceiothubfortest1f5u4d2k","createdAt":"2021-06-29T04:07:44.003Z","updatedAt":"2021-06-29T04:08:35.8Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000009.servicebus.windows.net:443/","status":"Active"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '809'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-eventhub/4.1.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009?api-version=2018-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009","name":"ehNamespaceiothubfortest1000009","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Succeeded","metricId":"a1bfa635-f2bf-42f1-86b5-848c674fc321:ehnamespaceiothubfortest1f5u4d2k","createdAt":"2021-06-29T04:07:44.003Z","updatedAt":"2021-06-29T04:08:35.8Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000009.servicebus.windows.net:443/","status":"Active"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '809'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/SN1
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/SN1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub create
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --resource-group --namespace-name --name
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-eventhub/4.1.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010?api-version=2017-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010","name":"eventHubiothubfortest000010","type":"Microsoft.EventHub/Namespaces/EventHubs","location":"West
        US 2","properties":{"messageRetentionInDays":7,"partitionCount":4,"status":"Active","createdAt":"2021-06-29T04:08:51.223Z","updatedAt":"2021-06-29T04:08:51.403Z","partitionIds":["0","1","2","3"]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '571'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/CH3
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/CH3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28c%3Ac%20eq%20%27e00f6e02-862a-40cf-a60f-a36ed0972a2d%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 29 Jun 2021 04:08:54 GMT
      duration:
      - '700285'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - PqhkpUygPEl0Tp9PwwDgYSrl0p3AZPkca+/Eu98Nu6I=
      ocp-aad-session-key:
      - W5zTzf9F2TfpwkSpSRGKMzhdJ285J76D-bfvXoIgZLe_MLQ7LuknI_fpThL5IXzgCmLVq-5mZJ4t8MrJbLv4q3AqtvSwGfGBirE0QcrJhjw7gh5OFN9X0Ywb73Lo90Vi.Sg46xSo_sBW4B31RNl3aqx6xE_OlNVWEbE-JEJmNkN8
      pragma:
      - no-cache
      request-id:
      - ecb569f9-aba0-4a2a-a438-a5d76e4f9330
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"objectIds": ["e00f6e02-862a-40cf-a60f-a36ed0972a2d"], "includeDirectoryObjectReferences":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/getObjectsByObjectIds?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":["isExplicit=False","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003"],"appDisplayName":null,"appId":"93ab7726-0024-491c-8708-ad4e38d2cc58","applicationTemplateId":null,"appOwnerTenantId":null,"appRoleAssignmentRequired":false,"appRoles":[],"displayName":"identitytesthub000003","errorUrl":null,"homepage":null,"informationalUrls":null,"keyCredentials":[{"customKeyIdentifier":"B96206DAD2545DD0B45BE8F5C0153FC3EED59488","endDate":"2021-09-27T03:57:00Z","keyId":"ac5c6cdb-7f67-495c-82c3-152abbcd3cd5","startDate":"2021-06-29T03:57:00Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":null,"replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["93ab7726-0024-491c-8708-ad4e38d2cc58","https://identity.azure.net/huMhDoWHqx5jvbAZrMETmpCkfI8rWs6HHKJH/06DZ3I="],"servicePrincipalType":"ManagedIdentity","signInAudience":null,"tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1658'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 29 Jun 2021 04:08:54 GMT
      duration:
      - '417626'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - NKGmmWIsb3pu8WtRSbtMITERLwh29zrnYDqQmoC9GLQ=
      ocp-aad-session-key:
      - 2jw0Fv8-ubIul2gBVbFCyECWxs5gBWE04nysCCLLmO9VRxtZsxnOKiO2K_z6dwXlfeRXwJvHgfFCbBxe9SjjD4fcC0IYUWVPkRGsV_uiH8jv36dYX8yTn7hLVHawbk58.4Z8gpHqNliP-UplyGRKdP5cQGV0T-mbZbPHYgWKhmUs
      pragma:
      - no-cache
      request-id:
      - af6cdc79-c43e-4020-96ce-0542ee5f2254
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '3'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Azure%20Event%20Hubs%20Data%20Sender%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Azure Event Hubs Data Sender","type":"BuiltInRole","description":"Allows
        send access to Azure Event Hubs resources.","assignableScopes":["/"],"permissions":[{"actions":["Microsoft.EventHub/*/eventhubs/read"],"notActions":[],"dataActions":["Microsoft.EventHub/*/send/action"],"notDataActions":[]}],"createdOn":"2019-05-10T06:26:12.4673714Z","updatedOn":"2019-08-21T23:02:26.6155679Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975","type":"Microsoft.Authorization/roleDefinitions","name":"2b629674-e913-4c01-ae53-ef4638d8f975"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '698'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975",
      "principalId": "e00f6e02-862a-40cf-a60f-a36ed0972a2d", "principalType": "ServicePrincipal"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '270'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975","principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010","condition":null,"conditionVersion":null,"createdOn":"2021-06-29T04:08:56.0325594Z","updatedOn":"2021-06-29T04:08:56.3138113Z","createdBy":null,"updatedBy":"b0b8600b-83ec-4fed-8430-bec5b21d2c8a","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000002"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1237'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - identity show
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-msi/0.2.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006?api-version=2015-08-31-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006","name":"iot-user-identity000006","type":"Microsoft.ManagedIdentity/userAssignedIdentities","location":"westus2","tags":{},"properties":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba","clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","clientSecretUrl":"https://control-westus2.identity.azure.net/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006/credentials?tid=72f988bf-86f1-41af-91ab-2d7cd011db47&oid=839ede46-b0b8-4bba-882e-2cd01320aaba&aid=58b88f9d-d373-4d3f-9a92-a916a52ad9ab"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '974'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:08:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28c%3Ac%20eq%20%27839ede46-b0b8-4bba-882e-2cd01320aaba%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 29 Jun 2021 04:09:00 GMT
      duration:
      - '356582'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - foGUrSsSgFHJZFrhY+6sZXaWZHAepgmZyUMBMiGG0Mk=
      ocp-aad-session-key:
      - bGoqSxJiVLi9VDVAToc0-Nm5QHL6peTfzLQXoJwXlTGGLEFZ6M4_xNYoc9ZYjgh3c6NWgSHnxJOmmHJIXsCjWGhy26McYk5O-54t-Jp9U3_qQ4invrCEt53fxBr67Lqd.8xWqk0bjDK-26_StN_bZETDHTKxav2MsAPSExoCW_sI
      pragma:
      - no-cache
      request-id:
      - 0399dba9-06b1-4959-b66e-3fd7f597a85f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"objectIds": ["839ede46-b0b8-4bba-882e-2cd01320aaba"], "includeDirectoryObjectReferences":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '97'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/getObjectsByObjectIds?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"839ede46-b0b8-4bba-882e-2cd01320aaba","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":["isExplicit=True","/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006"],"appDisplayName":null,"appId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","applicationTemplateId":null,"appOwnerTenantId":null,"appRoleAssignmentRequired":false,"appRoles":[],"displayName":"iot-user-identity000006","errorUrl":null,"homepage":null,"informationalUrls":null,"keyCredentials":[{"customKeyIdentifier":"BB4EA59290BE2B14B91E22D458CC13D69818B0BA","endDate":"2021-09-27T03:56:00Z","keyId":"c93a00cd-56b2-4003-8796-80f959d5e9b9","startDate":"2021-06-29T03:56:00Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":null,"replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["58b88f9d-d373-4d3f-9a92-a916a52ad9ab","https://identity.azure.net/W5iAW9W85vt3+Z+mhP1YQExJ5WsksRcrpvtd7P35Gg0="],"servicePrincipalType":"ManagedIdentity","signInAudience":null,"tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '1680'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Tue, 29 Jun 2021 04:09:00 GMT
      duration:
      - '500269'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 32nbQkfBCJ6nGVZl34q0Ikv/IU1IXH9AncOJAv2FPQc=
      ocp-aad-session-key:
      - MNWdOXrcUHZOL_TILm02zi05RaEnoWn59ZJCPPhG86PMOpxKfUqPRTP00df7Oz5bsRG9fQ-sOkDAta_jDMMA4cYtLH-JDa_KzxpcFpuTtAYgUsGuhrL91dBAoCUXRn9s.mwnbqVdtjzJE7k_HfV8e2fN7SJ42ZVhI_KNTUac4OJI
      pragma:
      - no-cache
      request-id:
      - 88a41eb0-5111-4e53-9faa-75f8fd545cd6
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '3'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Azure%20Event%20Hubs%20Data%20Sender%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Azure Event Hubs Data Sender","type":"BuiltInRole","description":"Allows
        send access to Azure Event Hubs resources.","assignableScopes":["/"],"permissions":[{"actions":["Microsoft.EventHub/*/eventhubs/read"],"notActions":[],"dataActions":["Microsoft.EventHub/*/send/action"],"notDataActions":[]}],"createdOn":"2019-05-10T06:26:12.4673714Z","updatedOn":"2019-08-21T23:02:26.6155679Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975","type":"Microsoft.Authorization/roleDefinitions","name":"2b629674-e913-4c01-ae53-ef4638d8f975"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '698'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:09:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975",
      "principalId": "839ede46-b0b8-4bba-882e-2cd01320aaba", "principalType": "ServicePrincipal"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - role assignment create
      Connection:
      - keep-alive
      Content-Length:
      - '270'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --role --assignee --scope
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) msrest/0.6.21 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.25.0
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2020-04-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/2b629674-e913-4c01-ae53-ef4638d8f975","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010","condition":null,"conditionVersion":null,"createdOn":"2021-06-29T04:09:02.4147914Z","updatedOn":"2021-06-29T04:09:02.7585766Z","createdBy":null,"updatedBy":"b0b8600b-83ec-4fed-8430-bec5b21d2c8a","delegatedManagedIdentityResourceId":null,"description":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000009/eventhubs/eventHubiothubfortest000010/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1237'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:09:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:09:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:09:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUkDU=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2430'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:09:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDUkDU=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [{"endpointUri": "sb://ehNamespaceiothubfortest1000009.servicebus.windows.net",
      "entityPath": "eventHubiothubfortest000010", "authenticationType": "identitybased",
      "name": "EHSystemIdentityEndpoint000004", "subscriptionId": "a1bfa635-f2bf-42f1-86b5-848c674fc321",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": []}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '1841'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDUkDU=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUkDU=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODY3M2JmMzktMTIxNy00ZDRlLWIzY2ItNDMxZWRkYmIwNDE2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:09:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODY3M2JmMzktMTIxNy00ZDRlLWIzY2ItNDMxZWRkYmIwNDE2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:10:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfODY3M2JmMzktMTIxNy00ZDRlLWIzY2ItNDMxZWRkYmIwNDE2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:10:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUrdM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:10:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:10:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:10:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUrdM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:10:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDUrdM=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [{"id": "976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6",
      "endpointUri": "sb://ehNamespaceiothubfortest1000009.servicebus.windows.net",
      "entityPath": "eventHubiothubfortest000010", "authenticationType": "identityBased",
      "name": "EHSystemIdentityEndpoint000004", "subscriptionId": "a1bfa635-f2bf-42f1-86b5-848c674fc321",
      "resourceGroup": "clitest.rg000001"}, {"endpointUri": "sb://ehNamespaceiothubfortest1000009.servicebus.windows.net",
      "entityPath": "eventHubiothubfortest000010", "authenticationType": "identitybased",
      "identity": {"userAssignedIdentity": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006"},
      "name": "EHUserIdentityEndpoint000005", "subscriptionId": "a1bfa635-f2bf-42f1-86b5-848c674fc321",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": []}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '2531'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDUrdM=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUrdM=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"},{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","identity":{"userAssignedIdentity":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006"},"name":"EHUserIdentityEndpoint000005","id":"032d2690-ed5f-43fd-b80c-bc4c28233e66","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmY0ZGYzZmUtOGZmYS00Nzc2LWJhZDEtMjhiNDQ1NDFkMWFi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5943'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:11:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmY0ZGYzZmUtOGZmYS00Nzc2LWJhZDEtMjhiNDQ1NDFkMWFi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:11:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmY0ZGYzZmUtOGZmYS00Nzc2LWJhZDEtMjhiNDQ1NDFkMWFi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s --auth-type --identity --endpoint-uri --entity-path
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUupk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"},{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","identity":{"userAssignedIdentity":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006"},"name":"EHUserIdentityEndpoint000005","id":"032d2690-ed5f-43fd-b80c-bc4c28233e66","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3502'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:12:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUupk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"},{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","identity":{"userAssignedIdentity":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006"},"name":"EHUserIdentityEndpoint000005","id":"032d2690-ed5f-43fd-b80c-bc4c28233e66","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3502'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDUupk=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [{"id": "976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6",
      "endpointUri": "sb://ehNamespaceiothubfortest1000009.servicebus.windows.net",
      "entityPath": "eventHubiothubfortest000010", "authenticationType": "identityBased",
      "name": "EHSystemIdentityEndpoint000004", "subscriptionId": "a1bfa635-f2bf-42f1-86b5-848c674fc321",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": []}, "routes": [],
      "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '1887'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDUupk=''}'
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUupk=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmRjZjQ5OWItYjZmZS00YWNlLTg1MmMtOWM1NDVlNjRmMGYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmRjZjQ5OWItYjZmZS00YWNlLTg1MmMtOWM1NDVlNjRmMGYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:12:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNmRjZjQ5OWItYjZmZS00YWNlLTg1MmMtOWM1NDVlNjRmMGYy?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:13:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUxoM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:13:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:13:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:13:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUxoM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"endpointUri":"sb://ehNamespaceiothubfortest1000009.servicebus.windows.net","entityPath":"eventHubiothubfortest000010","authenticationType":"identityBased","name":"EHSystemIdentityEndpoint000004","id":"976fcd48-4eef-4f2f-afa8-85f5d8fb5bb6","subscriptionId":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourceGroup":"clitest.rg000001"}],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2829'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:13:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDUxoM=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [], "storageContainers": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '1475'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDUxoM=''}'
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDUxoM=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNDU0NmJmZDMtNGQ2Yi00ZDQ4LWFiNzEtMDI5MjM5ZDY0Mjlh?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4871'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:13:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNDU0NmJmZDMtNGQ2Yi00ZDQ4LWFiNzEtMDI5MjM5ZDY0Mjlh?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNDU0NmJmZDMtNGQ2Yi00ZDQ4LWFiNzEtMDI5MjM5ZDY0Mjlh?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDU05w=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2430'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "properties": {"addressSpace": {"addressPrefixes":
      ["10.0.0.0/16"]}, "dhcpOptions": {}, "subnets": [{"name": "subnet1", "properties":
      {"addressPrefix": "10.0.0.0/24", "privateEndpointNetworkPolicies": "Enabled",
      "privateLinkServiceNetworkPolicies": "Enabled"}}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      Content-Length:
      - '299'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g -l --subnet-name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"test-iot-vnet\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet\",\r\n
        \ \"etag\": \"W/\\\"2d93c911-36c2-44c0-a102-4d4d7e0fcd90\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"westus2\",\r\n
        \ \"tags\": {},\r\n  \"properties\": {\r\n    \"provisioningState\": \"Updating\",\r\n
        \   \"resourceGuid\": \"c9751314-40c2-48f6-a39b-53f394495a23\",\r\n    \"addressSpace\":
        {\r\n      \"addressPrefixes\": [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n
        \   },\r\n    \"dhcpOptions\": {\r\n      \"dnsServers\": []\r\n    },\r\n
        \   \"subnets\": [\r\n      {\r\n        \"name\": \"subnet1\",\r\n        \"id\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\",\r\n
        \       \"etag\": \"W/\\\"2d93c911-36c2-44c0-a102-4d4d7e0fcd90\\\"\",\r\n
        \       \"properties\": {\r\n          \"provisioningState\": \"Updating\",\r\n
        \         \"addressPrefix\": \"10.0.0.0/24\",\r\n          \"delegations\":
        [],\r\n          \"privateEndpointNetworkPolicies\": \"Enabled\",\r\n          \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n        },\r\n        \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n
        \     }\r\n    ],\r\n    \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\":
        false\r\n  }\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/60605a62-5a4d-4533-8778-1956eb16bb93?api-version=2021-02-01
      cache-control:
      - no-cache
      content-length:
      - '1428'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - a938109e-537a-4f1d-bc21-e658dc4fc0b8
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g -l --subnet-name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/60605a62-5a4d-4533-8778-1956eb16bb93?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - f71f1e36-151f-40ff-ac1d-cdd85c00cb7f
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g -l --subnet-name
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"test-iot-vnet\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet\",\r\n
        \ \"etag\": \"W/\\\"296dc7a7-da73-4756-b223-124906f39134\\\"\",\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks\",\r\n  \"location\": \"westus2\",\r\n
        \ \"tags\": {},\r\n  \"properties\": {\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"resourceGuid\": \"c9751314-40c2-48f6-a39b-53f394495a23\",\r\n    \"addressSpace\":
        {\r\n      \"addressPrefixes\": [\r\n        \"10.0.0.0/16\"\r\n      ]\r\n
        \   },\r\n    \"dhcpOptions\": {\r\n      \"dnsServers\": []\r\n    },\r\n
        \   \"subnets\": [\r\n      {\r\n        \"name\": \"subnet1\",\r\n        \"id\":
        \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\",\r\n
        \       \"etag\": \"W/\\\"296dc7a7-da73-4756-b223-124906f39134\\\"\",\r\n
        \       \"properties\": {\r\n          \"provisioningState\": \"Succeeded\",\r\n
        \         \"addressPrefix\": \"10.0.0.0/24\",\r\n          \"delegations\":
        [],\r\n          \"privateEndpointNetworkPolicies\": \"Enabled\",\r\n          \"privateLinkServiceNetworkPolicies\":
        \"Enabled\"\r\n        },\r\n        \"type\": \"Microsoft.Network/virtualNetworks/subnets\"\r\n
        \     }\r\n    ],\r\n    \"virtualNetworkPeerings\": [],\r\n    \"enableDdosProtection\":
        false\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1430'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:43 GMT
      etag:
      - W/"296dc7a7-da73-4756-b223-124906f39134"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - c4e4e124-40ef-4038-96ab-5f1d3fa0d846
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --vnet-name -g --disable-private-endpoint-network-policies
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"subnet1\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\",\r\n
        \ \"etag\": \"W/\\\"296dc7a7-da73-4756-b223-124906f39134\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/24\",\r\n
        \   \"delegations\": [],\r\n    \"privateEndpointNetworkPolicies\": \"Enabled\",\r\n
        \   \"privateLinkServiceNetworkPolicies\": \"Enabled\"\r\n  },\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '594'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:45 GMT
      etag:
      - W/"296dc7a7-da73-4756-b223-124906f39134"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 5484086d-f7f3-4952-b1d1-528751dfd00a
    status:
      code: 200
      message: OK
- request:
    body: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1",
      "name": "subnet1", "type": "Microsoft.Network/virtualNetworks/subnets", "properties":
      {"addressPrefix": "10.0.0.0/24", "delegations": [], "privateEndpointNetworkPolicies":
      "Disabled", "privateLinkServiceNetworkPolicies": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet update
      Connection:
      - keep-alive
      Content-Length:
      - '459'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n --vnet-name -g --disable-private-endpoint-network-policies
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"subnet1\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\",\r\n
        \ \"etag\": \"W/\\\"a9b9245c-fe00-43a2-824b-a1fbc2314ce8\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Updating\",\r\n    \"addressPrefix\": \"10.0.0.0/24\",\r\n
        \   \"delegations\": [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n
        \   \"privateLinkServiceNetworkPolicies\": \"Enabled\"\r\n  },\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/787bd704-5230-4425-b65b-d6e0e964ad71?api-version=2021-02-01
      cache-control:
      - no-cache
      content-length:
      - '594'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 44dcf47b-a7b5-4f8e-a361-fa2409807144
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --vnet-name -g --disable-private-endpoint-network-policies
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/787bd704-5230-4425-b65b-d6e0e964ad71?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 421408b6-fd52-4460-9759-78b2c52b40a8
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network vnet subnet update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --vnet-name -g --disable-private-endpoint-network-policies
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"subnet1\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\",\r\n
        \ \"etag\": \"W/\\\"fa31110c-cff2-49e5-936e-1bad69bd78e9\\\"\",\r\n  \"properties\":
        {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"addressPrefix\": \"10.0.0.0/24\",\r\n
        \   \"delegations\": [],\r\n    \"privateEndpointNetworkPolicies\": \"Disabled\",\r\n
        \   \"privateLinkServiceNetworkPolicies\": \"Enabled\"\r\n  },\r\n  \"type\":
        \"Microsoft.Network/virtualNetworks/subnets\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '595'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:49 GMT
      etag:
      - W/"fa31110c-cff2-49e5-936e-1bad69bd78e9"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 602f6fc5-39ea-49fe-a669-c922055b35e1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-link-resource list
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateLinkResources?api-version=2020-03-01
  response:
    body:
      string: '{"value":[{"properties":{"groupId":"iotHub","requiredMembers":["iotHub","eventHub"],"requiredZoneNames":["privatelink.azure-devices.net","privatelink.servicebus.windows.net"]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateLinkResources/iotHub","name":"iotHub","type":"Microsoft.Devices/IotHubs/PrivateLinkResources"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '497'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:14:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDU05w=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2430'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:14:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"subnet": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1",
      "properties": {"privateEndpointNetworkPolicies": "Enabled", "privateLinkServiceNetworkPolicies":
      "Enabled"}}, "privateLinkServiceConnections": [{"name": "iot-private-endpoint-connection",
      "properties": {"privateLinkServiceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003",
      "groupIds": ["iotHub"]}}]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '745'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"iot-private-endpoint\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint\",\r\n
        \ \"etag\": \"W/\\\"7c86deb3-dd6e-4671-b7ec-2bd661e80518\\\"\",\r\n  \"type\":
        \"Microsoft.Network/privateEndpoints\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Updating\",\r\n    \"resourceGuid\":
        \"7952aa98-b9f2-438a-9854-5b5469e3e0fc\",\r\n    \"privateLinkServiceConnections\":
        [\r\n      {\r\n        \"name\": \"iot-private-endpoint-connection\",\r\n
        \       \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint/privateLinkServiceConnections/iot-private-endpoint-connection\",\r\n
        \       \"etag\": \"W/\\\"7c86deb3-dd6e-4671-b7ec-2bd661e80518\\\"\",\r\n
        \       \"properties\": {\r\n          \"provisioningState\": \"Succeeded\",\r\n
        \         \"privateLinkServiceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003\",\r\n
        \         \"groupIds\": [\r\n            \"iotHub\"\r\n          ],\r\n          \"privateLinkServiceConnectionState\":
        {\r\n            \"status\": \"Approved\",\r\n            \"description\":
        \"\",\r\n            \"actionsRequired\": \"None\"\r\n          }\r\n        },\r\n
        \       \"type\": \"Microsoft.Network/privateEndpoints/privateLinkServiceConnections\"\r\n
        \     }\r\n    ],\r\n    \"manualPrivateLinkServiceConnections\": [],\r\n
        \   \"subnet\": {\r\n      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\"\r\n
        \   },\r\n    \"networkInterfaces\": [\r\n      {\r\n        \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/networkInterfaces/iot-private-endpoint.nic.f51f845c-a6e2-4e94-b192-c3297ad2cef1\"\r\n
        \     }\r\n    ],\r\n    \"customDnsConfigs\": []\r\n  }\r\n}"
    headers:
      azure-asyncnotification:
      - Enabled
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
      cache-control:
      - no-cache
      content-length:
      - '2286'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:15:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - f3e44b51-4f49-42ba-aa1f-a9b88a6505f4
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:15:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - fd59953f-44cc-4225-8fac-e7b0096e9b97
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:15:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 89ce35d6-834c-438a-b85b-033b359291e6
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:15:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 10a934d1-4391-4bae-a358-1fec0affff14
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:16:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 5edca1f4-daa6-4660-b1b2-b16a02baa4f1
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"InProgress\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '30'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:17:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - c38c1f64-09b6-408c-b2b8-16e386b3f166
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Network/locations/westus2/operations/d8dc023b-7181-4e2b-b34e-bd66aa1383ad?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"status\": \"Succeeded\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '29'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 3a0d68a6-d4a5-4d0f-8970-97bdd794d19a
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --vnet-name --subnet -l --connection-name --private-connection-resource-id
        --group-ids
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-network/19.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint?api-version=2021-02-01
  response:
    body:
      string: "{\r\n  \"name\": \"iot-private-endpoint\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint\",\r\n
        \ \"etag\": \"W/\\\"076434ed-2b78-48e6-99b6-59dc465789df\\\"\",\r\n  \"type\":
        \"Microsoft.Network/privateEndpoints\",\r\n  \"location\": \"westus2\",\r\n
        \ \"properties\": {\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"resourceGuid\":
        \"7952aa98-b9f2-438a-9854-5b5469e3e0fc\",\r\n    \"privateLinkServiceConnections\":
        [\r\n      {\r\n        \"name\": \"iot-private-endpoint-connection\",\r\n
        \       \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint/privateLinkServiceConnections/iot-private-endpoint-connection\",\r\n
        \       \"etag\": \"W/\\\"076434ed-2b78-48e6-99b6-59dc465789df\\\"\",\r\n
        \       \"properties\": {\r\n          \"provisioningState\": \"Succeeded\",\r\n
        \         \"privateLinkServiceId\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003\",\r\n
        \         \"groupIds\": [\r\n            \"iotHub\"\r\n          ],\r\n          \"privateLinkServiceConnectionState\":
        {\r\n            \"status\": \"Approved\",\r\n            \"description\":
        \"Auto-Approved\",\r\n            \"actionsRequired\": \"None\"\r\n          }\r\n
        \       },\r\n        \"type\": \"Microsoft.Network/privateEndpoints/privateLinkServiceConnections\"\r\n
        \     }\r\n    ],\r\n    \"manualPrivateLinkServiceConnections\": [],\r\n
        \   \"subnet\": {\r\n      \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/virtualNetworks/test-iot-vnet/subnets/subnet1\"\r\n
        \   },\r\n    \"networkInterfaces\": [\r\n      {\r\n        \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/networkInterfaces/iot-private-endpoint.nic.f51f845c-a6e2-4e94-b192-c3297ad2cef1\"\r\n
        \     }\r\n    ],\r\n    \"customDnsConfigs\": [\r\n      {\r\n        \"fqdn\":
        \"identitytesthub000003.azure-devices.net\",\r\n        \"ipAddresses\": [\r\n
        \         \"10.0.0.4\"\r\n        ]\r\n      },\r\n      {\r\n        \"fqdn\":
        \"iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net\",\r\n        \"ipAddresses\":
        [\r\n          \"10.0.0.5\"\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2616'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:27 GMT
      etag:
      - W/"076434ed-2b78-48e6-99b6-59dc465789df"
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-arm-service-request-id:
      - 059d68ef-90e1-4e89-a522-f28000b2796f
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:18:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDU9dk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3284'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection list
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections?api-version=2020-03-01
  response:
    body:
      string: '{"value":[{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '834'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"privateEndpoint": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},
      "privateLinkServiceConnectionState": {"status": "Approved", "description": "Approving
      endpoint connection", "actionsRequired": "None"}}, "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd",
      "name": "identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd", "type":
      "Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      Content-Length:
      - '854'
      Content-Type:
      - application/json
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Approving
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:18:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:19:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:19:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:19:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:19:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:19:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:20:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:20:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:20:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:20:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:20:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:21:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:21:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:21:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:21:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:21:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"privateEndpoint": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},
      "privateLinkServiceConnectionState": {"status": "Approved", "description": "Approving
      endpoint connection", "actionsRequired": "None"}}, "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd",
      "name": "identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd", "type":
      "Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      Content-Length:
      - '854'
      Content-Type:
      - application/json
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Approving
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:22:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:23:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:23:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:23:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:23:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:23:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:24:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:24:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:24:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:24:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:24:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:25:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:25:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:25:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:25:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:25:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection approve
      Connection:
      - keep-alive
      ParameterSetName:
      - --id --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Approved","description":"Auto-Approved","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"privateEndpoint": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},
      "privateLinkServiceConnectionState": {"status": "Rejected", "description": "Rejecting
      endpoint connection", "actionsRequired": "None"}}, "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd",
      "name": "identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd", "type":
      "Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      Content-Length:
      - '854'
      Content-Type:
      - application/json
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOTc5ODkxYjMtM2E3ZC00NDAyLWEyNzMtNzM0YWQ4NDQyNzQ1?api-version=2020-03-01&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:26:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:27:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:27:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:27:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:27:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:27:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:28:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:28:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:28:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:28:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:28:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:29:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:29:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:29:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:29:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:29:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection reject
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g --description
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection show
      Connection:
      - keep-alive
      ParameterSetName:
      - --type -n --resource-name -g
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: '{"properties":{"privateEndpoint":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Network/privateEndpoints/iot-private-endpoint"},"privateLinkServiceConnectionState":{"status":"Rejected","description":"Rejecting
        endpoint connection","actionsRequired":"None"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/PrivateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","name":"identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd","type":"Microsoft.Devices/IotHubs/PrivateEndpointConnections"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - network private-endpoint-connection delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --type -n --resource-name -g -y
      User-Agent:
      - python/3.8.10 (Windows-10-10.0.19043-SP0) AZURECLI/2.25.0
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003/privateEndpointConnections/identitytesthub000003.9125dbf2-88ea-4c6c-9d61-b802bdc118bd?api-version=2020-03-01
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjg2MTBhYmMtOWRiNC00MDAxLTkwMzYtOGU3ODdiNzNiOTE2?api-version=2020-03-01&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:31 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjg2MTBhYmMtOWRiNC00MDAxLTkwMzYtOGU3ODdiNzNiOTE2?api-version=2020-03-01&operationSource=os_ih
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:30:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVfX0=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:30:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVfiA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:30:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVfiA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:30:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:31:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVfiA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:31:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDViRg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:31:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDViRg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:31:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDViRg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:31:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDViRg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:31:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:32:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDViRg=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Transitioning","provisioningState":"Transitioning","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2473'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:32:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - --n -g --query
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVlCY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2462'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:32:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVlCY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2462'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVlCY=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '1993'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVlCY=''}'
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVlCY=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMGJmZGVkYmEtMzc3Yy00M2E2LTgyN2MtOWQ3YTZjZTdjYjNi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5351'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:32:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMGJmZGVkYmEtMzc3Yy00M2E2LTgyN2MtOWQ3YTZjZTdjYjNi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMGJmZGVkYmEtMzc3Yy00M2E2LTgyN2MtOWQ3YTZjZTdjYjNi?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVoCs=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3146'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:33:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1194'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVoCs=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"e00f6e02-862a-40cf-a60f-a36ed0972a2d"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3146'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVoCs=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '1977'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVoCs=''}'
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVoCs=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}}}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZDEzYTA1MmYtM2EwZS00M2FmLTg2NDAtYmU2MzMzZmU0MTJk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5282'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:33:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4997'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZDEzYTA1MmYtM2EwZS00M2FmLTg2NDAtYmU2MzMzZmU0MTJk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:34:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfZDEzYTA1MmYtM2EwZS00M2FmLTg2NDAtYmU2MzMzZmU0MTJk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:34:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVq84=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3027'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:34:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:34:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:34:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVq84=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3027'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:34:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVq84=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '1993'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVq84=''}'
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVq84=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}},"principalId":"5bee208e-2ce0-402f-ae4b-e0e2ec952f06"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjI0OTNjNmUtZDg5Mi00MzFiLTg1NzYtZDY2ZDFkMzY0OWE1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5351'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:35:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjI0OTNjNmUtZDg5Mi00MzFiLTg1NzYtZDY2ZDFkMzY0OWE1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:35:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMjI0OTNjNmUtZDg5Mi00MzFiLTg1NzYtZDY2ZDFkMzY0OWE1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVs9U=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"5bee208e-2ce0-402f-ae4b-e0e2ec952f06"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3146'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:36:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVs9U=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"5bee208e-2ce0-402f-ae4b-e0e2ec952f06"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3146'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVs9U=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '1977'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVs9U=''}'
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVs9U=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}}}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMzM4OTliMjctYzAzMy00NmNjLTg0ODctY2I5NjZiNzY1N2I2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5282'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfMzM4OTliMjctYzAzMy00NmNjLTg0ODctY2I5NjZiNzY1N2I2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVuys=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3027'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:36:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1192'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVuys=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000007":{"clientId":"6f3a1e6b-bfd4-4f37-b950-ccd214be330b","principalId":"20f3710e-0f41-4ea5-adee-8d907566efcc"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3027'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVuys=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '1735'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVuys=''}'
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVuys=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}}}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGVkZDYyMWQtYTQyNS00MjkzLTk1MWUtNzQ1ZDIxNjlkODM2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:36:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfOGVkZDYyMWQtYTQyNS00MjkzLTk1MWUtNzQ1ZDIxNjlkODM2?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVwXM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:37:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:37:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:37:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVwXM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:37:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVwXM=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned, UserAssigned", "userAssignedIdentities": {"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":
      {}, "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      Content-Length:
      - '1751'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVwXM=''}'
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVwXM=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{}},"principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTVmNmVkNjAtZTQ1Mi00ODliLWE2YjEtYjlhMGUwZjFhMmFk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '5111'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:37:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4997'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTVmNmVkNjAtZTQ1Mi00ODliLWE2YjEtYjlhMGUwZjFhMmFk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYTVmNmVkNjAtZTQ1Mi00ODliLWE2YjEtYjlhMGUwZjFhMmFk?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity assign
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVyWw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2804'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:38:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVyWw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000006":{"clientId":"58b88f9d-d373-4d3f-9a92-a916a52ad9ab","principalId":"839ede46-b0b8-4bba-882e-2cd01320aaba"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001/providers/Microsoft.ManagedIdentity/userAssignedIdentities/iot-user-identity000008":{"clientId":"e98cfe21-ce26-4ca4-9459-c5dd9df4e459","principalId":"982a9823-8994-4220-8520-9e73ecc0abf3"}},"principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2804'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDVyWw=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "SystemAssigned"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '1225'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDVyWw=''}'
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDVyWw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned","principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzMzM2U2OTctMGNmNi00ZGNlLWJmZDgtYWE2MjU2OGE5NzI4?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4590'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:38:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4997'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzMzM2U2OTctMGNmNi00ZGNlLWJmZDgtYWE2MjU2OGE5NzI4?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:39:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfYzMzM2U2OTctMGNmNi00ZGNlLWJmZDgtYWE2MjU2OGE5NzI4?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:39:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --user-assigned
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDV1x8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned","principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2079'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:39:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-resource/18.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2021-01-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Tue, 29 Jun 2021 04:39:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "identitytesthub000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '44'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2021-03-31
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''identitytesthub000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '124'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:39:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDV1x8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned","principalId":"0bf14a40-1c2d-4ef6-a81a-eb08f3d2f6b5"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2079'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:39:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {}, "etag": "AAAADFDV1x8=", "properties":
      {"ipFilterRules": [], "minTlsVersion": "1.2", "privateEndpointConnections":
      [], "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": []}, "routes": [], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT1H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer", "authenticationType": "identityBased"}},
      "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601": "PT1M",
      "ttlAsIso8601": "P1DT8H", "maxDeliveryCount": 80}}, "enableFileUploadNotifications":
      true, "cloudToDevice": {"maxDeliveryCount": 46, "defaultTtlAsIso8601": "P1DT10H",
      "feedback": {"lockDurationAsIso8601": "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount":
      76}}, "features": "None"}, "sku": {"name": "S1", "capacity": 1}, "identity":
      {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      Content-Length:
      - '1215'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADFDV1x8=''}'
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDV1x8=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2-operationmonitoring","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-664b142e-bb5a-47c8-9829-eb74cb186bff-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-39cd8770-8657-47ef-a026-4be7de78a5df-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Tue,
        29 Jun 2021 04:03:56 GMT","ModifiedTime":"Tue, 29 Jun 2021 04:03:56 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNTZlODNlNjEtM2ZiOC00ZTU0LWI1NjItMTFkOTBjNjYzMTQ1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4477'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:40:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNTZlODNlNjEtM2ZiOC00ZTU0LWI1NjItMTFkOTBjNjYzMTQ1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:40:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/operationResults/b3NfaWhfNTZlODNlNjEtM2ZiOC00ZTU0LWI1NjItMTFkOTBjNjYzMTQ1?api-version=2021-03-31&operationSource=os_ih&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:41:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub identity remove
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --system
      User-Agent:
      - AZURECLI/2.25.0 azsdk-python-azure-mgmt-iothub/2.0.0 Python/3.8.10 (Windows-10-10.0.19043-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003?api-version=2021-03-31
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/identitytesthub000003","name":"identitytesthub000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"a1bfa635-f2bf-42f1-86b5-848c674fc321","resourcegroup":"clitest.rg000001","etag":"AAAADFDV45U=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"identitytesthub000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"identitytesthubof77gzlom2","endpoint":"sb://iothub-ns-identityte-12852045-5f6c872f7f.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","privateEndpointConnections":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1966'
      content-type:
      - application/json; charset=utf-8
      date:
      - Tue, 29 Jun 2021 04:41:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
