interactions:
- request:
    body: '{"location": "eastus", "properties": {"administratorLogin": "admin123",
      "administratorLoginPassword": "SecretPassword123", "administrators": {}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      Content-Length:
      - '145'
      Content-Type:
      - application/json
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"operation":"UpsertLogicalServer","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
      cache-control:
      - no-cache
      content-length:
      - '73'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:13 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverOperationResults/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"InProgress","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:14:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/37c3fc7e-9963-48d9-a1d6-b021f2994b1d?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"37c3fc7e-9963-48d9-a1d6-b021f2994b1d","status":"Succeeded","startTime":"2022-03-16T12:14:13.68Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:15:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server create
      Connection:
      - keep-alive
      ParameterSetName:
      - -l -g -n -u -p
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"kind":"v12.0","properties":{"administratorLogin":"admin123","version":"12.0","state":"Ready","fullyQualifiedDomainName":"clitestserver000002.database.windows.net","privateEndpointConnections":[],"publicNetworkAccess":"Enabled","restrictOutboundNetworkAccess":"Disabled"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002","name":"clitestserver000002","type":"Microsoft.Sql/servers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '496'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:15:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"kind":"v12.0","properties":{"administratorLogin":"admin123","version":"12.0","state":"Ready","fullyQualifiedDomainName":"clitestserver000002.database.windows.net","privateEndpointConnections":[],"publicNetworkAccess":"Enabled","restrictOutboundNetworkAccess":"Disabled"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002","name":"clitestserver000002","type":"Microsoft.Sql/servers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '496'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus", "identity": {"type": "SystemAssigned"}, "properties":
      {"administratorLogin": "admin123", "version": "12.0", "publicNetworkAccess":
      "Enabled", "restrictOutboundNetworkAccess": "Disabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      Content-Length:
      - '210'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"operation":"UpsertLogicalServer","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
      cache-control:
      - no-cache
      content-length:
      - '74'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:19 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverOperationResults/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"de2df986-00bd-4ba2-b213-e9c5323258b5","status":"InProgress","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"de2df986-00bd-4ba2-b213-e9c5323258b5","status":"InProgress","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"de2df986-00bd-4ba2-b213-e9c5323258b5","status":"InProgress","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"de2df986-00bd-4ba2-b213-e9c5323258b5","status":"InProgress","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverAzureAsyncOperation/de2df986-00bd-4ba2-b213-e9c5323258b5?api-version=2021-02-01-preview
  response:
    body:
      string: '{"name":"de2df986-00bd-4ba2-b213-e9c5323258b5","status":"Succeeded","startTime":"2022-03-16T12:16:19.857Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server update
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n -i
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"identity":{"principalId":"2c6e318c-9bc0-497f-8613-daa3a2f0cb7e","type":"SystemAssigned","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47"},"kind":"v12.0","properties":{"administratorLogin":"admin123","version":"12.0","state":"Ready","fullyQualifiedDomainName":"clitestserver000002.database.windows.net","privateEndpointConnections":[],"publicNetworkAccess":"Enabled","restrictOutboundNetworkAccess":"Disabled"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002","name":"clitestserver000002","type":"Microsoft.Sql/servers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '636'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"identity":{"principalId":"2c6e318c-9bc0-497f-8613-daa3a2f0cb7e","type":"SystemAssigned","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47"},"kind":"v12.0","properties":{"administratorLogin":"admin123","version":"12.0","state":"Ready","fullyQualifiedDomainName":"clitestserver000002.database.windows.net","privateEndpointConnections":[],"publicNetworkAccess":"Enabled","restrictOutboundNetworkAccess":"Disabled"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002","name":"clitestserver000002","type":"Microsoft.Sql/servers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '636'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002?api-version=2021-02-01-preview
  response:
    body:
      string: '{"identity":{"principalId":"2c6e318c-9bc0-497f-8613-daa3a2f0cb7e","type":"SystemAssigned","tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47"},"kind":"v12.0","properties":{"administratorLogin":"admin123","version":"12.0","state":"Ready","fullyQualifiedDomainName":"clitestserver000002.database.windows.net","privateEndpointConnections":[],"publicNetworkAccess":"Enabled","restrictOutboundNetworkAccess":"Disabled"},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002","name":"clitestserver000002","type":"Microsoft.Sql/servers"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '636'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      Content-Length:
      - '22'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/databases/sqltdebyok000004?api-version=2021-05-01-preview
  response:
    body:
      string: '{"operation":"CreateLogicalDatabase","startTime":"2022-03-16T12:16:50.767Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseAzureAsyncOperation/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
      cache-control:
      - no-cache
      content-length:
      - '76'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:16:50 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseOperationResults/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseAzureAsyncOperation/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
  response:
    body:
      string: '{"name":"e34810a1-2f73-4abc-a801-77c2df8efe9f","status":"InProgress","startTime":"2022-03-16T12:16:50.767Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseAzureAsyncOperation/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
  response:
    body:
      string: '{"name":"e34810a1-2f73-4abc-a801-77c2df8efe9f","status":"InProgress","startTime":"2022-03-16T12:16:50.767Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseAzureAsyncOperation/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
  response:
    body:
      string: '{"name":"e34810a1-2f73-4abc-a801-77c2df8efe9f","status":"InProgress","startTime":"2022-03-16T12:16:50.767Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/databaseAzureAsyncOperation/e34810a1-2f73-4abc-a801-77c2df8efe9f?api-version=2021-05-01-preview
  response:
    body:
      string: '{"name":"e34810a1-2f73-4abc-a801-77c2df8efe9f","status":"Succeeded","startTime":"2022-03-16T12:16:50.767Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql db create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g --server --name
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/databases/sqltdebyok000004?api-version=2021-05-01-preview
  response:
    body:
      string: '{"sku":{"name":"GP_Gen5","tier":"GeneralPurpose","family":"Gen5","capacity":2},"kind":"v12.0,user,vcore","properties":{"collation":"SQL_Latin1_General_CP1_CI_AS","maxSizeBytes":34359738368,"status":"Online","databaseId":"bb414993-a13e-4f43-88e4-530969dc2158","creationDate":"2022-03-16T12:17:43.597Z","currentServiceObjectiveName":"GP_Gen5_2","requestedServiceObjectiveName":"GP_Gen5_2","defaultSecondaryLocation":"westus","catalogCollation":"SQL_Latin1_General_CP1_CI_AS","zoneRedundant":false,"licenseType":"LicenseIncluded","maxLogSizeBytes":193273528320,"readScale":"Disabled","currentSku":{"name":"GP_Gen5","tier":"GeneralPurpose","family":"Gen5","capacity":2},"currentBackupStorageRedundancy":"Geo","requestedBackupStorageRedundancy":"Geo","maintenanceConfigurationId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Maintenance/publicMaintenanceConfigurations/SQL_Default","isLedgerOn":false,"isInfraEncryptionEnabled":false},"location":"eastus","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/databases/sqltdebyok000004","name":"sqltdebyok000004","type":"Microsoft.Sql/servers/databases"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1215'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-azure-mgmt-keyvault/9.3.0 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.KeyVault/vaults/sqltdebyok000003?api-version=2021-06-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.KeyVault/vaults/sqltdebyok000003","name":"sqltdebyok000003","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{},"systemData":{"createdBy":"mibrkic@microsoft.com","createdByType":"User","createdAt":"2022-03-16T12:15:25.82Z","lastModifiedBy":"mibrkic@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2022-03-16T12:15:25.82Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","objectId":"1c4d4fcf-73ac-43c9-8bbe-619117750c55","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://sqltdebyok000003.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '977'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.308.0
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "eastus", "tags": {}, "properties": {"tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47",
      "sku": {"family": "A", "name": "standard"}, "accessPolicies": [{"tenantId":
      "72f988bf-86f1-41af-91ab-2d7cd011db47", "objectId": "1c4d4fcf-73ac-43c9-8bbe-619117750c55",
      "permissions": {"keys": ["all"], "secrets": ["all"], "certificates": ["all"],
      "storage": ["all"]}}, {"tenantId": "72f988bf-86f1-41af-91ab-2d7cd011db47", "objectId":
      "2c6e318c-9bc0-497f-8613-daa3a2f0cb7e", "permissions": {"keys": ["list", "unwrapKey",
      "wrapKey", "get"]}}], "vaultUri": "https://sqltdebyok000003.vault.azure.net/",
      "enabledForDeployment": false, "enableSoftDelete": true, "softDeleteRetentionInDays":
      7, "provisioningState": "Succeeded", "publicNetworkAccess": "Enabled"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - keyvault set-policy
      Connection:
      - keep-alive
      Content-Length:
      - '757'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --object-id --key-permissions
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-azure-mgmt-keyvault/9.3.0 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.KeyVault/vaults/sqltdebyok000003?api-version=2021-06-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.KeyVault/vaults/sqltdebyok000003","name":"sqltdebyok000003","type":"Microsoft.KeyVault/vaults","location":"eastus","tags":{},"systemData":{"createdBy":"mibrkic@microsoft.com","createdByType":"User","createdAt":"2022-03-16T12:15:25.82Z","lastModifiedBy":"mibrkic@microsoft.com","lastModifiedByType":"User","lastModifiedAt":"2022-03-16T12:17:53.117Z"},"properties":{"sku":{"family":"A","name":"standard"},"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","accessPolicies":[{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","objectId":"1c4d4fcf-73ac-43c9-8bbe-619117750c55","permissions":{"keys":["all"],"secrets":["all"],"certificates":["all"],"storage":["all"]}},{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","objectId":"2c6e318c-9bc0-497f-8613-daa3a2f0cb7e","permissions":{"keys":["list","unwrapKey","wrapKey","get"]}}],"enabledForDeployment":false,"enableSoftDelete":true,"softDeleteRetentionInDays":7,"vaultUri":"https://sqltdebyok000003.vault.azure.net/","provisioningState":"Succeeded","publicNetworkAccess":"Enabled"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1140'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-IIS/10.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-service-version:
      - 1.5.308.0
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.5.0b6 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: POST
    uri: https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/create?api-version=7.3-preview
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"AKV10000: Request is missing
        a Bearer or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '97'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47",
        resource="https://vault.azure.net"
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.197.155;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus
      x-ms-keyvault-service-version:
      - 1.9.291.1
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"kty": "RSA", "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      User-Agent:
      - azsdk-python-keyvault-keys/4.5.0b6 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: POST
    uri: https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/create?api-version=7.3-preview
  response:
    body:
      string: '{"key":{"kid":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","kty":"RSA","key_ops":["encrypt","decrypt","sign","verify","wrapKey","unwrapKey"],"n":"xfbMhf34fAHeFa54U6t0OC0th88QCHYvPjnmOAzAslicDcIOtjwMpOGCE-yfANDIU3i4DC54Iq_RJ0hsvqNxkDG5mkddL0FMPk6E-yO4B7AYQtSqtgrMy7Fepq7QY9LuvO09K5xW3ueHfvY3lHxPe03gUU57azBHp_kOONL8KvmbgniGN6D9yDjDy3m5a9qe6-0dmorQeQs4yntc23G4C-WuKR4lorBn-f84ZHd0FzudUJnjH_x7RsjVFbr9XGaMWqdsp9XUwI2nOkUbul0TKIubJ2CmChAK0dWAVXGdZo640-JX4K4A8oSoz17_Xap4msKJ5ftyr_dBZ1K4AtagtQ","e":"AQAB"},"attributes":{"enabled":true,"created":1647433074,"updated":1647433074,"recoveryLevel":"CustomizedRecoverable+Purgeable","recoverableDays":7}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '697'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.197.155;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - eastus
      x-ms-keyvault-service-version:
      - 1.9.291.1
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"serverKeyType": "AzureKeyVault", "uri": "https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key create
      Connection:
      - keep-alive
      Content-Length:
      - '156'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60?api-version=2020-11-01-preview
  response:
    body:
      string: '{"operation":"UpsertLogicalServerEncryptionKeys","startTime":"2022-03-16T12:17:54.887Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyAzureAsyncOperation/df8a5b37-d790-434a-840a-f1b261fb5088?api-version=2020-11-01-preview
      cache-control:
      - no-cache
      content-length:
      - '88'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:54 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyOperationResults/df8a5b37-d790-434a-840a-f1b261fb5088?api-version=2020-11-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyAzureAsyncOperation/df8a5b37-d790-434a-840a-f1b261fb5088?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"df8a5b37-d790-434a-840a-f1b261fb5088","status":"InProgress","startTime":"2022-03-16T12:17:54.887Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyAzureAsyncOperation/df8a5b37-d790-434a-840a-f1b261fb5088?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"df8a5b37-d790-434a-840a-f1b261fb5088","status":"Succeeded","startTime":"2022-03-16T12:17:54.887Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"azurekeyvault","location":"East US","properties":{"serverKeyType":"AzureKeyVault","uri":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","thumbprint":"F5F198961692B3358A4C8C4F72B6653F4B37A424","creationDate":"2022-03-16T12:17:55.73Z","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","name":"sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","type":"Microsoft.Sql/servers/keys"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '648'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"azurekeyvault","location":"East US","properties":{"serverKeyType":"AzureKeyVault","uri":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","thumbprint":"F5F198961692B3358A4C8C4F72B6653F4B37A424","creationDate":"2022-03-16T12:17:55.73Z","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","name":"sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","type":"Microsoft.Sql/servers/keys"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '648'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key list
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys?api-version=2020-11-01-preview
  response:
    body:
      string: '{"value":[{"kind":"azurekeyvault","location":"East US","properties":{"serverKeyType":"AzureKeyVault","uri":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","thumbprint":"F5F198961692B3358A4C8C4F72B6653F4B37A424","creationDate":"2022-03-16T12:17:55.73Z","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","name":"sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","type":"Microsoft.Sql/servers/keys"},{"kind":"servicemanaged","properties":{"serverKeyType":"ServiceManaged","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/ServiceManaged","name":"ServiceManaged","type":"Microsoft.Sql/servers/keys"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '985'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"servicemanaged","properties":{"serverKeyName":"ServiceManaged","serverKeyType":"ServiceManaged","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current","name":"current","type":"Microsoft.Sql/servers/encryptionProtector"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '373'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"serverKeyName": "sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60",
      "serverKeyType": "AzureKeyVault", "autoRotationEnabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      Content-Length:
      - '166'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -s -t -k --auto-rotation-enabled
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"operation":"UpsertLogicalServerEncryptionprotector","startTime":"2022-03-16T12:18:00.127Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/f09662a2-47bf-456e-ad4d-3e01093f0bd0?api-version=2020-11-01-preview
      cache-control:
      - no-cache
      content-length:
      - '93'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:17:59 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorOperationResults/f09662a2-47bf-456e-ad4d-3e01093f0bd0?api-version=2020-11-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t -k --auto-rotation-enabled
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/f09662a2-47bf-456e-ad4d-3e01093f0bd0?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"f09662a2-47bf-456e-ad4d-3e01093f0bd0","status":"InProgress","startTime":"2022-03-16T12:18:00.127Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t -k --auto-rotation-enabled
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/f09662a2-47bf-456e-ad4d-3e01093f0bd0?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"f09662a2-47bf-456e-ad4d-3e01093f0bd0","status":"InProgress","startTime":"2022-03-16T12:18:00.127Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '108'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t -k --auto-rotation-enabled
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/f09662a2-47bf-456e-ad4d-3e01093f0bd0?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"f09662a2-47bf-456e-ad4d-3e01093f0bd0","status":"Succeeded","startTime":"2022-03-16T12:18:00.127Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t -k --auto-rotation-enabled
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"azurekeyvault","properties":{"serverKeyName":"sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","serverKeyType":"AzureKeyVault","uri":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current","name":"current","type":"Microsoft.Sql/servers/encryptionProtector"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '527'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"azurekeyvault","properties":{"serverKeyName":"sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60","serverKeyType":"AzureKeyVault","uri":"https://sqltdebyok000003.vault.azure.net/keys/sqltdebyok000005/6403527387244cf7a2a159f1fef88b60","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current","name":"current","type":"Microsoft.Sql/servers/encryptionProtector"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '527'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"serverKeyName": "ServiceManaged", "serverKeyType": "ServiceManaged"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      Content-Length:
      - '86'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -s -t
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"operation":"UpsertLogicalServerEncryptionprotector","startTime":"2022-03-16T12:18:05.71Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/5ae1fee4-f048-4aea-8af4-a9f118a65039?api-version=2020-11-01-preview
      cache-control:
      - no-cache
      content-length:
      - '92'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:05 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorOperationResults/5ae1fee4-f048-4aea-8af4-a9f118a65039?api-version=2020-11-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/encryptionProtectorAzureAsyncOperation/5ae1fee4-f048-4aea-8af4-a9f118a65039?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"5ae1fee4-f048-4aea-8af4-a9f118a65039","status":"Succeeded","startTime":"2022-03-16T12:18:05.71Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '106'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key set
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -t
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"servicemanaged","properties":{"serverKeyName":"ServiceManaged","serverKeyType":"ServiceManaged","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current","name":"current","type":"Microsoft.Sql/servers/encryptionProtector"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '373'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server tde-key show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current?api-version=2020-11-01-preview
  response:
    body:
      string: '{"kind":"servicemanaged","properties":{"serverKeyName":"ServiceManaged","serverKeyType":"ServiceManaged","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/encryptionProtector/current","name":"current","type":"Microsoft.Sql/servers/encryptionProtector"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '373'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/sqltdebyok000003_sqltdebyok000005_6403527387244cf7a2a159f1fef88b60?api-version=2020-11-01-preview
  response:
    body:
      string: '{"operation":"DeleteLogicalServerEncryptionKeys","startTime":"2022-03-16T12:18:08.767Z"}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyAzureAsyncOperation/0d60f64c-e939-49ef-bd30-278fde2e00bf?api-version=2020-11-01-preview
      cache-control:
      - no-cache
      content-length:
      - '88'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:08 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyOperationResults/0d60f64c-e939-49ef-bd30-278fde2e00bf?api-version=2020-11-01-preview
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14998'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s -k
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/locations/eastus/serverKeyAzureAsyncOperation/0d60f64c-e939-49ef-bd30-278fde2e00bf?api-version=2020-11-01-preview
  response:
    body:
      string: '{"name":"0d60f64c-e939-49ef-bd30-278fde2e00bf","status":"Succeeded","startTime":"2022-03-16T12:18:08.767Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '107'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - sql server key list
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -s
      User-Agent:
      - AZURECLI/2.34.1 azsdk-python-mgmt-sql/4.0.0b1 Python/3.8.3 (Windows-10-10.0.17763-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys?api-version=2020-11-01-preview
  response:
    body:
      string: '{"value":[{"kind":"servicemanaged","properties":{"serverKeyType":"ServiceManaged","autoRotationEnabled":false},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Sql/servers/clitestserver000002/keys/ServiceManaged","name":"ServiceManaged","type":"Microsoft.Sql/servers/keys"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '336'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 16 Mar 2022 12:18:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
