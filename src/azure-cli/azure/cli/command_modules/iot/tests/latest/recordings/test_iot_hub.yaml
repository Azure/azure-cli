interactions:
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage container create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name --account-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-storage-blob/12.12.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
      x-ms-date:
      - Thu, 20 Apr 2023 08:11:05 GMT
      x-ms-version:
      - '2021-06-08'
    method: PUT
    uri: https://schaudhari.blob.core.windows.net/iothubcontainer1000004?restype=container
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:11:05 GMT
      etag:
      - '"0x8DB4176CA4F70FC"'
      last-modified:
      - Thu, 20 Apr 2023 08:11:05 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-version:
      - '2021-06-08'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-storage/21.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002/listKeys?api-version=2022-09-01&$expand=kerb
  response:
    body:
      string: '{"keys":[{"creationTime":"2023-04-20T08:10:44.3492860Z","keyName":"key1","value":"veryFakedStorageAccountKey==","permissions":"FULL"},{"creationTime":"2023-04-20T08:10:44.3492860Z","keyName":"key2","value":"veryFakedStorageAccountKey==","permissions":"FULL"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '260'
      content-type:
      - application/json
      date:
      - Thu, 20 Apr 2023 08:11:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '11999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - storage account show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-storage/21.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002?api-version=2022-09-01
  response:
    body:
      string: '{"sku":{"name":"Standard_LRS","tier":"Standard"},"kind":"Storage","id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Storage/storageAccounts/clitest000002","name":"clitest000002","type":"Microsoft.Storage/storageAccounts","location":"westus","tags":{},"properties":{"keyCreationTime":{"key1":"2023-04-20T08:10:44.3492860Z","key2":"2023-04-20T08:10:44.3492860Z"},"privateEndpointConnections":[],"minimumTlsVersion":"TLS1_0","allowBlobPublicAccess":false,"networkAcls":{"bypass":"AzureServices","virtualNetworkRules":[],"ipRules":[],"defaultAction":"Allow"},"supportsHttpsTrafficOnly":true,"encryption":{"services":{"file":{"keyType":"Account","enabled":true,"lastEnabledTime":"2023-04-20T08:10:44.5054194Z"},"blob":{"keyType":"Account","enabled":true,"lastEnabledTime":"2023-04-20T08:10:44.5054194Z"}},"keySource":"Microsoft.Storage"},"provisioningState":"Succeeded","creationTime":"2023-04-20T08:10:44.2241265Z","primaryEndpoints":{"blob":"https://clitest000002.blob.core.windows.net/","queue":"https://clitest000002.queue.core.windows.net/","table":"https://clitest000002.table.core.windows.net/","file":"https://clitest000002.file.core.windows.net/"},"primaryLocation":"westus","statusOfPrimary":"available"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1270'
      content-type:
      - application/json
      date:
      - Thu, 20 Apr 2023 08:11:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-Azure-Storage-Resource-Provider/1.0,Microsoft-HTTPAPI/2.0 Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:11:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"identity": {"type": "None"}, "location": "westus2", "sku": {"name": "Standard",
      "tier": "Standard"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      Content-Length:
      - '102'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005?api-version=2022-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005","name":"ehNamespaceiothubfortest1000005","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"minimumTlsVersion":"1.2","publicNetworkAccess":"Enabled","disableLocalAuth":false,"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"326100e2-f69d-4268-8503-075374f62b6e:ehnamespaceiothubfortest1nw2aejc","createdAt":"2023-04-20T08:11:16.14Z","updatedAt":"2023-04-20T08:11:16.14Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000005.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '832'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:11:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/CH3
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/CH3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '49'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005?api-version=2022-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005","name":"ehNamespaceiothubfortest1000005","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"minimumTlsVersion":"1.2","publicNetworkAccess":"Enabled","disableLocalAuth":false,"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"326100e2-f69d-4268-8503-075374f62b6e:ehnamespaceiothubfortest1nw2aejc","createdAt":"2023-04-20T08:11:16.14Z","updatedAt":"2023-04-20T08:11:16.14Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000005.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '832'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:11:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/CH3
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/CH3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005?api-version=2022-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005","name":"ehNamespaceiothubfortest1000005","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"minimumTlsVersion":"1.2","publicNetworkAccess":"Enabled","disableLocalAuth":false,"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Created","metricId":"326100e2-f69d-4268-8503-075374f62b6e:ehnamespaceiothubfortest1nw2aejc","createdAt":"2023-04-20T08:11:16.14Z","updatedAt":"2023-04-20T08:11:16.14Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000005.servicebus.windows.net:443/","status":"Activating"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '832'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:11:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/CH3
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/CH3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs namespace create
      Connection:
      - keep-alive
      ParameterSetName:
      - --resource-group --name
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005?api-version=2022-01-01-preview
  response:
    body:
      string: '{"sku":{"name":"Standard","tier":"Standard","capacity":1},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005","name":"ehNamespaceiothubfortest1000005","type":"Microsoft.EventHub/Namespaces","location":"West
        US 2","tags":{},"properties":{"minimumTlsVersion":"1.2","publicNetworkAccess":"Enabled","disableLocalAuth":false,"zoneRedundant":false,"isAutoInflateEnabled":false,"maximumThroughputUnits":0,"kafkaEnabled":true,"provisioningState":"Succeeded","metricId":"326100e2-f69d-4268-8503-075374f62b6e:ehnamespaceiothubfortest1nw2aejc","createdAt":"2023-04-20T08:11:16.14Z","updatedAt":"2023-04-20T08:12:07.343Z","serviceBusEndpoint":"https://ehNamespaceiothubfortest1000005.servicebus.windows.net:443/","status":"Active"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '831'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Service-Bus-Resource-Provider/CH3
      - Microsoft-HTTPAPI/2.0
      server-sb:
      - Service-Bus-Resource-Provider/CH3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"retentionDescription": {"cleanupPolicy": "Delete"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub create
      Connection:
      - keep-alive
      Content-Length:
      - '69'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --namespace-name --name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-eventhub/11.0.0b1 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005/eventhubs/eventHubiothubfortest000006?api-version=2022-10-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005/eventhubs/eventHubiothubfortest000006","name":"eventHubiothubfortest000006","type":"Microsoft.EventHub/namespaces/eventhubs","location":"westus2","properties":{"retentionDescription":{"cleanupPolicy":"Delete","retentionTimeInHours":24},"messageRetentionInDays":1,"partitionCount":4,"status":"Active","createdAt":"2023-04-20T08:12:22.74Z","updatedAt":"2023-04-20T08:12:23.077Z","partitionIds":["0","1","2","3"]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '574'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"rights": ["Send"]}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub authorization-rule create
      Connection:
      - keep-alive
      Content-Length:
      - '36'
      Content-Type:
      - application/json
      ParameterSetName:
      - --resource-group --namespace-name --eventhub-name --name --rights
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005/eventhubs/eventHubiothubfortest000006/authorizationRules/eventHubPolicyiothubfortest?api-version=2022-01-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005/eventhubs/eventHubiothubfortest000006/authorizationRules/eventHubPolicyiothubfortest","name":"eventHubPolicyiothubfortest","type":"Microsoft.EventHub/namespaces/eventhubs/authorizationrules","properties":{"rights":["Send"]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - eventhubs eventhub authorization-rule keys list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --resource-group --namespace-name --eventhub-name --name
      User-Agent:
      - AZURECLI/2.47.0 (AAZ) azsdk-python-core/1.26.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.EventHub/namespaces/ehNamespaceiothubfortest1000005/eventhubs/eventHubiothubfortest000006/authorizationRules/eventHubPolicyiothubfortest/listKeys?api-version=2022-01-01-preview
  response:
    body:
      string: '{"primaryConnectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=mock_key;eventHubiothubfortest000006","primaryKey":"mock_key","secondaryKey":"mock_key","keyName":"eventHubPolicyiothubfortest"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H",
      "maxDeliveryCount": 10}}, "enableFileUploadNotifications": false, "cloudToDevice":
      {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H", "feedback": {"lockDurationAsIso8601":
      "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}}, "sku": {"name": "F1",
      "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '604'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --sku
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400016,"httpStatusCode":"BadRequest","message":"Invalid PartitionCount
        4 - value must be between 2 and 2. If you contact a support representative
        please include this correlation identifier: b306e93d-caf5-4124-ae9d-cc7a008dcc8a,
        timestamp: 2023-04-20 08:12:33Z, errorcode: IH400016."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H",
      "maxDeliveryCount": 10}}, "enableFileUploadNotifications": false, "cloudToDevice":
      {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H", "feedback": {"lockDurationAsIso8601":
      "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}}, "sku": {"name": "F1",
      "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '604'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --sku --partition-count
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400016,"httpStatusCode":"BadRequest","message":"Invalid PartitionCount
        4 - value must be between 2 and 2. If you contact a support representative
        please include this correlation identifier: 5b7a048d-883a-46fb-9e33-2f3fc060414a,
        timestamp: 2023-04-20 08:12:40Z, errorcode: IH400016."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --sku --mintls
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"minTlsVersion": "2.5", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName":
      ""}}, "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601":
      "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H",
      "feedback": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount":
      10}}}, "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '628'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --sku --mintls
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400089,"httpStatusCode":"BadRequest","message":"2.5 is not
        a valid MinTlsVersion value. If you contact a support representative please
        include this correlation identifier: f54a54b8-e5e6-457a-967d-b11059f4da5f,
        timestamp: 2023-04-20 08:12:47Z, errorcode: IH400089."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '273'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:12:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 3, "partitionCount": 4}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName":
      ""}}, "messagingEndpoints": {"fileNotifications": {"lockDurationAsIso8601":
      "PT15S", "ttlAsIso8601": "PT20H", "maxDeliveryCount": 79}}, "enableFileUploadNotifications":
      false, "cloudToDevice": {"maxDeliveryCount": 89, "defaultTtlAsIso8601": "PT23H",
      "feedback": {"lockDurationAsIso8601": "PT35S", "ttlAsIso8601": "P1DT5H", "maxDeliveryCount":
      40}}}, "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '634'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","properties":{"provisioningState":"Accepted","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '1001'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:13:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:13:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:13:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:14:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:14:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzBhNGI1YjMtMjc1YS00YmIzLWIyYjktZTA4YzhlNjcwYjdmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --retention-day --c2d-ttl --c2d-max-delivery-count --feedback-ttl --feedback-lock-duration
        --feedback-max-delivery-count --fileupload-notification-max-delivery-count
        --fileupload-notification-ttl --min-tls-version --fnld
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1733'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/iothubowner/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/iothubowner/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n -g --all
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --all
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":3,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"PT20H","maxDeliveryCount":79}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":89,"defaultTtlAsIso8601":"PT23H","feedback":{"lockDurationAsIso8601":"PT35S","ttlAsIso8601":"P1DT5H","maxDeliveryCount":40}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pCCQ=",
      "properties": {"allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion":
      "1.2", "eventHubEndpoints": {"events": {"retentionTimeInDays": 4, "partitionCount":
      4}}, "routing": {"endpoints": {"serviceBusQueues": [], "serviceBusTopics": [],
      "eventHubs": [], "storageContainers": [], "cosmosDBSqlCollections": []}, "routes":
      [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1470'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pCCQ=''}'
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCCQ=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOGYxYzUwZWMtY2VjNS00MjNkLTkzNWItYWU3MjUyYWVmYTJmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '3597'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOGYxYzUwZWMtY2VjNS00MjNkLTkzNWItYWU3MjUyYWVmYTJmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:15:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOGYxYzUwZWMtY2VjNS00MjNkLTkzNWItYWU3MjUyYWVmYTJmO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --fnd --rd --ct --cdd --ft --fld --fd --fn --fnt --fst --fcs --fc --tags
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2113'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsa
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:16:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --fsa
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsa
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2113'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:16:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2113'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:16:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --fsi
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2113'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:16:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2113'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pCSY=",
      "properties": {"disableLocalAuth": true, "disableModuleSAS": true, "allowedFqdnList":
      [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [], "storageContainers": [], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1498'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pCSY=''}'
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pCSY=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableModuleSAS":true,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ExZGM3ZDItZjFhMy00NWE3LWFiMGQtMGQ2NGVkODc4MzYyO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '3621'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ExZGM3ZDItZjFhMy00NWE3LWFiMGQtMGQ2NGVkODc4MzYyO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:16:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ExZGM3ZDItZjFhMy00NWE3LWFiMGQtMGQ2NGVkODc4MzYyO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ExZGM3ZDItZjFhMy00NWE3LWFiMGQtMGQ2NGVkODc4MzYyO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-module-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDBM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableModuleSAS":true,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2161'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:17:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDBM=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableModuleSAS":true,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2161'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pDBM=",
      "properties": {"disableLocalAuth": true, "disableDeviceSAS": true, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [], "cosmosDBSqlCollections": []}, "routes": [], "fallbackRoute": {"name": "$fallback",
      "source": "DeviceMessages", "condition": "true", "endpointNames": ["events"],
      "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1525'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pDBM=''}'
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDBM=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableDeviceSAS":true,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTc5NjMxZDQtMmM2Zi00ZWIxLWJkZDctYjE1NzMxODEwMDZhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '3646'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTc5NjMxZDQtMmM2Zi00ZWIxLWJkZDctYjE1NzMxODEwMDZhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-module-sas --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDM8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableDeviceSAS":true,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2186'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:17:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:18:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:18:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDM8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":true,"disableDeviceSAS":true,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2186'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:18:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pDM8=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [], "cosmosDBSqlCollections": []}, "routes": [], "fallbackRoute": {"name": "$fallback",
      "source": "DeviceMessages", "condition": "true", "endpointNames": ["events"],
      "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      Content-Length:
      - '1527'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pDM8=''}'
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDM8=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDkwMjI5YWYtMDViZi00YWM3LWIwODAtYWMwMjYzODdhYjcxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '3648'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:18:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDkwMjI5YWYtMDViZi00YWM3LWIwODAtYWMwMjYzODdhYjcxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:18:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDkwMjI5YWYtMDViZi00YWM3LWIwODAtYWMwMjYzODdhYjcxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:18:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDkwMjI5YWYtMDViZi00YWM3LWIwODAtYWMwMjYzODdhYjcxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --disable-local-auth --disable-device-sas
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list
      Connection:
      - keep-alive
      ParameterSetName:
      - -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2200'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list-skus
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub list-skus
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/skus?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S1","tier":"Standard"},"capacity":{"minimum":1,"maximum":200,"default":1,"scaleType":"Manual"}},{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S2","tier":"Standard"},"capacity":{"minimum":1,"maximum":200,"default":1,"scaleType":"Manual"}},{"resourceType":"Microsoft.Devices/IotHubs","sku":{"name":"S3","tier":"Standard"},"capacity":{"minimum":1,"maximum":10,"default":1,"scaleType":"Manual"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '475'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pDoo=",
      "properties": {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"},
      {"keyName": "service", "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights":
      "ServiceConnect"}, {"keyName": "device", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "DeviceConnect"}, {"keyName": "registryRead", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryRead"}, {"keyName": "registryReadWrite",
      "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"}],
      "disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS": false,
      "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [], "cosmosDBSqlCollections": []}, "routes": [], "fallbackRoute": {"name": "$fallback",
      "source": "DeviceMessages", "condition": "true", "endpointNames": ["events"],
      "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      Content-Length:
      - '2204'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pDoo=''}'
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pDoo=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":null,"secondaryKey":null,"rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjJiZThkNjYtZDI0My00NWRkLTgzNmMtNjA1OTkzNTkxYjA0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4040'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjJiZThkNjYtZDI0My00NWRkLTgzNmMtNjA1OTkzNTkxYjA0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:19:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjJiZThkNjYtZDI0My00NWRkLTgzNmMtNjA1OTkzNTkxYjA0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --permissions
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pD4o=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pD4o=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '677'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pD4o=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy show
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/test_policy/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pD4o=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '677'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pD4o=",
      "properties": {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"},
      {"keyName": "service", "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights":
      "ServiceConnect"}, {"keyName": "device", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "DeviceConnect"}, {"keyName": "registryRead", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryRead"}, {"keyName": "registryReadWrite",
      "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "RegistryWrite, ServiceConnect, DeviceConnect"}], "disableLocalAuth":
      false, "disableDeviceSAS": false, "disableModuleSAS": false, "allowedFqdnList":
      [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [], "storageContainers": [], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '2256'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pD4o=''}'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pD4o=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:19:41 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:19:41 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:19:41 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:19:41 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:19:41 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:19:41 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODlkYjllOWQtNjdlZC00ZjY0LWJhMTktYjQ2ZjkxZmI4ZTI1O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODlkYjllOWQtNjdlZC00ZjY0LWJhMTktYjQ2ZjkxZmI4ZTI1O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:20:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODlkYjllOWQtNjdlZC00ZjY0LWJhMTktYjQ2ZjkxZmI4ZTI1O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/test_policy/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/test_policy/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-connection-string
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --policy-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '677'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pEFc=",
      "properties": {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"},
      {"keyName": "service", "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights":
      "ServiceConnect"}, {"keyName": "device", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "DeviceConnect"}, {"keyName": "registryRead", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryRead"}, {"keyName": "registryReadWrite",
      "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights": "RegistryWrite"},
      {"keyName": "test_policy", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "RegistryWrite, ServiceConnect, DeviceConnect"}], "disableLocalAuth":
      false, "disableDeviceSAS": false, "disableModuleSAS": false, "allowedFqdnList":
      [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints": {"events":
      {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints": {"serviceBusQueues":
      [], "serviceBusTopics": [], "eventHubs": [], "storageContainers": [], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '2256'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pEFc=''}'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEFc=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:20:43 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:20:43 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:20:43 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:20:43 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:20:43 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:20:43 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjM3NDljNzMtZjVlZi00NjI3LTkyZDEtMjY2ZjNiMDA5ZGM3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4291'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjM3NDljNzMtZjVlZi00NjI3LTkyZDEtMjY2ZjNiMDA5ZGM3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:21:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjM3NDljNzMtZjVlZi00NjI3LTkyZDEtMjY2ZjNiMDA5ZGM3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEUY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEUY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy renew-key
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n --renew-key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubKeys/test_policy/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '131'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEUY=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '677'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"},{"keyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '677'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pEUY=",
      "properties": {"authorizationPolicies": [{"keyName": "iothubowner", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryWrite, ServiceConnect, DeviceConnect"},
      {"keyName": "service", "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights":
      "ServiceConnect"}, {"keyName": "device", "primaryKey":"mock_key", "secondaryKey":"mock_key",
      "rights": "DeviceConnect"}, {"keyName": "registryRead", "primaryKey":"mock_key",
      "secondaryKey":"mock_key", "rights": "RegistryRead"}, {"keyName": "registryReadWrite",
      "primaryKey":"mock_key", "secondaryKey":"mock_key", "rights": "RegistryWrite"}],
      "disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS": false,
      "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [], "cosmosDBSqlCollections": []}, "routes": [], "fallbackRoute": {"name": "$fallback",
      "source": "DeviceMessages", "condition": "true", "endpointNames": ["events"],
      "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      Content-Length:
      - '2118'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pEUY=''}'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEUY=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","authorizationPolicies":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}],"ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:21:39 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:21:39 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:21:39 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:21:39 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"test_policy","primaryKey":"mock_key","secondaryKey":"mock_key","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:21:39 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:21:39 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWZmMGI2OWYtNWI2Mi00Y2U2LTgwZjItZDY1MDZmYzA4YmU0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4159'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWZmMGI2OWYtNWI2Mi00Y2U2LTgwZjItZDY1MDZmYzA4YmU0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWZmMGI2OWYtNWI2Mi00Y2U2LTgwZjItZDY1MDZmYzA4YmU0O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:22:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub policy list
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/listkeys?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"keyName":"iothubowner","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite,
        ServiceConnect, DeviceConnect"},{"keyName":"service","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"ServiceConnect"},{"keyName":"device","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"DeviceConnect"},{"keyName":"registryRead","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryRead"},{"keyName":"registryReadWrite","primaryKey":"mock_key","secondaryKey":"mock_key","rights":"RegistryWrite"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"name": "cg1"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group create
      Connection:
      - keep-alive
      Content-Length:
      - '31'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2022-04-30-preview
  response:
    body:
      string: '{"properties":{"created":"Thu, 20 Apr 2023 08:23:16 GMT","properties":{"name":"cg1"}},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '376'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2022-04-30-preview
  response:
    body:
      string: '{"properties":{"created":"Thu, 20 Apr 2023 08:23:16 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '348'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"properties":{"created":"Thu, 20 Apr 2023 08:14:37 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/%24Default","name":"$Default","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null},{"properties":{"created":"Thu,
        20 Apr 2023 08:23:16 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1","name":"cg1","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '721'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --hub-name -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/cg1?api-version=2022-04-30-preview
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:23:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub consumer-group list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"properties":{"created":"Thu, 20 Apr 2023 08:14:37 GMT"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/eventHubEndpoints/events/ConsumerGroups/%24Default","name":"$Default","type":"Microsoft.Devices/IotHubs/EventHubEndpoints/ConsumerGroups","etag":null}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '372'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-quota-metrics
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-quota-metrics
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/quotaMetrics?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"name":"TotalMessages","currentValue":0,"maxValue":400000},{"name":"TotalDeviceCount","currentValue":0,"maxValue":1000000}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '135'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:23:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-stats
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13841'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub show-stats
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/IotHubStats?api-version=2022-04-30-preview
  response:
    body:
      string: '{"totalDeviceCount":0,"enabledDeviceCount":0,"disabledDeviceCount":0}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '69'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:24:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2188'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pEgQ=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"connectionString":
      "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=mock_key;****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '1064'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pEgQ=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pEgQ=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=mock_key;****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZmYwNjVhYzctYmY4OS00ZTNhLTk4MWUtNDVjMmM0MGYwNWZhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '3207'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZmYwNjVhYzctYmY4OS00ZTNhLTk4MWUtNDVjMmM0MGYwNWZhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZmYwNjVhYzctYmY4OS00ZTNhLTk4MWUtNDVjMmM0MGYwNWZhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:24:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:24:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -t
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:24:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:25:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:25:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2545'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pFCI=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      Content-Length:
      - '2594'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pFCI=''}'
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFCI=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=clitest000002;AccountKey=veryFakedStorageAccountKey==;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ZkNjZiNWYtYjRkYS00NmY0LWI5ZTAtZjk3MzU4ZjU2MzUwO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4689'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4997'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ZkNjZiNWYtYjRkYS00NmY0LWI5ZTAtZjk3MzU4ZjU2MzUwO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfY2ZkNjZiNWYtYjRkYS00NmY0LWI5ZTAtZjk3MzU4ZjU2MzUwO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -t -r -s -c --container-name --encoding -b -w
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFOA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3249'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:25:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFOA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3249'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:25:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pFOA=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "devicemessages", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      Content-Length:
      - '2731'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pFOA=''}'
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFOA=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTQ0NGI4YWYtZDRlZS00NTVkLWI5YjYtNmFjYjQwZDM0OTBhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4815'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTQ0NGI4YWYtZDRlZS00NTVkLWI5YjYtNmFjYjQwZDM0OTBhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTQ0NGI4YWYtZDRlZS00NTVkLWI5YjYtNmFjYjQwZDM0OTBhO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route create
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s --en -c -e
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:26:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:26:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route list
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:26:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route show
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:26:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"message": {}, "route": {"name": "route1", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["Event1"], "isEnabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '141'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/routing/routes/$testnew?api-version=2022-04-30-preview
  response:
    body:
      string: '{"result":"true"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:26:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n --sp --ap
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:27:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n --sp --ap
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n --sp --ap
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"message": {"appProperties": {"body": "4"}, "systemProperties": {"body":
      "4"}}, "route": {"name": "route1", "source": "DeviceMessages", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '206'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n --sp --ap
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/routing/routes/$testnew?api-version=2022-04-30-preview
  response:
    body:
      string: '{"result":"true"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '17'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"routingSource": "devicemessages", "message": {}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route test
      Connection:
      - keep-alive
      Content-Length:
      - '50'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/routing/routes/$testall?api-version=2022-04-30-preview
  response:
    body:
      string: '{"routes":[{"properties":{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '134'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:27:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pFZ4=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "devicemessages", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2731'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pFZ4=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFZ4=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDhhZDI0OGMtYzE2Yy00NGE1LWIyY2EtODdhMmI3NjQwN2E2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4815'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDhhZDI0OGMtYzE2Yy00NGE1LWIyY2EtODdhMmI3NjQwN2E2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNDhhZDI0OGMtYzE2Yy00NGE1LWIyY2EtODdhMmI3NjQwN2E2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFsA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:27:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:27:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFsA=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceMessages","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3355'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pFsA=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "twinchangeevents", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2733'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pFsA=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pFsA=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWY0OWNlOTktNmEwOS00OWNhLWEwZTEtZTM5MDI0NTVjODc2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4817'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWY0OWNlOTktNmEwOS00OWNhLWEwZTEtZTM5MDI0NTVjODc2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Pending"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOWY0OWNlOTktNmEwOS00OWNhLWEwZTEtZTM5MDI0NTVjODc2O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pF5Y=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3357'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:28:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pF5Y=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"TwinChangeEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3357'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pF5Y=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "devicelifecycleevents", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2738'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pF5Y=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pF5Y=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzY2ZDZlZGYtOTkyZi00NTBiLTg0ZjctNTBmNmZmNzhlZDUxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4822'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzY2ZDZlZGYtOTkyZi00NTBiLTg0ZjctNTBmNmZmNzhlZDUxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:28:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNzY2ZDZlZGYtOTkyZi00NTBiLTg0ZjctNTBmNmZmNzhlZDUxO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGC8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3362'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:29:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGC8=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3362'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pGC8=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "devicejoblifecycleevents", "condition":
      "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute": {"name":
      "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2741'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pGC8=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGC8=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceJobLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlMDU2NTEtMTI3OC00NjVlLWEyM2UtMTE0ZGMyZDNmMGZkO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4825'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlMDU2NTEtMTI3OC00NjVlLWEyM2UtMTE0ZGMyZDNmMGZkO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:29:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlMDU2NTEtMTI3OC00NjVlLWEyM2UtMTE0ZGMyZDNmMGZkO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGLI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceJobLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3365'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:30:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGLI=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceJobLifecycleEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3365'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pGLI=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [{"name": "route1", "source": "deviceconnectionstateevents",
      "condition": "true", "endpointNames": ["Event1"], "isEnabled": true}], "fallbackRoute":
      {"name": "$fallback", "source": "DeviceMessages", "condition": "true", "endpointNames":
      ["events"], "isEnabled": true}}, "storageEndpoints": {"$default": {"sasTtlAsIso8601":
      "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      Content-Length:
      - '2744'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pGLI=''}'
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGLI=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOTY2ZjE1MGYtNTZmMy00MjQ1LWEzM2UtNjhhMjQ5YTNhMDk4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4828'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOTY2ZjE1MGYtNTZmMy00MjQ1LWEzM2UtNjhhMjQ5YTNhMDk4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfOTY2ZjE1MGYtNTZmMy00MjQ1LWEzM2UtNjhhMjQ5YTNhMDk4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route update
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n -s
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGYw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3368'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:30:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGYw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[{"name":"route1","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["Event1"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3368'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:30:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pGYw=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [{"id": "e8a416ce-f25c-4807-b325-6ad3a34e2f89",
      "connectionString": "Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006",
      "name": "Event1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001"}], "storageContainers": [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9",
      "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      Content-Length:
      - '2616'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pGYw=''}'
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGYw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlN2I4NGYtMGJiYy00NjU3LTg4YmItMWQyNWVmZDQ3MGNjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4709'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4996'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlN2I4NGYtMGJiYy00NjU3LTg4YmItMWQyNWVmZDQ3MGNjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYjJlN2I4NGYtMGJiYy00NjU3LTg4YmItMWQyNWVmZDQ3MGNjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub route delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGrk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3249'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:31:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1196'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGrk=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[{"connectionString":"Endpoint=sb://ehnamespaceiothubfortest1nw2aejc.servicebus.windows.net:5671/;SharedAccessKeyName=eventHubPolicyiothubfortest;SharedAccessKey=****;EntityPath=eventHubiothubfortest000006","name":"Event1","id":"e8a416ce-f25c-4807-b325-6ad3a34e2f89","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3249'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pGrk=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      Content-Length:
      - '2250'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pGrk=''}'
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pGrk=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNjg5NzdmMTItYmE3ZC00MGJkLWI4MjEtMGYxODY5YmY0Y2JjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4352'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4997'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNjg5NzdmMTItYmE3ZC00MGJkLWI4MjEtMGYxODY5YmY0Y2JjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:31:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfNjg5NzdmMTItYmE3ZC00MGJkLWI4MjEtMGYxODY5YmY0Y2JjO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub routing-endpoint delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --hub-name -g -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pG0E=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2892'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub devicestream show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2019-07-01-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pG0E=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2661'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:32:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pG0E=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2892'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pG0E=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments":
      [{"key": "key", "value": "value", "endpointNames": ["events", "fake_endpoint"]}]},
      "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '2347'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pG0E=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400131,"httpStatusCode":"BadRequest","message":"Enrichment
        has an undefined endpoint, Enrichment Key:key, EndpointName:fake_endpoint.
        If you contact a support representative please include this correlation identifier:
        0e521f0d-6143-4a1b-b720-f1c59dd45ce8, timestamp: 2023-04-20 08:32:33Z, errorcode:
        IH400131."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:32:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pG0E=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2892'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pG0E=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments":
      [{"key": "key", "value": "value", "endpointNames": ["events"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      Content-Length:
      - '2330'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pG0E=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pG0E=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODM2YjU1ZjYtOGU3My00ZmUyLWIyNmEtZGNmNTQ3MDIxNjEzO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4425'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODM2YjU1ZjYtOGU3My00ZmUyLWIyNmEtZGNmNTQ3MDIxNjEzO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:32:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfODM2YjU1ZjYtOGU3My00ZmUyLWIyNmEtZGNmNTQ3MDIxNjEzO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pHE4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:49:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pHE4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:49:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pHE4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pHE4=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments":
      [{"key": "key", "value": "value", "endpointNames": ["events", "fake_endpoint"]}]},
      "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '2347'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pHE4=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400131,"httpStatusCode":"BadRequest","message":"Enrichment
        has an undefined endpoint, Enrichment Key:key, EndpointName:fake_endpoint.
        If you contact a support representative please include this correlation identifier:
        b68d1a1f-8b32-4299-97ac-f501d8c7ecd6, timestamp: 2023-04-20 08:49:38Z, errorcode:
        IH400131."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '319'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:49:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pHE4=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pHE4=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments":
      [{"key": "key", "value": "value", "endpointNames": ["events"]}]}, "storageEndpoints":
      {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      Content-Length:
      - '2330'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pHE4=''}'
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pHE4=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYTA0ZWI5YjctYzlhMC00YzkzLWI3MDUtZmJjYzE0YjUwY2U4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4425'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYTA0ZWI5YjctYzlhMC00YzkzLWI3MDUtZmJjYzE0YjUwY2U4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:49:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfYTA0ZWI5YjctYzlhMC00YzkzLWI3MDUtZmJjYzE0YjUwY2U4O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment update
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key --value --endpoints
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pKzw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:50:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment list
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pKzw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:50:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pKzw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:50:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pKzw=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[{"key":"key","value":"value","endpointNames":["events"]}],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2965'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "tags": {"e": "f", "g": "h"}, "etag": "AAAADH2pKzw=",
      "properties": {"disableLocalAuth": false, "disableDeviceSAS": false, "disableModuleSAS":
      false, "allowedFqdnList": [], "ipFilterRules": [], "minTlsVersion": "1.2", "eventHubEndpoints":
      {"events": {"retentionTimeInDays": 4, "partitionCount": 4}}, "routing": {"endpoints":
      {"serviceBusQueues": [], "serviceBusTopics": [], "eventHubs": [], "storageContainers":
      [{"id": "76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9", "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "name": "Storage1", "subscriptionId": "326100e2-f69d-4268-8503-075374f62b6e",
      "resourceGroup": "clitest.rg000001", "containerName": "iothubcontainer1000004",
      "fileNameFormat": "{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}", "batchFrequencyInSeconds":
      100, "maxChunkSizeInBytes": 157286400, "encoding": "avro"}], "cosmosDBSqlCollections":
      []}, "routes": [], "fallbackRoute": {"name": "$fallback", "source": "DeviceMessages",
      "condition": "true", "endpointNames": ["events"], "isEnabled": true}, "enrichments":
      []}, "storageEndpoints": {"$default": {"sasTtlAsIso8601": "PT3H", "connectionString":
      "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****",
      "containerName": "iothubcontainer1000004"}}, "messagingEndpoints": {"fileNotifications":
      {"lockDurationAsIso8601": "PT15S", "ttlAsIso8601": "P1DT8H", "maxDeliveryCount":
      80}}, "enableFileUploadNotifications": true, "cloudToDevice": {"maxDeliveryCount":
      46, "defaultTtlAsIso8601": "P1DT10H", "feedback": {"lockDurationAsIso8601":
      "PT10S", "ttlAsIso8601": "P1DT19H", "maxDeliveryCount": 76}}, "features": "None"},
      "sku": {"name": "S1", "capacity": 1}, "identity": {"type": "None"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      Content-Length:
      - '2269'
      Content-Type:
      - application/json
      If-Match:
      - '{''IF-MATCH'': ''AAAADH2pKzw=''}'
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pKzw=","properties":{"operationsMonitoringProperties":{"events":{"None":"None","Connections":"None","DeviceTelemetry":"None","C2DCommands":"None","DeviceIdentityOperations":"None","FileUploadOperations":"None","Routes":"None"}},"provisioningState":"Accepted","ipFilterRules":[],"eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4},"operationsMonitoringEvents":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3-operationmonitoring","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/","internalAuthorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"scaleunitsend-09302944-feb8-46a7-9223-b1ce94a658a5-iothub","PrimaryKey":"Qsydlv/F+Y/9t7Wz/reAxxRAMgoh6/VvhLbVnabMsrA=","SecondaryKey":"k6axDUe7hOCe6LqsbHk1FGt06UiIV3PGkRzwqN2I1Fw=","Rights":["Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"owner-3b57bab3-75e2-4b83-8dcc-534a746d5ee8-iothub","PrimaryKey":"ZozBjo5bwGsN9FVN2lGQVrcX5J2REWr+sUq09MgOnRk=","SecondaryKey":"R3jgrhJqUVlq9PpGHHpj25Bf14yIbH8LRHNDiLLfpD8=","Rights":["Listen","Manage","Send"],"CreatedTime":"Thu,
        20 Apr 2023 08:14:36 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:14:36 GMT"}],"authorizationPolicies":[{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"iothubowner","PrimaryKey":"bg1k/MobsLEfNz2VSAFex8Ml2IRQBx/DAkHe/hNzi7A=","SecondaryKey":"+4syPi3zrV3l84lfnBcLZ16P6nsJJ36Fyi6c590bX0k=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"},{"ClaimType":"SharedAccessKey","ClaimValue":"None","KeyName":"service","PrimaryKey":"RgLRV6rinrN9SOaDB3ntzZJs3DkfsTLk8B3nKRjA2pY=","SecondaryKey":"wARwWTmh6veXuDmwjtd+aathdG/ip8LxZFFimQpgSi8=","Rights":["Listen"],"CreatedTime":"Thu,
        20 Apr 2023 08:22:26 GMT","ModifiedTime":"Thu, 20 Apr 2023 08:22:26 GMT"}]}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjdjYzZmMmQtNDYyYi00NDczLWI2MTgtNTQzZTg1NzZmMmNiO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4369'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4998'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjdjYzZmMmQtNDYyYi00NDczLWI2MTgtNTQzZTg1NzZmMmNiO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:50:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfZjdjYzZmMmQtNDYyYi00NDczLWI2MTgtNTQzZTg1NzZmMmNiO3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub message-enrichment delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --key
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pLFQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2909'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 08:51:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pLFQ=","properties":{"locations":[{"location":"West
        US 2","role":"primary"},{"location":"West Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-6988fd11ae.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2909'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"failoverRegion": "West Central US"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003/failover?api-version=2022-04-30-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:39 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:51:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:52:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:52:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:53:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:53:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:54:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:54:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:55:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:55:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:56:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:56:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:57:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:57:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:58:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:58:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:59:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 08:59:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:00:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:00:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:01:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:01:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 09:01:48 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfMTI5ZmI1YmItODViOC00NGMyLTgzNDktYjkwYWI1ODA4NTI3O3JlZ2lvbj13ZXN0dXMy?api-version=2022-04-30-preview&operationSource=other
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      connection:
      - close
      content-length:
      - '0'
      date:
      - Thu, 20 Apr 2023 09:01:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"name": "iot-hub-for-test-11000003"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      Content-Length:
      - '37'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/checkNameAvailability?api-version=2022-04-30-preview
  response:
    body:
      string: '{"nameAvailable":false,"reason":"AlreadyExists","message":"IotHub name
        ''iot-hub-for-test-11000003'' is not available"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '117'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:01:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub manual-failover
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pOnU=","properties":{"locations":[{"location":"West
        Central US","role":"primary"},{"location":"West US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-044a9e6178.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2909'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:01:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003","name":"iot-hub-for-test-11000003","type":"Microsoft.Devices/IotHubs","location":"westus2","tags":{"e":"f","g":"h"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pOnU=","properties":{"locations":[{"location":"West
        Central US","role":"primary"},{"location":"West US 2","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"iot-hub-for-test-11000003.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":4,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"iot-hub-for-test-117cs2e3","endpoint":"sb://iothub-ns-iot-hub-fo-24960428-044a9e6178.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[{"connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004","fileNameFormat":"{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}","batchFrequencyInSeconds":100,"maxChunkSizeInBytes":157286400,"encoding":"avro","name":"Storage1","id":"76cabc8c-c1a3-453b-8eb2-74e2f41bc2c9","subscriptionId":"326100e2-f69d-4268-8503-075374f62b6e","resourceGroup":"clitest.rg000001"}],"cosmosDBSqlCollections":[]},"enrichments":[],"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT3H","connectionString":"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;BlobEndpoint=https://clitest000002.blob.core.windows.net/;FileEndpoint=https://clitest000002.file.core.windows.net/;QueueEndpoint=https://clitest000002.queue.core.windows.net/;TableEndpoint=https://clitest000002.table.core.windows.net/;AccountName=clitest000002;AccountKey=****","containerName":"iothubcontainer1000004"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT15S","ttlAsIso8601":"P1DT8H","maxDeliveryCount":80}},"enableFileUploadNotifications":true,"cloudToDevice":{"maxDeliveryCount":46,"defaultTtlAsIso8601":"P1DT10H","feedback":{"lockDurationAsIso8601":"PT10S","ttlAsIso8601":"P1DT19H","maxDeliveryCount":76}},"features":"None","minTlsVersion":"1.2","disableLocalAuth":false,"disableDeviceSAS":false,"disableModuleSAS":false,"allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T08:12:59.1733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '14562'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/iot-hub-for-test-11000003?api-version=2022-04-30-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfN2UwODkxNDktMWJiNS00MDNiLTlkMGUtMTUyZGU5N2M5MGZkO3JlZ2lvbj13ZXN0Y2VudHJhbHVz?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:04 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfN2UwODkxNDktMWJiNS00MDNiLTlkMGUtMTUyZGU5N2M5MGZkO3JlZ2lvbj13ZXN0Y2VudHJhbHVz?api-version=2022-04-30-preview&operationSource=other
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfN2UwODkxNDktMWJiNS00MDNiLTlkMGUtMTUyZGU5N2M5MGZkO3JlZ2lvbj13ZXN0Y2VudHJhbHVz?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Pending"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/westus2/operationResults/aWQ9b3NfaWhfN2UwODkxNDktMWJiNS00MDNiLTlkMGUtMTUyZGU5N2M5MGZkO3JlZ2lvbj13ZXN0Y2VudHJhbHVz?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-resource/22.0.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","type":"Microsoft.Resources/resourceGroups","location":"westus2","tags":{"product":"azurecli","cause":"automation","date":"2023-04-20T08:10:35Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '311'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "westus2", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H",
      "maxDeliveryCount": 10}}, "enableFileUploadNotifications": false, "cloudToDevice":
      {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H", "feedback": {"lockDurationAsIso8601":
      "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableDataResidency":
      true}, "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '633'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007?api-version=2022-04-30-preview
  response:
    body:
      string: '{"code":400059,"httpStatusCode":"BadRequest","message":"Requested IoT
        Hub features ''\"DataResidency\"'' not available in ''westus2'' region. If
        you contact a support representative please include this correlation identifier:
        899948d7-4227-47a7-92df-b18b9c9bccdb, timestamp: 2023-04-20 09:02:47Z, errorcode:
        IH400059."}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '315'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:02:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4996'
    status:
      code: 400
      message: Bad Request
- request:
    body: '{"location": "southeastasia", "properties": {"eventHubEndpoints": {"events":
      {"retentionTimeInDays": 1, "partitionCount": 4}}, "storageEndpoints": {"$default":
      {"sasTtlAsIso8601": "PT1H", "connectionString": "", "containerName": ""}}, "messagingEndpoints":
      {"fileNotifications": {"lockDurationAsIso8601": "PT5S", "ttlAsIso8601": "PT1H",
      "maxDeliveryCount": 10}}, "enableFileUploadNotifications": false, "cloudToDevice":
      {"maxDeliveryCount": 10, "defaultTtlAsIso8601": "PT1H", "feedback": {"lockDurationAsIso8601":
      "PT5S", "ttlAsIso8601": "PT1H", "maxDeliveryCount": 10}}, "enableDataResidency":
      true}, "sku": {"name": "S1", "capacity": 1}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      Content-Length:
      - '639'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007","name":"dps-dr000007","type":"Microsoft.Devices/IotHubs","location":"southeastasia","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","properties":{"provisioningState":"Accepted","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[],"enableDataResidency":true},"sku":{"name":"S1","tier":"Standard","capacity":1}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '980'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:03:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-resource-requests:
      - '4999'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:03:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:03:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:04:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:04:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDVmMGM0OWItNmNlMy00NjI5LWI4ZjMtMmNhNDQ0NjRkMDZlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --location --edr
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007?api-version=2022-04-30-preview
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007","name":"dps-dr000007","type":"Microsoft.Devices/IotHubs","location":"southeastasia","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pPz8=","properties":{"locations":[{"location":"Southeast
        Asia","role":"primary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"dps-dr000007.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"dps-dr000007","endpoint":"sb://iothub-ns-dps-druomj-24960674-cc9520fa6e.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[],"enableDataResidency":true},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T09:03:04.9733333Z"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1641'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/IotHubs?api-version=2022-04-30-preview
  response:
    body:
      string: '{"value":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/juanfunction/providers/Microsoft.Devices/IotHubs/juanhub","name":"juanhub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"juanfunction","etag":"AAAADH15n70=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"juanhub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"juanhub","endpoint":"sb://iothub-ns-juanhub-110005-f25fd37846.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"tet","source":"DeviceConnectionStateEvents","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"GWV2,
        RootCertificateV2","allowedFqdnList":[],"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:56:27.8564942Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2017-01-30T22:45:54.767Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/geguirgu/providers/Microsoft.Devices/IotHubs/geguirgu-hub","name":"geguirgu-hub","type":"Microsoft.Devices/IotHubs","location":"westus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"geguirgu","etag":"AAAADH15jzw=","properties":{"locations":[{"location":"West
        US","role":"primary"},{"location":"East US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"geguirgu-hub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"geguirgu-hub","endpoint":"sb://iothub-ns-geguirgu-h-20099314-31677eed75.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT11H","connectionString":"","containerName":"","authenticationType":"identityBased"}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT17H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"RootCertificateV2","disableLocalAuth":false,"allowedFqdnList":[],"enableDataResidency":false,"rootCertificate":{"enableRootCertificateV2":true,"lastUpdatedTimeUtc":"2023-04-05T18:41:08.5206672Z","microsoftMigratedRootCert":false}},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/TestKaren/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aadJmsTest":{"clientId":"f7a1d0cd-b213-46ad-b00f-7b8da1ae32a9","principalId":"8ef66c24-3d2d-4435-885c-18b4e02bbc41"},"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ps-testing/providers/Microsoft.ManagedIdentity/userAssignedIdentities/PS-Testing-MSI2":{"clientId":"440d7336-c408-4327-ad13-10a4e71aad64","principalId":"1bdb6af0-4284-47f4-b049-94aa2868d90b"}},"principalId":"36d8f20a-8900-4c3b-bf76-f356c48985d5"},"systemData":{"createdAt":"2022-07-07T20:35:15.0766667Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/manojprasad-rampup/providers/Microsoft.Devices/IotHubs/manojprasad-iothub","name":"manojprasad-iothub","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{"Offload":"Yes"},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"manojprasad-rampup","etag":"AAAADH12yvY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"manojprasad-iothub.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"manojprasad-iothub","endpoint":"sb://iothub-ns-manojprasa-11060852-16ad6522ee.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[]},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"tenantId":"72f988bf-86f1-41af-91ab-2d7cd011db47","type":"SystemAssigned,
        UserAssigned","userAssignedIdentities":{"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/managedidentitytest/providers/Microsoft.ManagedIdentity/userAssignedIdentities/userassigned":{"clientId":"f295b2b4-8837-4bad-9f44-070fa1a854d9","principalId":"c23c3c9c-04df-4cd0-8ca8-e859610c9431"}},"principalId":"9d0cf8cf-907c-4f6c-9677-ddd9e5d5dd6d"},"systemData":{"createdAt":"2021-05-18T00:57:34.763Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dorothytest/providers/Microsoft.Devices/IotHubs/StreamAnalyticsWhitelist","name":"StreamAnalyticsWhitelist","type":"Microsoft.Devices/IotHubs","location":"eastus","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"dorothytest","etag":"AAAADHwZbtY=","properties":{"locations":[{"location":"East
        US","role":"primary"},{"location":"West US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"StreamAnalyticsWhitelist.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"streamanalyticswhitelist","endpoint":"sb://iothub-ns-streamanal-11940454-fb4b27c295.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-06-10T23:13:33.567Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007","name":"dps-dr000007","type":"Microsoft.Devices/IotHubs","location":"southeastasia","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"clitest.rg000001","etag":"AAAADH2pPz8=","properties":{"locations":[{"location":"Southeast
        Asia","role":"primary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"dps-dr000007.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"dps-dr000007","endpoint":"sb://iothub-ns-dps-druomj-24960674-cc9520fa6e.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT5S","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None","allowedFqdnList":[],"enableDataResidency":true},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2023-04-20T09:03:04.9733333Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus2","name":"sjiothubeastus2","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5VSQ=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus2.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":4,"partitionIds":["0","1","2","3"],"path":"sjiothubeastus2","endpoint":"sb://iothub-ns-sjiothubea-11469916-d6f3a55857.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"telemetry-routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-29T06:14:08.293Z"}},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sjrg/providers/Microsoft.Devices/IotHubs/sjiothubeastus21","name":"sjiothubeastus21","type":"Microsoft.Devices/IotHubs","location":"eastus2","tags":{},"subscriptionid":"326100e2-f69d-4268-8503-075374f62b6e","resourcegroup":"sjrg","etag":"AAAADHw5X3Q=","properties":{"locations":[{"location":"East
        US 2","role":"primary"},{"location":"Central US","role":"secondary"}],"state":"Active","provisioningState":"Succeeded","ipFilterRules":[],"hostName":"sjiothubeastus21.azure-devices.net","eventHubEndpoints":{"events":{"retentionTimeInDays":1,"partitionCount":8,"partitionIds":["0","1","2","3","4","5","6","7"],"path":"sjiothubeastus21","endpoint":"sb://iothub-ns-sjiothubea-11501355-f8c505c435.servicebus.windows.net/"}},"routing":{"endpoints":{"serviceBusQueues":[],"serviceBusTopics":[],"eventHubs":[],"storageContainers":[],"cosmosDBSqlCollections":[]},"routes":[{"name":"routing","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}],"fallbackRoute":{"name":"$fallback","source":"DeviceMessages","condition":"true","endpointNames":["events"],"isEnabled":true}},"storageEndpoints":{"$default":{"sasTtlAsIso8601":"PT1H","connectionString":"","containerName":""}},"messagingEndpoints":{"fileNotifications":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"enableFileUploadNotifications":false,"cloudToDevice":{"maxDeliveryCount":10,"defaultTtlAsIso8601":"PT1H","feedback":{"lockDurationAsIso8601":"PT1M","ttlAsIso8601":"PT1H","maxDeliveryCount":10}},"features":"None"},"sku":{"name":"S1","tier":"Standard","capacity":1},"identity":{"type":"None"},"systemData":{"createdAt":"2021-05-30T02:51:54.413Z"}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '13294'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-original-request-ids:
      - ''
      - ''
      - ''
      - ''
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Devices/IotHubs/dps-dr000007?api-version=2022-04-30-preview
  response:
    body:
      string: 'null'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDgyZjAzMjAtMGE0Yy00Njk0LTkwZjYtMzY3MGEzMjU0YWRlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
      cache-control:
      - no-cache
      content-length:
      - '4'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:53 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDgyZjAzMjAtMGE0Yy00Njk0LTkwZjYtMzY3MGEzMjU0YWRlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDgyZjAzMjAtMGE0Yy00Njk0LTkwZjYtMzY3MGEzMjU0YWRlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:05:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - iot hub delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - AZURECLI/2.47.0 azsdk-python-azure-mgmt-iothub/2.3.0 Python/3.10.0 (Windows-10-10.0.22621-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Devices/locations/southeastasia/operationResults/aWQ9b3NfaWhfNDgyZjAzMjAtMGE0Yy00Njk0LTkwZjYtMzY3MGEzMjU0YWRlO3JlZ2lvbj1zb3V0aGVhc3Rhc2lh?api-version=2022-04-30-preview&operationSource=other&asyncinfo
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 20 Apr 2023 09:06:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
