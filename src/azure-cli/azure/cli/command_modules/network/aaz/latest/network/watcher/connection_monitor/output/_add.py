# --------------------------------------------------------------------------------------------
# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License. See License.txt in the project root for license information.
#
# Code generated by aaz-dev-tools
# --------------------------------------------------------------------------------------------

# pylint: skip-file
# flake8: noqa

from azure.cli.core.aaz import *


@register_command(
    "network watcher connection-monitor output add",
    is_preview=True,
)
class Add(AAZCommand):
    """Add a connection monitor output destination.
    """

    _aaz_info = {
        "version": "2022-01-01",
        "resources": [
            ["mgmt-plane", "/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/networkwatchers/{}/connectionmonitors/{}/outputs/{}", "2022-01-01", "properties.outputs[]"],
        ]
    }

    AZ_SUPPORT_NO_WAIT = True

    def _handler(self, command_args):
        super()._handler(command_args)
        self.SubresourceSelector(ctx=self.ctx, name="subresource")
        return self.InstanceCreateByJson(ctx=self.ctx)()

    _args_schema = None

    @classmethod
    def _build_arguments_schema(cls, *args, **kwargs):
        if cls._args_schema is not None:
            return cls._args_schema
        cls._args_schema = super()._build_arguments_schema(*args, **kwargs)

        _args_schema = cls._args_schema
        _args_schema.connection_monitor = AAZStrArg(
            options=["--connection-monitor"],
            help="Connection monitor name.",
            required=False,
        )
        _args_schema.watcher_name = AAZStrArg(
            options=["--watcher-name"],
            help="The name of the Network Watcher resource.",
            required=False,
        )
        _args_schema.watcher_rg = AAZResourceGroupNameArg(
            options=["-g", "--watcher-rg"],
            help="Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.",
            required=False,
        )
        _args_schema.output_index = AAZIntArg(
            options=["--output-index"],
            help="output-index",
        )
        _args_schema.output_type = AAZStrArg(
            options=["--type", "--output-type"],
            help="Connection monitor output destination type. Currently, only \"Workspace\" is supported.",
            enum={"Workspace": "Workspace"},
            required=True,
        )
        _args_schema.workspace_id = AAZStrArg(
            options=["--workspace-id"],
            help="The id of log analytics workspace",
            required=True,
        )
        return cls._args_schema
        

    class SubresourceSelector(AAZJsonSelector):

        def _get(self):
            pass

        def _set(self, value):
            pass

    class InstanceCreateByJson(AAZJsonInstanceCreateOperation):
        
        def __call__(self, *args, **kwargs):
            #self.ctx.selectors.subresource.set(self._create_instance())
            return self._create_instance()

        def _create_instance(self):

            data = {
                "type": str(self.ctx.args.output_type),
                "workspaceResourceId": str(self.ctx.args.workspace_id)
            }


            ob = str(data)
            return ob

                      

__all__ = ["Add"]


