interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-06-30T08:40:20Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:40:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "UploadPreparedSecure", "uploadSizeBytes": 34359738880}, "securityProfile":
      {"securityType": "TrustedLaunch"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '282'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\",\r\n
        \ \"location\": \"southcentralus\",\r\n  \"tags\": {},\r\n  \"sku\": {\r\n
        \   \"name\": \"Standard_LRS\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\":
        \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\":
        {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\":
        34359738880\r\n    },\r\n    \"securityProfile\": {\r\n      \"securityType\":
        \"TrustedLaunch\"\r\n    },\r\n    \"provisioningState\": \"Updating\",\r\n
        \   \"isArmResource\": true\r\n  },\r\n  \"associatedXStoreEntities\": [\r\n
        \   {\r\n      \"id\": \"499d57dd-1f38-4498-ab19-7e01c9cbedc2\",\r\n      \"type\":
        \"VmgsBlob\",\r\n      \"name\": \"499d57dd-1f38-4498-ab19-7e01c9cbedc2_vmgs\",\r\n
        \     \"accessibleExternally\": false,\r\n      \"alignWithDisk\": true,\r\n
        \     \"deleteOnDetach\": false,\r\n      \"pseudoSubscriptionId\": \"00000000-0000-0000-0000-000000000000\",\r\n
        \     \"sourceSubscriptionId\": \"00000000-0000-0000-0000-000000000000\",\r\n
        \     \"sizeInBytes\": 4194816\r\n    }\r\n  ]\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/f07ecadf-ecc5-4c13-813c-4ad356f7ce16?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '1102'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:40:32 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/f07ecadf-ecc5-4c13-813c-4ad356f7ce16?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;997,Microsoft.Compute/CreateUpdateDisks30Min;7991
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/f07ecadf-ecc5-4c13-813c-4ad356f7ce16?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:40:32.446354+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:40:32.5557423+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk000002\",\r\n
        \ \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:40:32.446354+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"356d0fc7-8cb5-43a9-9dc2-ebb1f7eda357\"\r\n
        \ }\r\n}\r\n  },\r\n  \"name\": \"f07ecadf-ecc5-4c13-813c-4ad356f7ce16\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1263'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:40:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49984,Microsoft.Compute/GetOperation30Min;399959
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:40:32.446354+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"356d0fc7-8cb5-43a9-9dc2-ebb1f7eda357\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1039'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:40:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14965,Microsoft.Compute/LowCostGet30Min;119785
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:40:32.446354+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"356d0fc7-8cb5-43a9-9dc2-ebb1f7eda357\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1039'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:40:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14964,Microsoft.Compute/LowCostGet30Min;119784
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400, "getSecureVMGuestStateSAS":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk000002/beginGetAccess?api-version=2022-03-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6f21dc81-b0ef-4778-b477-59ff52fc6d89?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 30 Jun 2022 08:40:37 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6f21dc81-b0ef-4778-b477-59ff52fc6d89?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;997,Microsoft.Compute/HighCostDiskHydrate30Min;7993
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6f21dc81-b0ef-4778-b477-59ff52fc6d89?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:40:37.7120066+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:40:38.2276289+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/qs40mndhznlm/abcd?sv=2018-03-28&sr=b&si=e93ceb7e-8d28-4eb0-99a0-a32eb4cf151b&sig=BnTo5pUQW28e7d5yELXwX8XJtR29Um4MxRlg5hwlPTA%3D\",\r\n
        \ \"securityDataAccessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/rcfdjff0mddw/499d57dd-1f38-4498-ab19-7e01c9cbedc2_vmgs?sv=2018-03-28&sr=b&si=c2ef8ade-707a-43dc-a701-d19f2f06d66d&sig=dMzqzgSEV3Nt5DoxUbhe9xuqAUJqwqSwvnt0Jg8Fs18%3D\"\r\n}\r\n
        \ },\r\n  \"name\": \"6f21dc81-b0ef-4778-b477-59ff52fc6d89\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '687'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49987,Microsoft.Compute/GetOperation30Min;399956
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6f21dc81-b0ef-4778-b477-59ff52fc6d89?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/qs40mndhznlm/abcd?sv=2018-03-28&sr=b&si=e93ceb7e-8d28-4eb0-99a0-a32eb4cf151b&sig=BnTo5pUQW28e7d5yELXwX8XJtR29Um4MxRlg5hwlPTA%3D\",\r\n
        \ \"securityDataAccessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/rcfdjff0mddw/499d57dd-1f38-4498-ab19-7e01c9cbedc2_vmgs?sv=2018-03-28&sr=b&si=c2ef8ade-707a-43dc-a701-d19f2f06d66d&sig=dMzqzgSEV3Nt5DoxUbhe9xuqAUJqwqSwvnt0Jg8Fs18%3D\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '462'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49986,Microsoft.Compute/GetOperation30Min;399955
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-06-30T08:40:20Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "UploadPreparedSecure", "uploadSizeBytes": 34359738880}, "securityProfile":
      {"securityType": "TrustedLaunch"}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '282'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\",\r\n
        \ \"location\": \"southcentralus\",\r\n  \"tags\": {},\r\n  \"sku\": {\r\n
        \   \"name\": \"Standard_LRS\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\":
        \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\":
        {\r\n      \"createOption\": \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\":
        34359738880\r\n    },\r\n    \"securityProfile\": {\r\n      \"securityType\":
        \"TrustedLaunch\"\r\n    },\r\n    \"provisioningState\": \"Updating\",\r\n
        \   \"isArmResource\": true\r\n  },\r\n  \"associatedXStoreEntities\": [\r\n
        \   {\r\n      \"id\": \"8cc34f46-f39a-4b7c-8ec9-9c28599076ce\",\r\n      \"type\":
        \"VmgsBlob\",\r\n      \"name\": \"8cc34f46-f39a-4b7c-8ec9-9c28599076ce_vmgs\",\r\n
        \     \"accessibleExternally\": false,\r\n      \"alignWithDisk\": true,\r\n
        \     \"deleteOnDetach\": false,\r\n      \"pseudoSubscriptionId\": \"00000000-0000-0000-0000-000000000000\",\r\n
        \     \"sourceSubscriptionId\": \"00000000-0000-0000-0000-000000000000\",\r\n
        \     \"sizeInBytes\": 4194816\r\n    }\r\n  ]\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6b3c8620-fced-47c4-86c0-c5e2dd6e9735?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '1104'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:15 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6b3c8620-fced-47c4-86c0-c5e2dd6e9735?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;997,Microsoft.Compute/CreateUpdateDisks30Min;7990
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/6b3c8620-fced-47c4-86c0-c5e2dd6e9735?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:41:16.1033462+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:41:16.2283126+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk1000003\",\r\n
        \ \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:16.1189288+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"683f4914-c8bd-4912-881d-a763ea3d2d82\"\r\n
        \ }\r\n}\r\n  },\r\n  \"name\": \"6b3c8620-fced-47c4-86c0-c5e2dd6e9735\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1267'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49985,Microsoft.Compute/GetOperation30Min;399954
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --security-type --upload-type --upload-size-bytes
        --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:16.1189288+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"683f4914-c8bd-4912-881d-a763ea3d2d82\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14961,Microsoft.Compute/LowCostGet30Min;119775
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk1000003\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"UploadPreparedSecure\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n
        \   \"diskIOPSReadWrite\": 500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\":
        {\r\n      \"type\": \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"securityProfile\": {\r\n      \"securityType\": \"TrustedLaunch\"\r\n
        \   },\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:16.1189288+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"683f4914-c8bd-4912-881d-a763ea3d2d82\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1042'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14960,Microsoft.Compute/LowCostGet30Min;119774
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400, "getSecureVMGuestStateSAS":
      true}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '81'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk1000003/beginGetAccess?api-version=2022-03-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/3daae2cd-ff8f-487a-a8e6-ae1dd76c16d0?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 30 Jun 2022 08:41:19 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/3daae2cd-ff8f-487a-a8e6-ae1dd76c16d0?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;996,Microsoft.Compute/HighCostDiskHydrate30Min;7992
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/3daae2cd-ff8f-487a-a8e6-ae1dd76c16d0?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:41:20.5721372+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:41:20.8533871+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/klxc5lt0b35c/abcd?sv=2018-03-28&sr=b&si=17e16cdd-1e9e-4868-add2-21c77c83a864&sig=iB0Ox7GnbCi8%2BumqQcugCMoQTDvSAAAeeLUYeYJJHUk%3D\",\r\n
        \ \"securityDataAccessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/bm2mmgb3jdth/8cc34f46-f39a-4b7c-8ec9-9c28599076ce_vmgs?sv=2018-03-28&sr=b&si=555baaa7-3e3a-4bca-9472-63399e1f12bf&sig=A8bxvzo%2FHALaDGZd1Y4k7FY43%2BOSyhInf%2Fjzw7emjUM%3D\"\r\n}\r\n
        \ },\r\n  \"name\": \"3daae2cd-ff8f-487a-a8e6-ae1dd76c16d0\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '695'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49984,Microsoft.Compute/GetOperation30Min;399951
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds --secure-vm-guest-state-sas
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/3daae2cd-ff8f-487a-a8e6-ae1dd76c16d0?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/klxc5lt0b35c/abcd?sv=2018-03-28&sr=b&si=17e16cdd-1e9e-4868-add2-21c77c83a864&sig=iB0Ox7GnbCi8%2BumqQcugCMoQTDvSAAAeeLUYeYJJHUk%3D\",\r\n
        \ \"securityDataAccessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/bm2mmgb3jdth/8cc34f46-f39a-4b7c-8ec9-9c28599076ce_vmgs?sv=2018-03-28&sr=b&si=555baaa7-3e3a-4bca-9472-63399e1f12bf&sig=A8bxvzo%2FHALaDGZd1Y4k7FY43%2BOSyhInf%2Fjzw7emjUM%3D\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '470'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49983,Microsoft.Compute/GetOperation30Min;399950
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-resource/21.1.0b1 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001?api-version=2021-04-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001","name":"cli_test_vm_trusted_launch_os_disk_secure_upload000001","type":"Microsoft.Resources/resourceGroups","location":"southcentralus","tags":{"product":"azurecli","cause":"automation","date":"2022-06-30T08:40:20Z"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '394'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "southcentralus", "tags": {}, "sku": {"name": "Standard_LRS"},
      "properties": {"osType": "Windows", "hyperVGeneration": "V2", "creationData":
      {"createOption": "Upload", "uploadSizeBytes": 34359738880}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      Content-Length:
      - '214'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\",\r\n
        \ \"location\": \"southcentralus\",\r\n  \"tags\": {},\r\n  \"sku\": {\r\n
        \   \"name\": \"Standard_LRS\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\":
        \"Windows\",\r\n    \"hyperVGeneration\": \"V2\",\r\n    \"creationData\":
        {\r\n      \"createOption\": \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\n
        \   },\r\n    \"provisioningState\": \"Updating\",\r\n    \"isArmResource\":
        true\r\n  }\r\n}"
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/8cf367e5-c99b-48f5-9307-559d0e0e942c?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '552'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:41:58 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/8cf367e5-c99b-48f5-9307-559d0e0e942c?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/CreateUpdateDisks3Min;996,Microsoft.Compute/CreateUpdateDisks30Min;7989
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/8cf367e5-c99b-48f5-9307-559d0e0e942c?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:41:59.2442844+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:41:59.3692751+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"name\": \"disk2000004\",\r\n
        \ \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\":
        500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\": {\r\n      \"type\":
        \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:59.2442844+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"25600c92-14d7-4ac6-9071-3f7531be9276\"\r\n
        \ }\r\n}\r\n  },\r\n  \"name\": \"8cf367e5-c99b-48f5-9307-559d0e0e942c\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1180'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:42:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49986,Microsoft.Compute/GetOperation30Min;399949
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk create
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --os-type --hyper-v-generation --upload-type --upload-size-bytes --sku
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\":
        500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\": {\r\n      \"type\":
        \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:59.2442844+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"25600c92-14d7-4ac6-9071-3f7531be9276\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '955'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:42:01 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14965,Microsoft.Compute/LowCostGet30Min;119768
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004?api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"name\": \"disk2000004\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004\",\r\n
        \ \"type\": \"Microsoft.Compute/disks\",\r\n  \"location\": \"southcentralus\",\r\n
        \ \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_LRS\",\r\n    \"tier\":
        \"Standard\"\r\n  },\r\n  \"properties\": {\r\n    \"osType\": \"Windows\",\r\n
        \   \"hyperVGeneration\": \"V2\",\r\n    \"creationData\": {\r\n      \"createOption\":
        \"Upload\",\r\n      \"uploadSizeBytes\": 34359738880\r\n    },\r\n    \"diskIOPSReadWrite\":
        500,\r\n    \"diskMBpsReadWrite\": 60,\r\n    \"encryption\": {\r\n      \"type\":
        \"EncryptionAtRestWithPlatformKey\"\r\n    },\r\n    \"networkAccessPolicy\":
        \"AllowAll\",\r\n    \"publicNetworkAccess\": \"Enabled\",\r\n    \"timeCreated\":
        \"2022-06-30T08:41:59.2442844+00:00\",\r\n    \"provisioningState\": \"Succeeded\",\r\n
        \   \"diskState\": \"ReadyToUpload\",\r\n    \"uniqueId\": \"25600c92-14d7-4ac6-9071-3f7531be9276\"\r\n
        \ }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '955'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:42:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/LowCostGet3Min;14964,Microsoft.Compute/LowCostGet30Min;119767
    status:
      code: 200
      message: OK
- request:
    body: '{"access": "Write", "durationInSeconds": 86400}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      Content-Length:
      - '47'
      Content-Type:
      - application/json
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vm_trusted_launch_os_disk_secure_upload000001/providers/Microsoft.Compute/disks/disk2000004/beginGetAccess?api-version=2022-03-02
  response:
    body:
      string: ''
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/4ad19b01-b9d5-4787-bc8b-8ccb5da7f914?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Thu, 30 Jun 2022 08:42:04 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/4ad19b01-b9d5-4787-bc8b-8ccb5da7f914?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/HighCostDiskHydrate3Min;997,Microsoft.Compute/HighCostDiskHydrate30Min;7991
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/4ad19b01-b9d5-4787-bc8b-8ccb5da7f914?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"startTime\": \"2022-06-30T08:42:04.5411456+00:00\",\r\n  \"endTime\":
        \"2022-06-30T08:42:04.7755442+00:00\",\r\n  \"status\": \"Succeeded\",\r\n
        \ \"properties\": {\r\n    \"output\": {\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/nqlg5whgkgtr/abcd?sv=2018-03-28&sr=b&si=b1435ad5-df79-493a-b52f-3e7fea05783e&sig=DvV%2F1WEcDqKDDoqLy34svnXXlGc4n8mVUKlzNMWGfWw%3D\"\r\n}\r\n
        \ },\r\n  \"name\": \"4ad19b01-b9d5-4787-bc8b-8ccb5da7f914\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '435'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:42:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49986,Microsoft.Compute/GetOperation30Min;399946
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - disk grant-access
      Connection:
      - keep-alive
      ParameterSetName:
      - -n -g --access-level --duration-in-seconds
      User-Agent:
      - AZURECLI/2.37.0 azsdk-python-azure-mgmt-compute/27.1.0 Python/3.8.9 (Windows-10-10.0.22000-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/southcentralus/DiskOperations/4ad19b01-b9d5-4787-bc8b-8ccb5da7f914?p=cc2a4867-fc8c-49a3-83e3-4fae1746e33f&monitor=true&api-version=2022-03-02
  response:
    body:
      string: "{\r\n  \"accessSAS\": \"https://md-impexp-jnc5kmmdgxn2.z27.blob.storage.azure.net/nqlg5whgkgtr/abcd?sv=2018-03-28&sr=b&si=b1435ad5-df79-493a-b52f-3e7fea05783e&sig=DvV%2F1WEcDqKDDoqLy34svnXXlGc4n8mVUKlzNMWGfWw%3D\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '210'
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 30 Jun 2022 08:42:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      server:
      - Microsoft-HTTPAPI/2.0
      - Microsoft-HTTPAPI/2.0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetOperation3Min;49985,Microsoft.Compute/GetOperation30Min;399945
    status:
      code: 200
      message: OK
version: 1
