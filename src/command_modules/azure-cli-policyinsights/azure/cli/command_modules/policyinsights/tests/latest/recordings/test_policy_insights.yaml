interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/centraluseuapnsggroup/providers/microsoft.network/networksecuritygroups/centraluseuapnsg/securityrules/cleanuptool-3389-corpnet-647940a2-6f30-49cd-a7cb-9dfb2c313c43","numRecords":176},{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/centraluseuapnsggroup/providers/microsoft.network/networksecuritygroups/centraluseuapnsg/securityrules/cleanuptool-3389-corpnet-647940a2-6f30-49cd-a7cb-9dfb2c313c43","numRecords":176}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1449']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:36 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/aatestrg/providers/microsoft.analysisservices/servers/rashmianalysisservices","numRecords":8},{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/aatestrg/providers/microsoft.analysisservices/servers/rashmianalysisservices","numRecords":8}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1266']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:39 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":22205,"nonCompliantPolicies":24},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''","nonCompliantResources":22205,"nonCompliantPolicies":2},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":20983}},{"policyDefinitionReferenceId":"15521232277412542086","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''15521232277412542086''","nonCompliantResources":17044}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''","nonCompliantResources":22205,"nonCompliantPolicies":2},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":20983}},{"policyDefinitionReferenceId":"15521232277412542086","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/providers/Microsoft.Management/managementGroups/azgovtest4/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''15521232277412542086''","nonCompliantResources":17044}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['6568']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:46 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/centraluseuapnsggroup/providers/microsoft.network/networksecuritygroups/centraluseuapnsg/securityrules/cleanuptool-3389-corpnet-647940a2-6f30-49cd-a7cb-9dfb2c313c43","numRecords":176},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/centraluseuapnsggroup/providers/microsoft.network/networksecuritygroups/centraluseuapnsg/securityrules/cleanuptool-3389-corpnet-647940a2-6f30-49cd-a7cb-9dfb2c313c43","numRecords":176}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1425']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:47 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/aatestrg/providers/microsoft.analysisservices/servers/rashmianalysisservices","numRecords":8},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/aatestrg/providers/microsoft.analysisservices/servers/rashmianalysisservices","numRecords":8}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1242']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:49 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":18536,"nonCompliantPolicies":23},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''","nonCompliantResources":18536,"nonCompliantPolicies":2},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":17506}},{"policyDefinitionReferenceId":"15521232277412542086","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''15521232277412542086''","nonCompliantResources":13720}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''","nonCompliantResources":18536,"nonCompliantPolicies":2},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":17506}},{"policyDefinitionReferenceId":"15521232277412542086","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''15521232277412542086''","nonCompliantResources":13720}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['6496']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:53 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-0b88dfdb-55b3-4fb0-b474-5b6dcbe6b2ef-eus/linkedservices/security","numRecords":116},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-0b88dfdb-55b3-4fb0-b474-5b6dcbe6b2ef-eus/linkedservices/security","numRecords":82}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1530']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:54 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationsmanagement/solutions/changetracking(defaultworkspace-0b88dfdb-55b3-4fb0-b474-5b6dcbe6b2ef-eus)","numRecords":3},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationsmanagement/solutions/changetracking(defaultworkspace-0b88dfdb-55b3-4fb0-b474-5b6dcbe6b2ef-eus)","numRecords":3}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1508']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:55 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":7,"nonCompliantPolicies":3},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''","nonCompliantResources":7,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":7}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''","nonCompliantResources":7,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/defaultresourcegroup-eus/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":7}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['4558']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:57 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1636']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:58 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1633']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:07:59 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":1,"nonCompliantPolicies":3},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","policySetDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policysetdefinitions/335cefd2-ab16-430f-b364-974a170eb1d5","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"4337452039094051187","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''
        and PolicyDefinitionReferenceId eq ''4337452039094051187''","nonCompliantResources":1}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/eastusnsggroup/providers/microsoft.network/networksecuritygroups/eastusnsg/securityrules/allow-joba/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":1}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['5083']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:01 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut","numRecords":2},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/95816fce53454b15a7ed803d","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1571']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:01 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut","numRecords":6},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut","numRecords":6}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1568']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:03 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":1,"nonCompliantPolicies":7},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":1}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/omssecurityintresourcegroup/providers/microsoft.keyvault/vaults/omssecuritydevkeyvalut/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":1}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['4765']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:04 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default","numRecords":2},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default","numRecords":2}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1551']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:05 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/22005cc594164636a6444db8","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default","numRecords":6},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/1ef5d536aec743a0aa801c1a","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default","numRecords":6}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1548']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:06 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":1,"nonCompliantPolicies":7},"policyAssignments":[{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policyassignments/186044306c044a1d8c0ff76c''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":1}}]},{"policyAssignmentId":"/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/mms-wcus/providers/microsoft.network/virtualnetworks/mms-wcus-vnet/subnets/default/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/providers/microsoft.management/managementgroups/azgovtest2/providers/microsoft.authorization/policyassignments/e9ad4ab40dfb4549a998cfcc''
        and PolicyDefinitionId eq ''/providers/microsoft.management/managementgroups/azgovtest1/providers/microsoft.authorization/policydefinitions/022d9357-5a90-46f7-9554-21d30ce4c32d''","nonCompliantResources":1}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['4737']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:07 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":0,"value":[]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['286']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:08 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":0,"value":[]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['285']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:09 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policySetDefinitions/335cefd2-ab16-430f-b364-974a170eb1d5/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":0,"nonCompliantPolicies":0},"policyAssignments":[]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1046']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:10 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/c7330451f3e34e54ae6712e1","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.keyvault/vaults/rashmi-kv-test","numRecords":1},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/f6f08ec4878644d7bc5e020b","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.keyvault/vaults/rashmi-kv-test","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1534']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:11 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":2,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/17bd552d9ec84b538893a691","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.keyvault/vaults/rashmi-kv-test5","numRecords":3},{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/7fd638704a88457e8c0ae077","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.keyvault/vaults/rashmi-kv-test5","numRecords":3}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1533']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:11 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":5,"nonCompliantPolicies":7},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/cfe746abc6f341c58872a005","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/cfe746abc6f341c58872a005''","nonCompliantResources":5,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016","effect":"deployifnotexists","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/cfe746abc6f341c58872a005''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016''","nonCompliantResources":5}}]},{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/f6f08ec4878644d7bc5e020b","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/f6f08ec4878644d7bc5e020b''","nonCompliantResources":5,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016","effect":"deployifnotexists","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyDefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/rashmi-kv-test/providers/microsoft.authorization/policyassignments/f6f08ec4878644d7bc5e020b''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/25bf1e2a-6004-47ad-9bd1-2a40dd6de016''","nonCompliantResources":5}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['4798']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:12 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/96e22f7846e94bb186ae3a01","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.keyvault/vaults/tipinteuskeyvault","numRecords":21}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['868']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:13 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/96e22f7846e94bb186ae3a01","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.keyvault/vaults/tipinteuskeyvault","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['865']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:14 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":1,"nonCompliantPolicies":1},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/96e22f7846e94bb186ae3a01","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/96e22f7846e94bb186ae3a01''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/92395f89-8960-42cc-95ae-62d3d1a921fc","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/policyAssignments/96e22f7846e94bb186ae3a01/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policyassignments/96e22f7846e94bb186ae3a01''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/92395f89-8960-42cc-95ae-62d3d1a921fc''","nonCompliantResources":1}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['2755']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:16 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy event list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyEvents/default/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyEvents/$metadata#default/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.authorization/policyassignments/bc916e4f3ab54030822a11b3","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.keyvault/vaults/tipinteuskeyvault","numRecords":21}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['988']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:18 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state list]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$top=2&$orderby=numRecords%20desc&$select=policyAssignmentId%2C%20resourceId%2C%20numRecords&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false&$apply=groupby%28%28policyAssignmentId%2C%20resourceId%29%2C%20aggregate%28%24count%20as%20numRecords%29%29
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/$metadata#latest/$entity","policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.authorization/policyassignments/bc916e4f3ab54030822a11b3","resourceId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.keyvault/vaults/tipinteuskeyvault","numRecords":1}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['985']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:18 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [policy state summarize]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.6.5 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.29
          msrest_azure/0.4.29 azure-mgmt-policyinsights/0.1.0 Azure-SDK-For-Python
          AZURECLI/2.0.34]
      accept-language: [en-US]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/latest/summarize?api-version=2018-04-04&$top=2&$from=2018-04-04T00%3A00%3A00.000Z&$to=2018-05-22T00%3A00%3A00.000Z&$filter=isCompliant%20eq%20false
  response:
    body: {string: '{"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary","@odata.count":1,"value":[{"@odata.id":null,"@odata.context":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/$metadata#summary/$entity","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false","nonCompliantResources":1,"nonCompliantPolicies":1},"policyAssignments":[{"policyAssignmentId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.authorization/policyassignments/bc916e4f3ab54030822a11b3","policySetDefinitionId":"","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.authorization/policyassignments/bc916e4f3ab54030822a11b3''","nonCompliantResources":1,"nonCompliantPolicies":1},"policyDefinitions":[{"policyDefinitionReferenceId":"","policyDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/92395f89-8960-42cc-95ae-62d3d1a921fc","effect":"audit","results":{"queryResultsUri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/Microsoft.Authorization/policyAssignments/bc916e4f3ab54030822a11b3/providers/Microsoft.PolicyInsights/policyStates/latest/queryResults?api-version=2018-04-04&$from=2018-04-04
        00:00:00Z&$to=2018-05-22 00:00:00Z&$filter=(isCompliant eq false) and IsCompliant
        eq false and PolicyAssignmentId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/tipkeyvaultresourcegroup/providers/microsoft.authorization/policyassignments/bc916e4f3ab54030822a11b3''
        and PolicyDefinitionId eq ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/microsoft.authorization/policydefinitions/92395f89-8960-42cc-95ae-62d3d1a921fc''","nonCompliantResources":1}}]}]}]}'}
    headers:
      cache-control: [no-cache]
      content-length: ['3075']
      content-type: [application/json; charset=utf-8]
      date: ['Wed, 23 May 2018 00:08:19 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
      x-content-type-options: [nosniff]
    status: {code: 200, message: OK}
version: 1
