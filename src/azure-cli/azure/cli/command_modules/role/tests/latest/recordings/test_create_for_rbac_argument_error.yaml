interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --display-name
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: GET
    uri: https://graph.microsoft.com/v1.0/servicePrincipals?$filter=displayName%20eq%20'azure-cli-test-000001'
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '92'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:30:56 GMT
      odata-version:
      - '4.0'
      request-id:
      - ba4f7ef5-33ec-42d8-a29e-e434d2f66c50
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A4A"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --display-name
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=startswith(displayName,'azure-cli-test-000001')
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:30:58 GMT
      odata-version:
      - '4.0'
      request-id:
      - 2b77f4f0-6bba-4227-9255-45b82f21ad98
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00005D69"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: '{"displayName": "azure-cli-test-000001", "keyCredentials": []}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '62'
      Content-Type:
      - application/json
      ParameterSetName:
      - --display-name
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: POST
    uri: https://graph.microsoft.com/v1.0/applications
  response:
    body:
      string: '{"@odata.context": "https://graph.microsoft.com/v1.0/$metadata#applications/$entity",
        "id": "b3bafb60-a2e5-4f39-817e-3f6ce34e2d79", "deletedDateTime": null, "appId":
        "3afeabe0-d84f-447e-a4bd-eff9da38629e", "applicationTemplateId": null, "disabledByMicrosoftStatus":
        null, "createdDateTime": "2022-05-10T03:31:01.3747614Z", "displayName": "azure-cli-test-000001",
        "description": null, "groupMembershipClaims": null, "identifierUris": [],
        "isDeviceOnlyAuthSupported": null, "isFallbackPublicClient": null, "notes":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "serviceManagementReference":
        null, "signInAudience": "AzureADandPersonalMicrosoftAccount", "tags": [],
        "tokenEncryptionKeyId": null, "defaultRedirectUri": null, "certification":
        null, "optionalClaims": null, "addIns": [], "api": {"acceptMappedClaims":
        null, "knownClientApplications": [], "requestedAccessTokenVersion": 2, "oauth2PermissionScopes":
        [], "preAuthorizedApplications": []}, "appRoles": [], "info": {"logoUrl":
        null, "marketingUrl": null, "privacyStatementUrl": null, "supportUrl": null,
        "termsOfServiceUrl": null}, "keyCredentials": [], "parentalControlSettings":
        {"countriesBlockedForMinors": [], "legalAgeGroupRule": "Allow"}, "passwordCredentials":
        [], "publicClient": {"redirectUris": []}, "requiredResourceAccess": [], "verifiedPublisher":
        {"displayName": null, "verifiedPublisherId": null, "addedDateTime": null},
        "web": {"homePageUrl": null, "logoutUrl": null, "redirectUris": [], "implicitGrantSettings":
        {"enableAccessTokenIssuance": false, "enableIdTokenIssuance": false}}, "spa":
        {"redirectUris": []}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1596'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:03 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/b3bafb60-a2e5-4f39-817e-3f6ce34e2d79/Microsoft.DirectoryServices.Application
      odata-version:
      - '4.0'
      request-id:
      - 2705782c-b5c0-4be7-9167-30078433f5cc
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A46"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: '{"passwordCredential": {"startDateTime": "2022-05-10T03:30:57Z", "endDateTime":
      "2023-05-10T03:30:57Z", "displayName": "rbac"}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '127'
      Content-Type:
      - application/json
      ParameterSetName:
      - --display-name
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: POST
    uri: https://graph.microsoft.com/v1.0/applications/b3bafb60-a2e5-4f39-817e-3f6ce34e2d79/addPassword
  response:
    body:
      string: '{"@odata.context": "https://graph.microsoft.com/v1.0/$metadata#microsoft.graph.passwordCredential",
        "customKeyIdentifier": null, "displayName": "rbac", "endDateTime": "2023-05-10T03:30:57Z",
        "hint": "YqC", "keyId": "45b18c04-b442-4f94-acaa-ca097fcea422", "secretText":
        "replaced-microsoft-graph-password", "startDateTime": "2022-05-10T03:30:57Z"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '346'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:04 GMT
      location:
      - https://graph.microsoft.com
      odata-version:
      - '4.0'
      request-id:
      - aaea8bf2-9039-41e6-a45b-b23e48cea31d
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A46"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: '{"appId": "3afeabe0-d84f-447e-a4bd-eff9da38629e", "accountEnabled": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '73'
      Content-Type:
      - application/json
      ParameterSetName:
      - --display-name
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: POST
    uri: https://graph.microsoft.com/v1.0/servicePrincipals
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#servicePrincipals/$entity","id":"1b9b4611-43f7-4dbc-8d94-ed253ee4538f","deletedDateTime":null,"accountEnabled":true,"alternativeNames":[],"appDisplayName":"azure-cli-test-000001","appDescription":null,"appId":"3afeabe0-d84f-447e-a4bd-eff9da38629e","applicationTemplateId":null,"appOwnerOrganizationId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"createdDateTime":"2022-05-10T03:31:04Z","description":null,"disabledByMicrosoftStatus":null,"displayName":"azure-cli-test-000001","homepage":null,"loginUrl":null,"logoutUrl":null,"notes":null,"notificationEmailAddresses":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyThumbprint":null,"replyUrls":[],"servicePrincipalNames":["3afeabe0-d84f-447e-a4bd-eff9da38629e"],"servicePrincipalType":"Application","signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"samlSingleSignOnSettings":null,"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"addIns":[],"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"oauth2PermissionScopes":[],"passwordCredentials":[],"resourceSpecificApplicationPermissions":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1324'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:04 GMT
      location:
      - https://graph.microsoft.com/v2/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a/directoryObjects/1b9b4611-43f7-4dbc-8d94-ed253ee4538f/Microsoft.DirectoryServices.ServicePrincipal
      odata-version:
      - '4.0'
      request-id:
      - 1ed0f955-58cc-4461-bd4d-7f6e457e1075
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00008135"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20'3afeabe0-d84f-447e-a4bd-eff9da38629e'
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"b3bafb60-a2e5-4f39-817e-3f6ce34e2d79","deletedDateTime":null,"appId":"3afeabe0-d84f-447e-a4bd-eff9da38629e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2022-05-10T03:31:01Z","displayName":"azure-cli-test-000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":null,"displayName":"rbac","endDateTime":"2023-05-10T03:30:57Z","hint":"YqC","keyId":"45b18c04-b442-4f94-acaa-ca097fcea422","secretText":null,"startDateTime":"2022-05-10T03:30:57Z"}],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false}},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1690'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:05 GMT
      odata-version:
      - '4.0'
      request-id:
      - 5127f16b-71e8-4b6b-a2bd-90ba5ed9ab8a
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00001A46"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app show
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications/b3bafb60-a2e5-4f39-817e-3f6ce34e2d79
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications/$entity","id":"b3bafb60-a2e5-4f39-817e-3f6ce34e2d79","deletedDateTime":null,"appId":"3afeabe0-d84f-447e-a4bd-eff9da38629e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2022-05-10T03:31:01Z","displayName":"azure-cli-test-000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":null,"displayName":"rbac","endDateTime":"2023-05-10T03:30:57Z","hint":"YqC","keyId":"45b18c04-b442-4f94-acaa-ca097fcea422","secretText":null,"startDateTime":"2022-05-10T03:30:57Z"}],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false}},"spa":{"redirectUris":[]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1686'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:05 GMT
      odata-version:
      - '4.0'
      request-id:
      - 8ae43f39-7b00-4cc6-b40c-c06a8dbb1e30
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF000081EB"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: GET
    uri: https://graph.microsoft.com/v1.0/applications?$filter=appId%20eq%20'3afeabe0-d84f-447e-a4bd-eff9da38629e'
  response:
    body:
      string: '{"@odata.context":"https://graph.microsoft.com/v1.0/$metadata#applications","value":[{"id":"b3bafb60-a2e5-4f39-817e-3f6ce34e2d79","deletedDateTime":null,"appId":"3afeabe0-d84f-447e-a4bd-eff9da38629e","applicationTemplateId":null,"disabledByMicrosoftStatus":null,"createdDateTime":"2022-05-10T03:31:01Z","displayName":"azure-cli-test-000001","description":null,"groupMembershipClaims":null,"identifierUris":[],"isDeviceOnlyAuthSupported":null,"isFallbackPublicClient":null,"notes":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","serviceManagementReference":null,"signInAudience":"AzureADandPersonalMicrosoftAccount","tags":[],"tokenEncryptionKeyId":null,"defaultRedirectUri":null,"certification":null,"optionalClaims":null,"addIns":[],"api":{"acceptMappedClaims":null,"knownClientApplications":[],"requestedAccessTokenVersion":2,"oauth2PermissionScopes":[],"preAuthorizedApplications":[]},"appRoles":[],"info":{"logoUrl":null,"marketingUrl":null,"privacyStatementUrl":null,"supportUrl":null,"termsOfServiceUrl":null},"keyCredentials":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[{"customKeyIdentifier":null,"displayName":"rbac","endDateTime":"2023-05-10T03:30:57Z","hint":"YqC","keyId":"45b18c04-b442-4f94-acaa-ca097fcea422","secretText":null,"startDateTime":"2022-05-10T03:30:57Z"}],"publicClient":{"redirectUris":[]},"requiredResourceAccess":[],"verifiedPublisher":{"displayName":null,"verifiedPublisherId":null,"addedDateTime":null},"web":{"homePageUrl":null,"logoutUrl":null,"redirectUris":[],"implicitGrantSettings":{"enableAccessTokenIssuance":false,"enableIdTokenIssuance":false}},"spa":{"redirectUris":[]}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1690'
      content-type:
      - application/json;odata.metadata=minimal;odata.streaming=true;IEEE754Compatible=false;charset=utf-8
      date:
      - Tue, 10 May 2022 03:31:05 GMT
      odata-version:
      - '4.0'
      request-id:
      - 5c79bbe9-8fa3-4850-aed8-80d884b684d4
      strict-transport-security:
      - max-age=31536000
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00008220"}}'
      x-ms-resource-unit:
      - '2'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/applications/b3bafb60-a2e5-4f39-817e-3f6ce34e2d79
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Tue, 10 May 2022 03:31:07 GMT
      request-id:
      - 1ecd92cd-44f3-4f1c-bb80-c7243999670d
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00005D6A"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - rest
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --method --url
      User-Agent:
      - python/3.10.4 (Windows-10-10.0.19044-SP0) AZURECLI/2.36.0
    method: DELETE
    uri: https://graph.microsoft.com/v1.0/directory/deletedItems/b3bafb60-a2e5-4f39-817e-3f6ce34e2d79
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      date:
      - Tue, 10 May 2022 03:31:07 GMT
      request-id:
      - fba4525e-3f76-42a9-84f3-b220e74844bf
      strict-transport-security:
      - max-age=31536000
      x-ms-ags-diagnostic:
      - '{"ServerInfo":{"DataCenter":"Southeast Asia","Slice":"E","Ring":"5","ScaleUnit":"000","RoleInstance":"SI1PEPF00007865"}}'
      x-ms-resource-unit:
      - '1'
    status:
      code: 204
      message: No Content
version: 1
