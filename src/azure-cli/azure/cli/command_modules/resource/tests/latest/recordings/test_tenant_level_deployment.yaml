interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"name": "cli_tenant_level_deployment_mg", "properties": {"details": {"parent":
      {}}}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group create
      Connection:
      - keep-alive
      Content-Length:
      - '85'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --name
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-managementgroups/0.2.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg","type":"/providers/Microsoft.Management/managementGroups","name":"cli_tenant_level_deployment_mg","properties":{"tenantId":"dbe499da-a935-4b9f-b4e2-5377e76aaeef","displayName":"cli_tenant_level_deployment_mg","details":{"version":3,"updatedTime":"2019-12-11T21:57:47.310733Z","updatedBy":"01b8db7b-fc40-494b-8b19-20127488a03d","parent":{"id":"/providers/Microsoft.Management/managementGroups/dbe499da-a935-4b9f-b4e2-5377e76aaeef","name":"dbe499da-a935-4b9f-b4e2-5377e76aaeef","displayName":"Tenant
        Root Group"}}}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '601'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - b18d5ffb-a456-4858-a3a6-c2d26f908860
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-ba-restapi:
      - 1.0.3.1544
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "WestUS", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"targetMG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment_mg"}, "nestedSubId": {"type": "string", "defaultValue":
      "89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"}, "nestedRG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment"}, "roleDefinitionId": {"type": "string", "defaultValue":
      "0cb07228-4614-4814-ac1a-c4e39793ce59"}}, "variables": {"managementGroupScope":
      "[concat(''Microsoft.Management/managementGroups/'', parameters(''targetMG''))]",
      "managementGroupFullyQualifiedId": "[concat(''/providers/'', variables(''managementGroupScope''))]"},
      "resources": [{"type": "Microsoft.Authorization/roleDefinitions", "name": "[parameters(''roleDefinitionId'')]",
      "apiVersion": "2018-07-01", "properties": {"roleName": "Tiano SDK Test Role",
      "description": "something", "type": "CustomRole", "permissions": [{"actions":
      ["Microsoft.Storage/*/read"], "notActions": []}], "assignableScopes": ["[variables(''managementGroupFullyQualifiedId'')]"]}},
      {"type": "Microsoft.Resources/deployments", "name": "mg-nested", "apiVersion":
      "2019-07-01", "location": "West US", "scope": "[variables(''managementGroupScope'')]",
      "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Authorization/policyDefinitions", "name": "policy2", "apiVersion":
      "2016-12-01", "properties": {"policyType": "Custom", "parameters": {}, "policyRule":
      {"if": {"field": "location", "equals": "northeurope"}, "then": {"effect": "deny"}}}}]},
      "mode": "Incremental"}}, {"type": "Microsoft.Resources/deployments", "name":
      "sub-nested", "apiVersion": "2019-07-01", "location": "East US", "subscriptionId":
      "[parameters(''nestedSubId'')]", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Resources/resourceGroups", "name": "[parameters(''nestedRG'')]",
      "apiVersion": "2019-07-01", "location": "East US 2", "properties": {}}]}, "mode":
      "Incremental"}}]}, "parameters": {}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant validate
      Connection:
      - keep-alive
      Content-Length:
      - '2382'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Resources/deployments/tenant_level_template","name":"tenant_level_template","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-14T02:42:18.9491088Z","duration":"PT0S","correlationId":"75d1412e-d166-4902-a96e-e1d4ed4c7a68","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"validatedResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Resources/deployments/mg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sub-nested"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1590'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "WestUS", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"targetMG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment_mg"}, "nestedSubId": {"type": "string", "defaultValue":
      "89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"}, "nestedRG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment"}, "roleDefinitionId": {"type": "string", "defaultValue":
      "0cb07228-4614-4814-ac1a-c4e39793ce59"}}, "variables": {"managementGroupScope":
      "[concat(''Microsoft.Management/managementGroups/'', parameters(''targetMG''))]",
      "managementGroupFullyQualifiedId": "[concat(''/providers/'', variables(''managementGroupScope''))]"},
      "resources": [{"type": "Microsoft.Authorization/roleDefinitions", "name": "[parameters(''roleDefinitionId'')]",
      "apiVersion": "2018-07-01", "properties": {"roleName": "Tiano SDK Test Role",
      "description": "something", "type": "CustomRole", "permissions": [{"actions":
      ["Microsoft.Storage/*/read"], "notActions": []}], "assignableScopes": ["[variables(''managementGroupFullyQualifiedId'')]"]}},
      {"type": "Microsoft.Resources/deployments", "name": "mg-nested", "apiVersion":
      "2019-07-01", "location": "West US", "scope": "[variables(''managementGroupScope'')]",
      "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Authorization/policyDefinitions", "name": "policy2", "apiVersion":
      "2016-12-01", "properties": {"policyType": "Custom", "parameters": {}, "policyRule":
      {"if": {"field": "location", "equals": "northeurope"}, "then": {"effect": "deny"}}}}]},
      "mode": "Incremental"}}, {"type": "Microsoft.Resources/deployments", "name":
      "sub-nested", "apiVersion": "2019-07-01", "location": "East US", "subscriptionId":
      "[parameters(''nestedSubId'')]", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Resources/resourceGroups", "name": "[parameters(''nestedRG'')]",
      "apiVersion": "2019-07-01", "location": "East US 2", "properties": {}}]}, "mode":
      "Incremental"}}]}, "parameters": {}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant create
      Connection:
      - keep-alive
      Content-Length:
      - '2382'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location -n --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001","name":"azure-cli-tenant-level-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-14T02:42:20.3748271Z","duration":"PT0S","correlationId":"989b79e2-14b6-4db2-a54c-b64691f3aeaf","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"validatedResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Resources/deployments/mg-nested"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sub-nested"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1668'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"location": "WestUS", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {"targetMG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment_mg"}, "nestedSubId": {"type": "string", "defaultValue":
      "89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"}, "nestedRG": {"type": "string", "defaultValue":
      "cli_tenant_level_deployment"}, "roleDefinitionId": {"type": "string", "defaultValue":
      "0cb07228-4614-4814-ac1a-c4e39793ce59"}}, "variables": {"managementGroupScope":
      "[concat(''Microsoft.Management/managementGroups/'', parameters(''targetMG''))]",
      "managementGroupFullyQualifiedId": "[concat(''/providers/'', variables(''managementGroupScope''))]"},
      "resources": [{"type": "Microsoft.Authorization/roleDefinitions", "name": "[parameters(''roleDefinitionId'')]",
      "apiVersion": "2018-07-01", "properties": {"roleName": "Tiano SDK Test Role",
      "description": "something", "type": "CustomRole", "permissions": [{"actions":
      ["Microsoft.Storage/*/read"], "notActions": []}], "assignableScopes": ["[variables(''managementGroupFullyQualifiedId'')]"]}},
      {"type": "Microsoft.Resources/deployments", "name": "mg-nested", "apiVersion":
      "2019-07-01", "location": "West US", "scope": "[variables(''managementGroupScope'')]",
      "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Authorization/policyDefinitions", "name": "policy2", "apiVersion":
      "2016-12-01", "properties": {"policyType": "Custom", "parameters": {}, "policyRule":
      {"if": {"field": "location", "equals": "northeurope"}, "then": {"effect": "deny"}}}}]},
      "mode": "Incremental"}}, {"type": "Microsoft.Resources/deployments", "name":
      "sub-nested", "apiVersion": "2019-07-01", "location": "East US", "subscriptionId":
      "[parameters(''nestedSubId'')]", "properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"type": "Microsoft.Resources/resourceGroups", "name": "[parameters(''nestedRG'')]",
      "apiVersion": "2019-07-01", "location": "East US 2", "properties": {}}]}, "mode":
      "Incremental"}}]}, "parameters": {}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant create
      Connection:
      - keep-alive
      Content-Length:
      - '2382'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --location -n --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001","name":"azure-cli-tenant-level-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2019-12-14T02:42:21.1967703Z","duration":"PT0.1128127S","correlationId":"ded367e9-be38-4491-83db-41ca53e4c793","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001/operationStatuses/08586253155443936590?api-version=2019-07-01
      cache-control:
      - no-cache
      content-length:
      - '1047'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location -n --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08586253155443936590?api-version=2019-07-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:42:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location -n --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08586253155443936590?api-version=2019-07-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant create
      Connection:
      - keep-alive
      ParameterSetName:
      - --location -n --template-file
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001","name":"azure-cli-tenant-level-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-14T02:43:03.9832348Z","duration":"PT42.8992772S","correlationId":"ded367e9-be38-4491-83db-41ca53e4c793","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1419'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant list
      Connection:
      - keep-alive
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/?api-version=2019-07-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001","name":"azure-cli-tenant-level-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-14T02:43:03.9832348Z","duration":"PT42.8992772S","correlationId":"ded367e9-be38-4491-83db-41ca53e4c793","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}},{"id":"/providers/Microsoft.Resources/deployments/createmg","name":"createmg","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"854936505256763489","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-12-11T23:58:15.7048414Z","duration":"PT2H31.6536696S","correlationId":"b9bd6bbb-4ea0-4777-8973-0b6dbb7c154c","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/DeployOperations for usage details.","details":[{"code":"RequestTimeout","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"ResourceDeploymentFailure\",\r\n    \"message\": \"The
        resource provision operation did not complete within the allowed timeout period.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deploymenty6fesc7pjjz4vnvmpqranokstix","name":"azure-cli-tenant-level-deploymenty6fesc7pjjz4vnvmpqranokstix","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-06T01:24:50.8985372Z","duration":"PT1M42.5853689S","correlationId":"d27589f5-3a89-473a-a90b-2c5c1ba2b172","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deploymentyfjj5fnu5moupopqqnutomqh2gb","name":"azure-cli-tenant-level-deploymentyfjj5fnu5moupopqqnutomqh2gb","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-10-05T04:55:26.8258434Z","duration":"PT43.040341S","correlationId":"117371e2-be83-45d9-a150-f8157afc0c1f","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deploymentvfaqutq6gx2lrljksqoxivqpqaf","name":"azure-cli-tenant-level-deploymentvfaqutq6gx2lrljksqoxivqpqaf","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-10-05T04:50:33.3854271Z","duration":"PT26.4525933S","correlationId":"20452d61-aa74-48a2-8dbb-5ab6a3a8f6cb","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"NotFound","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"ManagementGroupNotFound\",\r\n    \"message\": \"The
        management group ''cli_tenant_level_deployment_mg'' cannot be found.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deploymentf5ntviucyrnsvqwjk2aqm2erzxh","name":"azure-cli-tenant-level-deploymentf5ntviucyrnsvqwjk2aqm2erzxh","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-10-04T04:31:52.2808875Z","duration":"PT41.8973347S","correlationId":"013079e6-5e39-4e0d-a572-d576a758f672","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deploymentecnbsnqsjfkreugushdiiunsioa","name":"azure-cli-tenant-level-deploymentecnbsnqsjfkreugushdiiunsioa","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-10-04T04:30:11.2346639Z","duration":"PT51.8670508S","correlationId":"fa36c8a8-6747-46dc-ac1f-0a11d22e397c","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}},{"id":"/providers/Microsoft.Resources/deployments/tenant_level_template","name":"tenant_level_template","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"tiano-mgtest01"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"sdk-testrg"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-10-03T21:15:49.890333Z","duration":"PT36.6627604S","correlationId":"379655fa-e4ba-404b-bc33-336ab943c29b","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/tiano-mgtest01/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sdk-testrg"}]}},{"id":"/providers/Microsoft.Resources/deployments/d01","name":"d01","type":"Microsoft.Resources/deployments","location":"westus","properties":{"parameters":{"targetMG":{"type":"String","value":"tiano-mgtest11"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"sdk-testrg"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-09-06T04:40:28.6219863Z","duration":"PT1.0565286S","correlationId":"91197bac-0d48-4ff1-98af-838af8d8b9e6","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Management/managementGroups/tiano-mgtest11"}]}},{"id":"/providers/Microsoft.Resources/deployments/az-test01","name":"az-test01","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"12707336783073826175","parameters":{"managementGroupId":{"type":"String","value":"tiano-mgtest01"},"subscriptionId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-08-23T06:29:22.2672627Z","duration":"PT17.1415342S","correlationId":"8eba8935-1492-4680-95ce-81acc303f746","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/tiano-mgtest01/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sdk-testrg"}]}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest9982","name":"csharpsdktest9982","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"12707336783073826175","parameters":{"managementGroupId":{"type":"String","value":"tiano-mgtest01"},"subscriptionId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-08-06T22:05:33.616361Z","duration":"PT26.5660097S","correlationId":"5cc0e033-a68d-4646-a6de-b000bcd12808","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/tiano-mgtest01/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sdk-testrg"}]}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest7794","name":"csharpsdktest7794","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"18016019155392159897","parameters":{"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-08-06T20:51:52.7818689Z","duration":"PT6.9584114S","correlationId":"1fafe039-fc93-44a1-be39-96e5a94e8dbc","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"}]}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest1286","name":"csharpsdktest1286","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"3526366353915477301","parameters":{"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T20:50:18.0709637Z","duration":"PT3.4669637S","correlationId":"aa8a1b12-360a-409f-9d22-29192c7ac560","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"roleDefinitions","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest3789","name":"csharpsdktest3789","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"4863281370113986671","parameters":{"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T20:48:58.1399228Z","duration":"PT9.6506969S","correlationId":"76ed6e47-9fa9-4d1b-b093-8fcd15e8a6e5","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"roleDefinitions","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"NotFound","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidResourceType\",\r\n    \"message\": \"The resource
        type ''roleDefinitions'' could not be found in the namespace ''Microsoft.Authorization''
        for api version ''20168-07-01''. The supported api-versions are ''2014-04-01-preview,2014-07-01-preview,2014-10-01-preview,2015-05-01-preview,2015-06-01,2015-07-01,2016-07-01,2017-05-01,2017-09-01,2018-01-01-preview,2018-07-01''.\"\r\n  }\r\n}"},{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest3447","name":"csharpsdktest3447","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"8688724383976892767","parameters":{"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T20:46:29.3174229Z","duration":"PT5.9535099S","correlationId":"4e2aaeaa-54c5-401a-905b-5d13b2bb9f65","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"roleDefinitions","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"NotFound","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidResourceType\",\r\n    \"message\": \"The resource
        type ''roleDefinitions'' could not be found in the namespace ''Microsoft.Authorization''
        for api version ''2016-12-01''. The supported api-versions are ''2014-04-01-preview,2014-07-01-preview,2014-10-01-preview,2015-05-01-preview,2015-06-01,2015-07-01,2016-07-01,2017-05-01,2017-09-01,2018-01-01-preview,2018-07-01''.\"\r\n  }\r\n}"},{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest2128","name":"csharpsdktest2128","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"2930845133678626434","parameters":{"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T20:44:00.6582452Z","duration":"PT6.5233037S","correlationId":"dc11adcf-1c6c-4066-a185-4da5dc0bf43e","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]},{"resourceType":"roleDefinitions","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"},{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"LinkedInvalidPropertyId\",\r\n    \"message\": \"Property
        id ''/'' at path ''properties.assignableScopes[0]'' is invalid. Expect fully
        qualified resource Id that start with ''/subscriptions/{subscriptionId}''
        or ''/providers/{resourceProviderNamespace}/''.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest4395","name":"csharpsdktest4395","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"8041098979082177521","parameters":{"tenantId":{"type":"String","value":"dbe499da-a935-4b9f-b4e2-5377e76aaeef"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T20:36:17.5307142Z","duration":"PT6.8230047S","correlationId":"ff28cc33-6514-4fac-99fe-a33b10d63408","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest3474","name":"csharpsdktest3474","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"16902665493283057724","parameters":{"tenantId":{"type":"String","value":"dbe499da-a935-4b9f-b4e2-5377e76aaeef"},"managementGroupId":{"type":"String","value":"tianomgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T19:21:39.1598982Z","duration":"PT1.9165911S","correlationId":"06504610-e015-4a61-88d1-2801246c8d93","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest1471","name":"csharpsdktest1471","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"16902665493283057724","parameters":{"tenantId":{"type":"String","value":"dbe499da-a935-4b9f-b4e2-5377e76aaeef"},"managementGroupId":{"type":"String","value":"tiano-mgtest03"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T19:20:39.6831835Z","duration":"PT1.3999497S","correlationId":"e4d6de10-0dd3-4561-83b3-8e8cfb24bf8a","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest8328","name":"csharpsdktest8328","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"3540415030231822582","parameters":{"tenantId":{"type":"String","value":"dbe499da-a935-4b9f-b4e2-5377e76aaeef"},"managementGroupId":{"type":"String","value":"tiano-mgtest02"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-06T19:06:35.7874235Z","duration":"PT1.4780137S","correlationId":"cd2d33e7-6146-4036-b502-d36a576271ea","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest6779","name":"csharpsdktest6779","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"11111572368475017808","parameters":{"managementGroupId":{"type":"String","value":"tiano-mgtest02"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-03T01:01:12.6565512Z","duration":"PT5.6011996S","correlationId":"bd4d26f2-9d69-41a3-99ae-ab4e48193d7b","providers":[{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest908","name":"csharpsdktest908","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"16069035683376853134","parameters":{"managementGroupId":{"type":"String","value":"tiano-mgtest02"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-03T00:54:36.7413406Z","duration":"PT6.2524402S","correlationId":"54d8d31f-2e43-4434-94f2-87d82de6e1d0","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]}]},{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidPolicyUri\",\r\n    \"message\": \"The policy
        scope ''/'' should start with ''subscriptions'' or ''/providers/Microsoft.Management/managementGroups/''.\"\r\n  }\r\n}"},{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/csharpsdktest1118","name":"csharpsdktest1118","type":"Microsoft.Resources/deployments","location":"eastus2euap","properties":{"templateHash":"16069035683376853134","parameters":{"managementGroupId":{"type":"String","value":"tiano-mgtest02"},"storageAccountName":{"type":"String","value":"tianosatestgl"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-08-03T00:46:30.3816316Z","duration":"PT7.4670812S","correlationId":"d233d3a2-4b5c-41c4-9130-fd71a34cc960","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"policyDefinitions","locations":[null]}]},{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]}],"dependencies":[],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"BadRequest\",\r\n    \"message\": \"Name of the group
        doesn''t match the group id.\",\r\n    \"details\": null\r\n  }\r\n}"},{"code":"Forbidden","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"AuthorizationFailed\",\r\n    \"message\": \"The client
        ''01b8db7b-fc40-494b-8b19-20127488a03d'' with object id ''01b8db7b-fc40-494b-8b19-20127488a03d''
        does not have authorization to perform action ''Microsoft.Authorization/policyDefinitions/write''
        over scope ''/providers/Microsoft.Authorization/policyDefinitions/policy2''
        or the scope is invalid. If access was recently granted, please refresh your
        credentials.\"\r\n  }\r\n}"}]}}},{"id":"/providers/Microsoft.Resources/deployments/ps6830","name":"ps6830","type":"Microsoft.Resources/deployments","location":"eastus","properties":{"parameters":{"targetMG":{"type":"String","value":"ps3566"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"sdk-testrg"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Failed","timestamp":"2019-09-06T01:42:47.2445451Z","duration":"PT21.3948065S","correlationId":"7af5430a-f5c0-4823-bbe0-57bb83393ac2","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Management","resourceTypes":[{"resourceType":"managementGroups","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/ps3566","resourceType":"Microsoft.Management/managementGroups","resourceName":"ps3566"}],"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59","resourceType":"Microsoft.Authorization/roleDefinitions","resourceName":"0cb07228-4614-4814-ac1a-c4e39793ce59"},{"dependsOn":[{"id":"/providers/Microsoft.Management/managementGroups/ps3566","resourceType":"Microsoft.Management/managementGroups","resourceName":"ps3566"}],"id":"/providers/Microsoft.Management/managementGroups/ps3566/providers/Microsoft.Resources/deployments/mg-nested","resourceType":"Microsoft.Resources/deployments","resourceName":"mg-nested"}],"error":{"code":"DeploymentFailed","message":"At
        least one resource deployment operation failed. Please list deployment operations
        for details. Please see https://aka.ms/arm-debug for usage details.","details":[{"code":"InternalServerError","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"ResourceDeploymentFailure\",\r\n    \"message\": \"The
        response for resource had empty or invalid content.\"\r\n  }\r\n}"},{"code":"BadRequest","message":"{\r\n  \"error\":
        {\r\n    \"code\": \"InvalidTemplate\",\r\n    \"message\": \"Unable to process
        template language expressions for resource ''/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sub-nested''
        at line ''99'' and column ''9''. ''The template parameter ''targetRG'' is
        not found. Please see https://aka.ms/arm-template/#parameters for usage details.''\",\r\n    \"additionalInfo\":
        [\r\n      {\r\n        \"type\": \"TemplateViolation\",\r\n        \"info\":
        {\r\n          \"lineNumber\": 99,\r\n          \"positionNumber\": 9,\r\n          \"snippet\":
        \"\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}"}]}}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '33067'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant show
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001","name":"azure-cli-tenant-level-deployment000001","type":"Microsoft.Resources/deployments","location":"westus","properties":{"templateHash":"8717015168160235972","parameters":{"targetMG":{"type":"String","value":"cli_tenant_level_deployment_mg"},"nestedSubId":{"type":"String","value":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505"},"nestedRG":{"type":"String","value":"cli_tenant_level_deployment"},"roleDefinitionId":{"type":"String","value":"0cb07228-4614-4814-ac1a-c4e39793ce59"}},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2019-12-14T02:43:03.9832348Z","duration":"PT42.8992772S","correlationId":"ded367e9-be38-4491-83db-41ca53e4c793","providers":[{"namespace":"Microsoft.Authorization","resourceTypes":[{"resourceType":"roleDefinitions","locations":[null]}]},{"namespace":"Microsoft.Resources","resourceTypes":[{"resourceType":"deployments","locations":["westus","eastus"]}]}],"dependencies":[],"outputResources":[{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59"},{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Authorization/policyDefinitions/policy2"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_tenant_level_deployment"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1419'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment tenant export
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/exportTemplate?api-version=2019-07-01
  response:
    body:
      string: '{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"targetMG":{"defaultValue":"cli_tenant_level_deployment_mg","type":"String"},"nestedSubId":{"defaultValue":"89ec4d1d-dcc7-4a3f-a701-0a5d074c8505","type":"String"},"nestedRG":{"defaultValue":"cli_tenant_level_deployment","type":"String"},"roleDefinitionId":{"defaultValue":"0cb07228-4614-4814-ac1a-c4e39793ce59","type":"String"}},"variables":{"managementGroupScope":"[concat(''Microsoft.Management/managementGroups/'',
        parameters(''targetMG''))]","managementGroupFullyQualifiedId":"[concat(''/providers/'',
        variables(''managementGroupScope''))]"},"resources":[{"type":"Microsoft.Authorization/roleDefinitions","apiVersion":"2018-07-01","name":"[parameters(''roleDefinitionId'')]","properties":{"roleName":"Tiano
        SDK Test Role","description":"something","type":"CustomRole","permissions":[{"actions":["Microsoft.Storage/*/read"],"notActions":[]}],"assignableScopes":["[variables(''managementGroupFullyQualifiedId'')]"]}},{"type":"Microsoft.Resources/deployments","apiVersion":"2019-07-01","name":"mg-nested","location":"West
        US","properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Authorization/policyDefinitions","name":"policy2","apiVersion":"2016-12-01","properties":{"policyType":"Custom","parameters":{},"policyRule":{"if":{"field":"location","equals":"northeurope"},"then":{"effect":"deny"}}}}]},"mode":"Incremental"},"scope":"[variables(''managementGroupScope'')]"},{"type":"Microsoft.Resources/deployments","apiVersion":"2019-07-01","name":"sub-nested","location":"East
        US","properties":{"template":{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{},"variables":{},"resources":[{"type":"Microsoft.Resources/resourceGroups","name":"[parameters(''nestedRG'')]","apiVersion":"2019-07-01","location":"East
        US 2","properties":{}}]},"mode":"Incremental"},"subscriptionId":"[parameters(''nestedSubId'')]"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2176'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - deployment operation tenant list
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Resources/deployments/mock-deployment/operations?api-version=2019-07-01
  response:
    body:
      string: '{"value":[{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001/operations/591DE40DACECA9F1","operationId":"591DE40DACECA9F1","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2019-12-14T02:42:47.3828202Z","duration":"PT25.6412318S","trackingId":"6df9b25f-f367-4ba2-b3f3-24487410d5e8","serviceRequestId":"f880f5bf-175e-461d-898f-5650d5338e22","statusCode":"OK","targetResource":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Resources/deployments/sub-nested","resourceType":"Microsoft.Resources/deployments","resourceName":"sub-nested"}}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001/operations/1861FE2FF8A6CC60","operationId":"1861FE2FF8A6CC60","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2019-12-14T02:42:22.488603Z","duration":"PT0.7470146S","trackingId":"1c5854b6-8b74-4a70-a921-f9c78566a62e","serviceRequestId":"68e7997e-f94a-409b-9971-b1671c868143","statusCode":"Created","targetResource":{"id":"/providers/Microsoft.Authorization/roleDefinitions/0cb07228-4614-4814-ac1a-c4e39793ce59","resourceType":"Microsoft.Authorization/roleDefinitions","resourceName":"0cb07228-4614-4814-ac1a-c4e39793ce59"}}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001/operations/A91DFDC3820D4AF3","operationId":"A91DFDC3820D4AF3","properties":{"provisioningOperation":"Create","provisioningState":"Succeeded","timestamp":"2019-12-14T02:42:24.7309438Z","duration":"PT2.9893554S","trackingId":"1ddf0f7d-332c-4368-870a-566c24d6086d","serviceRequestId":"ab051ef7-5f53-461b-9cf4-0cfdb759ecfc","statusCode":"OK","targetResource":{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg/providers/Microsoft.Resources/deployments/mg-nested","resourceType":"Microsoft.Resources/deployments","resourceName":"mg-nested"}}},{"id":"/providers/Microsoft.Resources/deployments/azure-cli-tenant-level-deployment000001/operations/08586253155443936590","operationId":"08586253155443936590","properties":{"provisioningOperation":"EvaluateDeploymentOutput","provisioningState":"Succeeded","timestamp":"2019-12-14T02:43:00.4975927Z","duration":"PT0.6996938S","trackingId":"a3e5e722-d196-47b8-9b33-8507221d7c36","statusCode":"OK","statusMessage":null}}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2476'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:43:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n --yes
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_tenant_level_deployment?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Sat, 14 Dec 2019 02:43:28 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --yes
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Sat, 14 Dec 2019 02:43:44 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --yes
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Sat, 14 Dec 2019 02:43:59 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --yes
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTEk6NUZURU5BTlQ6NUZMRVZFTDo1RkRFUExPWU1FTlQtRUFTVFVTMiIsImpvYkxvY2F0aW9uIjoiZWFzdHVzMiJ9?api-version=2019-07-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Sat, 14 Dec 2019 02:44:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management/register?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:44:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-resource/6.0.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management?api-version=2019-07-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Management","namespace":"Microsoft.Management","authorization":{"applicationId":"f2c304cf-8e7e-4c3f-8164-16299ad9d272","roleDefinitionId":"c1cf3708-588a-4647-be7f-f400bbe214cf"},"resourceTypes":[{"resourceType":"resources","locations":[],"apiVersions":["2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"managementGroups","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"getEntities","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"checkNameAvailability","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview"],"capabilities":"None"},{"resourceType":"operationResults/asyncOperation","locations":[],"apiVersions":["2019-11-01","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"operations","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta","2018-01-01-preview","2017-11-01-preview","2017-08-31-preview","2017-06-30-preview","2017-05-31-preview"],"capabilities":"None"},{"resourceType":"tenantBackfillStatus","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"},{"resourceType":"startTenantBackfill","locations":[],"apiVersions":["2019-11-01","2018-03-01-preview","2018-03-01-beta"],"capabilities":"None"}],"registrationState":"Registered","registrationPolicy":"RegistrationRequired"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1914'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:44:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Cache-Control:
      - no-cache
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-managementgroups/0.2.0 Azure-SDK-For-Python AZURECLI/2.0.77
      accept-language:
      - en-US
    method: DELETE
    uri: https://management.azure.com/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg","type":"/providers/Microsoft.Management/managementGroups","name":"cli_tenant_level_deployment_mg","status":"NotStarted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '208'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:44:30 GMT
      expires:
      - '-1'
      location:
      - https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/cli_tenant_level_deployment_mg?api-version=2018-03-01-preview
      pragma:
      - no-cache
      request-id:
      - 0f766f72-66f2-47e8-9a84-d73cc9abc03e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-ba-restapi:
      - 1.0.3.1544
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-tenant-deletes:
      - '14999'
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - account management-group delete
      Connection:
      - keep-alive
      ParameterSetName:
      - -n
      User-Agent:
      - python/3.6.5 (Windows-10-10.0.17134-SP0) msrest/0.6.10 msrest_azure/0.6.2
        azure-mgmt-managementgroups/0.2.0 Azure-SDK-For-Python AZURECLI/2.0.77
    method: GET
    uri: https://management.azure.com/providers/Microsoft.Management/operationResults/delete/managementGroups/cli_tenant_level_deployment_mg?api-version=2018-03-01-preview
  response:
    body:
      string: '{"id":"/providers/Microsoft.Management/managementGroups/cli_tenant_level_deployment_mg","type":"/providers/Microsoft.Management/managementGroups","name":"cli_tenant_level_deployment_mg","status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '207'
      content-type:
      - application/json; charset=utf-8
      date:
      - Sat, 14 Dec 2019 02:44:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      request-id:
      - 6424151b-4aaa-4a82-80d0-0761d499029d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding,Accept-Encoding
      x-ba-restapi:
      - 1.0.3.1544
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
