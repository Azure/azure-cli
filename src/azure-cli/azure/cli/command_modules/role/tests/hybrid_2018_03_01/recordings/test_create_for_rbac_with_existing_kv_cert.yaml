interactions:
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"Request is missing a Bearer
        or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:04:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"a91194fa9c7e48018843c94205e3d738"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:04:43 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=a91194fa9c7e48018843c94205e3d738
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"a91194fa9c7e48018843c94205e3d738"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:04:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"a91194fa9c7e48018843c94205e3d738"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:04:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"a91194fa9c7e48018843c94205e3d738"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:07 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:07 GMT
      duration:
      - '2201399'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Y82BpKRlUgewplPNRiSw11Z6vGZl7aBO/qroOg5zal8=
      ocp-aad-session-key:
      - NseoLCjfqZe_eElSFYDVyL3Imswhxa1v2tRIWJSq7stWkB59I2A0ly41m1ai1YxNpZ3xALUlxzGA8v3uh6ueqVBh3Yzpb6ZZzN3I4G66XgVqO0VkNcABe5JIagxSXSwcxySnYpNPyjMOKKuj-hVEavKQYKwSu5x1l31JQNm0sTc.smzTiamtG1HgIz5X0sNUuaJdngB3uhO5ERTgzWZCexg
      pragma:
      - no-cache
      request-id:
      - 49abe55e-90dc-4ed4-8384-8465ad0ba8c2
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/40b336190ee54af4b68c5a718ebb7bd6","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/40b336190ee54af4b68c5a718ebb7bd6","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/40b336190ee54af4b68c5a718ebb7bd6","x5t":"qiXb-EHiLrHkdbnyHKVKRfGlJ8U","cer":"MIIDQjCCAiqgAwIBAgIQfQ49GkNLRMqB7DE6jnRR7TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUwMloXDTIyMDkwNzA4MDUwMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAboogF9HUZyHoiB5H1Sghp9P8sRUS883PHit/9kX0vYlX0Pgj75U+i5WYFYsHsqpOVhLFF9zSGCQnliaxBAFTIAmNO8ul+5ECVUYzYHf0CQV+G0RjXSAL76aSvnS2/Qbwa/g0HzcdyTbjlVGZpo6Nw4SjZmy5nZRdiLjeRUlpcwe9OLAMs3iBwhx1VsbwCs9/BiJZyqY7TJsH8J9sVIfTL8ec0lMbAV0A+mWv9dZaGZZ3SI4jKnUneFfTj6MEHfJqScoiWzzVTwRsFjBAM/GXy3AQCaCUT8qbH/RwHePf2PtbHxPTRN6iZh/NyzrRDM2cbyqq1Y8m/UWbFibD7xaicA==","attributes":{"enabled":true,"nbf":1599465302,"exp":1662537902,"created":1599465902,"updated":1599465902,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599465884,"updated":1599465884}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:09 GMT
      duration:
      - '2271110'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - nugJSouSVPKgfk07/4nFZSJq25orrkE1IMCo0CDC6nM=
      ocp-aad-session-key:
      - ZtQlUM49EPqcnKfbil9dtE-xDzJNWhgbjsyVXP6ENZ4EImVjiHFnyqH8nyAeBrPPdUuwc2RqST2t_hGpPmTCgeAz-s-sb6d4OvcCv3b-P_71xmuV45L45jPyUYYgRk-5dsh5kR6LNI_X1Z19s4FHB0w7pkoaYzwxRa3NZasynaA.foaj7GDFZxHImaSSQBcjYDEFAkmry24V3VBWgSYrLig
      pragma:
      - no-cache
      request-id:
      - c6a1671e-0c2e-4d8d-ba9a-5ea282d09af9
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
      "keyCredentials": [{"startDate": "2020-09-07T08:05:08.620212Z", "endDate": "2021-09-07T08:05:08.620212Z",
      "value": "MIIDQjCCAiqgAwIBAgIQfQ49GkNLRMqB7DE6jnRR7TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUwMloXDTIyMDkwNzA4MDUwMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAboogF9HUZyHoiB5H1Sghp9P8sRUS883PHit/9kX0vYlX0Pgj75U+i5WYFYsHsqpOVhLFF9zSGCQnliaxBAFTIAmNO8ul+5ECVUYzYHf0CQV+G0RjXSAL76aSvnS2/Qbwa/g0HzcdyTbjlVGZpo6Nw4SjZmy5nZRdiLjeRUlpcwe9OLAMs3iBwhx1VsbwCs9/BiJZyqY7TJsH8J9sVIfTL8ec0lMbAV0A+mWv9dZaGZZ3SI4jKnUneFfTj6MEHfJqScoiWzzVTwRsFjBAM/GXy3AQCaCUT8qbH/RwHePf2PtbHxPTRN6iZh/NyzrRDM2cbyqq1Y8m/UWbFibD7xaicA==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert000001",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "1828e6c9-df15-4499-89b2-8befaeb96ebf", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "d59906d5-a4f1-4e19-b490-d902a1c6e7f5",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert000001", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "AA25DBF841E22EB1E475B9F21CA54A45F1A527C5", "endDate": "2021-09-07T08:05:08.620212Z",
        "keyId": "88888888-0000-0000-0000-000000000001", "startDate": "2020-09-07T08:05:08.620212Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert000001 on
        behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "id": "ece1a55c-1b11-4a6d-a75d-a856cfe93072", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:10 GMT
      duration:
      - '4778921'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - /JobBrpFkR/7pijMuZ1+szDzkfKvEa/y7XtnoLF0dSE=
      ocp-aad-session-key:
      - n8ZcVYLjO-FSZ-Xcnh4Prm-11lAnIYUGhyzo6oZMqnFRydEVzY-jo7QuTof5YQteL5EPQE8mL2LkeNsbhn4UniWj4qI-linPKEIDazdL44TGTtd3dc4b2s8-esvp3RvAYv04JbxgX-T7HEqwYWEZ37ctgu6a-7yRkHIUW8SbnuQ.V6gKZnw5BDgtfn2FdmvMFYOmOpmcTMtTEcx6SWDr108
      pragma:
      - no-cache
      request-id:
      - 6568cec0-eb81-4112-b3a4-f0e17e60c2cc
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "d59906d5-a4f1-4e19-b490-d902a1c6e7f5"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"911d920b-2f09-4b37-a65b-7b88f114b8f9","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"d59906d5-a4f1-4e19-b490-d902a1c6e7f5","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ece1a55c-1b11-4a6d-a75d-a856cfe93072","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["d59906d5-a4f1-4e19-b490-d902a1c6e7f5","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:11 GMT
      duration:
      - '3453364'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/911d920b-2f09-4b37-a65b-7b88f114b8f9/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - Ohqk6OQf/jwJtTJy4Zm4joGjpo0dqkwF43bWgh9upC4=
      ocp-aad-session-key:
      - GoPJRc_4pOuK9-KjGsElPFoMJFV811mNFKgJoh-BWts07yx5cjThn81LQqzEGHj7hLiZG5ldEsTNapspS5Eg4LKmoKFR5BpQ_EEB3SMnTAo8jYclq1u7jYgtpYb7s_MApeftuxZGYR90QPxDTsXKhrmpdKp2_iTsE56myQ84qVk.zzqohSCVRsCX8GPm8uooC41naUU0OsAsC6TEFSKjhJo
      pragma:
      - no-cache
      request-id:
      - a1ead8af-2bbb-4b80-81b9-7d4357f3af3f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "911d920b-2f09-4b37-a65b-7b88f114b8f9"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 911d920b2f094b37a65b7b88f114b8f9
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:19 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "911d920b-2f09-4b37-a65b-7b88f114b8f9"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"911d920b-2f09-4b37-a65b-7b88f114b8f9","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2020-09-07T08:05:19.4827322Z","updatedOn":"2020-09-07T08:05:19.4827322Z","createdBy":null,"updatedBy":"0d504196-1423-4569-9a6e-15149656f0ee"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1195'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"911d920b-2f09-4b37-a65b-7b88f114b8f9","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"d59906d5-a4f1-4e19-b490-d902a1c6e7f5","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ece1a55c-1b11-4a6d-a75d-a856cfe93072","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","d59906d5-a4f1-4e19-b490-d902a1c6e7f5"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2157'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:21 GMT
      duration:
      - '2345456'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - vLNnZo5SIn1jGCzfoRQ7cHbnXuGX/1jYjhTWlHkv7EI=
      ocp-aad-session-key:
      - NqKholRmy-n43q9F8B6eqMMhJ37ckcrhKcGzvv93KiYdTn0Dhs7QOymhXIrLhcLcmiEiGaLvRpH9WfYO3IFr2chP_-JhrSu35N6ycatp4UDD-jduoQ0O0tsyh293gDhwT_R-SasM5KBjC9kAxz5keX3TdCXdWjyZ1tcVnnCAiqU.kNuxGSJEBJXR8YjD5-tHdocO0InlRMi7uZO8Q3G1cig
      pragma:
      - no-cache
      request-id:
      - 4d8cf37a-5de5-4709-88f6-606997de215f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27d59906d5-a4f1-4e19-b490-d902a1c6e7f5%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:22 GMT
      duration:
      - '2230877'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - cTgtNQkuDGr6qwftSfgSfUGBogf7OfXqQNU+jCyiv78=
      ocp-aad-session-key:
      - 5u1R94EwJHFmfrEb92LQrTzJI60gGruBFrtIGqqS_1cqmcs6w0IKq0FYrRmA7bs4t72HcEtwiFvcLBNkkQFQN8bvKvON4Y0Vm2O3ygOUOxu-ReLOzlIhEEUnXfhCz0j_do4IFSal7952ZC6ppk0SPMtfqYpAJPHNczLx0T7jzsU.aYih0jmNt2bIqNBMJisF_XOnNLIMAvxRE1b8-zNxUy4
      pragma:
      - no-cache
      request-id:
      - e1e81509-52db-44c9-95e7-063e843d62a6
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27d59906d5-a4f1-4e19-b490-d902a1c6e7f5%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1828e6c9-df15-4499-89b2-8befaeb96ebf","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"d59906d5-a4f1-4e19-b490-d902a1c6e7f5","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"AA25DBF841E22EB1E475B9F21CA54A45F1A527C5","endDate":"2021-09-07T08:05:08.620212Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T08:05:08.620212Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ece1a55c-1b11-4a6d-a75d-a856cfe93072","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:22 GMT
      duration:
      - '2304949'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QLi1KG93IaDPqsnsaNkQfgqnRRMqXMRFxcc/nwwwahk=
      ocp-aad-session-key:
      - B5C9osC3ZAw4Ybn8YIkywONrJz_PWT23U_5gMWTC_H6CivNi9GrQqkN1xFlBiasX520d0uuxD7mynT5sx_oxjVRThsf4SrdYYGA3_qr0Mza0tzteBPblR0qIrEmZvSH508GSQnZk73RScvgIeUO4mdM_6mbpLEhxgTJQ-pBjMCQ.TFDoFXnoanQJ_H9tTgfQCaoqYyExncHDFHMN1UMxdwY
      pragma:
      - no-cache
      request-id:
      - fbf7e928-180a-41f6-b7f7-1b248bf33d66
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1828e6c9-df15-4499-89b2-8befaeb96ebf?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1828e6c9-df15-4499-89b2-8befaeb96ebf","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"d59906d5-a4f1-4e19-b490-d902a1c6e7f5","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"AA25DBF841E22EB1E475B9F21CA54A45F1A527C5","endDate":"2021-09-07T08:05:08.620212Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-07T08:05:08.620212Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ece1a55c-1b11-4a6d-a75d-a856cfe93072","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:23 GMT
      duration:
      - '2307746'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - RfOnWier2qhPqdGkvthh0LDmYhpneMfUlv3Lmkx4y30=
      ocp-aad-session-key:
      - pErozRg1jYap3hHu9evwhJDi2UsnT3Vh_m--28W_yEan6irvECiIKXLd_eNemFOT-B0t6BmmpWa7xSn5BHnSN1wVDqd16VxSNoeeFyYD6Rf_B7Wqppob3RujqZq6ck9QUuC2q0U48_ALiUujvhRvuTlB6PqCU4QlbYsEMWOt79k.PKxPiFdflehkD2zzuYNCaDNRgAlUUVXWtO64tiHRu7U
      pragma:
      - no-cache
      request-id:
      - 15e147fd-a342-4e39-97b9-96342371eb50
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/40b336190ee54af4b68c5a718ebb7bd6","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/40b336190ee54af4b68c5a718ebb7bd6","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/40b336190ee54af4b68c5a718ebb7bd6","x5t":"qiXb-EHiLrHkdbnyHKVKRfGlJ8U","cer":"MIIDQjCCAiqgAwIBAgIQfQ49GkNLRMqB7DE6jnRR7TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUwMloXDTIyMDkwNzA4MDUwMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAboogF9HUZyHoiB5H1Sghp9P8sRUS883PHit/9kX0vYlX0Pgj75U+i5WYFYsHsqpOVhLFF9zSGCQnliaxBAFTIAmNO8ul+5ECVUYzYHf0CQV+G0RjXSAL76aSvnS2/Qbwa/g0HzcdyTbjlVGZpo6Nw4SjZmy5nZRdiLjeRUlpcwe9OLAMs3iBwhx1VsbwCs9/BiJZyqY7TJsH8J9sVIfTL8ec0lMbAV0A+mWv9dZaGZZ3SI4jKnUneFfTj6MEHfJqScoiWzzVTwRsFjBAM/GXy3AQCaCUT8qbH/RwHePf2PtbHxPTRN6iZh/NyzrRDM2cbyqq1Y8m/UWbFibD7xaicA==","attributes":{"enabled":true,"nbf":1599465302,"exp":1662537902,"created":1599465902,"updated":1599465902,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599465884,"updated":1599465884}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2387'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:25 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-07T08:05:21.661002Z", "endDate":
      "2021-09-07T08:05:21.661002Z", "value": "MIIDQjCCAiqgAwIBAgIQfQ49GkNLRMqB7DE6jnRR7TANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUwMloXDTIyMDkwNzA4MDUwMlowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAboogF9HUZyHoiB5H1Sghp9P8sRUS883PHit/9kX0vYlX0Pgj75U+i5WYFYsHsqpOVhLFF9zSGCQnliaxBAFTIAmNO8ul+5ECVUYzYHf0CQV+G0RjXSAL76aSvnS2/Qbwa/g0HzcdyTbjlVGZpo6Nw4SjZmy5nZRdiLjeRUlpcwe9OLAMs3iBwhx1VsbwCs9/BiJZyqY7TJsH8J9sVIfTL8ec0lMbAV0A+mWv9dZaGZZ3SI4jKnUneFfTj6MEHfJqScoiWzzVTwRsFjBAM/GXy3AQCaCUT8qbH/RwHePf2PtbHxPTRN6iZh/NyzrRDM2cbyqq1Y8m/UWbFibD7xaicA==",
      "keyId": "3a44bce6-a132-49a7-af9c-c093e661ae4a", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1339'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1828e6c9-df15-4499-89b2-8befaeb96ebf?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 08:05:25 GMT
      duration:
      - '4162838'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 20Sx+2KAbblHDUuT7nG4FjJAtxjUB+idh3+LFV6WoA4=
      ocp-aad-session-key:
      - MvdAmca5lIO2WAVEEI0da8vcaeqYrm7z0CVX73nt19LorC7WLaO-IPPWwURPVbAY8S8TQYmD95ZuHHbXm4WuaFWj4v6EbSN0tc5PhcjIEN7SH9j7p-9rKmGImpB2ib3gjQMF4_gsx7tk53YEW_hE_g2FHIQOL1hM0yv3wTbvoHk.ZzRfKe-b1mkG-3TwfmBmz-pC8r3gqV5GCYbO9TphxJw
      pragma:
      - no-cache
      request-id:
      - 7696b04b-b18e-47ea-a168-12429c3bfd62
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"1828e6c9-df15-4499-89b2-8befaeb96ebf","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"d59906d5-a4f1-4e19-b490-d902a1c6e7f5","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"AA25DBF841E22EB1E475B9F21CA54A45F1A527C5","endDate":"2021-09-07T08:05:21.661002Z","keyId":"3a44bce6-a132-49a7-af9c-c093e661ae4a","startDate":"2020-09-07T08:05:21.661002Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/1828e6c9-df15-4499-89b2-8befaeb96ebf/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"ece1a55c-1b11-4a6d-a75d-a856cfe93072","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:25 GMT
      duration:
      - '2308915'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - c961QXj+XitIe9ndNvmA8K1Z1/zgJelmYQNKQ1J3RwA=
      ocp-aad-session-key:
      - h9K1fgJfpJAJ5IJyYKLMRBr9RAx9vUdm0oqM5Iqsl9n3Mt3afeRl7W9qbb76vkKXIsl-rGj-gyVUcQiI7Osus-711ZsdQQQF6ZrlHwTsfyLi2-2RkVgNA61aHGW09cUlSPjPbxPACbfJJYDR8cf-MHElNf5C5DP2Z6hEha3dpB4.HUHYBgyT4bYxwxxnPsR2Fso2LpmGP5ByGn26oeqVS7E
      pragma:
      - no-cache
      request-id:
      - 354640a3-98e1-427e-adba-a79397500a2a
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/1828e6c9-df15-4499-89b2-8befaeb96ebf?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 08:05:26 GMT
      duration:
      - '3936942'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - CY7xnABdb5AX/ElOxd/b3seyzI09IWY1JnGZf6862jg=
      ocp-aad-session-key:
      - 5FkSW2--B0C1KX9zKLEJNtQxxtNTVwDx5TPDJQ-ZkyOVT0A2IVsRCOakfPHmkWvMxheMhEXvezDIxQev3JSvyQQq5Yl_1izANoJvF55KoU2GQILd_gNBnAHn3LjId4WGbc0Z9zM5BdeB1EnwOUJ0vtdp7wE7k6i8nlU2F8Vq354.dkIvkASjFa-Igp9qZz_HYG6T_bNRE-YjCj4TJaAJGGI
      pragma:
      - no-cache
      request-id:
      - 58a3bb3f-b9ab-4dce-bd52-23524fa095ab
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/create?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"66be4e6eaec54e779aec8d5299357b7f"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:27 GMT
      expires:
      - '-1'
      location:
      - https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01&request_id=66be4e6eaec54e779aec8d5299357b7f
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"66be4e6eaec54e779aec8d5299357b7f"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQB5cVZ2mT9W4OBvsLMVshWj0qOZNpg12C+5tEQWSFdwnprYIP5QwS5BaW2u6+zEbUja9Sy+XGwcNHaQ+dI+CMTOgEFb1iDDlw1G+4i2C4iyP/n+gtOSujfw5P2MX5ltMqQG1/+qrGiu8jsTJxq215MWavARvcg1Y9nSa6ZOCr4apKbIoCRaRK1CYARpHY6PR6uPOIY7IPH1v+UrnLWZweDggtGOTWg48F+k6r2t+/tcLs5TQgU86UibwAOP+SCVigyNjwfZZ2l3U4/NlI/EEgUriD+yvYqWDqEn9yeDxA813aHt/iNNCq99FhMlxKVJNW3C3Ls0WZvEYf2R5fRzQ13I","cancellation_requested":false,"status":"completed","target":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1","request_id":"66be4e6eaec54e779aec8d5299357b7f"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:40 GMT
      duration:
      - '2197251'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - e7W9icsIXeNKcQ8hL0MISIlHG91r3SMmk0yUII2E5bw=
      ocp-aad-session-key:
      - RFdnXlW9_lobBueHPesVMYzZA03pp6_uFBvFM8jMSesC9pZ6-3y4t0mUBWnvlfGaLeeQ5v6GMi_-gmzvQrvK5xZZNvwqwOZy5T8uQBui8hz21teVA_WwpIDdSQYYEARUziXY1DyQ4DoUApB1PSY3hR3OPwYmElMpIP6lMRsdKjY.3OIbQH4wBZS56ItPWtPiqEjjUWy3HiS7OxeYdGwBTb0
      pragma:
      - no-cache
      request-id:
      - f423b8c1-7143-4840-b595-2afca5b8458d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/99772cae348d45818e5633d0ce318f23","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/99772cae348d45818e5633d0ce318f23","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/99772cae348d45818e5633d0ce318f23","x5t":"Qxj517lZ1vLGZigjUZcco3Z1Wow","cer":"MIIDQjCCAiqgAwIBAgIQJRtYPWwASOShFKjICKM4rTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUzNFoXDTIxMDMwNzA4MDUzNFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAKjP9tfh72xatbFb7JmASeyShZx+TOQ3CrUn56qRYa7pAKSFItdoFPhqLAXf+hghgfkoISVPDKLz4vTswH/jibzE9mmWApLf0y2w4Zu2NlgEmDHoLRlayxwiw7rLSWlbR2I5vF84gU6PZoZmzdc8N7FdvZSDlwyu0UuwRDUwthlbE+TVNHT4oUSDYiBVPwMTlIAoOgyGf3guhtNZetQu+kvl5l/bvLNGouKrq4Y5avcVHDeqkt+nD8XbH7A/STGUgYKWnP0o9nFPgOhYwTrHMrpvYgacGGKtdbcPSXd2Xu3aAYFs87pTt0xxYYfPOuTZ37wBRjaBy6ptt4sqPLvSUgw==","attributes":{"enabled":true,"nbf":1599465334,"exp":1615104334,"created":1599465934,"updated":1599465934,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599465884,"updated":1599465928}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:42 GMT
      duration:
      - '2299574'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - JSrPDhiflbp0jDwF8SEsfYFNmeydCLjFhzKeeAi4mq8=
      ocp-aad-session-key:
      - -4PyhHkuxd8ybFsh9Jj-P-PCmrs3Pec5h4bWrElxHyG8BjA5sCJudal9Ec-NllHJMilKRvcC10pQ7ldNJuhWRTRJK50nrdobAh7ct1OIh_EqhrFiy4zNlsIqYikNfCW9l1ucjwQpLcFubEtyamrFej3N_ECKwtSvod0GaWK7Gqc.1YFop-gohDl3heqSJ59QRRhfoKvxp_P0F0aIsy_eHgY
      pragma:
      - no-cache
      request-id:
      - f99f866e-69e7-4223-b08f-3e509bc142a9
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
      "keyCredentials": [{"startDate": "2020-09-07T08:05:41.206786Z", "endDate": "2021-03-07T08:05:33.000Z",
      "value": "MIIDQjCCAiqgAwIBAgIQJRtYPWwASOShFKjICKM4rTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUzNFoXDTIxMDMwNzA4MDUzNFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAKjP9tfh72xatbFb7JmASeyShZx+TOQ3CrUn56qRYa7pAKSFItdoFPhqLAXf+hghgfkoISVPDKLz4vTswH/jibzE9mmWApLf0y2w4Zu2NlgEmDHoLRlayxwiw7rLSWlbR2I5vF84gU6PZoZmzdc8N7FdvZSDlwyu0UuwRDUwthlbE+TVNHT4oUSDYiBVPwMTlIAoOgyGf3guhtNZetQu+kvl5l/bvLNGouKrq4Y5avcVHDeqkt+nD8XbH7A/STGUgYKWnP0o9nFPgOhYwTrHMrpvYgacGGKtdbcPSXd2Xu3aAYFs87pTt0xxYYfPOuTZ37wBRjaBy6ptt4sqPLvSUgw==",
      "keyId": "88888888-0000-0000-0000-000000000004", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert0000012",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "504770ea-51eb-4d20-82a2-1fcaa06a95bc", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "de02c887-c033-42e7-9948-c4c14f2dcefb",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert0000012", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "4318F9D7B959D6F2C666282351971CA376755A8C", "endDate": "2021-03-07T08:05:33Z",
        "keyId": "88888888-0000-0000-0000-000000000004", "startDate": "2020-09-07T08:05:41.206786Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "id": "105a3ebe-9df5-4346-9e29-cea88e54cfd9", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:42 GMT
      duration:
      - '4640824'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - QAuHhTm9RVpaK7Xjr9yexfLWEjSix2PbQozeTqB2czc=
      ocp-aad-session-key:
      - 6AOrzdNQhAO-R4zJx_ROsrjvL-pqIJ94E2jBfrgJlNYZ3XAEutgR1hpsOa0QEpCQ-5Rv9FL6y0MZi00B2uOHGKDU0ZDIRlCzgO_-nQDdZi6QHxoDt-mzz_HPk74RZ60hRIt-2jVW5311ghWN6Pc-pBzeeUWPJ8Za9clcoEEyZ1k.cjocFwByVE1afnxd1XKmkrr0EwPIUvb4EIuXrb4YMCk
      pragma:
      - no-cache
      request-id:
      - 3bcf695c-6de9-4264-87fe-662cad01ce77
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "de02c887-c033-42e7-9948-c4c14f2dcefb"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"d42b7317-9b67-440e-92a4-45531500f93e","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"de02c887-c033-42e7-9948-c4c14f2dcefb","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"105a3ebe-9df5-4346-9e29-cea88e54cfd9","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["de02c887-c033-42e7-9948-c4c14f2dcefb","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2162'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:43 GMT
      duration:
      - '3245103'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/d42b7317-9b67-440e-92a4-45531500f93e/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - om0QIa8Bj4//k+kQSxhRarsBgG9G181jsSBY9te4TGM=
      ocp-aad-session-key:
      - awbLX2IGLP2GiOV9EoBnRtdsnpRkEHLshRYkjEkxdV-PVJHqO_9UqOhVpzULgJWOO8lkK6cRU0YtSogIDy7tOKNmEgI8QZlGFqph7BKEzfmArJ0XJDaL1H9wsZhgXsoyMDqRR1Lrju8rDgO9zRi7GEGSDIa0KBwJHDCH8qsAa2Y.6rR6valk_dmyofih9u68G7cypTYe3drJQPplAbU9hAg
      pragma:
      - no-cache
      request-id:
      - 1a7cc41b-9c67-47de-9608-055af387b5d7
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "d42b7317-9b67-440e-92a4-45531500f93e"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2015-07-01
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal d42b73179b67440e92a445531500f93e
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2015-07-01
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '838'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "d42b7317-9b67-440e-92a4-45531500f93e"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.61.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006?api-version=2015-07-01
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"d42b7317-9b67-440e-92a4-45531500f93e","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2020-09-07T08:05:50.8082691Z","updatedOn":"2020-09-07T08:05:50.8082691Z","createdBy":null,"updatedBy":"0d504196-1423-4569-9a6e-15149656f0ee"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000006","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000006"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '868'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"d42b7317-9b67-440e-92a4-45531500f93e","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"de02c887-c033-42e7-9948-c4c14f2dcefb","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"105a3ebe-9df5-4346-9e29-cea88e54cfd9","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","de02c887-c033-42e7-9948-c4c14f2dcefb"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2165'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:53 GMT
      duration:
      - '2352638'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 8Z/MS0CWlHw1dNfvy/nbIKpRwnC6TfjT/NDxOinAR9E=
      ocp-aad-session-key:
      - SyPFEr8LbSqMowP-lCeyPnW0mh8owMAop9n3vcKpxymelA1i-ASl0CvmVe8gtaBQb9rswe42ZXeJDSl3fvOOHW-GODhAr45yyPzlZfaHgoP10tiiBh_VA542cFUirOGhGfu8kZIh_lT9T55HM_zEaxuIA3uvsX06hTeQkAgJ8dM.bhOjJEz-3k091NRwaunAaggP_4cWxTNj_p9gl5K2Qko
      pragma:
      - no-cache
      request-id:
      - 716a0608-1d5d-4930-90e9-30af8ee16de1
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27de02c887-c033-42e7-9948-c4c14f2dcefb%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:54 GMT
      duration:
      - '2330511'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - v9yI3GNQqNXz0aoNCJywTDYIqIKG+Dlb/txFx1mcpdc=
      ocp-aad-session-key:
      - znIynx3jOA0smAEkVY5sG0Qx3IrfbBYW2ICY2tTPIKzJajIkgrxWgrnvgmD_KRycxuXFdLI7ew0jKfNKx-NEcbMUVOTTrx3i-s3d7t2PF5NPWUdQhZOp7n0G2-lR79OKqUYg2GmGVN3V-1BAXwi-SbPTpImarMUW9QOaUs-8QXo.ZMQXe0ELw4saGw6Eag_AsDjC4d9QURiiUkh__YTJ0sI
      pragma:
      - no-cache
      request-id:
      - c41b2e3b-1b88-4083-8f38-d8a1cfaa0a8f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27de02c887-c033-42e7-9948-c4c14f2dcefb%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"504770ea-51eb-4d20-82a2-1fcaa06a95bc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"de02c887-c033-42e7-9948-c4c14f2dcefb","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"4318F9D7B959D6F2C666282351971CA376755A8C","endDate":"2021-03-07T08:05:33Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2020-09-07T08:05:41.206786Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"105a3ebe-9df5-4346-9e29-cea88e54cfd9","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:55 GMT
      duration:
      - '2699373'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QyUYQSZ8AVNnKcHAsqrnSstFWuxh8zjH1SxEOVKmmsk=
      ocp-aad-session-key:
      - FZYwXmVJRSvEj6hfTTvKBiczxMAX4WNJpYMEbo4ZWmo6RJtFd9x9LpGEyc4-v6l8vv2gMtotjGde2dpLI3P37nGyQRiNk_K-xz-0FPLg-0fbQpjed6pJCroXv6pTFilvKBy30ezmBSTs55AWh23IKGpf0KYtqGbHSpjAKXXb2Tw.mMqEdOyCVX2g-ZojWSAuBQ_wZoq7nO9lBO-4OSvflJk
      pragma:
      - no-cache
      request-id:
      - 7ed7f930-a0c7-40a6-91a1-a3e1770a9e44
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/504770ea-51eb-4d20-82a2-1fcaa06a95bc?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"504770ea-51eb-4d20-82a2-1fcaa06a95bc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"de02c887-c033-42e7-9948-c4c14f2dcefb","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"4318F9D7B959D6F2C666282351971CA376755A8C","endDate":"2021-03-07T08:05:33Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2020-09-07T08:05:41.206786Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"105a3ebe-9df5-4346-9e29-cea88e54cfd9","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:55 GMT
      duration:
      - '2300588'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - mJ6QF4GrKJGA7YcWacYUZXMYHkvaYiDvizVEZmVXKQM=
      ocp-aad-session-key:
      - P-cTWyGvnDuWiZPVhCd-_MUB0PjUtmY61jp_cvvd-PUp5EJUlb2YKyTtF3V4LOej4FBSbvJDPSeds8gWOLO5-bOnoQdxJ_h-q6Z4s6w40Gd2jKPS3DwGE660zjykl19j6pFM3dQ6RF1z8rzo5hDDIyiPnGkWXb8mUaNJaGDdv4Q.TqkH2wMk63ZL2fDZl9h5v0QBIzvfiDVi7-jPjmMyvVA
      pragma:
      - no-cache
      request-id:
      - 7234052f-c305-4545-9435-bc6223f81316
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/2016-10-01 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/?api-version=2016-10-01
  response:
    body:
      string: '{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/99772cae348d45818e5633d0ce318f23","kid":"https://test-rbac-exist-kv000002.vault.azure.net/keys/cert1/99772cae348d45818e5633d0ce318f23","sid":"https://test-rbac-exist-kv000002.vault.azure.net/secrets/cert1/99772cae348d45818e5633d0ce318f23","x5t":"Qxj517lZ1vLGZigjUZcco3Z1Wow","cer":"MIIDQjCCAiqgAwIBAgIQJRtYPWwASOShFKjICKM4rTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUzNFoXDTIxMDMwNzA4MDUzNFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAKjP9tfh72xatbFb7JmASeyShZx+TOQ3CrUn56qRYa7pAKSFItdoFPhqLAXf+hghgfkoISVPDKLz4vTswH/jibzE9mmWApLf0y2w4Zu2NlgEmDHoLRlayxwiw7rLSWlbR2I5vF84gU6PZoZmzdc8N7FdvZSDlwyu0UuwRDUwthlbE+TVNHT4oUSDYiBVPwMTlIAoOgyGf3guhtNZetQu+kvl5l/bvLNGouKrq4Y5avcVHDeqkt+nD8XbH7A/STGUgYKWnP0o9nFPgOhYwTrHMrpvYgacGGKtdbcPSXd2Xu3aAYFs87pTt0xxYYfPOuTZ37wBRjaBy6ptt4sqPLvSUgw==","attributes":{"enabled":true,"nbf":1599465334,"exp":1615104334,"created":1599465934,"updated":1599465934,"recoveryLevel":"Purgeable"},"policy":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599465884,"updated":1599465928}},"pending":{"id":"https://test-rbac-exist-kv000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2386'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 07 Sep 2020 08:05:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.9;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-07T08:05:53.921508Z", "endDate":
      "2021-03-07T08:05:33.000Z", "value": "MIIDQjCCAiqgAwIBAgIQJRtYPWwASOShFKjICKM4rTANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNzA3NTUzNFoXDTIxMDMwNzA4MDUzNFowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAIfZUUFZHzLLlez0vtkMFKI0wM3IX/ADTOsRAgCuEllWcam3+24op7kr5ESe/kgn/fiyxplNn6/PEwGrZtdzjUU1Bjv11tuZoRq/EY3AIDYlbnpoHinIE4UgQ8oUx3n/x5H5is11sja00GVBDpP2Vww170bg4AymYq1ICmx2ZUDM/5ZWuiFfoJUYCGYiwJoBQhqssp4CykTunnzYuhIUZUC8PMC5fDKsHcVvBA+xxatUsYwMjI0QA77zzxL+H6h1NMeqmhvXmX2RmfJfjNQFR9lm5PNvjxC/HRy1RH9RSkxMk+zrI7WeBS+puBOfYpugP4yfaQMuB4u9EAuseH56p8ECAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFJ/lUksyKb2JBB91fMVkpjdTvt9RMB0GA1UdDgQWBBSf5VJLMim9iQQfdXzFZKY3U77fUTANBgkqhkiG9w0BAQsFAAOCAQEAKjP9tfh72xatbFb7JmASeyShZx+TOQ3CrUn56qRYa7pAKSFItdoFPhqLAXf+hghgfkoISVPDKLz4vTswH/jibzE9mmWApLf0y2w4Zu2NlgEmDHoLRlayxwiw7rLSWlbR2I5vF84gU6PZoZmzdc8N7FdvZSDlwyu0UuwRDUwthlbE+TVNHT4oUSDYiBVPwMTlIAoOgyGf3guhtNZetQu+kvl5l/bvLNGouKrq4Y5avcVHDeqkt+nD8XbH7A/STGUgYKWnP0o9nFPgOhYwTrHMrpvYgacGGKtdbcPSXd2Xu3aAYFs87pTt0xxYYfPOuTZ37wBRjaBy6ptt4sqPLvSUgw==",
      "keyId": "fb913368-3aaf-4c87-8901-cbd9ae8cdfa4", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1336'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/504770ea-51eb-4d20-82a2-1fcaa06a95bc?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 08:05:57 GMT
      duration:
      - '4060262'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - OHLxKa/M0NSKMub/tsbYAKezsFzdFo6xwwpNm+vg90c=
      ocp-aad-session-key:
      - ej1DYqkRRA7_HBlUiMz9_8Q089Q3xFa8UCdYLYv3_kV_nESgLd2Jc-jKMJ6WO0UxcQHAIJk1ruHmxrYc0V1Sjbs07eY4PMq42x3w7EGYAg1vulQ4rmEJIXeoOX0SULiW5wZ-Xw4KTUGtHluZIWvhI-n5C_YMfx-RykP07tGHFHk.52mS9r3CHtssKcoipkRN_TQVhXo1zc0XcvXkHx1FgJc
      pragma:
      - no-cache
      request-id:
      - f0485a99-485f-4420-9b92-358f57924e27
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"504770ea-51eb-4d20-82a2-1fcaa06a95bc","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"de02c887-c033-42e7-9948-c4c14f2dcefb","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"4318F9D7B959D6F2C666282351971CA376755A8C","endDate":"2021-03-07T08:05:33Z","keyId":"fb913368-3aaf-4c87-8901-cbd9ae8cdfa4","startDate":"2020-09-07T08:05:53.921508Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/504770ea-51eb-4d20-82a2-1fcaa06a95bc/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"105a3ebe-9df5-4346-9e29-cea88e54cfd9","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Mon, 07 Sep 2020 08:05:58 GMT
      duration:
      - '2404903'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - nugJSouSVPKgfk07/4nFZSJq25orrkE1IMCo0CDC6nM=
      ocp-aad-session-key:
      - -h8UT_8ZhOHLEB8jdDJZoRoz-1gBq53ZilZBS6uEKt9OeV8tFjpXtJqZZY5-IxNChqFyCgSW_Dq3uq6SfY8Zh270UYxwTj5CmdHGvp60HS5CBsZfByDS_zm2gaF8LL-NF3HVAtVH8JEvLlJRfa-t-oN80p99Dh-UbhxIzNDNUHQ.gDk1sZ89vurzJcBmq0BfKpLz3RgY7uv9FSwFR_ittx0
      pragma:
      - no-cache
      request-id:
      - ad09d5d8-ba9d-4624-8516-f4e391a7b7fa
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.8.5 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/504770ea-51eb-4d20-82a2-1fcaa06a95bc?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Mon, 07 Sep 2020 08:06:04 GMT
      duration:
      - '59211981'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Ga5dHo2MUdfQUAotqIq4yyIOJ8bsMsee/uKut2+xnK8=
      ocp-aad-session-key:
      - OhgS63gN6y8FBqYU-tomVUI2TttH7D013JB0gp7V1FL_8foLhYnpwc01c9u9wjlX3tAXpsbwnmYoi7zne_giww04FTyJLiNRqnTKXTjfhFWs-OuhS6Q5LIuCTkdwoseXSt_wG_CDBA9dWc0by8xFtdweIp67PHefNe8kIjMmz1k.JqSjR6_aRrvq0No0t0WQTePep8ghoQ2JCH5uEHwO3OQ
      pragma:
      - no-cache
      request-id:
      - 6f3fcd02-afe5-4e2c-8955-0c5e12ac0a38
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
