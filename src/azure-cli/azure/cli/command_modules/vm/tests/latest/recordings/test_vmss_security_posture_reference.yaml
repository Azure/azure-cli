interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001","name":"cli_test_vmss_security_posture_reference_000001","type":"Microsoft.Resources/resourceGroups","location":"eastus2euap","tags":{"product":"azurecli","cause":"automation","test":"test_vmss_security_posture_reference","date":"2024-03-25T09:27:08Z","module":"vm"},"properties":{"provisioningState":"Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '437'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:27 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: FBD63EDCED7B4025970EA89C155DA045 Ref B: MAA201060513023 Ref C: 2024-03-25T09:27:27Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions?$top=1&$orderby=name%20desc&api-version=2023-09-01
  response:
    body:
      string: "[\r\n  {\r\n    \"location\": \"EastUS2EUAP\",\r\n    \"name\": \"18.04.202401161\",\r\n
        \   \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n
        \ }\r\n]"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '296'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/ListVMImagesVersionsFromLocation3Min;15999,Microsoft.Compute/ListVMImagesVersionsFromLocation30Min;43999
      x-msedge-ref:
      - 'Ref A: F0E501967AA44EEF84831014F884C4E9 Ref B: MAA201060513029 Ref C: 2024-03-25T09:27:28Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions/18.04.202401161?api-version=2023-09-01
  response:
    body:
      string: "{\r\n  \"properties\": {\r\n    \"hyperVGeneration\": \"V1\",\r\n    \"architecture\":
        \"x64\",\r\n    \"replicaType\": \"Unmanaged\",\r\n    \"disallowed\": {\r\n
        \     \"vmDiskType\": \"None\"\r\n    },\r\n    \"automaticOSUpgradeProperties\":
        {\r\n      \"automaticOSUpgradeSupported\": true\r\n    },\r\n    \"imageDeprecationStatus\":
        {\r\n      \"imageState\": \"Active\"\r\n    },\r\n    \"features\": [\r\n
        \     {\r\n        \"name\": \"IsAcceleratedNetworkSupported\",\r\n        \"value\":
        \"True\"\r\n      },\r\n      {\r\n        \"name\": \"DiskControllerTypes\",\r\n
        \       \"value\": \"SCSI, NVMe\"\r\n      },\r\n      {\r\n        \"name\":
        \"IsHibernateSupported\",\r\n        \"value\": \"True\"\r\n      }\r\n    ],\r\n
        \   \"osDiskImage\": {\r\n      \"operatingSystem\": \"Linux\",\r\n      \"sizeInBytes\":
        32213303808\r\n    },\r\n    \"dataDiskImages\": []\r\n  },\r\n  \"location\":
        \"EastUS2EUAP\",\r\n  \"name\": \"18.04.202401161\",\r\n  \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1035'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetVMImageFromLocation3Min;12999,Microsoft.Compute/GetVMImageFromLocation30Min;73999
      x-msedge-ref:
      - 'Ref A: 6C8ADB0A16534FC19B3AC58730499427 Ref B: MAA201060515035 Ref C: 2024-03-25T09:27:30Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks?api-version=2022-01-01
  response:
    body:
      string: '{"value":[]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '12'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 76712A978F4644FD864EFF4FE0D4E44D Ref B: MAA201060514025 Ref C: 2024-03-25T09:27:32Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions?$top=1&$orderby=name%20desc&api-version=2023-09-01
  response:
    body:
      string: "[\r\n  {\r\n    \"location\": \"EastUS2EUAP\",\r\n    \"name\": \"18.04.202401161\",\r\n
        \   \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n
        \ }\r\n]"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '296'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/ListVMImagesVersionsFromLocation3Min;15998,Microsoft.Compute/ListVMImagesVersionsFromLocation30Min;43998
      x-msedge-ref:
      - 'Ref A: EB5671A8148C47C79EA0F4BDE0E5540C Ref B: MAA201060516027 Ref C: 2024-03-25T09:27:33Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions/18.04.202401161?api-version=2023-09-01
  response:
    body:
      string: "{\r\n  \"properties\": {\r\n    \"hyperVGeneration\": \"V1\",\r\n    \"architecture\":
        \"x64\",\r\n    \"replicaType\": \"Unmanaged\",\r\n    \"disallowed\": {\r\n
        \     \"vmDiskType\": \"None\"\r\n    },\r\n    \"automaticOSUpgradeProperties\":
        {\r\n      \"automaticOSUpgradeSupported\": true\r\n    },\r\n    \"imageDeprecationStatus\":
        {\r\n      \"imageState\": \"Active\"\r\n    },\r\n    \"features\": [\r\n
        \     {\r\n        \"name\": \"IsAcceleratedNetworkSupported\",\r\n        \"value\":
        \"True\"\r\n      },\r\n      {\r\n        \"name\": \"DiskControllerTypes\",\r\n
        \       \"value\": \"SCSI, NVMe\"\r\n      },\r\n      {\r\n        \"name\":
        \"IsHibernateSupported\",\r\n        \"value\": \"True\"\r\n      }\r\n    ],\r\n
        \   \"osDiskImage\": {\r\n      \"operatingSystem\": \"Linux\",\r\n      \"sizeInBytes\":
        32213303808\r\n    },\r\n    \"dataDiskImages\": []\r\n  },\r\n  \"location\":
        \"EastUS2EUAP\",\r\n  \"name\": \"18.04.202401161\",\r\n  \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1035'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetVMImageFromLocation3Min;12998,Microsoft.Compute/GetVMImageFromLocation30Min;73998
      x-msedge-ref:
      - 'Ref A: 45776CA04E574CB294A0C1D0804C6D99 Ref B: MAA201060515019 Ref C: 2024-03-25T09:27:34Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions?$top=1&$orderby=name%20desc&api-version=2023-09-01
  response:
    body:
      string: "[\r\n  {\r\n    \"location\": \"EastUS2EUAP\",\r\n    \"name\": \"18.04.202401161\",\r\n
        \   \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n
        \ }\r\n]"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '296'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:37 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/ListVMImagesVersionsFromLocation3Min;15997,Microsoft.Compute/ListVMImagesVersionsFromLocation30Min;43997
      x-msedge-ref:
      - 'Ref A: 7F3129BDD1B74C3699BED0E4478129E0 Ref B: MAA201060513031 Ref C: 2024-03-25T09:27:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Compute/locations/eastus2euap/publishers/Canonical/artifacttypes/vmimage/offers/UbuntuServer/skus/18.04-LTS/versions/18.04.202401161?api-version=2023-09-01
  response:
    body:
      string: "{\r\n  \"properties\": {\r\n    \"hyperVGeneration\": \"V1\",\r\n    \"architecture\":
        \"x64\",\r\n    \"replicaType\": \"Unmanaged\",\r\n    \"disallowed\": {\r\n
        \     \"vmDiskType\": \"None\"\r\n    },\r\n    \"automaticOSUpgradeProperties\":
        {\r\n      \"automaticOSUpgradeSupported\": true\r\n    },\r\n    \"imageDeprecationStatus\":
        {\r\n      \"imageState\": \"Active\"\r\n    },\r\n    \"features\": [\r\n
        \     {\r\n        \"name\": \"IsAcceleratedNetworkSupported\",\r\n        \"value\":
        \"True\"\r\n      },\r\n      {\r\n        \"name\": \"DiskControllerTypes\",\r\n
        \       \"value\": \"SCSI, NVMe\"\r\n      },\r\n      {\r\n        \"name\":
        \"IsHibernateSupported\",\r\n        \"value\": \"True\"\r\n      }\r\n    ],\r\n
        \   \"osDiskImage\": {\r\n      \"operatingSystem\": \"Linux\",\r\n      \"sizeInBytes\":
        32213303808\r\n    },\r\n    \"dataDiskImages\": []\r\n  },\r\n  \"location\":
        \"EastUS2EUAP\",\r\n  \"name\": \"18.04.202401161\",\r\n  \"id\": \"/Subscriptions/00000000-0000-0000-0000-000000000000/Providers/Microsoft.Compute/Locations/EastUS2EUAP/Publishers/Canonical/ArtifactTypes/VMImage/Offers/UbuntuServer/Skus/18.04-LTS/Versions/18.04.202401161\"\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1035'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetVMImageFromLocation3Min;12997,Microsoft.Compute/GetVMImageFromLocation30Min;73997
      x-msedge-ref:
      - 'Ref A: 3F3A067665C64A988D5B4ED2D0EE529A Ref B: MAA201060513031 Ref C: 2024-03-25T09:27:38Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "parameters": {}, "variables": {}, "resources":
      [{"name": "clitestvmss1000002VNET", "type": "Microsoft.Network/virtualNetworks",
      "location": "eastus2euap", "apiVersion": "2015-06-15", "dependsOn": [], "tags":
      {}, "properties": {"addressSpace": {"addressPrefixes": ["10.0.0.0/16"]}, "subnets":
      [{"name": "clitestvmss1000002Subnet", "properties": {"addressPrefix": "10.0.0.0/24"}}]}},
      {"apiVersion": "2022-01-01", "type": "Microsoft.Network/publicIPAddresses",
      "name": "clitestvmss1000002LBPublicIP", "location": "eastus2euap", "tags": {},
      "dependsOn": [], "properties": {"publicIPAllocationMethod": "Static"}, "sku":
      {"name": "Standard"}}, {"type": "Microsoft.Network/loadBalancers", "name": "clitestvmss1000002LB",
      "location": "eastus2euap", "tags": {}, "apiVersion": "2022-01-01", "dependsOn":
      ["Microsoft.Network/virtualNetworks/clitestvmss1000002VNET", "Microsoft.Network/publicIpAddresses/clitestvmss1000002LBPublicIP"],
      "properties": {"backendAddressPools": [{"name": "clitestvmss1000002LBBEPool"}],
      "frontendIPConfigurations": [{"name": "loadBalancerFrontEnd", "properties":
      {"publicIPAddress": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/publicIPAddresses/clitestvmss1000002LBPublicIP"}}}],
      "loadBalancingRules": [{"name": "LBRule", "properties": {"frontendIPConfiguration":
      {"id": "[concat(resourceId(''Microsoft.Network/loadBalancers'', ''clitestvmss1000002LB''),
      ''/frontendIPConfigurations/'', ''loadBalancerFrontEnd'')]"}, "backendAddressPool":
      {"id": "[concat(resourceId(''Microsoft.Network/loadBalancers'', ''clitestvmss1000002LB''),
      ''/backendAddressPools/'', ''clitestvmss1000002LBBEPool'')]"}, "protocol": "tcp",
      "frontendPort": 80, "backendPort": 80, "enableFloatingIP": false, "idleTimeoutInMinutes":
      5}}]}, "sku": {"name": "Standard"}}, {"type": "Microsoft.Network/networkSecurityGroups",
      "name": "clitestvmss1000002NSG", "apiVersion": "2015-06-15", "location": "eastus2euap",
      "tags": {}, "dependsOn": [], "properties": {"securityRules": [{"name": "default-allow-ssh",
      "properties": {"protocol": "Tcp", "sourcePortRange": "*", "destinationPortRange":
      "22", "sourceAddressPrefix": "*", "destinationAddressPrefix": "*", "access":
      "Allow", "priority": 1000, "direction": "Inbound"}}]}}, {"type": "Microsoft.Network/loadBalancers/inboundNatRules",
      "apiVersion": "2022-01-01", "name": "clitestvmss1000002LB/NatRule", "location":
      "eastus2euap", "properties": {"frontendIPConfiguration": {"id": "[concat(resourceId(''Microsoft.Network/loadBalancers'',
      ''clitestvmss1000002LB''), ''/frontendIPConfigurations/'', ''loadBalancerFrontEnd'')]"},
      "backendAddressPool": {"id": "[concat(resourceId(''Microsoft.Network/loadBalancers'',
      ''clitestvmss1000002LB''), ''/backendAddressPools/'', ''clitestvmss1000002LBBEPool'')]"},
      "backendPort": 22, "frontendPortRangeStart": "50000", "frontendPortRangeEnd":
      "50119", "protocol": "tcp", "idleTimeoutInMinutes": 5}, "dependsOn": ["[concat(''Microsoft.Network/loadBalancers/'',
      ''clitestvmss1000002LB'')]"]}, {"type": "Microsoft.Compute/virtualMachineScaleSets",
      "name": "clitestvmss1000002", "location": "eastus2euap", "tags": {}, "apiVersion":
      "2023-09-01", "dependsOn": ["Microsoft.Network/virtualNetworks/clitestvmss1000002VNET",
      "Microsoft.Network/loadBalancers/clitestvmss1000002LB", "Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG"],
      "properties": {"overprovision": true, "upgradePolicy": {"mode": "manual", "rollingUpgradePolicy":
      {}, "automaticOSUpgradePolicy": {}}, "singlePlacementGroup": null, "virtualMachineProfile":
      {"storageProfile": {"osDisk": {"createOption": "FromImage", "caching": "ReadWrite",
      "managedDisk": {"storageAccountType": null}}, "imageReference": {"publisher":
      "Canonical", "offer": "UbuntuServer", "sku": "18.04-LTS", "version": "latest"}},
      "osProfile": {"computerNamePrefix": "clite2ed3", "adminUsername": "sdk-test-admin",
      "linuxConfiguration": {"disablePasswordAuthentication": true, "ssh": {"publicKeys":
      [{"path": "/home/sdk-test-admin/.ssh/authorized_keys", "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDLq1sEri2RcnDg8tjo775iZUd5HVjAdQjSgky6ciJgrvPNUxZv9D65dL9GLllmDhq4Xv6SxbppUJhG0vl/VgaRRPyWRrHXgZRBl0c+H0A2X0Y7L/9sir1ezs2xv89+T03Y+KQYGyZa4xuxwlfdsl6YHjHGW97ONxyDfQesFkSdwyRI0RsnV0/GB8mRF32tgSwxqT8cpXjzjz7w4usgT52knfpyslFfZGRfTjamae/sZeezBTSfsvgryEMxxxXBvXC8/iiTxRG9cQxURK6t1VCeT6F7OmJhY2G+sPCXbkEyOjkfT18y/iUSyPEPVkoaO8Ab9eNPIUFBhRPapQlZ5YsQcIBrDmBb013lRdH82K6Q7Avp3x5liFwjQT96p5CIikl6MlJScZ6SK1dnqAEEPuBvz7vCKSsVaIxTeZhnpiX44cp87VGOR1Sqlus3s3C4NbRKU/a3023vmMV6t/F9SY94sFlWPs2q6ihRTmqV5oYZScJlGgp9voQ/9XStN+4pfAE=
      zhuyan@microsoft.com\n"}]}}}, "networkProfile": {"networkInterfaceConfigurations":
      [{"name": "clite2ed3Nic", "properties": {"ipConfigurations": [{"name": "clite2ed3IPConfig",
      "properties": {"subnet": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET/subnets/clitestvmss1000002Subnet"},
      "loadBalancerBackendAddressPools": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/backendAddressPools/clitestvmss1000002LBBEPool"}]}}],
      "networkSecurityGroup": {"id": "[resourceId(''Microsoft.Network/networkSecurityGroups'',
      ''clitestvmss1000002NSG'')]"}, "primary": "true"}}]}, "securityPostureReference":
      {"id": "/internal/Providers/Microsoft.Compute/galleries/SecurityPostureGallery-uiualhwjibht/securityPostures/VMSSUniformLinux/versions/1.0.0"}},
      "orchestrationMode": "Uniform"}, "sku": {"name": "Standard_DS1_v2", "capacity":
      2}}], "outputs": {"VMSS": {"type": "object", "value": "[reference(resourceId(''Microsoft.Compute/virtualMachineScaleSets'',
      ''clitestvmss1000002''),providers(''Microsoft.Compute'', ''virtualMachineScaleSets'').apiVersions[0])]"}}},
      "parameters": {}, "mode": "incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      Content-Length:
      - '6106'
      Content-Type:
      - application/json
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/vmss_deploy_npV5e4RR133yeTOVc5FkS5v9OwYD4NvU","name":"vmss_deploy_npV5e4RR133yeTOVc5FkS5v9OwYD4NvU","type":"Microsoft.Resources/deployments","properties":{"templateHash":"2659845625002683379","parameters":{},"mode":"Incremental","provisioningState":"Accepted","timestamp":"2024-03-25T09:27:52.2613536Z","duration":"PT0.0004319S","correlationId":"49d87d50-2136-448f-ad06-f80350dc85e2","providers":[{"namespace":"Microsoft.Network","resourceTypes":[{"resourceType":"virtualNetworks","locations":["eastus2euap"]},{"resourceType":"publicIPAddresses","locations":["eastus2euap"]},{"resourceType":"loadBalancers","locations":["eastus2euap"]},{"resourceType":"networkSecurityGroups","locations":["eastus2euap"]},{"resourceType":"loadBalancers/inboundNatRules","locations":["eastus2euap"]}]},{"namespace":"Microsoft.Compute","resourceTypes":[{"resourceType":"virtualMachineScaleSets","locations":["eastus2euap"]}]}],"dependencies":[{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET","resourceType":"Microsoft.Network/virtualNetworks","resourceName":"clitestvmss1000002VNET"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/publicIPAddresses/clitestvmss1000002LBPublicIP","resourceType":"Microsoft.Network/publicIPAddresses","resourceName":"clitestvmss1000002LBPublicIP"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"},{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/inboundNatRules/NatRule","resourceType":"Microsoft.Network/loadBalancers/inboundNatRules","resourceName":"clitestvmss1000002LB/NatRule"},{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET","resourceType":"Microsoft.Network/virtualNetworks","resourceName":"clitestvmss1000002VNET"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG","resourceType":"Microsoft.Network/networkSecurityGroups","resourceName":"clitestvmss1000002NSG"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Compute/virtualMachineScaleSets/clitestvmss1000002","resourceType":"Microsoft.Compute/virtualMachineScaleSets","resourceName":"clitestvmss1000002"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/vmss_deploy_npV5e4RR133yeTOVc5FkS5v9OwYD4NvU/operationStatuses/08584902480178193260?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '3720'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 2CBAED0A427C442295367B629D99857C Ref B: MAA201060513029 Ref C: 2024-03-25T09:27:39Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:27:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: F56E8B6062A6443F9AEF24B9155A1B2A Ref B: MAA201060513029 Ref C: 2024-03-25T09:27:55Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:28:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: B5A2A2747576459681C571D5A7BF4C8E Ref B: MAA201060513029 Ref C: 2024-03-25T09:28:28Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:29:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 98B6DB6A37EF4CBB92439D613EF81EC3 Ref B: MAA201060513029 Ref C: 2024-03-25T09:29:00Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:29:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: CA355B019492402085D3FD65EBB809E8 Ref B: MAA201060513029 Ref C: 2024-03-25T09:29:32Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:30:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 45C27164FF4A4A66BEA37DF8CF88CC66 Ref B: MAA201060513029 Ref C: 2024-03-25T09:30:05Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '20'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:30:39 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 2DBB6763D9DD4DDFA83008266B8B9C03 Ref B: MAA201060513029 Ref C: 2024-03-25T09:30:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902480178193260?api-version=2022-09-01
  response:
    body:
      string: '{"status":"Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:31:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 908B7315567E41EE835866CDEFC958A0 Ref B: MAA201060513029 Ref C: 2024-03-25T09:31:09Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss create
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n --image --admin-username --orchestration-mode --security-posture-reference-id
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Resources/deployments/vmss_deploy_npV5e4RR133yeTOVc5FkS5v9OwYD4NvU","name":"vmss_deploy_npV5e4RR133yeTOVc5FkS5v9OwYD4NvU","type":"Microsoft.Resources/deployments","properties":{"templateHash":"2659845625002683379","parameters":{},"mode":"Incremental","provisioningState":"Succeeded","timestamp":"2024-03-25T09:30:45.1099506Z","duration":"PT2M52.8490289S","correlationId":"49d87d50-2136-448f-ad06-f80350dc85e2","providers":[{"namespace":"Microsoft.Network","resourceTypes":[{"resourceType":"virtualNetworks","locations":["eastus2euap"]},{"resourceType":"publicIPAddresses","locations":["eastus2euap"]},{"resourceType":"loadBalancers","locations":["eastus2euap"]},{"resourceType":"networkSecurityGroups","locations":["eastus2euap"]},{"resourceType":"loadBalancers/inboundNatRules","locations":["eastus2euap"]}]},{"namespace":"Microsoft.Compute","resourceTypes":[{"resourceType":"virtualMachineScaleSets","locations":["eastus2euap"]}]}],"dependencies":[{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET","resourceType":"Microsoft.Network/virtualNetworks","resourceName":"clitestvmss1000002VNET"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/publicIPAddresses/clitestvmss1000002LBPublicIP","resourceType":"Microsoft.Network/publicIPAddresses","resourceName":"clitestvmss1000002LBPublicIP"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"},{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/inboundNatRules/NatRule","resourceType":"Microsoft.Network/loadBalancers/inboundNatRules","resourceName":"clitestvmss1000002LB/NatRule"},{"dependsOn":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET","resourceType":"Microsoft.Network/virtualNetworks","resourceName":"clitestvmss1000002VNET"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB","resourceType":"Microsoft.Network/loadBalancers","resourceName":"clitestvmss1000002LB"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG","resourceType":"Microsoft.Network/networkSecurityGroups","resourceName":"clitestvmss1000002NSG"}],"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Compute/virtualMachineScaleSets/clitestvmss1000002","resourceType":"Microsoft.Compute/virtualMachineScaleSets","resourceName":"clitestvmss1000002"}],"outputs":{"vmss":{"type":"Object","value":{"singlePlacementGroup":true,"orchestrationMode":"Uniform","upgradePolicy":{"mode":"Manual","rollingUpgradePolicy":{"maxBatchInstancePercent":20,"maxUnhealthyInstancePercent":20,"maxUnhealthyUpgradedInstancePercent":20,"pauseTimeBetweenBatches":"PT0S","maxSurge":false,"rollbackFailedInstancesOnPolicyBreach":false},"automaticOSUpgradePolicy":{"enableAutomaticOSUpgrade":true,"useRollingUpgradePolicy":false,"disableAutomaticRollback":false}},"virtualMachineProfile":{"osProfile":{"computerNamePrefix":"clite2ed3","adminUsername":"sdk-test-admin","linuxConfiguration":{"disablePasswordAuthentication":true,"ssh":{"publicKeys":[{"path":"/home/sdk-test-admin/.ssh/authorized_keys","keyData":"ssh-rsa
        AAAAB3NzaC1yc2EAAAADAQABAAABgQDLq1sEri2RcnDg8tjo775iZUd5HVjAdQjSgky6ciJgrvPNUxZv9D65dL9GLllmDhq4Xv6SxbppUJhG0vl/VgaRRPyWRrHXgZRBl0c+H0A2X0Y7L/9sir1ezs2xv89+T03Y+KQYGyZa4xuxwlfdsl6YHjHGW97ONxyDfQesFkSdwyRI0RsnV0/GB8mRF32tgSwxqT8cpXjzjz7w4usgT52knfpyslFfZGRfTjamae/sZeezBTSfsvgryEMxxxXBvXC8/iiTxRG9cQxURK6t1VCeT6F7OmJhY2G+sPCXbkEyOjkfT18y/iUSyPEPVkoaO8Ab9eNPIUFBhRPapQlZ5YsQcIBrDmBb013lRdH82K6Q7Avp3x5liFwjQT96p5CIikl6MlJScZ6SK1dnqAEEPuBvz7vCKSsVaIxTeZhnpiX44cp87VGOR1Sqlus3s3C4NbRKU/a3023vmMV6t/F9SY94sFlWPs2q6ihRTmqV5oYZScJlGgp9voQ/9XStN+4pfAE=
        zhuyan@microsoft.com\n"}]},"provisionVMAgent":true,"enableVMAgentPlatformUpdates":false},"secrets":[],"allowExtensionOperations":true,"requireGuestProvisionSignal":true},"storageProfile":{"osDisk":{"osType":"Linux","createOption":"FromImage","caching":"ReadWrite","managedDisk":{"storageAccountType":"Premium_LRS"},"diskSizeGB":30},"imageReference":{"publisher":"Canonical","offer":"UbuntuServer","sku":"18.04-LTS","version":"latest"}},"networkProfile":{"networkInterfaceConfigurations":[{"name":"clite2ed3Nic","properties":{"primary":true,"disableTcpStateTracking":false,"networkSecurityGroup":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG"},"dnsSettings":{"dnsServers":[]},"enableIPForwarding":false,"ipConfigurations":[{"name":"clite2ed3IPConfig","properties":{"subnet":{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET/subnets/clitestvmss1000002Subnet"},"privateIPAddressVersion":"IPv4","loadBalancerBackendAddressPools":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/backendAddressPools/clitestvmss1000002LBBEPool"}]}}]}}]},"diagnosticsProfile":{"bootDiagnostics":{"enabled":true}},"extensionProfile":{"extensions":[{"name":"e2eApplicationHealth","properties":{"autoUpgradeMinorVersion":true,"enableAutomaticUpgrade":false,"publisher":"Microsoft.ManagedServices","type":"ApplicationHealthLinux","typeHandlerVersion":"2.0","settings":{"protocol":"tcp","port":80}}},{"name":"e2eGuestAttestation","properties":{"autoUpgradeMinorVersion":true,"enableAutomaticUpgrade":false,"publisher":"Microsoft.Azure.Security.LinuxAttestation","type":"GuestAttestation","typeHandlerVersion":"1.0","settings":{}}},{"name":"e2eGuestConfiguration","properties":{"autoUpgradeMinorVersion":true,"enableAutomaticUpgrade":false,"publisher":"Microsoft.GuestConfiguration","type":"ConfigurationForLinux","typeHandlerVersion":"1.0","settings":{}}},{"name":"e2eSecurityAgent","properties":{"autoUpgradeMinorVersion":true,"enableAutomaticUpgrade":false,"publisher":"Microsoft.Azure.Security.Monitoring","type":"AzureSecurityLinuxAgent","typeHandlerVersion":"2.0","settings":{}}}]},"securityProfile":{"encryptionAtHost":true},"securityPostureReference":{"id":"/internal/Providers/Microsoft.Compute/galleries/SecurityPostureGallery-uiualhwjibht/securityPostures/VMSSUniformLinux/versions/1.0.0"},"timeCreated":"2024-03-25T09:28:24.3458609+00:00"},"provisioningState":"Succeeded","overprovision":true,"doNotRunExtensionsOnOverprovisionedVMs":false,"uniqueId":"456141b4-95ed-4a5d-8145-2fddd1973ecc","platformFaultDomainCount":5,"timeCreated":"2024-03-25T09:28:24.3458609+00:00"}}},"outputResources":[{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Compute/virtualMachineScaleSets/clitestvmss1000002"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/inboundNatRules/NatRule"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/publicIPAddresses/clitestvmss1000002LBPublicIP"},{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '9187'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:31:14 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: D636C4E1B0EA4C069D6020EE82EF10F9 Ref B: MAA201060513029 Ref C: 2024-03-25T09:31:12Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - vmss show
      Connection:
      - keep-alive
      ParameterSetName:
      - -g -n
      User-Agent:
      - AZURECLI/2.58.0 azsdk-python-core/1.28.0 Python/3.9.13 (Windows-10-10.0.22631-SP0)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Compute/virtualMachineScaleSets/clitestvmss1000002?api-version=2023-09-01
  response:
    body:
      string: "{\r\n  \"name\": \"clitestvmss1000002\",\r\n  \"id\": \"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Compute/virtualMachineScaleSets/clitestvmss1000002\",\r\n
        \ \"type\": \"Microsoft.Compute/virtualMachineScaleSets\",\r\n  \"location\":
        \"eastus2euap\",\r\n  \"tags\": {},\r\n  \"sku\": {\r\n    \"name\": \"Standard_DS1_v2\",\r\n
        \   \"tier\": \"Standard\",\r\n    \"capacity\": 2\r\n  },\r\n  \"properties\":
        {\r\n    \"singlePlacementGroup\": true,\r\n    \"orchestrationMode\": \"Uniform\",\r\n
        \   \"upgradePolicy\": {\r\n      \"mode\": \"Manual\",\r\n      \"rollingUpgradePolicy\":
        {\r\n        \"maxBatchInstancePercent\": 20,\r\n        \"maxUnhealthyInstancePercent\":
        20,\r\n        \"maxUnhealthyUpgradedInstancePercent\": 20,\r\n        \"pauseTimeBetweenBatches\":
        \"PT0S\",\r\n        \"maxSurge\": false,\r\n        \"rollbackFailedInstancesOnPolicyBreach\":
        false\r\n      },\r\n      \"automaticOSUpgradePolicy\": {\r\n        \"enableAutomaticOSUpgrade\":
        true,\r\n        \"useRollingUpgradePolicy\": false,\r\n        \"disableAutomaticRollback\":
        false\r\n      }\r\n    },\r\n    \"virtualMachineProfile\": {\r\n      \"osProfile\":
        {\r\n        \"computerNamePrefix\": \"clite2ed3\",\r\n        \"adminUsername\":
        \"sdk-test-admin\",\r\n        \"linuxConfiguration\": {\r\n          \"disablePasswordAuthentication\":
        true,\r\n          \"ssh\": {\r\n            \"publicKeys\": [\r\n              {\r\n
        \               \"path\": \"/home/sdk-test-admin/.ssh/authorized_keys\",\r\n
        \               \"keyData\": \"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDLq1sEri2RcnDg8tjo775iZUd5HVjAdQjSgky6ciJgrvPNUxZv9D65dL9GLllmDhq4Xv6SxbppUJhG0vl/VgaRRPyWRrHXgZRBl0c+H0A2X0Y7L/9sir1ezs2xv89+T03Y+KQYGyZa4xuxwlfdsl6YHjHGW97ONxyDfQesFkSdwyRI0RsnV0/GB8mRF32tgSwxqT8cpXjzjz7w4usgT52knfpyslFfZGRfTjamae/sZeezBTSfsvgryEMxxxXBvXC8/iiTxRG9cQxURK6t1VCeT6F7OmJhY2G+sPCXbkEyOjkfT18y/iUSyPEPVkoaO8Ab9eNPIUFBhRPapQlZ5YsQcIBrDmBb013lRdH82K6Q7Avp3x5liFwjQT96p5CIikl6MlJScZ6SK1dnqAEEPuBvz7vCKSsVaIxTeZhnpiX44cp87VGOR1Sqlus3s3C4NbRKU/a3023vmMV6t/F9SY94sFlWPs2q6ihRTmqV5oYZScJlGgp9voQ/9XStN+4pfAE=
        zhuyan@microsoft.com\\n\"\r\n              }\r\n            ]\r\n          },\r\n
        \         \"provisionVMAgent\": true,\r\n          \"enableVMAgentPlatformUpdates\":
        false\r\n        },\r\n        \"secrets\": [],\r\n        \"allowExtensionOperations\":
        true,\r\n        \"requireGuestProvisionSignal\": true\r\n      },\r\n      \"storageProfile\":
        {\r\n        \"osDisk\": {\r\n          \"osType\": \"Linux\",\r\n          \"createOption\":
        \"FromImage\",\r\n          \"caching\": \"ReadWrite\",\r\n          \"managedDisk\":
        {\r\n            \"storageAccountType\": \"Premium_LRS\"\r\n          },\r\n
        \         \"diskSizeGB\": 30\r\n        },\r\n        \"imageReference\":
        {\r\n          \"publisher\": \"Canonical\",\r\n          \"offer\": \"UbuntuServer\",\r\n
        \         \"sku\": \"18.04-LTS\",\r\n          \"version\": \"latest\"\r\n
        \       }\r\n      },\r\n      \"networkProfile\": {\"networkInterfaceConfigurations\":[{\"name\":\"clite2ed3Nic\",\"properties\":{\"primary\":true,\"disableTcpStateTracking\":false,\"networkSecurityGroup\":{\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/networkSecurityGroups/clitestvmss1000002NSG\"},\"dnsSettings\":{\"dnsServers\":[]},\"enableIPForwarding\":false,\"ipConfigurations\":[{\"name\":\"clite2ed3IPConfig\",\"properties\":{\"subnet\":{\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/virtualNetworks/clitestvmss1000002VNET/subnets/clitestvmss1000002Subnet\"},\"privateIPAddressVersion\":\"IPv4\",\"loadBalancerBackendAddressPools\":[{\"id\":\"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vmss_security_posture_reference_000001/providers/Microsoft.Network/loadBalancers/clitestvmss1000002LB/backendAddressPools/clitestvmss1000002LBBEPool\"}]}}]}}]},\r\n
        \     \"diagnosticsProfile\": {\r\n        \"bootDiagnostics\": {\r\n          \"enabled\":
        true\r\n        }\r\n      },\r\n      \"extensionProfile\": {\r\n        \"extensions\":
        [\r\n          {\r\n            \"name\": \"e2eApplicationHealth\",\r\n            \"properties\":
        {\r\n              \"autoUpgradeMinorVersion\": true,\r\n              \"enableAutomaticUpgrade\":
        false,\r\n              \"publisher\": \"Microsoft.ManagedServices\",\r\n
        \             \"type\": \"ApplicationHealthLinux\",\r\n              \"typeHandlerVersion\":
        \"2.0\",\r\n              \"settings\": {\"protocol\":\"tcp\",\"port\":80}\r\n
        \           }\r\n          },\r\n          {\r\n            \"name\": \"e2eGuestAttestation\",\r\n
        \           \"properties\": {\r\n              \"autoUpgradeMinorVersion\":
        true,\r\n              \"enableAutomaticUpgrade\": false,\r\n              \"publisher\":
        \"Microsoft.Azure.Security.LinuxAttestation\",\r\n              \"type\":
        \"GuestAttestation\",\r\n              \"typeHandlerVersion\": \"1.0\",\r\n
        \             \"settings\": {}\r\n            }\r\n          },\r\n          {\r\n
        \           \"name\": \"e2eGuestConfiguration\",\r\n            \"properties\":
        {\r\n              \"autoUpgradeMinorVersion\": true,\r\n              \"enableAutomaticUpgrade\":
        false,\r\n              \"publisher\": \"Microsoft.GuestConfiguration\",\r\n
        \             \"type\": \"ConfigurationForLinux\",\r\n              \"typeHandlerVersion\":
        \"1.0\",\r\n              \"settings\": {}\r\n            }\r\n          },\r\n
        \         {\r\n            \"name\": \"e2eSecurityAgent\",\r\n            \"properties\":
        {\r\n              \"autoUpgradeMinorVersion\": true,\r\n              \"enableAutomaticUpgrade\":
        false,\r\n              \"publisher\": \"Microsoft.Azure.Security.Monitoring\",\r\n
        \             \"type\": \"AzureSecurityLinuxAgent\",\r\n              \"typeHandlerVersion\":
        \"2.0\",\r\n              \"settings\": {}\r\n            }\r\n          }\r\n
        \       ]\r\n      },\r\n      \"securityProfile\": {\r\n        \"encryptionAtHost\":
        true\r\n      },\r\n      \"securityPostureReference\": {\r\n        \"id\":
        \"/internal/Providers/Microsoft.Compute/galleries/SecurityPostureGallery-uiualhwjibht/securityPostures/VMSSUniformLinux/versions/1.0.0\"\r\n
        \     },\r\n      \"timeCreated\": \"2024-03-25T09:28:24.3458609+00:00\"\r\n
        \   },\r\n    \"provisioningState\": \"Succeeded\",\r\n    \"overprovision\":
        true,\r\n    \"doNotRunExtensionsOnOverprovisionedVMs\": false,\r\n    \"uniqueId\":
        \"456141b4-95ed-4a5d-8145-2fddd1973ecc\",\r\n    \"platformFaultDomainCount\":
        5,\r\n    \"timeCreated\": \"2024-03-25T09:28:24.3458609+00:00\"\r\n  }\r\n}"
    headers:
      cache-control:
      - no-cache
      content-length:
      - '6196'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 09:31:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-resource:
      - Microsoft.Compute/GetVMScaleSetSubscriptionMaximum;2394,Microsoft.Compute/GetVMScaleSetResource;30
      x-msedge-ref:
      - 'Ref A: 300B135F622C4E8593FED08FF0225DF4 Ref B: MAA201060514027 Ref C: 2024-03-25T09:31:15Z'
    status:
      code: 200
      message: ''
version: 1
