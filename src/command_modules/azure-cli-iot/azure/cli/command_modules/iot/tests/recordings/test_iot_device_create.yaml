interactions:
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikk2b0J3NFZ6QkhPcWxlR3JWMkFKZEE1RW1YYyIsImtpZCI6Ikk2b0J3NFZ6QkhPcWxlR3JWMkFKZEE1RW1YYyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNDc0NTQwOTU4LCJuYmYiOjE0NzQ1NDA5NTgsImV4cCI6MTQ3NDU0NDg1OCwiX2NsYWltX25hbWVzIjp7Imdyb3VwcyI6InNyYzEifSwiX2NsYWltX3NvdXJjZXMiOnsic3JjMSI6eyJlbmRwb2ludCI6Imh0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3L3VzZXJzLzg2N2ZiOWQwLTE0MzEtNDFjNy05NmUyLTgzNWVhNjNkNjJlMi9nZXRNZW1iZXJPYmplY3RzIn19LCJhY3IiOiIxIiwiYW1yIjpbInB3ZCIsIm1mYSJdLCJhcHBpZCI6IjA0YjA3Nzk1LThkZGItNDYxYS1iYmVlLTAyZjllMWJmN2I0NiIsImFwcGlkYWNyIjoiMCIsImVfZXhwIjoxMDgwMCwiZmFtaWx5X25hbWUiOiJaaGFvIiwiZ2l2ZW5fbmFtZSI6IktldmluIiwiaW5fY29ycCI6InRydWUiLCJpcGFkZHIiOiIxNjcuMjIwLjI1NS40NiIsIm5hbWUiOiJLZXZpbiBaaGFvIiwib2lkIjoiODY3ZmI5ZDAtMTQzMS00MWM3LTk2ZTItODM1ZWE2M2Q2MmUyIiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTIxNDY3NzMwODUtOTAzMzYzMjg1LTcxOTM0NDcwNy0xOTYzNTcyIiwicHVpZCI6IjEwMDMwMDAwOTBGRUNDQ0UiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJCTEc1SmxRcURabFdZNEM4QkpnNmZJcXRNelFxZ1ZVZllXemJPNjZvbFB3IiwidGlkIjoiNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3IiwidW5pcXVlX25hbWUiOiJrZXZpbnpoYUBtaWNyb3NvZnQuY29tIiwidXBuIjoia2V2aW56aGFAbWljcm9zb2Z0LmNvbSIsInZlciI6IjEuMCJ9.IqL9J10XEacK6xbBUy6JA-FIwDBbgsJyowECV-_5OVdvCI6oxYw6cXE8Xqj3tWXZH0Dl7Vfh6hTBbFstX4v3SqV4fJpiokn9JNXBCRHLXU6EsPL4RLAdrmLpPY9UjfJlvdEcZe_jL3abB8yVLDYll8HeA4evEyW71SfIc6Vhte1mriEBL2fpN_TjjyZdN9fwrdOHmmIzTYNSYp4KSGfu2UrM1laTuNeW0AmNYlBoUphG2DwrPbA9VCRVUS5vPJdW4JxTeCRyMYBNp_e1BID-JvkMSNJJkmUdPMFtY-4WmJFLqEGqeDRM8DS_t9hU5-dAWPXvCOUS1Tlb5_UmZDGDhg]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.3 msrest_azure/0.4.2
          iothubclient/0.1.0 Azure-SDK-For-Python AZURECLI/TEST/0.1.0b4]
      accept-language: [en-US]
      x-ms-client-request-id: [4754a7ba-80b4-11e6-b9a9-40a8f04ffd53]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/iot-hub-test-rg/providers/Microsoft.Devices/IotHubs/iot-hub-for-testing/listkeys?api-version=2016-02-03
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9X/zR2/z6Rbag3z8qqna+nlRXy7z+aPTRqi4WWX39e+XX9NXLg5328/vlT//eX327/fz3
        uZ5+Ur289/nJcfaDVye/6GC285Nftd/Zf/V5/bpe739G7zb5tFrO7NvT3+uk/X0uL56+uD9dv73Y
        +fTq9Cc/ab/6wS/65Pqri9/n9Pr829XdbL/8iZdfFQ3erouLedvQe6/yi6Jp6+vv1kWbj9LXeX1Z
        TPOTarnMp+0ofZp7f370S0b+WBppS9CCcZz+1Pr03r2Tpw92vv3563sv7k7Ofq/mbr06+InXp29P
        muu7v9fv9dP12/rbF8ur2Dj2f9HkWbF4vbpsD757cvbTp5c/9er3ef7qp6rV/re/ff7TxSfry6/y
        ZfOTrx4cn+FtO44Q8Q6mMx4FNQ8Q/eQXLb6z2rt8Pvnyu7/o5c5PfXp3fVpm2dOHk4s3V/l3lvXu
        wfHL6afZT50vdtBVB9Ev312+WJ2v8ofTtz/1xXI2edj8Pj/x01/ce7b7+7Sz5+9OruqTJ7/3Tx1/
        8mk552FaRDdRtNbJeJVnM3onwPbB7/X6oD14cPx7XX++bKa/aH/y7sXr8tM3P3X/ze7O8evf+9vf
        /cF5Vmdv19nrKfrrYPvTnx6cZ7vnn/5eP3m3Ktr2Bz/95XrvzfOfPHvb/uAnf/rd2/yLe/ffnbx9
        dnn35Au8bbE17MEYDSPL3EPvBRjfO/up3+v16rtX1cF33vw+pz84P/1qvTy+9+Ld/asHn6zv/94P
        fvLkYZnvHb/8tPkJ9NnBePHgrP32L5q8+71/av2Tq/z15cmL+qfvH/yiN59+uvfs3c53V1/+xIPL
        u8e/6Pc+XXyFt3sYC0q/5Pu/5P8B+EWhZYkDAAA=
    headers:
      Cache-Control: [no-cache]
      Content-Encoding: [gzip]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 22 Sep 2016 11:04:07 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-HTTPAPI/2.0]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Vary: [Accept-Encoding]
      x-ms-ratelimit-remaining-subscription-writes: ['1195']
    status: {code: 200, message: OK}
- request:
    body: !!binary |
      eyJkZXZpY2VJZCI6ICJpb3QtZGV2aWNlLWZvci10ZXN0In0=
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [SharedAccessSignature sig=snOQqcR9M8t5VOjGul1jFZbs17tyyUt%2F55SOy9C9ubA%3D&sr=iot-hub-for-testing.azure-devices.net%252fdevices%252fiot-device-for-test&se=1474545848&skn=iothubowner]
      Connection: [keep-alive]
      Content-Length: ['35']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.3 msrest_azure/0.4.2
          iothubdeviceclient/2016-02-03 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [488ca7b8-80b4-11e6-8df9-40a8f04ffd53]
    method: PUT
    uri: https://iot-hub-for-testing.azure-devices.net/devices/iot-device-for-test?api-version=2016-02-03
  response:
    body: {string: '{"deviceId":"iot-device-for-test","generationId":"636101390486934815","etag":"MA==","connectionState":"Disconnected","status":"enabled","statusReason":null,"connectionStateUpdatedTime":"0001-01-01T00:00:00","statusUpdatedTime":"0001-01-01T00:00:00","lastActivityTime":"0001-01-01T00:00:00","cloudToDeviceMessageCount":0,"authentication":{"symmetricKey":{"primaryKey":"fj6CZB/IrYJI3BOk8X0tzfABo/tsYZJ9boOr4SeG5YU=","secondaryKey":"17Gwmp1PLmw2mPjae7H0WZf7K75ZRYjCt+FL5y89ph4="},"x509Thumbprint":null},"isManaged":false,"deviceProperties":null,"configuration":null,"serviceProperties":null,"lastServicePropertiesUpdatedTime":"0001-01-01T00:00:00","lastDevicePropertiesUpdatedTime":"0001-01-01T00:00:00"}'}
    headers:
      Content-Length: ['701']
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 22 Sep 2016 11:04:08 GMT']
      ETag: ['"MA=="']
      Server: [Microsoft-HTTPAPI/2.0]
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikk2b0J3NFZ6QkhPcWxlR3JWMkFKZEE1RW1YYyIsImtpZCI6Ikk2b0J3NFZ6QkhPcWxlR3JWMkFKZEE1RW1YYyJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNDc0NTQwOTU4LCJuYmYiOjE0NzQ1NDA5NTgsImV4cCI6MTQ3NDU0NDg1OCwiX2NsYWltX25hbWVzIjp7Imdyb3VwcyI6InNyYzEifSwiX2NsYWltX3NvdXJjZXMiOnsic3JjMSI6eyJlbmRwb2ludCI6Imh0dHBzOi8vZ3JhcGgud2luZG93cy5uZXQvNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3L3VzZXJzLzg2N2ZiOWQwLTE0MzEtNDFjNy05NmUyLTgzNWVhNjNkNjJlMi9nZXRNZW1iZXJPYmplY3RzIn19LCJhY3IiOiIxIiwiYW1yIjpbInB3ZCIsIm1mYSJdLCJhcHBpZCI6IjA0YjA3Nzk1LThkZGItNDYxYS1iYmVlLTAyZjllMWJmN2I0NiIsImFwcGlkYWNyIjoiMCIsImVfZXhwIjoxMDgwMCwiZmFtaWx5X25hbWUiOiJaaGFvIiwiZ2l2ZW5fbmFtZSI6IktldmluIiwiaW5fY29ycCI6InRydWUiLCJpcGFkZHIiOiIxNjcuMjIwLjI1NS40NiIsIm5hbWUiOiJLZXZpbiBaaGFvIiwib2lkIjoiODY3ZmI5ZDAtMTQzMS00MWM3LTk2ZTItODM1ZWE2M2Q2MmUyIiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTIxNDY3NzMwODUtOTAzMzYzMjg1LTcxOTM0NDcwNy0xOTYzNTcyIiwicHVpZCI6IjEwMDMwMDAwOTBGRUNDQ0UiLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJCTEc1SmxRcURabFdZNEM4QkpnNmZJcXRNelFxZ1ZVZllXemJPNjZvbFB3IiwidGlkIjoiNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3IiwidW5pcXVlX25hbWUiOiJrZXZpbnpoYUBtaWNyb3NvZnQuY29tIiwidXBuIjoia2V2aW56aGFAbWljcm9zb2Z0LmNvbSIsInZlciI6IjEuMCJ9.IqL9J10XEacK6xbBUy6JA-FIwDBbgsJyowECV-_5OVdvCI6oxYw6cXE8Xqj3tWXZH0Dl7Vfh6hTBbFstX4v3SqV4fJpiokn9JNXBCRHLXU6EsPL4RLAdrmLpPY9UjfJlvdEcZe_jL3abB8yVLDYll8HeA4evEyW71SfIc6Vhte1mriEBL2fpN_TjjyZdN9fwrdOHmmIzTYNSYp4KSGfu2UrM1laTuNeW0AmNYlBoUphG2DwrPbA9VCRVUS5vPJdW4JxTeCRyMYBNp_e1BID-JvkMSNJJkmUdPMFtY-4WmJFLqEGqeDRM8DS_t9hU5-dAWPXvCOUS1Tlb5_UmZDGDhg]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.3 msrest_azure/0.4.2
          iothubclient/0.1.0 Azure-SDK-For-Python AZURECLI/TEST/0.1.0b4]
      accept-language: [en-US]
      x-ms-client-request-id: [4954a642-80b4-11e6-a0a1-40a8f04ffd53]
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/iot-hub-test-rg/providers/Microsoft.Devices/IotHubs/iot-hub-for-testing/listkeys?api-version=2016-02-03
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAEAO29B2AcSZYlJi9tynt/SvVK1+B0oQiAYBMk2JBAEOzBiM3mkuwdaUcjKasqgcpl
        VmVdZhZAzO2dvPfee++999577733ujudTif33/8/XGZkAWz2zkrayZ4hgKrIHz9+fB8/In7xR5dZ
        uc4/evS9X/zR2/z6Rbag3z8qqna+nlRXy7z+aPTRqi4WWX39e+XX9NXLg5328/vlT//eX327/fz3
        uZ5+Ur289/nJcfaDVye/6GC285Nftd/Zf/V5/bpe739G7zb5tFrO7NvT3+uk/X0uL56+uD9dv73Y
        +fTq9Cc/ab/6wS/65Pqri9/n9Pr829XdbL/8iZdfFQ3erouLedvQe6/yi6Jp6+vv1kWbj9LXeX1Z
        TPOTarnMp+0ofZp7f370S0b+WBppS9CCcZz+1Pr03r2Tpw92vv3563sv7k7Ofq/mbr06+InXp29P
        muu7v9fv9dP12/rbF8ur2Dj2f9HkWbF4vbpsD757cvbTp5c/9er3ef7qp6rV/re/ff7TxSfry6/y
        ZfOTrx4cn+FtO44Q8Q6mMx4FNQ8Q/eQXLb6z2rt8Pvnyu7/o5c5PfXp3fVpm2dOHk4s3V/l3lvXu
        wfHL6afZT50vdtBVB9Ev312+WJ2v8ofTtz/1xXI2edj8Pj/x01/ce7b7+7Sz5+9OruqTJ7/3Tx1/
        8mk552FaRDdRtNbJeJVnM3onwPbB7/X6oD14cPx7XX++bKa/aH/y7sXr8tM3P3X/ze7O8evf+9vf
        /cF5Vmdv19nrKfrrYPvTnx6cZ7vnn/5eP3m3Ktr2Bz/95XrvzfOfPHvb/uAnf/rd2/yLe/ffnbx9
        dnn35Au8bbE17MEYDSPL3EPvBRjfO/up3+v16rtX1cF33vw+pz84P/1qvTy+9+Ld/asHn6zv/94P
        fvLkYZnvHb/8tPkJ9NnBePHgrP32L5q8+71/av2Tq/z15cmL+qfvH/yiN59+uvfs3c53V1/+xIPL
        u8e/6Pc+XXyFt3sYC0q/5Pu/5P8B+EWhZYkDAAA=
    headers:
      Cache-Control: [no-cache]
      Content-Encoding: [gzip]
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 22 Sep 2016 11:04:09 GMT']
      Expires: ['-1']
      Pragma: [no-cache]
      Server: [Microsoft-HTTPAPI/2.0]
      Strict-Transport-Security: [max-age=31536000; includeSubDomains]
      Vary: [Accept-Encoding]
      x-ms-ratelimit-remaining-subscription-writes: ['1196']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      Authorization: [SharedAccessSignature sig=ZmrLqVjrnvnkla9uYAem5T7WEumnZgeUEb0JA8PyHsI%3D&sr=iot-hub-for-testing.azure-devices.net%252fdevices%252fiot-device-for-test&se=1474545850&skn=iothubowner]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.0 (Windows-10.0.14393) requests/2.9.1 msrest/0.4.3 msrest_azure/0.4.2
          iothubdeviceclient/2016-02-03 Azure-SDK-For-Python]
      accept-language: [en-US]
      x-ms-client-request-id: [49bae140-80b4-11e6-94e1-40a8f04ffd53]
    method: GET
    uri: https://iot-hub-for-testing.azure-devices.net/devices/iot-device-for-test?api-version=2016-02-03
  response:
    body: {string: '{"deviceId":"iot-device-for-test","generationId":"636101390486934815","etag":"MA==","connectionState":"Disconnected","status":"enabled","statusReason":null,"connectionStateUpdatedTime":"0001-01-01T00:00:00","statusUpdatedTime":"0001-01-01T00:00:00","lastActivityTime":"0001-01-01T00:00:00","cloudToDeviceMessageCount":0,"authentication":{"symmetricKey":{"primaryKey":"fj6CZB/IrYJI3BOk8X0tzfABo/tsYZJ9boOr4SeG5YU=","secondaryKey":"17Gwmp1PLmw2mPjae7H0WZf7K75ZRYjCt+FL5y89ph4="},"x509Thumbprint":null},"isManaged":false,"deviceProperties":null,"configuration":null,"serviceProperties":null,"lastServicePropertiesUpdatedTime":"0001-01-01T00:00:00","lastDevicePropertiesUpdatedTime":"0001-01-01T00:00:00"}'}
    headers:
      Content-Length: ['701']
      Content-Type: [application/json; charset=utf-8]
      Date: ['Thu, 22 Sep 2016 11:04:09 GMT']
      ETag: ['"MA=="']
      Server: [Microsoft-HTTPAPI/2.0]
    status: {code: 200, message: OK}
version: 1
