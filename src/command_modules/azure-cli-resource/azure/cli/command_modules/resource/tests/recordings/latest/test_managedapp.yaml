interactions:
- request:
    body: '{"tags": {"use": "az-test"}, "location": "westus"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group create]
      Connection: [keep-alive]
      Content-Length: ['50']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 resourcemanagementclient/1.2.1 Azure-SDK-For-Python
          AZURECLI/2.0.23]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2017-05-10
  response:
    body: {string: '{"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001","name":"clitest.rg000001","location":"westus","tags":{"use":"az-test"},"properties":{"provisioningState":"Succeeded"}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['328']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:40:54 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 201, message: Created}
- request:
    body: '{"properties": {"authorizations": [{"roleDefinitionId": "8e3af657-a8ff-443c-a75c-2fe8c4bcb635",
      "principalId": "5e91139a-c94b-462e-a6ff-1ee95e8aac07"}], "displayName": "test_appdef_123",
      "packageFileUri": "https://wud.blob.core.windows.net/appliance/SingleStorageAccount.zip",
      "description": "test_appdef_123", "lockLevel": "None"}, "location": "westcentralus"}'
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [managedapp definition create]
      Connection: [keep-alive]
      Content-Length: ['361']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 applicationclient/2017-09-01 Azure-SDK-For-Python AZURECLI/2.0.23]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname?api-version=2017-09-01
  response:
    body: {string: '{"properties":{"isEnabled":true,"lockLevel":"None","displayName":"test_appdef_123","description":"test_appdef_123","authorizations":[{"principalId":"5e91139a-c94b-462e-a6ff-1ee95e8aac07","roleDefinitionId":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}],"artifacts":[{"name":"ApplicationResourceTemplate","type":"Template","uri":"https://prdsapplianceprodcy01.blob.core.windows.net/applicationdefinitions/8C96E_0B1F64711BF04DDAAEC3CB9272F09590_CAA7EF2829F6E5FAC99C10193F893B736306E3CC/applicationResourceTemplate.json?sv=2014-02-14&sr=b&sig=1g4eYZq1rlUAeWM37WzKkp1o%2BTfZbJWdQYzctT0ZDYY%3D&se=2117-12-15T00:40:56Z&sp=r"},{"name":"CreateUiDefinition","type":"Custom","uri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname/applicationArtifacts/CreateUiDefinition?api-version=2017-09-01"}]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname","name":"testappdefname","type":"Microsoft.Solutions/applicationDefinitions","location":"westcentralus"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1293']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:40:56 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [managedapp definition create]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 applicationclient/2017-09-01 Azure-SDK-For-Python AZURECLI/2.0.23]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname?api-version=2017-09-01
  response:
    body: {string: '{"properties":{"isEnabled":true,"lockLevel":"None","displayName":"test_appdef_123","description":"test_appdef_123","authorizations":[{"principalId":"5e91139a-c94b-462e-a6ff-1ee95e8aac07","roleDefinitionId":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}],"artifacts":[{"name":"ApplicationResourceTemplate","type":"Template","uri":"https://prdsapplianceprodcy01.blob.core.windows.net/applicationdefinitions/8C96E_0B1F64711BF04DDAAEC3CB9272F09590_CAA7EF2829F6E5FAC99C10193F893B736306E3CC/applicationResourceTemplate.json?sv=2014-02-14&sr=b&sig=1g4eYZq1rlUAeWM37WzKkp1o%2BTfZbJWdQYzctT0ZDYY%3D&se=2117-12-15T00:40:56Z&sp=r"},{"name":"CreateUiDefinition","type":"Custom","uri":"https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname/applicationArtifacts/CreateUiDefinition?api-version=2017-09-01"}]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname","name":"testappdefname","type":"Microsoft.Solutions/applicationDefinitions","location":"westcentralus"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['1293']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:41:27 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
    status: {code: 200, message: OK}
- request:
    body: 'b''b\''{"properties": {"applicationDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname",
      "managedResourceGroupId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/climanagedapp000002"},
      "kind": "servicecatalog", "location": "westcentralus"}\'''''
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [managedapp create]
      Connection: [keep-alive]
      Content-Length: ['434']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 applicationclient/2017-09-01 Azure-SDK-For-Python AZURECLI/2.0.23]
      accept-language: [en-US]
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applications/mymanagedapp?api-version=2017-09-01
  response:
    body: {string: '{"properties":{"managedResourceGroupId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/climanagedapp000002","applicationDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname","publisherPackageId":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applicationDefinitions/testappdefname","provisioningState":"Accepted","uiDefinitionUri":"https://prdsapplianceprodcy01.blob.core.windows.net/applicationdefinitions/8C96E_0B1F64711BF04DDAAEC3CB9272F09590_CAA7EF2829F6E5FAC99C10193F893B736306E3CC/createUiDefinition.json?sv=2014-02-14&sr=b&sig=3jATI%2FcnuluwjKp9vYbS8TJdg%2FayJHbjCo2P7PvIfGM%3D&se=2117-12-15T00:40:56Z&sp=r","authorizations":[{"principalId":"5e91139a-c94b-462e-a6ff-1ee95e8aac07","roleDefinitionId":"8e3af657-a8ff-443c-a75c-2fe8c4bcb635"}]},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/applications/mymanagedapp","name":"mymanagedapp","type":"Microsoft.Solutions/applications","kind":"servicecatalog","location":"westcentralus"}'}
    headers:
      azure-asyncoperation: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/locations/westcentralus/operationStatuses/eyJvcGVyYXRpb25OYW1lIjoiTWljcm9zb2Z0LlNvbHV0aW9ucy9hcHBsaWNhdGlvbnMvd3JpdGUiLCJqb2JJZCI6IkFwcGxpYW5jZVByb3Zpc2lvbmluZ0pvYjoyRFJHQToyRENMSVRFU1Q6M0EyRVJHU1ZPUkk3SUo3QzdNWVBMUEY3QUZaUlZYN1czN09KSk5GM0U6N0NDMjc5N0YxNzVCMTFFQzA3OjJETVlNQU5BR0VEQVBQIiwiZnVsbHlRdWFsaWZpZWRBcHBsaWFuY2VJZCI6Ii9zdWJzY3JpcHRpb25zLzBiMWY2NDcxLTFiZjAtNGRkYS1hZWMzLWNiOTI3MmYwOTU5MC9yZXNvdXJjZUdyb3Vwcy9jbGl0ZXN0LnJnc3Zvcmk3aWo3YzdteXBscGY3YWZ6cnZ4N3czN29qam5mM2VxbnFzajM3Z2hobDRnNnVhczVpdzRnbWI1bnpqaTUvcHJvdmlkZXJzL01pY3Jvc29mdC5Tb2x1dGlvbnMvYXBwbGljYXRpb25zL215bWFuYWdlZGFwcCJ9?api-version=2017-09-01']
      cache-control: [no-cache]
      content-length: ['1395']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:41:28 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-ms-ratelimit-remaining-subscription-writes: ['1198']
    status: {code: 201, message: Created}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [managedapp create]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 applicationclient/2017-09-01 Azure-SDK-For-Python AZURECLI/2.0.23]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/locations/westcentralus/operationStatuses/eyJvcGVyYXRpb25OYW1lIjoiTWljcm9zb2Z0LlNvbHV0aW9ucy9hcHBsaWNhdGlvbnMvd3JpdGUiLCJqb2JJZCI6IkFwcGxpYW5jZVByb3Zpc2lvbmluZ0pvYjoyRFJHQToyRENMSVRFU1Q6M0EyRVJHU1ZPUkk3SUo3QzdNWVBMUEY3QUZaUlZYN1czN09KSk5GM0U6N0NDMjc5N0YxNzVCMTFFQzA3OjJETVlNQU5BR0VEQVBQIiwiZnVsbHlRdWFsaWZpZWRBcHBsaWFuY2VJZCI6Ii9zdWJzY3JpcHRpb25zLzBiMWY2NDcxLTFiZjAtNGRkYS1hZWMzLWNiOTI3MmYwOTU5MC9yZXNvdXJjZUdyb3Vwcy9jbGl0ZXN0LnJnc3Zvcmk3aWo3YzdteXBscGY3YWZ6cnZ4N3czN29qam5mM2VxbnFzajM3Z2hobDRnNnVhczVpdzRnbWI1bnpqaTUvcHJvdmlkZXJzL01pY3Jvc29mdC5Tb2x1dGlvbnMvYXBwbGljYXRpb25zL215bWFuYWdlZGFwcCJ9?api-version=2017-09-01
  response:
    body: {string: '{"status":"Accepted"}'}
    headers:
      cache-control: [no-cache]
      content-length: ['21']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:41:44 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
    status: {code: 202, message: Accepted}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [managedapp create]
      Connection: [keep-alive]
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 applicationclient/2017-09-01 Azure-SDK-For-Python AZURECLI/2.0.23]
      accept-language: [en-US]
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/clitest.rg000001/providers/Microsoft.Solutions/locations/westcentralus/operationStatuses/eyJvcGVyYXRpb25OYW1lIjoiTWljcm9zb2Z0LlNvbHV0aW9ucy9hcHBsaWNhdGlvbnMvd3JpdGUiLCJqb2JJZCI6IkFwcGxpYW5jZVByb3Zpc2lvbmluZ0pvYjoyRFJHQToyRENMSVRFU1Q6M0EyRVJHU1ZPUkk3SUo3QzdNWVBMUEY3QUZaUlZYN1czN09KSk5GM0U6N0NDMjc5N0YxNzVCMTFFQzA3OjJETVlNQU5BR0VEQVBQIiwiZnVsbHlRdWFsaWZpZWRBcHBsaWFuY2VJZCI6Ii9zdWJzY3JpcHRpb25zLzBiMWY2NDcxLTFiZjAtNGRkYS1hZWMzLWNiOTI3MmYwOTU5MC9yZXNvdXJjZUdyb3Vwcy9jbGl0ZXN0LnJnc3Zvcmk3aWo3YzdteXBscGY3YWZ6cnZ4N3czN29qam5mM2VxbnFzajM3Z2hobDRnNnVhczVpdzRnbWI1bnpqaTUvcHJvdmlkZXJzL01pY3Jvc29mdC5Tb2x1dGlvbnMvYXBwbGljYXRpb25zL215bWFuYWdlZGFwcCJ9?api-version=2017-09-01
  response:
    body: {string: '{"status":"Failed","error":{"code":"ApplianceProvisioningFailed","message":"Principal
        5e91139ac94b462ea6ff1ee95e8aac07 does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'}
    headers:
      cache-control: [no-cache]
      content-length: ['191']
      content-type: [application/json; charset=utf-8]
      date: ['Fri, 15 Dec 2017 00:42:14 GMT']
      expires: ['-1']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      transfer-encoding: [chunked]
      vary: ['Accept-Encoding,Accept-Encoding']
    status: {code: 200, message: OK}
- request:
    body: null
    headers:
      Accept: [application/json]
      Accept-Encoding: ['gzip, deflate']
      CommandName: [group delete]
      Connection: [keep-alive]
      Content-Length: ['0']
      Content-Type: [application/json; charset=utf-8]
      User-Agent: [python/3.5.3 (Windows-10-10.0.16299-SP0) requests/2.18.4 msrest/0.4.19
          msrest_azure/0.4.18 resourcemanagementclient/1.2.1 Azure-SDK-For-Python
          AZURECLI/2.0.23]
      accept-language: [en-US]
    method: DELETE
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/clitest.rg000001?api-version=2017-05-10
  response:
    body: {string: ''}
    headers:
      cache-control: [no-cache]
      content-length: ['0']
      date: ['Fri, 15 Dec 2017 00:42:16 GMT']
      expires: ['-1']
      location: ['https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/operationresults/eyJqb2JJZCI6IlJFU09VUkNFR1JPVVBERUxFVElPTkpPQi1DTElURVNUOjJFUkdTVk9SSTdJSjdDN01ZUExQRjdBRlpSVlg3VzM3T0pKTkYzRXxDMjc5N0YxNzVCMTFFQzA3LVdFU1RVUyIsImpvYkxvY2F0aW9uIjoid2VzdHVzIn0?api-version=2017-05-10']
      pragma: [no-cache]
      strict-transport-security: [max-age=31536000; includeSubDomains]
      x-ms-ratelimit-remaining-subscription-writes: ['1199']
    status: {code: 202, message: Accepted}
version: 1
