interactions:
- request:
    body: ''
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - 0
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"error":{"code":"Unauthorized","message":"Request is missing a Bearer
        or PoP token."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '87'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      www-authenticate:
      - Bearer authorization="https://login.windows.net/54826b22-38d6-4fb2-bad9-b7b93a3e9c5a",
        resource="https://vault.azure.net"
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 401
      message: Unauthorized
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 24}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '511'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"0261ef6d96fa4408975da7d8d601bee4"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:15 GMT
      expires:
      - '-1'
      location:
      - https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=0261ef6d96fa4408975da7d8d601bee4
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"0261ef6d96fa4408975da7d8d601bee4"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"0261ef6d96fa4408975da7d8d601bee4"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:29 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"completed","target":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1","request_id":"0261ef6d96fa4408975da7d8d601bee4"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:56:43 GMT
      duration:
      - '2130235'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - p38q61VL3vxkaK7bcPBGFXMhnMrGtZZS3iy6gCnTPpA=
      ocp-aad-session-key:
      - wmvTN_Y2N58j29C_L4JO6w-qpGRLTmEfEp8SohPSDuaiSaIwi8skTrGhqQujoVTU7No5w_coUPwiTQLU63i0mYGRYBzoH5bzVdibri6UUssQOuhKbv2WHm2CC664F_UA.4UBdeAnVH_RzwfrwkV2z9L5DWd2fLODhg58mBGBUDBQ
      pragma:
      - no-cache
      request-id:
      - 221cf83f-a79b-47ea-b41b-bffd42436acd
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/081e4e57a6e04736bd655564788eccb5","kid":"https://test-exist-kv-cert000002.vault.azure.net/keys/cert1/081e4e57a6e04736bd655564788eccb5","sid":"https://test-exist-kv-cert000002.vault.azure.net/secrets/cert1/081e4e57a6e04736bd655564788eccb5","x5t":"jNNEm_Xyflh28RhTxjHryl-ygcE","cer":"MIIDQjCCAiqgAwIBAgIQR7Yc2IwjSj6t+xtmXo+NIjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDYzM1oXDTIyMDkwNDE0NTYzM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAZTG4znRcr4Gm7c2L/byzQUQa21dp0hzu9bGXOiVConhHAVZJXlMgdlE/c1GDMcRtAjYHdu9W7u6vNyTUrF4j0Ki3dw+ONpF+xgjg/pgHa6FaH8eVB1GWoo2J72Iam4ibTL4MaXY2DBjhMFOF5MUxBlzUKraUxLUx0VS4UEifYSSUmxes8sUBhXGZZEkBwEfl7IypINqZAlKIyIHYM6U/Q79OBUFNkBcEGFTDJxykjqJw8dyjZPGOvm1oUR6YtwjXI+47E5rSoSnaWHZ2ecoB41WC7zLbuKrY44Im8/5ot54iPqLzYaewowCmFiNC73/7n7V0JUQ8jTh98XfJvyBtdA==","attributes":{"enabled":true,"nbf":1599230793,"exp":1662303393,"created":1599231393,"updated":1599231393,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599231375,"updated":1599231375}},"pending":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2399'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:56:45 GMT
      duration:
      - '2378374'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 86KurTfxAk/M13kEbCwVuuaB5PoGx7jHOtXdUnHXnic=
      ocp-aad-session-key:
      - l-UofkhI0nHUxs73fTwqTK5wA6HiCDQX5Q_etKVc8smgfgbxjmYP8q1CIQUZZUK0l5GwF25qNUaYXLB7gklxB-o4D3saoUq8oIUaxlETo6s-MFvGgm9ZnANLI1FgXc0G.QJP1Zfg_8zlxCuJUFQdSfqCch5HCejoHyxiJ_nN-gXY
      pragma:
      - no-cache
      request-id:
      - 928484eb-6d2d-417e-a006-3dc424c2d43d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
      "keyCredentials": [{"startDate": "2020-09-04T14:56:42.757562Z", "endDate": "2021-09-04T14:56:42.757562Z",
      "value": "MIIDQjCCAiqgAwIBAgIQR7Yc2IwjSj6t+xtmXo+NIjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDYzM1oXDTIyMDkwNDE0NTYzM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAZTG4znRcr4Gm7c2L/byzQUQa21dp0hzu9bGXOiVConhHAVZJXlMgdlE/c1GDMcRtAjYHdu9W7u6vNyTUrF4j0Ki3dw+ONpF+xgjg/pgHa6FaH8eVB1GWoo2J72Iam4ibTL4MaXY2DBjhMFOF5MUxBlzUKraUxLUx0VS4UEifYSSUmxes8sUBhXGZZEkBwEfl7IypINqZAlKIyIHYM6U/Q79OBUFNkBcEGFTDJxykjqJw8dyjZPGOvm1oUR6YtwjXI+47E5rSoSnaWHZ2ecoB41WC7zLbuKrY44Im8/5ot54iPqLzYaewowCmFiNC73/7n7V0JUQ8jTh98XfJvyBtdA==",
      "keyId": "88888888-0000-0000-0000-000000000001", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert000001",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "99d6f0ac-24a3-49c1-95f6-2cd236d72790", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "a1b0f6d0-0806-420b-9d17-c9d3926f98b1",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert000001", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert000001",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert000001"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "8CD3449BF5F27E5876F11853C631EBCA5FB281C1", "endDate": "2021-09-04T14:56:42.757562Z",
        "keyId": "88888888-0000-0000-0000-000000000001", "startDate": "2020-09-04T14:56:42.757562Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert000001 on
        behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "id": "2e6e9485-7c66-4c61-864a-5a5f05c3e773", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert000001
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert000001",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:56:47 GMT
      duration:
      - '5211432'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - /yb83Dls2FqjazsggoGjbyQnBTo42DuveRticqzxgZY=
      ocp-aad-session-key:
      - 6w8TU6sH1wqWjVeZ8qdnUTZpsL1IpxU2bxbbM8qRMop4ldBfvnQLCqKZgXhhp6LKc1kP4VwyGeoGdH-ZxsanWMpJyhx_m8t8VYzyMl4yHVWHOIzJum79t0EpRmp-QXbv206lgrbKNr2qHQXMeWLqeBk_jkFmZGthRdGuEztFH98.RHtfFD_PWIN1GbKJJxEFReLrEWAVm6s7Xkqh8_ZV0G8
      pragma:
      - no-cache
      request-id:
      - 696f966d-845b-44f7-b5e8-5848b34902e0
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "a1b0f6d0-0806-420b-9d17-c9d3926f98b1"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"30963bb8-9273-4f02-9ff2-4bbf254b5c59","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"a1b0f6d0-0806-420b-9d17-c9d3926f98b1","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"2e6e9485-7c66-4c61-864a-5a5f05c3e773","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["a1b0f6d0-0806-420b-9d17-c9d3926f98b1","http://cli_test_sp_with_kv_existing_cert000001"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2154'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:56:48 GMT
      duration:
      - '3427231'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/30963bb8-9273-4f02-9ff2-4bbf254b5c59/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - xvWJHMWAHzosjXNMZ9eWLFLy/hDOFxHPaxgG2NiJKnA=
      ocp-aad-session-key:
      - MZV6BqRBjfDtMtET8tLVlG1PP8kcheHQQ9E65lqWxFA9WsFFOelB2LwHjrOYQ2exh8E3pSweG7qJuRkT5OFw3u0RfnrwnBQrhzpjqgsDk6mvu62eaIC2sbSxfMRXtAZsrmHGhuleWDakzomDufaOOYWj80pbnWQ2pzQnjWtexXk.LJ8F3rpxMdGbQoVpFI_clnttX46z-MwCDUjThbcNmoI
      pragma:
      - no-cache
      request-id:
      - c2496a94-cc3b-4b2f-b560-68109e9b4eac
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "30963bb8-9273-4f02-9ff2-4bbf254b5c59"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000002?api-version=2018-09-01-preview
  response:
    body:
      string: '{"error":{"code":"PrincipalNotFound","message":"Principal 30963bb892734f029ff24bbf254b5c59
        does not exist in the directory 54826b22-38d6-4fb2-bad9-b7b93a3e9c5a."}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '163'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 400
      message: Bad Request
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:56:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "30963bb8-9273-4f02-9ff2-4bbf254b5c59"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - -n --keyvault --cert --scopes
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003?api-version=2018-09-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"30963bb8-9273-4f02-9ff2-4bbf254b5c59","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2020-09-04T14:56:58.3554340Z","updatedOn":"2020-09-04T14:56:58.3554340Z","createdBy":null,"updatedBy":"181c08fa-7ac8-48a6-a869-342ab74566a4"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000003","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000003"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '903'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:00 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"30963bb8-9273-4f02-9ff2-4bbf254b5c59","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert000001","appId":"a1b0f6d0-0806-420b-9d17-c9d3926f98b1","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"2e6e9485-7c66-4c61-864a-5a5f05c3e773","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert000001","a1b0f6d0-0806-420b-9d17-c9d3926f98b1"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2157'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:01 GMT
      duration:
      - '2330106'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ex5w/Lp7hiImECO0knspw6TymGMTRh4Rd+JV5D8XntE=
      ocp-aad-session-key:
      - THzKKSor2suFYTpH4cTJCh-wSfffmRKljsEB-VjdTwjSt0oaaeQazXbDAM1KpQPxPaBuwY6dtHLXt-Ar7jkK400e8Bt2L5cgkK3z1zsAOgTN3MgvLWqGJxY5KziUFedJxWAhi5XzBWCbY4NwXide9d1l8c1w2dRXFlguvSpMDf0.S6L93YbBkexbIuhmzaprMaKK7e3-sPoEqK3gTKpHHZ4
      pragma:
      - no-cache
      request-id:
      - fe1578a0-6315-494c-a196-744fdd1f59ad
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27a1b0f6d0-0806-420b-9d17-c9d3926f98b1%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:02 GMT
      duration:
      - '2283886'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Pl+D9ryiQe1B9f6GgOT3I5ybZoAtjIUuBe3eXaLhY/Y=
      ocp-aad-session-key:
      - DO4ih2EsGe1eRKCPGqP1z1C-Lu83l5CqcKvJ2RiTADjEw4MG_dhmlAmUjX0PZ2tmL7TvNNrKOqpjdLpc-bruSF14bwWIZT-NYnJOMUmrmK25orBroBtsYwyweiCvYFSiHxnTTY5sgosxjpSMWQQHax5scTFSmcnvczdPKkMR0as.q5tYts9JTHwIdvFE99ErafjGZxNTa2WwwHuepRBFZxc
      pragma:
      - no-cache
      request-id:
      - 9b8d2bec-1e77-469a-9e62-30fd53b08856
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%27a1b0f6d0-0806-420b-9d17-c9d3926f98b1%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"99d6f0ac-24a3-49c1-95f6-2cd236d72790","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a1b0f6d0-0806-420b-9d17-c9d3926f98b1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"8CD3449BF5F27E5876F11853C631EBCA5FB281C1","endDate":"2021-09-04T14:56:42.757562Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-04T14:56:42.757562Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"2e6e9485-7c66-4c61-864a-5a5f05c3e773","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:03 GMT
      duration:
      - '2465009'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 6Q8qQ8E/OmCeH8coj6fWIlvLINmQwgcQkkCJj94gLCA=
      ocp-aad-session-key:
      - UhFXNI93rijbx94BZghH_JalaxULi9onn36AQb7s6VmV1MbUl8FdxPDOf-QKCcv6orYnX7tF7ve2wYc1eKZK-cUOfLnYWBgJmSC2bbjo_YSRAgJ7RlhEUXnrDRn5Wk4XpWUrS9tvkxQ4RRDNcEEA3HmDYLOT2sL6k-U03E03p1Y.7h12Z5QWKSCxtoA7tY2VUI-UmAfMVAKtWedcWndKwC0
      pragma:
      - no-cache
      request-id:
      - a2824c44-1ed2-49cd-a260-3fa77139f937
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/99d6f0ac-24a3-49c1-95f6-2cd236d72790?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"99d6f0ac-24a3-49c1-95f6-2cd236d72790","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a1b0f6d0-0806-420b-9d17-c9d3926f98b1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"8CD3449BF5F27E5876F11853C631EBCA5FB281C1","endDate":"2021-09-04T14:56:42.757562Z","keyId":"88888888-0000-0000-0000-000000000001","startDate":"2020-09-04T14:56:42.757562Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"2e6e9485-7c66-4c61-864a-5a5f05c3e773","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:04 GMT
      duration:
      - '2712120'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ShIjrw587DYvfeHzo+m0e8NPQEtKerPYlrYJRqpr9Ak=
      ocp-aad-session-key:
      - G10iKO7f_LbllRLm-djNRl3I6mvVdnpLv--LOShM6BUL_lVpuDaoYHDwYejGFlb7GP1Jm6_ZPw9hrp8ow0I_Idn2JYluv7xBuX6fKpLfjtWK7vbSh6nB5RIBLCndSjrBp_iKLXy76ix-orZMc8il-wbljEUhdkVF22KMqeuZyD8.a0R4IVgcTGzTHqy9Amo-Qxn5_ZrDukLj1vYpYSgm0Zo
      pragma:
      - no-cache
      request-id:
      - 2dfc2b9f-34aa-4f63-99e7-0c2fc24370cb
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/081e4e57a6e04736bd655564788eccb5","kid":"https://test-exist-kv-cert000002.vault.azure.net/keys/cert1/081e4e57a6e04736bd655564788eccb5","sid":"https://test-exist-kv-cert000002.vault.azure.net/secrets/cert1/081e4e57a6e04736bd655564788eccb5","x5t":"jNNEm_Xyflh28RhTxjHryl-ygcE","cer":"MIIDQjCCAiqgAwIBAgIQR7Yc2IwjSj6t+xtmXo+NIjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDYzM1oXDTIyMDkwNDE0NTYzM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAZTG4znRcr4Gm7c2L/byzQUQa21dp0hzu9bGXOiVConhHAVZJXlMgdlE/c1GDMcRtAjYHdu9W7u6vNyTUrF4j0Ki3dw+ONpF+xgjg/pgHa6FaH8eVB1GWoo2J72Iam4ibTL4MaXY2DBjhMFOF5MUxBlzUKraUxLUx0VS4UEifYSSUmxes8sUBhXGZZEkBwEfl7IypINqZAlKIyIHYM6U/Q79OBUFNkBcEGFTDJxykjqJw8dyjZPGOvm1oUR6YtwjXI+47E5rSoSnaWHZ2ecoB41WC7zLbuKrY44Im8/5ot54iPqLzYaewowCmFiNC73/7n7V0JUQ8jTh98XfJvyBtdA==","attributes":{"enabled":true,"nbf":1599230793,"exp":1662303393,"created":1599231393,"updated":1599231393,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":24,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599231375,"updated":1599231375}},"pending":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2399'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:06 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-04T14:57:01.024087Z", "endDate":
      "2021-09-04T14:57:01.024087Z", "value": "MIIDQjCCAiqgAwIBAgIQR7Yc2IwjSj6t+xtmXo+NIjANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDYzM1oXDTIyMDkwNDE0NTYzM1owHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAZTG4znRcr4Gm7c2L/byzQUQa21dp0hzu9bGXOiVConhHAVZJXlMgdlE/c1GDMcRtAjYHdu9W7u6vNyTUrF4j0Ki3dw+ONpF+xgjg/pgHa6FaH8eVB1GWoo2J72Iam4ibTL4MaXY2DBjhMFOF5MUxBlzUKraUxLUx0VS4UEifYSSUmxes8sUBhXGZZEkBwEfl7IypINqZAlKIyIHYM6U/Q79OBUFNkBcEGFTDJxykjqJw8dyjZPGOvm1oUR6YtwjXI+47E5rSoSnaWHZ2ecoB41WC7zLbuKrY44Im8/5ot54iPqLzYaewowCmFiNC73/7n7V0JUQ8jTh98XfJvyBtdA==",
      "keyId": "b4970cfe-703b-486d-8909-cfa30d4c36f6", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1339'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/99d6f0ac-24a3-49c1-95f6-2cd236d72790?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Fri, 04 Sep 2020 14:57:08 GMT
      duration:
      - '4011689'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - O6k4TMcsCADbVQjdMvf+VxmyPOahJWvENPBZhXopqYQ=
      ocp-aad-session-key:
      - iAmxM5bSOCOjEwxnJJUa4oHdwKD9FIVKAd_gK9shTB6ch_SwUcAN_6FZ9J2FoWXXR0K8HPvD6wYA2ZAjcs7P7y05bbfrS-iw4_FvCUXVd3X4fSGB0H-Qdbo4uKnSsp59UBHZTor1_0hCA6IpHesOoU1u-zKP4LtBMCD-7974qBE.loxvOdPcRGsdRuCma60HJp2ieGJ8X8W_W1iLXIFSCMg
      pragma:
      - no-cache
      request-id:
      - ebb97f65-a9f9-4c2b-822f-04ea7f2abc0b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert000001%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"99d6f0ac-24a3-49c1-95f6-2cd236d72790","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"a1b0f6d0-0806-420b-9d17-c9d3926f98b1","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert000001","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert000001","identifierUris":["http://cli_test_sp_with_kv_existing_cert000001"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"8CD3449BF5F27E5876F11853C631EBCA5FB281C1","endDate":"2021-09-04T14:57:01.024087Z","keyId":"b4970cfe-703b-486d-8909-cfa30d4c36f6","startDate":"2020-09-04T14:57:01.024087Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/99d6f0ac-24a3-49c1-95f6-2cd236d72790/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","id":"2e6e9485-7c66-4c61-864a-5a5f05c3e773","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert000001 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert000001","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:09 GMT
      duration:
      - '2230200'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QtBJJ5E9Bvso6Zzt9WgRZ3ByUgjPy3/59XCAA/+7Wg4=
      ocp-aad-session-key:
      - J-aybH7AxaS2zEYIWfRe6Z9HnElbFcL3-nxZx83CSM0ZeVePJ8l2lBYsO6Q4o5a1XMf5j-5C9NPCklP_CdlpsJU_-mFORjZk_aEuvgDp6P9cxOU0GFnkblzlKK5FQTUnHwPvVuDok05CfcaD59v4m9H1JgdTHrNlLD6WwH3c6eI.10TuFWeoezS0Gl1dyv099CPjs8I2w6n0lZatHkNwMs8
      pragma:
      - no-cache
      request-id:
      - 27e9e396-696e-470b-bcfc-3c1a731fdf31
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/99d6f0ac-24a3-49c1-95f6-2cd236d72790?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Fri, 04 Sep 2020 14:57:10 GMT
      duration:
      - '4351452'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - qt/BxpwlIdcBLhm3Pi2n0N5XbbDONRbMh9OSScb48o4=
      ocp-aad-session-key:
      - hWNalEHAspKHZG9EBuHYj-nkcyFfBqz23tP9PCPKQOA_pdbvwCjxmzWTKJr018rTJXsICg7UPhbJikQKtSg6843X8PR_FfT1kV97bIPXYJBpcP6zOXbrkMWNk6QB71o76wKUiLwARCJ30B0Ep7WzCXoA_nYYJEfH9-Eh-y9hQ_c.12udKeDUfzznpAeFIMCAz1-HtJiuCVAl1onjqdQG_fA
      pragma:
      - no-cache
      request-id:
      - 5231f077-5d9a-4f81-9a2b-d3f3f5f6d513
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: '{"policy": {"key_props": {"exportable": true, "kty": "RSA", "key_size":
      2048, "reuse_key": true}, "secret_props": {"contentType": "application/x-pkcs12"},
      "x509_props": {"subject": "CN=CLIGetDefaultPolicy", "key_usage": ["cRLSign",
      "dataEncipherment", "digitalSignature", "keyEncipherment", "keyAgreement", "keyCertSign"],
      "validity_months": 6}, "lifetime_actions": [{"trigger": {"days_before_expiry":
      90}, "action": {"action_type": "AutoRenew"}}], "issuer": {"name": "Self"}},
      "attributes": {"enabled": true}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '510'
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: POST
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/create?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"6ff6d73a975544eabe19d739354969f6"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:13 GMT
      expires:
      - '-1'
      location:
      - https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0&request_id=6ff6d73a975544eabe19d739354969f6
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"inProgress","status_details":"Pending
        certificate created. Certificate request is in progress. This may take some
        time based on the issuer provider. Please check again later.","request_id":"6ff6d73a975544eabe19d739354969f6"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1303'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending","issuer":{"name":"Self"},"csr":"MIICrjCCAZYCAQAwHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaBLMEkGCSqGSIb3DQEJDjE8MDowDgYDVR0PAQH/BAQDAgG+MB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAJBgNVHRMEAjAAMA0GCSqGSIb3DQEBCwUAA4IBAQAaarySWB37a12S5XV5xyhtFAQqFW1l3o0GGRi365C4sLbBJyV4r+AEIHR7qIQK6aw80+FkPzb5MXq95oLwVV0pQ5NqAJC9Az3t14mKfUPQ7kC3fcRqW3RA6Dx8GXUbA2NRZGRr+cuOmQtI1hAfjlxlIczOWyzGE8T6rwkEDiW7cHzqRj4Peouc1eZjDumY63+cdyMSv1rV2IlMLsx/poPvyZK+QT1rWBUN4msuyhaoVSgQkn6lpCrAXXX+wiy2octyAL2TQDDT6gQ8KjjBJIsjpnpey0mWLS2GH8E2M1v+Dv0x5ZKgo9bhTAhEcfBTZU/2QHCl9v3Bo3xSQqAP3Dsr","cancellation_requested":false,"status":"completed","target":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1","request_id":"6ff6d73a975544eabe19d739354969f6"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1217'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:28 GMT
      duration:
      - '2140986'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - p38q61VL3vxkaK7bcPBGFXMhnMrGtZZS3iy6gCnTPpA=
      ocp-aad-session-key:
      - tKvsXwMrQlMSbITL0zAC-sUtW69e8r939DDH6d-A4O38xs-t1Hy8oSQv8wCVwhUfiuvVYIeEMz02pczCh0xzQb5l6HZ_sIWe00SiwYRcY2CFnW41yvtEZ2cbakT29l6vVnROXukh8-3pgqPlt0B0ApgKXff-3RRxHbRaDxHduWc.Zl7p80uJmEB8wCqM64LJnAdApHHlMzVysa4Zah8qg4U
      pragma:
      - no-cache
      request-id:
      - 867008f0-5835-4f9f-a4b8-6f8d2ce2246b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/58c9dee925564b7dbcda84986ef20a2f","kid":"https://test-exist-kv-cert000002.vault.azure.net/keys/cert1/58c9dee925564b7dbcda84986ef20a2f","sid":"https://test-exist-kv-cert000002.vault.azure.net/secrets/cert1/58c9dee925564b7dbcda84986ef20a2f","x5t":"lI9mgCSpZ_JMX5Iiqk_giLvE3Ms","cer":"MIIDQjCCAiqgAwIBAgIQPo8DKh6NQVmcA0gx7Ka5bzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDcyMVoXDTIxMDMwNDE0NTcyMVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAg2NSgJM2SR6jytGDuhqdqsBpjISZNwvL+uq/PG/cNVKyVy6cO7zyfqmxPpyGHe2Bz+058noEvZMLxaSN8ppJJ8rvIPLnHWxxNWQVMAVSRe6iVoFOniFteuhlMDoXolmezt8P1524dNy5CZ9NiiyeBg8Rls+O0Mfx2yVE7kXqOf0X0J+L8lFKWRjrImpYUB6PuDBhHGjlC/Cl6a0vr2mV8iFR6kPU+NPscSV305cIYd5CjsCYq8dSqiuj934enqxYEMNKgeY1YuNJrCYXXCGGTaQCV1oo6D/04YcobxfdAFRo4ybzhH+f+bJLVngTd2wClEe732FK22zTeUTcmbayFA==","attributes":{"enabled":true,"nbf":1599230841,"exp":1614869841,"created":1599231441,"updated":1599231441,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599231375,"updated":1599231433}},"pending":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2398'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=startswith%28displayName%2C%27cli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:31 GMT
      duration:
      - '2361424'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - QtBJJ5E9Bvso6Zzt9WgRZ3ByUgjPy3/59XCAA/+7Wg4=
      ocp-aad-session-key:
      - RbASc59wbmYMP-t0hAhieIP-T3IBwhBV5M6x7RgzkqhFuT6zx1W2Vc6sw9cnNcWkN1T3UdASj8Pe-uEkPdnAbSm8gSXgJEZkU2s1TcmnpcbgzmlTTj0fz_W-E2PmkSzgbK0Wgh9WVhxEUzZBRbbwQlesXhnFPVw-lZrErjQ7-rg.7hzeJ-F5ganxI1vCpogmVL2m2oJ2nZ_4CB3aX7aSF2U
      pragma:
      - no-cache
      request-id:
      - 3082a622-3c78-4fba-862a-8837d922f49f
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"availableToOtherTenants": false, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
      "keyCredentials": [{"startDate": "2020-09-04T14:57:29.228924Z", "endDate": "2021-03-04T14:57:20.000Z",
      "value": "MIIDQjCCAiqgAwIBAgIQPo8DKh6NQVmcA0gx7Ka5bzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDcyMVoXDTIxMDMwNDE0NTcyMVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAg2NSgJM2SR6jytGDuhqdqsBpjISZNwvL+uq/PG/cNVKyVy6cO7zyfqmxPpyGHe2Bz+058noEvZMLxaSN8ppJJ8rvIPLnHWxxNWQVMAVSRe6iVoFOniFteuhlMDoXolmezt8P1524dNy5CZ9NiiyeBg8Rls+O0Mfx2yVE7kXqOf0X0J+L8lFKWRjrImpYUB6PuDBhHGjlC/Cl6a0vr2mV8iFR6kPU+NPscSV305cIYd5CjsCYq8dSqiuj934enqxYEMNKgeY1YuNJrCYXXCGGTaQCV1oo6D/04YcobxfdAFRo4ybzhH+f+bJLVngTd2wClEe732FK22zTeUTcmbayFA==",
      "keyId": "88888888-0000-0000-0000-000000000004", "usage": "Verify", "type":
      "AsymmetricX509Cert"}], "displayName": "cli_test_sp_with_kv_existing_cert0000012",
      "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '1672'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?api-version=1.6
  response:
    body:
      string: '{"odata.metadata": "https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element",
        "odata.type": "Microsoft.DirectoryServices.Application", "objectType": "Application",
        "objectId": "61f32f56-6eb1-49bd-b422-d191fd73e5e8", "deletionTimestamp": null,
        "acceptMappedClaims": null, "addIns": [], "appId": "4187c543-11fd-4501-9453-3834e625f72f",
        "applicationTemplateId": null, "appRoles": [], "availableToOtherTenants":
        false, "displayName": "cli_test_sp_with_kv_existing_cert0000012", "errorUrl":
        null, "groupMembershipClaims": null, "homepage": "https://cli_test_sp_with_kv_existing_cert0000012",
        "identifierUris": ["http://cli_test_sp_with_kv_existing_cert0000012"], "informationalUrls":
        {"termsOfService": null, "support": null, "privacy": null, "marketing": null},
        "isDeviceOnlyAuthSupported": null, "keyCredentials": [{"customKeyIdentifier":
        "948F668024A967F24C5F9222AA4FE088BBC4DCCB", "endDate": "2021-03-04T14:57:20Z",
        "keyId": "88888888-0000-0000-0000-000000000004", "startDate": "2020-09-04T14:57:29.228924Z",
        "type": "AsymmetricX509Cert", "usage": "Verify", "value": null}], "knownClientApplications":
        [], "logoutUrl": null, "logo@odata.mediaEditLink": "directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/logo",
        "logo@odata.mediaContentType": "application/json;odata=minimalmetadata; charset=utf-8",
        "logoUrl": null, "mainLogo@odata.mediaEditLink": "directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/mainLogo",
        "oauth2AllowIdTokenImplicitFlow": true, "oauth2AllowImplicitFlow": false,
        "oauth2AllowUrlPathMatching": false, "oauth2Permissions": [{"adminConsentDescription":
        "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on behalf of the signed-in user.", "adminConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "id": "02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e", "isEnabled": true, "type": "User",
        "userConsentDescription": "Allow the application to access cli_test_sp_with_kv_existing_cert0000012
        on your behalf.", "userConsentDisplayName": "Access cli_test_sp_with_kv_existing_cert0000012",
        "value": "user_impersonation"}], "oauth2RequirePostResponse": false, "optionalClaims":
        null, "orgRestrictions": [], "parentalControlSettings": {"countriesBlockedForMinors":
        [], "legalAgeGroupRule": "Allow"}, "passwordCredentials": [], "publicClient":
        null, "publisherDomain": "AzureSDKTeam.onmicrosoft.com", "recordConsentConditions":
        null, "replyUrls": [], "requiredResourceAccess": [], "samlMetadataUrl": null,
        "signInAudience": "AzureADMyOrg", "tokenEncryptionKeyId": null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2771'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:33 GMT
      duration:
      - '4053434'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application
      ocp-aad-diagnostics-server-name:
      - /yb83Dls2FqjazsggoGjbyQnBTo42DuveRticqzxgZY=
      ocp-aad-session-key:
      - ymPK-WnQnVo-upQvZ2SulIhQ1vP4rMwu9DDi8XF3kWpCAE2h2UmqineuHgaYsGiKcednu7uSv041pdi0L9sK2tCP3iX59xnfHW3imy38wuqyey8J6YOsMWIbHUNIaWlN_W5-kF664scI5AWv1zUFjQ66VKyZ3r9_J89PX0Ce1xA.6qM5417PrYX2bese4BfCoLmTILB8zVrOCYCwtcDpL0k
      pragma:
      - no-cache
      request-id:
      - 09586165-a4e8-472f-95cd-26172ac67ae3
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: '{"accountEnabled": "True", "appId": "4187c543-11fd-4501-9453-3834e625f72f"}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '75'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: POST
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6d7f0a7a-dafb-409b-a37d-ac6315192c19","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"4187c543-11fd-4501-9453-3834e625f72f","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["4187c543-11fd-4501-9453-3834e625f72f","http://cli_test_sp_with_kv_existing_cert0000012"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2162'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:34 GMT
      duration:
      - '3286352'
      expires:
      - '-1'
      location:
      - https://graph.windows.net/00000000-0000-0000-0000-000000000000/directoryObjects/6d7f0a7a-dafb-409b-a37d-ac6315192c19/Microsoft.DirectoryServices.ServicePrincipal
      ocp-aad-diagnostics-server-name:
      - m9WUaBuJWWN8jTTxvaqUkzVAeQ7QyDcmFQANzJzN5CM=
      ocp-aad-session-key:
      - Bke9-R643vkyDvoiArJh7jplvnduY2Aoa8R8UDDzEJHuCUvGKyi9hfzywC3bmgCXgtlYTFKPg12e0sOTYIeYDcusaiJp9ok2DvWFYO5M3vdOeIkN0NszxFVwBkNrruyHrzuPXiT5VMXXx9rfDJVc-PZpAHfhDw6YQ0ydbNuP4hQ.P6vqve5zcQNa2SaC6NkN1WpKQTuPWkxl189EGgKcIiE
      pragma:
      - no-cache
      request-id:
      - 524c56e6-1ed8-45ad-9be8-8bb3c536d8e2
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleDefinitions?$filter=roleName%20eq%20%27Contributor%27&api-version=2018-01-01-preview
  response:
    body:
      string: '{"value":[{"properties":{"roleName":"Contributor","type":"BuiltInRole","description":"Grants
        full access to manage all resources, but does not allow you to assign roles
        in Azure RBAC.","assignableScopes":["/"],"permissions":[{"actions":["*"],"notActions":["Microsoft.Authorization/*/Delete","Microsoft.Authorization/*/Write","Microsoft.Authorization/elevateAccess/Action","Microsoft.Blueprint/blueprintAssignments/write","Microsoft.Blueprint/blueprintAssignments/delete"],"dataActions":[],"notDataActions":[]}],"createdOn":"2015-02-02T21:55:09.8806423Z","updatedOn":"2020-08-14T20:15:12.5169529Z","createdBy":null,"updatedBy":null},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","type":"Microsoft.Authorization/roleDefinitions","name":"b24988ac-6180-42a0-ab88-20f7382dd24c"}]}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '875'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:35 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      vary:
      - Accept-Encoding
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"roleDefinitionId": "/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c",
      "principalId": "6d7f0a7a-dafb-409b-a37d-ac6315192c19"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp create-for-rbac
      Connection:
      - keep-alive
      Content-Length:
      - '233'
      Content-Type:
      - application/json; charset=utf-8
      Cookie:
      - x-ms-gateway-slice=Production
      ParameterSetName:
      - --scopes --keyvault --cert -n
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-mgmt-authorization/0.52.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005?api-version=2018-09-01-preview
  response:
    body:
      string: '{"properties":{"roleDefinitionId":"/subscriptions/00000000-0000-0000-0000-000000000000/providers/Microsoft.Authorization/roleDefinitions/b24988ac-6180-42a0-ab88-20f7382dd24c","principalId":"6d7f0a7a-dafb-409b-a37d-ac6315192c19","principalType":"ServicePrincipal","scope":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001","createdOn":"2020-09-04T14:57:36.6370170Z","updatedOn":"2020-09-04T14:57:36.6370170Z","createdBy":null,"updatedBy":"181c08fa-7ac8-48a6-a869-342ab74566a4"},"id":"/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_sp_with_kv_existing_cert000001/providers/Microsoft.Authorization/roleAssignments/88888888-0000-0000-0000-000000000005","type":"Microsoft.Authorization/roleAssignments","name":"88888888-0000-0000-0000-000000000005"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '903'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      set-cookie:
      - x-ms-gateway-slice=Production; path=/; secure; samesite=none; httponly
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/servicePrincipals?$filter=servicePrincipalNames%2Fany%28x%3Ax%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29%20or%20displayName%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.ServicePrincipal","objectType":"ServicePrincipal","objectId":"6d7f0a7a-dafb-409b-a37d-ac6315192c19","deletionTimestamp":null,"accountEnabled":true,"addIns":[],"alternativeNames":[],"appDisplayName":"cli_test_sp_with_kv_existing_cert0000012","appId":"4187c543-11fd-4501-9453-3834e625f72f","applicationTemplateId":null,"appOwnerTenantId":"54826b22-38d6-4fb2-bad9-b7b93a3e9c5a","appRoleAssignmentRequired":false,"appRoles":[],"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"keyCredentials":[],"logoutUrl":null,"notificationEmailAddresses":[],"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"passwordCredentials":[],"preferredSingleSignOnMode":null,"preferredTokenSigningKeyEndDateTime":null,"preferredTokenSigningKeyThumbprint":null,"publisherName":"AzureSDKTeam","replyUrls":[],"samlMetadataUrl":null,"samlSingleSignOnSettings":null,"servicePrincipalNames":["http://cli_test_sp_with_kv_existing_cert0000012","4187c543-11fd-4501-9453-3834e625f72f"],"servicePrincipalType":"Application","signInAudience":"AzureADMyOrg","tags":[],"tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2165'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:40 GMT
      duration:
      - '2198371'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - 8TkSyz/5czi9bLvmkqdAEewIzVe2ax49YxtObsMATCg=
      ocp-aad-session-key:
      - iAMcY0QogpjgnMXr2mAuzfPku4JT6YezuiLhNnLEw5Q4qqLY0LPmlV3kb3A5xXgPFZbdYH0ab3sm77-W0ZMl_XOtQWKYSG3suxCqgSTRZQuvSfU-57F7tSsHEcpr3EZIx0Xl2NmLzSBVTtYd2tQxmLzM3ITR3bgjsG-gx56tSsA.43wAZjZhemv_zLqyw7sOTnfna15-3ilwE9xW4UEVR5c
      pragma:
      - no-cache
      request-id:
      - ddaa1875-cabd-4ffb-93c2-ddb7d0c188b4
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%274187c543-11fd-4501-9453-3834e625f72f%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '121'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:41 GMT
      duration:
      - '2322109'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - Pl+D9ryiQe1B9f6GgOT3I5ybZoAtjIUuBe3eXaLhY/Y=
      ocp-aad-session-key:
      - LtJAyckJtFU8_DPBElGuzxxV4woR5C8-6lS2NzDFGuc8isikeUGADMcxT-eg7oB1-jT8mYa77tua6PbjeaHj9H_l4_35uw3jJJXXe8XaF8bpDbdl52vNlvA5pIEfor1pCVHnECcMhnP2KDQnG1YMUjVgsgA15-GeK1YFUSRZaPs.trXXrXwf0Tn65B34a9LS00j856Ru9vSiCJ1kNMVsYyk
      pragma:
      - no-cache
      request-id:
      - a4244af2-a8aa-47bd-9418-a707839466ed
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=appId%20eq%20%274187c543-11fd-4501-9453-3834e625f72f%27&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"61f32f56-6eb1-49bd-b422-d191fd73e5e8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"4187c543-11fd-4501-9453-3834e625f72f","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"948F668024A967F24C5F9222AA4FE088BBC4DCCB","endDate":"2021-03-04T14:57:20Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2020-09-04T14:57:29.228924Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2688'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:42 GMT
      duration:
      - '2358795'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ocFlU/fImqh8D9fFRArz8LwWbqjNCkgIG9PcWSdqoao=
      ocp-aad-session-key:
      - SPgjhGDgTrG2D2cL5UU30dkJdZGNSN_1vZyCKUUPiSdfxT6gRU1tB4f820hwujAWk0X-dLKZxUasYZHxfU1Ed94FXm8rvS-IG8RlG7v8BBgyfRo3oRZMaqRbQ_7beBT078GsPAxgC9mxzJxwneajds_0c4jJd-zT57YRTuyrBeY.WC84E9xeNuoV-oDJE_JQ56Fl8b_8J5TkDpwDr_84JCg
      pragma:
      - no-cache
      request-id:
      - 32a930ff-70fc-4a86-b3ec-7f3c1bca850b
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/61f32f56-6eb1-49bd-b422-d191fd73e5e8?api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects/@Element","odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"61f32f56-6eb1-49bd-b422-d191fd73e5e8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"4187c543-11fd-4501-9453-3834e625f72f","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"948F668024A967F24C5F9222AA4FE088BBC4DCCB","endDate":"2021-03-04T14:57:20Z","keyId":"88888888-0000-0000-0000-000000000004","startDate":"2020-09-04T14:57:29.228924Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2685'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:44 GMT
      duration:
      - '2306963'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - nGN9+b3nUCmRNVXxt8yhMeL4+H+5gOe/kNYIEKiWtJs=
      ocp-aad-session-key:
      - wCNzqHHIuxADWeOE8zemCOxjiuH_wjFsEtGySVgGCCnDHppG2d6RdSyHpCYuw_Xdv4VVJLaWrb5TCSoxoePe7S49wTuZtlv2YAadmlopCjEweNp4W99DIiTpg91BE44PtlrGYt2vgNhMQPfjJL65NlKosSdNHFoJSFKG1VCvsU4.TKZ_4e7j-FK-SgdVzYRx6KrQpZWIMcYNMHyEadBS4GQ
      pragma:
      - no-cache
      request-id:
      - 9e89ae22-0255-4185-bc3d-6c8c1c271d52
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-keyvault/7.0 Azure-SDK-For-Python
      accept-language:
      - en-US
    method: GET
    uri: https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/?api-version=7.0
  response:
    body:
      string: '{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/58c9dee925564b7dbcda84986ef20a2f","kid":"https://test-exist-kv-cert000002.vault.azure.net/keys/cert1/58c9dee925564b7dbcda84986ef20a2f","sid":"https://test-exist-kv-cert000002.vault.azure.net/secrets/cert1/58c9dee925564b7dbcda84986ef20a2f","x5t":"lI9mgCSpZ_JMX5Iiqk_giLvE3Ms","cer":"MIIDQjCCAiqgAwIBAgIQPo8DKh6NQVmcA0gx7Ka5bzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDcyMVoXDTIxMDMwNDE0NTcyMVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAg2NSgJM2SR6jytGDuhqdqsBpjISZNwvL+uq/PG/cNVKyVy6cO7zyfqmxPpyGHe2Bz+058noEvZMLxaSN8ppJJ8rvIPLnHWxxNWQVMAVSRe6iVoFOniFteuhlMDoXolmezt8P1524dNy5CZ9NiiyeBg8Rls+O0Mfx2yVE7kXqOf0X0J+L8lFKWRjrImpYUB6PuDBhHGjlC/Cl6a0vr2mV8iFR6kPU+NPscSV305cIYd5CjsCYq8dSqiuj934enqxYEMNKgeY1YuNJrCYXXCGGTaQCV1oo6D/04YcobxfdAFRo4ybzhH+f+bJLVngTd2wClEe732FK22zTeUTcmbayFA==","attributes":{"enabled":true,"nbf":1599230841,"exp":1614869841,"created":1599231441,"updated":1599231441,"recoveryLevel":"Recoverable+Purgeable"},"policy":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/policy","key_props":{"exportable":true,"kty":"RSA","key_size":2048,"reuse_key":true},"secret_props":{"contentType":"application/x-pkcs12"},"x509_props":{"subject":"CN=CLIGetDefaultPolicy","ekus":["1.3.6.1.5.5.7.3.1","1.3.6.1.5.5.7.3.2"],"key_usage":["cRLSign","dataEncipherment","digitalSignature","keyAgreement","keyCertSign","keyEncipherment"],"validity_months":6,"basic_constraints":{"ca":false}},"lifetime_actions":[{"trigger":{"days_before_expiry":90},"action":{"action_type":"AutoRenew"}}],"issuer":{"name":"Self"},"attributes":{"enabled":true,"created":1599231375,"updated":1599231433}},"pending":{"id":"https://test-exist-kv-cert000002.vault.azure.net/certificates/cert1/pending"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2398'
      content-type:
      - application/json; charset=utf-8
      date:
      - Fri, 04 Sep 2020 14:57:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000;includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-content-type-options:
      - nosniff
      x-ms-keyvault-network-info:
      - conn_type=Ipv4;addr=167.220.255.63;act_addr_fam=InterNetwork;
      x-ms-keyvault-region:
      - westus
      x-ms-keyvault-service-version:
      - 1.1.44.0
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: '{"keyCredentials": [{"startDate": "2020-09-04T14:57:39.26119Z", "endDate":
      "2021-03-04T14:57:20.000Z", "value": "MIIDQjCCAiqgAwIBAgIQPo8DKh6NQVmcA0gx7Ka5bzANBgkqhkiG9w0BAQsFADAeMRwwGgYDVQQDExNDTElHZXREZWZhdWx0UG9saWN5MB4XDTIwMDkwNDE0NDcyMVoXDTIxMDMwNDE0NTcyMVowHjEcMBoGA1UEAxMTQ0xJR2V0RGVmYXVsdFBvbGljeTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPURCJcnCDEVJGQ0OQ0+Nrtda74UKcmmY6D90l3Ej4mGBuC9UT1ayLBhH8Ewqa+63ubHbTa1ABd02ffSykRusRkThFNfmTfNloJ1RSpZ6WngugVzmHg0wQtoVlbjFTKvu0uE5fmKM9yAOr9rvZxP3rgMHpfJGYVhDjKKsFrl19ffjXNYoR8zfeCVzT0xLsgvi4ae6gPHtFQHTgUzUz4YjagvvLNotkKwZFuT7/rDDt2J4tM9ZHNztaKF3S1cTpHUt4s6RH5ZIxr+mFr3sZOWVBYfVwbw4dwudsBcqendZXt7aUqBNh2MmFxiP90qQH09xYp53e0U9yYJ2c2VsX5pflUCAwEAAaN8MHowDgYDVR0PAQH/BAQDAgG+MAkGA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB8GA1UdIwQYMBaAFPtBP2bePoIeXnp73UB8fCorqi4MMB0GA1UdDgQWBBT7QT9m3j6CHl56e91AfHwqK6ouDDANBgkqhkiG9w0BAQsFAAOCAQEAg2NSgJM2SR6jytGDuhqdqsBpjISZNwvL+uq/PG/cNVKyVy6cO7zyfqmxPpyGHe2Bz+058noEvZMLxaSN8ppJJ8rvIPLnHWxxNWQVMAVSRe6iVoFOniFteuhlMDoXolmezt8P1524dNy5CZ9NiiyeBg8Rls+O0Mfx2yVE7kXqOf0X0J+L8lFKWRjrImpYUB6PuDBhHGjlC/Cl6a0vr2mV8iFR6kPU+NPscSV305cIYd5CjsCYq8dSqiuj934enqxYEMNKgeY1YuNJrCYXXCGGTaQCV1oo6D/04YcobxfdAFRo4ybzhH+f+bJLVngTd2wClEe732FK22zTeUTcmbayFA==",
      "keyId": "944a4310-b4de-47bd-a91c-1f11ec653312", "usage": "Verify", "type":
      "AsymmetricX509Cert"}]}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad sp credential reset
      Connection:
      - keep-alive
      Content-Length:
      - '1335'
      Content-Type:
      - application/json; charset=utf-8
      ParameterSetName:
      - -n --keyvault --cert
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: PATCH
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/61f32f56-6eb1-49bd-b422-d191fd73e5e8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Fri, 04 Sep 2020 14:57:47 GMT
      duration:
      - '3870897'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - p38q61VL3vxkaK7bcPBGFXMhnMrGtZZS3iy6gCnTPpA=
      ocp-aad-session-key:
      - dWPqhoLoNBw8UlYPtQqsLaLMSoyEPScDiDw1HL3vymjyRWwUO04Bfl_8LIPoGRpm4zm37XrF06L8YMW_DxoZ_Pn6Aa-LZVIrIhprAV1Gox8htivVN-fXVA0ubB4m7Vs0uowpnYCr0lYtk4Jb9kgZG2QnkWSziIh7WpGf06muH34.OhjVSJSrj7Rc95mxj-mWQJNtsr4BLCePhS_MSHKlNNQ
      pragma:
      - no-cache
      request-id:
      - 932c2c49-458a-4ea1-8726-a19bf0c34e5e
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: GET
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications?$filter=identifierUris%2Fany%28s%3As%20eq%20%27http%3A%2F%2Fcli_test_sp_with_kv_existing_cert0000012%27%29&api-version=1.6
  response:
    body:
      string: '{"odata.metadata":"https://graph.windows.net/00000000-0000-0000-0000-000000000000/$metadata#directoryObjects","value":[{"odata.type":"Microsoft.DirectoryServices.Application","objectType":"Application","objectId":"61f32f56-6eb1-49bd-b422-d191fd73e5e8","deletionTimestamp":null,"acceptMappedClaims":null,"addIns":[],"appId":"4187c543-11fd-4501-9453-3834e625f72f","applicationTemplateId":null,"appRoles":[],"availableToOtherTenants":false,"displayName":"cli_test_sp_with_kv_existing_cert0000012","errorUrl":null,"groupMembershipClaims":null,"homepage":"https://cli_test_sp_with_kv_existing_cert0000012","identifierUris":["http://cli_test_sp_with_kv_existing_cert0000012"],"informationalUrls":{"termsOfService":null,"support":null,"privacy":null,"marketing":null},"isDeviceOnlyAuthSupported":null,"keyCredentials":[{"customKeyIdentifier":"948F668024A967F24C5F9222AA4FE088BBC4DCCB","endDate":"2021-03-04T14:57:20Z","keyId":"944a4310-b4de-47bd-a91c-1f11ec653312","startDate":"2020-09-04T14:57:39.26119Z","type":"AsymmetricX509Cert","usage":"Verify","value":null}],"knownClientApplications":[],"logoutUrl":null,"logo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/logo","logoUrl":null,"mainLogo@odata.mediaEditLink":"directoryObjects/61f32f56-6eb1-49bd-b422-d191fd73e5e8/Microsoft.DirectoryServices.Application/mainLogo","oauth2AllowIdTokenImplicitFlow":true,"oauth2AllowImplicitFlow":false,"oauth2AllowUrlPathMatching":false,"oauth2Permissions":[{"adminConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on behalf
        of the signed-in user.","adminConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","id":"02562ffe-65cb-4bfa-9abe-ac2fad6f1e2e","isEnabled":true,"type":"User","userConsentDescription":"Allow
        the application to access cli_test_sp_with_kv_existing_cert0000012 on your
        behalf.","userConsentDisplayName":"Access cli_test_sp_with_kv_existing_cert0000012","value":"user_impersonation"}],"oauth2RequirePostResponse":false,"optionalClaims":null,"orgRestrictions":[],"parentalControlSettings":{"countriesBlockedForMinors":[],"legalAgeGroupRule":"Allow"},"passwordCredentials":[],"publicClient":null,"publisherDomain":"AzureSDKTeam.onmicrosoft.com","recordConsentConditions":null,"replyUrls":[],"requiredResourceAccess":[],"samlMetadataUrl":null,"signInAudience":"AzureADMyOrg","tokenEncryptionKeyId":null}]}'
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      content-length:
      - '2687'
      content-type:
      - application/json; odata=minimalmetadata; streaming=true; charset=utf-8
      dataserviceversion:
      - 3.0;
      date:
      - Fri, 04 Sep 2020 14:57:49 GMT
      duration:
      - '4270949'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - m9WUaBuJWWN8jTTxvaqUkzVAeQ7QyDcmFQANzJzN5CM=
      ocp-aad-session-key:
      - 4ObvCrbhNhSC2hWMs_K1T41mYkbOC8hYXJIItv9pP8IlMuZNp7O--tkj1cGs7uI7ThMN2KKol3PaiOCo8AlKahG80yYN0B-70wc15hF4Ig-N1dgeWQS7zUUFlg93J3eNmQ9ODdZkj8eP9Xb2Q-Q3uekru6n_kuxDOtUJZbQ_3T8.TVjCEJqVjd0l0dHZsCvFsg_ymLyl5MX1wNasWjRfrrQ
      pragma:
      - no-cache
      request-id:
      - 3696da16-7370-4dff-a986-b6be699f639d
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '2'
      x-powered-by:
      - ASP.NET
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - ad app delete
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --id
      User-Agent:
      - python/3.6.6 (Windows-10-10.0.19041-SP0) msrest/0.6.18 msrest_azure/0.6.3
        azure-graphrbac/0.60.0 Azure-SDK-For-Python AZURECLI/2.11.1 (MSI)
      accept-language:
      - en-US
    method: DELETE
    uri: https://graph.windows.net/00000000-0000-0000-0000-000000000000/applications/61f32f56-6eb1-49bd-b422-d191fd73e5e8?api-version=1.6
  response:
    body:
      string: ''
    headers:
      access-control-allow-origin:
      - '*'
      cache-control:
      - no-cache
      date:
      - Fri, 04 Sep 2020 14:57:50 GMT
      duration:
      - '3983470'
      expires:
      - '-1'
      ocp-aad-diagnostics-server-name:
      - ex5w/Lp7hiImECO0knspw6TymGMTRh4Rd+JV5D8XntE=
      ocp-aad-session-key:
      - PT_adKFzFCZwSXPBH9kuOygxlBWKrf-6QonFo79d67p5-dNnEvHaGlKGTRTZeuLEENNP8T-iy1zWe9SjORhpKA6QJ1lEIU5pwGZbxXHcH-vX5hYkVwkKIaB4-98MTTviGdBo1iIKuAxcjQZLxT5GxURAkoCFnl1LGecivy9nono.du4q3BYUE6Hn5dsPVeQsq4USfqe5B0kwnqmmmFSzH8w
      pragma:
      - no-cache
      request-id:
      - 89de9079-e604-454d-a2e6-ac7da300d1e5
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-aspnet-version:
      - 4.0.30319
      x-ms-dirapi-data-contract-version:
      - '1.6'
      x-ms-resource-unit:
      - '1'
      x-powered-by:
      - ASP.NET
    status:
      code: 204
      message: No Content
version: 1
